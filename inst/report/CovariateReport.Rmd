---
title: "GSM Covariate Report"
subtitle: "Generated with the Good Statistical Monitoring {gsm} package"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: scroll
    css: covariate_styles.css
params:
  lSnapshot: NA
  lCovariateTables: NA
  lCovariateCharts: NA
---

```{r setup, include=FALSE}
library(flexdashboard)
library(gsm)
library(DT)
library(gt)
library(dplyr)
library(plotly)
library(glue)
library(htmltools)
devtools::load_all()
```

<style>
.navbar-inverse .navbar-nav>li>a {
  text-overflow: ellipsis;
  max-width: 200px;
  white-space: nowrap;
  overflow: clip;
}
</style>

```{r}

create_sidebar <- function(study, date, total){
  # Study
  print(h4(strong("Study:")))
  cat(study)
  
  # Snapshot
  print(h4(strong("Snapshot:")))
  cat(date)
  
  # # Total Patients
  print(h4(strong("Total Patients:")))
  cat(total)
}

```


```{r results='asis'}
purrr::map(names(params$lCovariateTables), 
  ~ MakeCovariateDashboard(
  lSnapshot = params$lSnapshot, 
  lCovariateTables = params$lCovariateTables, 
  lCovariateCharts = params$lCovariateCharts,
  strKRI = .x)
)
```

```{r, echo = FALSE}
covariate_dropdown <- system.file('utils-0.0.1', 'covariateDropDown.js', package = "gsm")
```


```{js, file={covariate_dropdown}, echo=FALSE}
```

