meta:
  File: 1_ingest.yaml
  description: Data Mappings to prepare for metric calculations
spec:
  Source_STUDY:
    protocol_number:
      required: true
      type: character
      #target_col: studyid
    nickname:
      required: true
      type: character
    protocol_title:
      required: true
      type: character
    status:
      required: true
      type: character
    num_plan_site:
      required: true
      type: numeric
    num_plan_subj:
      required: true
      type: numeric
  Source_SITE:
    protocol:
      required: true
      type: character
      #target_col: studyid
    pi_number:
      required: true
      type: character
      #target_col: invid
    pi_first_name:
      required: true
      type: character
    pi_last_name:
      required: true
      type: character
    site_status:
      required: true
      type: character
    city:
      required: true
      type: character
    state:
      required: true
      type: character
    country:
      required: true
      type: character
  Source_SUBJ:
    studyid:
      required: true
      type: character
    invid:
      required: true
      type: character
    country:
      required: true
      type: character
    subjid:
      required: true
      type: character
    subject_nsv:
      required: true
      type: character
    enrollyn:
      required: true
      type: character
    timeonstudy:
      required: true
      type: numeric
  Source_AE:
    subjid:
      required: true
      type: character
    aeser:
      required: true
      type: character
  Source_PD:
    subjectenrollmentnumber:
      required: true
      type: character
      target_col: subjid
    deemedimportant:
      required: true
      type: character
  Source_LB:
    subjid:
      required: true
      type: character
    toxgrg_nsv:
      required: true
      type: character
  Source_STUDCOMP:
    subjid:
      required: true
      type: character
    compyn:
      required: true
      type: character
  Source_SDRGCOMP:
    subjid:
      required: true
      type: character
    sdrgyn:
      required: true
      type: character
    phase:
      required: true
      type: character
  Source_QUERY:
    subjectname:
      required: true
      type: character
      target_col: subject_nsv
    querystatus:
      required: true
      type: character
    queryage:
      required: true
      type: numeric
  Source_DATAENT:
    subjectname:
      required: true
      type: character
      target_col: subject_nsv 
    data_entry_lag:
      required: true
      type: numeric
  Source_DATACHG:
    subjectname:
      required: true
      type: character
      target_col: subject_nsv
    n_changes:
      required: true
      type: numeric
  Source_ENROLL:
    studyid:
      required: true
      type: character
    invid:
      required: true
      type: character
    country:
      required: true
      type: character
    subjectid:
      required: yes
      type: character
    enrollyn:
      required: true
      type: character
steps:
  - output: lRaw
    name: Ingest
    params:
      lSourceData: lData
      lSpec: lSpec

