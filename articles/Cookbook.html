<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cookbook • gsm</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Cookbook">
<meta property="og:description" content="gsm">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gsm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.7.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Cookbook.html">Cookbook</a>
    </li>
    <li>
      <a href="../articles/DataAnalysis.html">Step-by-Step Analysis Workflow</a>
    </li>
    <li>
      <a href="../articles/DataPipeline.html">Data Pipeline</a>
    </li>
    <li>
      <a href="../articles/ContributorGuidelines.html">Contributor Guidelines</a>
    </li>
    <li>
      <a href="../articles/KRI%20Method.html">KRI Method</a>
    </li>
    <li>
      <a href="../articles/Qualification.html">Qualification Report for the {gsm} R Package</a>
    </li>
    <li>
      <a href="../articles/QualificationWorkflow.html">Qualification Workflow</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Gilead-BioStats/gsm/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Cookbook</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Gilead-BioStats/gsm/blob/HEAD/vignettes/Cookbook.Rmd" class="external-link"><code>vignettes/Cookbook.Rmd</code></a></small>
      <div class="hidden name"><code>Cookbook.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette contains a series of examples showing how to run
analysis workflows for the Good Statistical Monitoring
<a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a> package using sample data from
<code>{clindata}</code>.</p>
<p><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a> leverages Key Risk Indicators (KRIs) and
thresholds to conduct study-level and site-level Risk Based Monitoring
for clinical trials.</p>
<p>For more information on the <a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a> package see the <a href="https://silver-potato-cfe8c2fb.pages.github.io/" class="external-link">package
homepage</a>. The <a href="https://github.com/Gilead-BioStats/gsm/wiki/Data-Pipeline-Vignette" class="external-link">Data
Pipeline Vignette</a> provides additional technical details including
data specifications and handling of metadata. The <a href="https://github.com/Gilead-BioStats/gsm/wiki/Data-Analysis-Vignette" class="external-link">Data
Analysis Vignette</a> provides detailed information about the nested
functions that support the analysis workflows.</p>
<div class="section level3">
<h3 id="setup-and-installation">Setup and Installation<a class="anchor" aria-label="anchor" href="#setup-and-installation"></a>
</h3>
<div class="section level4">
<h4 id="install-gsm-clindata-and-safetydata">Install <code>{gsm}</code>, <code>{clindata}</code>, and
<code>{safetyData}</code><a class="anchor" aria-label="anchor" href="#install-gsm-clindata-and-safetydata"></a>
</h4>
<p>Run the following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Install devtools</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'devtools'</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Install and load sample raw data</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/clindata"</span>, ref <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">clindata</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Install and load sample CDISC-compliant SDTM and ADaM data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'safetyData'</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">safetyData</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Install and load gsm</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/gsm"</span>, ref <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a></span><span class="op">)</span></span></code></pre></div>
<p>To use the most recent development version from GitHub, run:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/gsm"</span>, ref <span class="op">=</span> <span class="st">"dev"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="example-1---running-a-single-assessment-on-standard-data">Example 1 - Running a Single Assessment on Standard Data<a class="anchor" aria-label="anchor" href="#example-1---running-a-single-assessment-on-standard-data"></a>
</h3>
<p>All assessments can be run as standalone workflow that creates useful
data summaries and visualizations. <a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a> is configured to
accept rawplus data by default, and that data standard is used here.</p>
<p>Running a single assessment is a 2-step process. We will use the
Adverse Event (AE) workflow as an example:</p>
<ol style="list-style-type: decimal">
<li>Map domain-level data to the input data standard for the selected
assessment (e.g., <code>dfInput &lt;- AE_Map_Raw()</code>)</li>
<li>Run the assessment using an appropriate statistical method (e.g.,
<code>ae_assess &lt;- AE_Assess(dfInput, strMethod = "NormalApprox)</code>)</li>
</ol>
<p>Putting these steps together looks like this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">clindata</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Map domain-level data to the input data standard for the selected assessment.</span></span>
<span><span class="co">## In this case, we are making dfInput from Raw+ clinical data</span></span>
<span><span class="va">dfInput</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/AE_Map_Raw.html">AE_Map_Raw</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Run the assessment with the appropriate statistical model.</span></span>
<span><span class="co">##For AE, the choices are 'NormalApprox' or 'Poisson' or 'Identity'</span></span>
<span><span class="va">ae_assessment_NormalApprox</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/AE_Assess.html">AE_Assess</a></span><span class="op">(</span><span class="va">dfInput</span><span class="op">)</span></span>
<span><span class="va">ae_assessment_poisson</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/AE_Assess.html">AE_Assess</a></span><span class="op">(</span><span class="va">dfInput</span>, strMethod <span class="op">=</span> <span class="st">"Poisson"</span><span class="op">)</span></span></code></pre></div>
<p>Each assessment has representative examples in the help files. The
example above can be reviewed by entering <code><a href="../reference/AE_Assess.html">?AE_Assess</a></code> into
the console.</p>
</div>
<div class="section level3">
<h3 id="example-2---running-a-single-assessment-step-by-step-using-standard-data">Example 2 - Running a Single Assessment Step-by-Step Using Standard
Data<a class="anchor" aria-label="anchor" href="#example-2---running-a-single-assessment-step-by-step-using-standard-data"></a>
</h3>
<p>Let’s look at an illustrative example of everything that happens
behind the scenes when running an individual <code>Assess()</code>
function. It may be helpful to reference this example alongside the <a href="https://silver-potato-cfe8c2fb.pages.github.io/articles/DataAnalysis.html" class="external-link">Data
Analysis Vignette</a>, which goes into significantly more detail about
each nested function involved in this workflow. The image below is a
high-level summary:</p>
<p><img src="data-analysis.PNG"></p>
<p>As in Example 1, we will use the AE workflow for this example.</p>
<p>Start by creating <code>dfInput</code> using sample rawplus data from
<code>{clindata}</code>. Note that <code><a href="../reference/AE_Map_Raw.html">AE_Map_Raw()</a></code> requires
two specific datasets from <code>{clindata}</code>, which include a
subject-level demographics/exposure dataset (<code>dfSUBJ</code>) and a
domain-level dataset (<code>dfAE</code>) that records every adverse
event per subject.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfInput</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/AE_Map_Raw.html">AE_Map_Raw</a></span><span class="op">(</span></span>
<span>  dfs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    dfAE <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/clindata/man/rawplus_ae.html" class="external-link">rawplus_ae</a></span>,</span>
<span>    dfSUBJ <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/clindata/man/rawplus_dm.html" class="external-link">rawplus_dm</a></span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The second step is to transform <code>dfInput</code> into site-level
summary data, which is needed to derive the KRI. Two
<code>Transform()</code> functions are available,
<code><a href="../reference/Transform_Rate.html">Transform_Rate()</a></code> and <code><a href="../reference/Transform_Count.html">Transform_Count()</a></code>, and
<code><a href="../reference/Transform_Rate.html">Transform_Rate()</a></code> is the function that is used with the AE
assessment. Note that <code>strNumeratorCol</code> is a required numeric
column, and <code>strDenominatorCol</code> is an optional numeric
column.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfTransformed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Transform_Rate.html">Transform_Rate</a></span><span class="op">(</span></span>
<span>  <span class="va">dfInput</span>,</span>
<span>  strNumeratorCol <span class="op">=</span> <span class="st">"Count"</span>,</span>
<span>  strDenominatorCol <span class="op">=</span> <span class="st">"Exposure"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>The third step is to analyze the transformed data. Certain
assessments support multiple statistical models/<code>Analyze()</code>
functions, so the user needs to specify certain parameters for the
intended analysis to run. We use the normal approximation method in this
example (the default method for all standard KRIs).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfAnalyzed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Analyze_NormalApprox.html">Analyze_NormalApprox</a></span><span class="op">(</span><span class="va">dfTransformed</span><span class="op">)</span></span></code></pre></div>
<p>After analyzing the transformed data, we will flag sites based on at
least one statistical threshold. Similar to the previous step, multiple
flag functions exist to support the assessment functions. The
<code><a href="../reference/Flag_NormalApprox.html">Flag_NormalApprox()</a></code> function is one of several options for
the AE assessment, and has default thresholds of
<code>c(-3, -2, 2, 3)</code>.</p>
<ul>
<li>If a site falls outside of the (-2, 2) range, it is considered to be
“Amber” and will be assigned a value of -1 or 1.</li>
<li>If a site falls outside of the (-3, 3) range, it is considered “Red”
and will be assigned a value of -2 or 2.</li>
</ul>
<p>Both are considered to be outliers, but “Red” sites are more extreme
outliers.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfFlagged</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Flag_NormalApprox.html">Flag_NormalApprox</a></span><span class="op">(</span><span class="va">dfAnalyzed</span>, vThreshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Next, we will summarize the flagged data. The
<code><a href="../reference/Summarize.html">Summarize()</a></code> function will only keep the most relevant
columns from <code>dfFlagged</code> for a given assessment.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfSummary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Summarize.html">Summarize</a></span><span class="op">(</span><span class="va">dfFlagged</span><span class="op">)</span></span></code></pre></div>
<p>Finally, we will create a chart that helps to identify/visualize
flagged sites. When using the normal approximation method, we can create
upper and lower bounds using the
<code><a href="../reference/Analyze_NormalApprox_PredictBounds.html">Analyze_NormalApprox_PredictBounds()</a></code> function.</p>
<p>Using the bounds we create and the flagged data frame, we can create
a scatter plot. Any sites that are plotted outside of the bounds will be
yellow or red. Yellow points indicate “At Risk” sites, and red points
indicate “Flagged” sites.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfBounds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Analyze_NormalApprox_PredictBounds.html">Analyze_NormalApprox_PredictBounds</a></span><span class="op">(</span><span class="va">dfTransformed</span>, vThreshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">chart</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Visualize_Scatter.html">Visualize_Scatter</a></span><span class="op">(</span><span class="va">dfFlagged</span>, <span class="va">dfBounds</span><span class="op">)</span></span></code></pre></div>
<p>Reviewing this step-by-step example will allow the user to better
understand each intermediate function that runs within an
<code>Assess()</code> function during KRI derivation. <a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a>
allows the user to generate the same results in Example 1 and Example 2,
with additional error-checking and metadata, and interactive data
visualizations. For reference, the code from Example 1 is repeated
below:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfInput</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/AE_Map_Raw.html">AE_Map_Raw</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ae_assessment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/AE_Assess.html">AE_Assess</a></span><span class="op">(</span><span class="va">dfInput</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-3---running-multiple-assessments-using-standard-data">Example 3 - Running Multiple Assessments Using Standard Data<a class="anchor" aria-label="anchor" href="#example-3---running-multiple-assessments-using-standard-data"></a>
</h3>
<p>Let’s take a look at running multiple assessments at once, instead of
focusing solely on AEs.</p>
<p>Running multiple assessments in <a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a> is made possible
by the <code><a href="../reference/Study_Assess.html">Study_Assess()</a></code> function. By default,
<code><a href="../reference/Study_Assess.html">Study_Assess()</a></code> uses sample rawplus data from
<code>{clindata}</code> that is hard-coded to the <code>lData</code>
parameter. Users can also provide their own rawplus input data to the
<code>lData</code> parameter.</p>
<div class="section level4">
<h4 id="using-sample-data-from-clindata">Using Sample Data from <code>{clindata}</code><a class="anchor" aria-label="anchor" href="#using-sample-data-from-clindata"></a>
</h4>
<p>To run multiple assessments using the sample rawplus data from
<code>{clindata}</code>, the user can run the following:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">clindata</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">safetyData</span><span class="op">)</span></span>
<span></span>
<span><span class="va">multiple_assessments</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Study_Assess.html">Study_Assess</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="using-user-provided-raw-data">Using User-Provided Raw+ Data<a class="anchor" aria-label="anchor" href="#using-user-provided-raw-data"></a>
</h4>
<p>User-provided rawplus data will likely come from rawplus case report
data. The example below illustrates that a user can pass a named list of
rawplus data to the <code>lData</code> parameter.</p>
<p>It is important to note that <code>lData</code> expects a
<em>named</em> list. To see a list of default data frame names, run
<code>gsm::Read_Mapping(strDomain = "rawplus")</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">clindata</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Include AE data where aetoxgr (Standard Toxicity Grade) is not "MILD"</span></span>
<span><span class="va">dfAE</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/clindata/man/rawplus_ae.html" class="external-link">rawplus_ae</a></span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">aetoxgr</span> <span class="op">!=</span> <span class="st">"MILD"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">## Specify Raw+ data domains</span></span>
<span><span class="va">dfSUBJ</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/clindata/man/rawplus_dm.html" class="external-link">rawplus_dm</a></span></span>
<span><span class="va">dfIE</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va">rawplus_ie</span></span>
<span><span class="va">dfPD</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/clindata/man/ctms_protdev.html" class="external-link">ctms_protdev</a></span></span>
<span><span class="va">dfCONSENT</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va">rawplus_consent</span></span>
<span></span>
<span><span class="co">## Create named list of assessment data</span></span>
<span><span class="va">assessment_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  dfAE <span class="op">=</span> <span class="va">dfAE</span>,</span>
<span>  dfIE <span class="op">=</span> <span class="va">dfIE</span>,</span>
<span>  dfPD <span class="op">=</span> <span class="va">dfPD</span>,</span>
<span>  dfCONSENT <span class="op">=</span> <span class="va">dfCONSENT</span>,</span>
<span>  dfSUBJ <span class="op">=</span> <span class="va">dfSUBJ</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Run multiple assessments</span></span>
<span><span class="va">multiple_assessments</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Study_Assess.html">Study_Assess</a></span><span class="op">(</span>lData <span class="op">=</span> <span class="va">assessment_data</span><span class="op">)</span></span></code></pre></div>
<p>Note that <code><a href="../reference/Study_Assess.html">Study_Assess()</a></code> provides verbose console output
alerting the user to success, warnings, or errors with the workflow.</p>
</div>
</div>
<div class="section level3">
<h3 id="example-4---creating-a-snapshot">Example 4 - Creating a Snapshot<a class="anchor" aria-label="anchor" href="#example-4---creating-a-snapshot"></a>
</h3>
<p>The <code><a href="../reference/Make_Snapshot.html">Make_Snapshot()</a></code> function is a wrapper around
<code><a href="../reference/Study_Assess.html">Study_Assess()</a></code>, but differs in that it provides aggregated
metadata to supplement the analyses run via <code><a href="../reference/Study_Assess.html">Study_Assess()</a></code>.
This includes study and site-level CTMS data, as well as workflow and
configuration metadata, that is used in downstream applications such as
reporting, Shiny apps, and more.</p>
<p>To create a snapshot using the default inputs from <a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a>
and <code>{clindata}</code>, simply run the following:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a></span><span class="op">)</span></span>
<span><span class="va">snapshot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Make_Snapshot.html">Make_Snapshot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The <code>snapshot</code> object contains three elements: -
<code>lSnapshotDate</code>: The date that the snapshot was created. Can
be provided as an argument to <code>strAnalysisDate</code>, or if no
date is provided, the current date is used. - <code>lSnapshot</code>:
List of aggregated analysis results and metadata. -
<code>lStudyAssessResults</code>: Output of
<code><a href="../reference/Study_Assess.html">Study_Assess()</a></code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="reporting">Reporting<a class="anchor" aria-label="anchor" href="#reporting"></a>
</h2>
<div class="section level3">
<h3 id="example-5---creating-an-assessment-overview-report-for-multiple-assessments">Example 5 - Creating an Assessment Overview Report for Multiple
Assessments<a class="anchor" aria-label="anchor" href="#example-5---creating-an-assessment-overview-report-for-multiple-assessments"></a>
</h3>
<div class="section level4">
<h4 id="standard-report-via-study_assess">Standard Report via <code>Study_Assess()</code><a class="anchor" aria-label="anchor" href="#standard-report-via-study_assess"></a>
</h4>
<p>The <code><a href="../reference/Study_Report.html">Study_Report()</a></code> function creates the
<strong>Assessment Overview Report</strong>, which is an HTML document
that contains tables, visualizations, and error logging for all
assessments run in the <code><a href="../reference/Study_Assess.html">Study_Assess()</a></code> workflow.</p>
<p>Let’s create a report using sample data from
<code>{clindata}</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">clindata</span><span class="op">)</span></span>
<span></span>
<span><span class="va">multiple_assessments</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Study_Assess.html">Study_Assess</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/Study_Report.html">Study_Report</a></span><span class="op">(</span>lAssessments <span class="op">=</span> <span class="va">multiple_assessments</span><span class="op">)</span></span></code></pre></div>
<p>The report will render and be saved to your current working
directory. If you would like the report saved in a different location,
you can set an output directory using the <code>strOutpath</code>
argument in the <code><a href="../reference/Study_Report.html">Study_Report()</a></code> function.</p>
</div>
<div class="section level4">
<h4 id="enhanced-report-via-make_snapshot">Enhanced Report via <code>Make_Snapshot()</code><a class="anchor" aria-label="anchor" href="#enhanced-report-via-make_snapshot"></a>
</h4>
<p>The <code><a href="../reference/Study_Report.html">Study_Report()</a></code> function also takes on optional
arguments (<code>dfSite</code> and <code>dfStudy</code>) that are used
to provide site and study-level reporting. This includes study-level
CTMS data displayed in a summary table at the top of the report, and an
enhanced <strong>Study Overview</strong> table.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">clindata</span><span class="op">)</span></span>
<span></span>
<span><span class="va">snapshot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Make_Snapshot.html">Make_Snapshot</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/Study_Report.html">Study_Report</a></span><span class="op">(</span></span>
<span>  lAssessments <span class="op">=</span> <span class="va">snapshot</span><span class="op">$</span><span class="va">lStudyAssessResults</span>,</span>
<span>  dfSite <span class="op">=</span> <span class="va">snapshot</span><span class="op">$</span><span class="va">lSnapshot</span><span class="op">$</span><span class="va">status_site</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="example-6---viewing-the-error-checking-report">Example 6 - Viewing the Error Checking Report<a class="anchor" aria-label="anchor" href="#example-6---viewing-the-error-checking-report"></a>
</h3>
<p>The <strong>Assessment Overview Report</strong> contains a Data Check
Summary table in the appendix, which can be helpful for troubleshooting
issues with input data provided to <code>lData</code> in
<code><a href="../reference/Study_Assess.html">Study_Assess()</a></code>.</p>
<p>To view the report directly as an object in your IDE, run:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">clindata</span><span class="op">)</span></span>
<span></span>
<span><span class="va">multiple_assessments</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Study_Assess.html">Study_Assess</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/Study_AssessmentReport.html">Study_AssessmentReport</a></span><span class="op">(</span>lAssessments <span class="op">=</span> <span class="va">multiple_assessments</span>, bViewReport <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="visualizations">Visualizations<a class="anchor" aria-label="anchor" href="#visualizations"></a>
</h2>
<p>By default, all <code>Assess()</code> functions return a
visualization whether run individually or within the
<code><a href="../reference/Study_Assess.html">Study_Assess()</a></code> workflow. For example, the scatter plot for
the AE assessment can be viewed by calling
<code>AE_Assess(dfInput)$lCharts$scatter</code>.</p>
<div class="section level3">
<h3 id="example-7---creating-a-scatter-plot">Example 7 - Creating a Scatter Plot<a class="anchor" aria-label="anchor" href="#example-7---creating-a-scatter-plot"></a>
</h3>
<p><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a> creates static and interactive charts using
<a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> and a custom JavaScript charting library
<code>{rbm-viz}</code>.</p>
<p>Customizing interactive JavaScript widgets will be covered in a
separate vignette.</p>
<p>Below is an example of creating a static <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>
scatter plot that uses the default normal approximation method for
<code><a href="../reference/AE_Assess.html">AE_Assess()</a></code> and rawplus data from
<code>{clindata}</code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">clindata</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Map domain-level data to the input data standard for the selected assessment</span></span>
<span><span class="va">dfInput</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/AE_Map_Raw.html">AE_Map_Raw</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Run the assessment</span></span>
<span><span class="va">ae_assessment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/AE_Assess.html">AE_Assess</a></span><span class="op">(</span><span class="va">dfInput</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Create threshold boundaries </span></span>
<span><span class="va">dfBounds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Analyze_NormalApprox_PredictBounds.html">Analyze_NormalApprox_PredictBounds</a></span><span class="op">(</span></span>
<span>  dfTransformed <span class="op">=</span> <span class="va">ae_assessment</span><span class="op">$</span><span class="va">lData</span><span class="op">$</span><span class="va">dfTransformed</span>,</span>
<span>  vThreshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">## Create the visualization</span></span>
<span><span class="fu"><a href="../reference/Visualize_Scatter.html">Visualize_Scatter</a></span><span class="op">(</span></span>
<span>  dfSummary <span class="op">=</span> <span class="va">ae_assessment</span><span class="op">$</span><span class="va">lData</span><span class="op">$</span><span class="va">dfFlagged</span>, </span>
<span>  dfBounds <span class="op">=</span> <span class="va">dfBounds</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="custom-mappingyaml-specifications">Custom Mapping/YAML Specifications<a class="anchor" aria-label="anchor" href="#custom-mappingyaml-specifications"></a>
</h2>
<p>As mentioned in Appendix 1 of the <a href="https://github.com/Gilead-BioStats/gsm/wiki/Data-Pipeline-Vignette##Appendix-1-Metadata-Technical-Specifications" class="external-link">Data
Pipeline Vignette</a>, <code><a href="../reference/Study_Assess.html">Study_Assess()</a></code> triggers a workflow
that uses pre-defined YAML specifications that organize all of the
required metadata for a given assessment or set of assessments.</p>
<p>In some cases, the user might want to configure their own mappings,
which can be done by providing custom YAML mappings for one or more
assessments.</p>
<p>Let’s take a look at a few examples of editing YAML files for a
custom workflow below.</p>
<div class="section level3">
<h3 id="example-8---adding-a-filtering-step">Example 8 - Adding a Filtering Step<a class="anchor" aria-label="anchor" href="#example-8---adding-a-filtering-step"></a>
</h3>
<p>There are filter steps in the default specification for the AE
Assessment, but we want to add an additional filter. Let’s add a step
that filters the <code>dfAE</code> data frame so all values of
<code>aetoxgr == "MODERATE"</code> (i.e., we select for AEs with a
moderate toxicity grade):</p>
<p>The default mappings for the AE Assessment are saved under KRI 0001,
i.e., <code>kri0001.yaml</code>:</p>
<pre><code><span><span class="va">steps</span><span class="op">:</span></span>
<span>  <span class="op">-</span> <span class="va">name</span><span class="op">:</span> <span class="va">FilterDomain</span></span>
<span>    <span class="va">inputs</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>    <span class="va">output</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>    <span class="va">params</span><span class="op">:</span></span>
<span>      <span class="va">strDomain</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>      <span class="va">strColParam</span><span class="op">:</span> <span class="va">strTreatmentEmergentCol</span></span>
<span>      <span class="va">strValParam</span><span class="op">:</span> <span class="va">strTreatmentEmergentVal</span></span>
<span>  <span class="op">-</span> <span class="va">name</span><span class="op">:</span> <span class="va">FilterDomain</span></span>
<span>    <span class="va">inputs</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>    <span class="va">output</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>    <span class="va">params</span><span class="op">:</span></span>
<span>      <span class="va">strDomain</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>      <span class="va">strColParam</span><span class="op">:</span> <span class="va">strSeriousCol</span></span>
<span>      <span class="va">strValParam</span><span class="op">:</span> <span class="va">strNonSeriousVal</span></span>
<span>  <span class="op">-</span> <span class="va">name</span><span class="op">:</span> <span class="va">AE_Map_Raw</span></span>
<span>    <span class="va">inputs</span><span class="op">:</span></span>
<span>      <span class="op">-</span> <span class="va">dfAE</span></span>
<span>      <span class="op">-</span> <span class="va">dfSUBJ</span></span>
<span>    <span class="va">output</span><span class="op">:</span> <span class="va">dfInput</span></span>
<span>  <span class="op">-</span> <span class="va">name</span><span class="op">:</span> <span class="va">AE_Assess</span></span>
<span>    <span class="va">inputs</span><span class="op">:</span> <span class="va">dfInput</span></span>
<span>    <span class="va">output</span><span class="op">:</span> <span class="va">lResults</span></span>
<span>    <span class="va">params</span><span class="op">:</span></span>
<span>      <span class="va">strGroup</span><span class="op">:</span> <span class="st">"Site"</span></span>
<span>      <span class="va">vThreshold</span><span class="op">:</span> <span class="va">null</span></span>
<span>      <span class="va">strMethod</span><span class="op">:</span> <span class="st">"Poisson"</span></span></code></pre>
<p>First, we want to add an additional <code><a href="../reference/FilterDomain.html">FilterDomain()</a></code> step
to the workflow specification to select only moderate AEs. Because
<code>dfAE</code> needs to be filtered before it is used in
<code><a href="../reference/AE_Map_Raw.html">AE_Map_Raw()</a></code>, the filter steps need to be placed first in
the workflow.</p>
<p>Let’s name the custom YAML file
<code>ae_assessment_moderate.yaml</code>. It reads as follows:</p>
<pre><code><span><span class="va">steps</span><span class="op">:</span></span>
<span>  <span class="op">-</span> <span class="va">name</span><span class="op">:</span> <span class="va">FilterDomain</span></span>
<span>    <span class="va">inputs</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>    <span class="va">output</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>    <span class="va">params</span><span class="op">:</span></span>
<span>      <span class="va">strDomain</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>      <span class="va">strColParam</span><span class="op">:</span> <span class="va">strTreatmentEmergentCol</span></span>
<span>      <span class="va">strValParam</span><span class="op">:</span> <span class="va">strTreatmentEmergentVal</span></span>
<span>  <span class="op">-</span> <span class="va">name</span><span class="op">:</span> <span class="va">FilterDomain</span></span>
<span>    <span class="va">inputs</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>    <span class="va">output</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>    <span class="va">params</span><span class="op">:</span></span>
<span>      <span class="va">strDomain</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>      <span class="va">strColParam</span><span class="op">:</span> <span class="va">strSeriousCol</span></span>
<span>      <span class="va">strValParam</span><span class="op">:</span> <span class="va">strNonSeriousVal</span></span>
<span>  <span class="op">-</span> <span class="va">name</span><span class="op">:</span> <span class="va">FilterDomain</span></span>
<span>    <span class="va">inputs</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>    <span class="va">output</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>    <span class="va">params</span><span class="op">:</span></span>
<span>      <span class="va">strDomain</span><span class="op">:</span> <span class="va">dfAE</span></span>
<span>      <span class="va">strColParam</span><span class="op">:</span> <span class="va">strModerateCol</span></span>
<span>      <span class="va">strValParam</span><span class="op">:</span> <span class="va">strModerateVal</span></span>
<span>  <span class="op">-</span> <span class="va">name</span><span class="op">:</span> <span class="va">AE_Map_Raw</span></span>
<span>    <span class="va">inputs</span><span class="op">:</span></span>
<span>      <span class="op">-</span> <span class="va">dfAE</span></span>
<span>      <span class="op">-</span> <span class="va">dfSUBJ</span></span>
<span>    <span class="va">output</span><span class="op">:</span> <span class="va">dfInput</span></span>
<span>  <span class="op">-</span> <span class="va">name</span><span class="op">:</span> <span class="va">AE_Assess</span></span>
<span>    <span class="va">inputs</span><span class="op">:</span> <span class="va">dfInput</span></span>
<span>    <span class="va">output</span><span class="op">:</span> <span class="va">lResults</span></span>
<span>    <span class="va">params</span><span class="op">:</span></span>
<span>      <span class="va">strGroup</span><span class="op">:</span> <span class="st">"Site"</span></span>
<span>      <span class="va">vThreshold</span><span class="op">:</span> <span class="va">null</span></span>
<span>      <span class="va">strMethod</span><span class="op">:</span> <span class="st">"Poisson"</span></span></code></pre>
<p>After setting up the custom YAML mapping, there are a few more steps
a user must take before executing <code><a href="../reference/Study_Assess.html">Study_Assess()</a></code>:</p>
<ol style="list-style-type: decimal">
<li>Read in the default workflow mapping from
<code><a href="../reference/MakeWorkflowList.html">gsm::MakeWorkflowList()</a></code>.</li>
<li>Overwrite <code>lAssessmentsCustom$kri0001</code> with the custom
YAML file (<code>ae_assessment_moderate.yaml</code>).</li>
<li>Add a name value to the custom assessment list.</li>
<li>Add a relative path to the custom assessment list, to show where the
custom YAML file is stored.</li>
<li>Read in the default Raw+ mappings from <code>{clindata}</code>.</li>
<li>Add the value to sort <code>strTypeCol</code> on.</li>
<li>Run the <code><a href="../reference/Study_Assess.html">Study_Assess()</a></code> workflow.</li>
</ol>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm" class="external-link">gsm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">clindata</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/vubiostat/r-yaml/" class="external-link">yaml</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## 1. Read in default workflow mapping</span></span>
<span><span class="va">lAssessmentsCustom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/MakeWorkflowList.html">MakeWorkflowList</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## 2. Apply custom AE assessment mapping</span></span>
<span><span class="va">lAssessmentsCustom</span><span class="op">$</span><span class="va">kri0001</span> <span class="op">&lt;-</span> <span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/read_yaml.html" class="external-link">read_yaml</a></span><span class="op">(</span><span class="st">"ae_assessment_moderate.yaml"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## 3. Add a name value, i.e., the variable you want to filter on</span></span>
<span><span class="va">lAssessmentsCustom</span><span class="op">$</span><span class="va">kri0001</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"aetoxgr"</span></span>
<span></span>
<span><span class="co">## 4. Add the location of the custom YAML file</span></span>
<span><span class="va">lAssessmentsCustom</span><span class="op">$</span><span class="va">kri0001</span><span class="op">$</span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## 5. Read in default data set mappings from `{clindata}`</span></span>
<span><span class="va">lMappingCustom</span> <span class="op">&lt;-</span> <span class="fu">gsm</span><span class="fu">::</span><span class="fu"><a href="../reference/Read_Mapping.html">Read_Mapping</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## 6. Add strTypeVal, i.e., the value for strTypeCol to filter on</span></span>
<span><span class="va">lMappingCustom</span><span class="op">$</span><span class="va">dfAE</span><span class="op">$</span><span class="va">strGradeCol</span> <span class="op">&lt;-</span> <span class="st">"MODERATE"</span></span>
<span></span>
<span><span class="co">## 7. Run the Study_Assess workflow</span></span>
<span><span class="va">customStudy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Study_Assess.html">Study_Assess</a></span><span class="op">(</span>lMapping <span class="op">=</span> <span class="va">lMappingCustom</span>, lAssessments <span class="op">=</span> <span class="va">lAssessmentsCustom</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by George Wu, Jeremy Wildfire, Matt Roumaya, Nathan Kosiba, Douglas Sanders, Spencer Childress, Li Ge, Zhongkai Wang, Colleen McLaughlin, Chelsea Dickens, Maya Gans.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
