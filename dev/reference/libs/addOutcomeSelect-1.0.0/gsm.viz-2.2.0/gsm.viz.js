"use strict";function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},"catch":function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function _construct(t,e,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var p=new(t.bind.apply(t,o))();return r&&_setPrototypeOf(p,r.prototype),p;}function _isNativeFunction(fn){try{return Function.toString.call(fn).indexOf("[native code]")!==-1;}catch(e){return typeof fn==="function";}}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get.bind();}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t["return"]&&(u=t["return"](),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+"";}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}var gsmViz=function(){var _marked=/*#__PURE__*/_regeneratorRuntime().mark(iterator_default);var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __hasOwnProp=Object.prototype.hasOwnProperty;var __export=function __export(target,all){for(var name in all)__defProp(target,name,{get:all[name],enumerable:true});};var __copyProps=function __copyProps(to2,from2,except,desc){if(from2&&_typeof(from2)==="object"||typeof from2==="function"){var _iterator=_createForOfIteratorHelper(__getOwnPropNames(from2)),_step;try{var _loop2=function _loop2(){var key=_step.value;if(!__hasOwnProp.call(to2,key)&&key!==except)__defProp(to2,key,{get:function get(){return from2[key];},enumerable:!(desc=__getOwnPropDesc(from2,key))||desc.enumerable});};for(_iterator.s();!(_step=_iterator.n()).done;){_loop2();}}catch(err){_iterator.e(err);}finally{_iterator.f();}}return to2;};var __toCommonJS=function __toCommonJS(mod){return __copyProps(__defProp({},"__esModule",{value:true}),mod);};// src/main.js
var main_exports={};__export(main_exports,{"default":function _default(){return main_default;}});// node_modules/chart.js/dist/chunks/helpers.segment.mjs
function noop(){}var uid=/* @__PURE__ */function(){var id2=0;return function(){return id2++;};}();function isNullOrUndef(value){return value===null||typeof value==="undefined";}function isArray(value){if(Array.isArray&&Array.isArray(value)){return true;}var type2=Object.prototype.toString.call(value);if(type2.slice(0,7)==="[object"&&type2.slice(-6)==="Array]"){return true;}return false;}function isObject(value){return value!==null&&Object.prototype.toString.call(value)==="[object Object]";}var isNumberFinite=function isNumberFinite(value){return(typeof value==="number"||value instanceof Number)&&isFinite(+value);};function finiteOrDefault(value,defaultValue){return isNumberFinite(value)?value:defaultValue;}function valueOrDefault(value,defaultValue){return typeof value==="undefined"?defaultValue:value;}var toPercentage=function toPercentage(value,dimension){return typeof value==="string"&&value.endsWith("%")?parseFloat(value)/100:value/dimension;};var toDimension=function toDimension(value,dimension){return typeof value==="string"&&value.endsWith("%")?parseFloat(value)/100*dimension:+value;};function callback(fn,args,thisArg){if(fn&&typeof fn.call==="function"){return fn.apply(thisArg,args);}}function each(loopable,fn,thisArg,reverse){var i,len,keys;if(isArray(loopable)){len=loopable.length;if(reverse){for(i=len-1;i>=0;i--){fn.call(thisArg,loopable[i],i);}}else{for(i=0;i<len;i++){fn.call(thisArg,loopable[i],i);}}}else if(isObject(loopable)){keys=Object.keys(loopable);len=keys.length;for(i=0;i<len;i++){fn.call(thisArg,loopable[keys[i]],keys[i]);}}}function _elementsEqual(a0,a1){var i,ilen,v0,v1;if(!a0||!a1||a0.length!==a1.length){return false;}for(i=0,ilen=a0.length;i<ilen;++i){v0=a0[i];v1=a1[i];if(v0.datasetIndex!==v1.datasetIndex||v0.index!==v1.index){return false;}}return true;}function clone$1(source){if(isArray(source)){return source.map(clone$1);}if(isObject(source)){var target=/* @__PURE__ */Object.create(null);var keys=Object.keys(source);var klen=keys.length;var k=0;for(;k<klen;++k){target[keys[k]]=clone$1(source[keys[k]]);}return target;}return source;}function isValidKey(key){return["__proto__","prototype","constructor"].indexOf(key)===-1;}function _merger(key,target,source,options){if(!isValidKey(key)){return;}var tval=target[key];var sval=source[key];if(isObject(tval)&&isObject(sval)){merge(tval,sval,options);}else{target[key]=clone$1(sval);}}function merge(target,source,options){var sources=isArray(source)?source:[source];var ilen=sources.length;if(!isObject(target)){return target;}options=options||{};var merger=options.merger||_merger;for(var i=0;i<ilen;++i){source=sources[i];if(!isObject(source)){continue;}var keys=Object.keys(source);for(var k=0,klen=keys.length;k<klen;++k){merger(keys[k],target,source,options);}}return target;}function mergeIf(target,source){return merge(target,source,{merger:_mergerIf});}function _mergerIf(key,target,source){if(!isValidKey(key)){return;}var tval=target[key];var sval=source[key];if(isObject(tval)&&isObject(sval)){mergeIf(tval,sval);}else if(!Object.prototype.hasOwnProperty.call(target,key)){target[key]=clone$1(sval);}}var keyResolvers={"":function _(v){return v;},x:function x(o){return o.x;},y:function y(o){return o.y;}};function resolveObjectKey(obj,key){var resolver=keyResolvers[key]||(keyResolvers[key]=_getKeyResolver(key));return resolver(obj);}function _getKeyResolver(key){var keys=_splitKey(key);return function(obj){var _iterator2=_createForOfIteratorHelper(keys),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var k=_step2.value;if(k===""){break;}obj=obj&&obj[k];}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return obj;};}function _splitKey(key){var parts=key.split(".");var keys=[];var tmp="";var _iterator3=_createForOfIteratorHelper(parts),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var part=_step3.value;tmp+=part;if(tmp.endsWith("\\")){tmp=tmp.slice(0,-1)+".";}else{keys.push(tmp);tmp="";}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return keys;}function _capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1);}var defined=function defined(value){return typeof value!=="undefined";};var isFunction=function isFunction(value){return typeof value==="function";};var setsEqual=function setsEqual(a,b){if(a.size!==b.size){return false;}var _iterator4=_createForOfIteratorHelper(a),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var item=_step4.value;if(!b.has(item)){return false;}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return true;};function _isClickEvent(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu";}var PI=Math.PI;var TAU=2*PI;var PITAU=TAU+PI;var INFINITY=Number.POSITIVE_INFINITY;var RAD_PER_DEG=PI/180;var HALF_PI=PI/2;var QUARTER_PI=PI/4;var TWO_THIRDS_PI=PI*2/3;var log10=Math.log10;var sign=Math.sign;function niceNum(range){var roundedRange=Math.round(range);range=almostEquals(range,roundedRange,range/1e3)?roundedRange:range;var niceRange=Math.pow(10,Math.floor(log10(range)));var fraction=range/niceRange;var niceFraction=fraction<=1?1:fraction<=2?2:fraction<=5?5:10;return niceFraction*niceRange;}function _factorize(value){var result=[];var sqrt=Math.sqrt(value);var i;for(i=1;i<sqrt;i++){if(value%i===0){result.push(i);result.push(value/i);}}if(sqrt===(sqrt|0)){result.push(sqrt);}result.sort(function(a,b){return a-b;}).pop();return result;}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n);}function almostEquals(x,y,epsilon){return Math.abs(x-y)<epsilon;}function almostWhole(x,epsilon){var rounded=Math.round(x);return rounded-epsilon<=x&&rounded+epsilon>=x;}function _setMinAndMaxByKey(array2,target,property){var i,ilen,value;for(i=0,ilen=array2.length;i<ilen;i++){value=array2[i][property];if(!isNaN(value)){target.min=Math.min(target.min,value);target.max=Math.max(target.max,value);}}}function toRadians(degrees2){return degrees2*(PI/180);}function toDegrees(radians){return radians*(180/PI);}function _decimalPlaces(x){if(!isNumberFinite(x)){return;}var e=1;var p=0;while(Math.round(x*e)/e!==x){e*=10;p++;}return p;}function getAngleFromPoint(centrePoint,anglePoint){var distanceFromXCenter=anglePoint.x-centrePoint.x;var distanceFromYCenter=anglePoint.y-centrePoint.y;var radialDistanceFromCenter=Math.sqrt(distanceFromXCenter*distanceFromXCenter+distanceFromYCenter*distanceFromYCenter);var angle=Math.atan2(distanceFromYCenter,distanceFromXCenter);if(angle<-0.5*PI){angle+=TAU;}return{angle:angle,distance:radialDistanceFromCenter};}function distanceBetweenPoints(pt1,pt2){return Math.sqrt(Math.pow(pt2.x-pt1.x,2)+Math.pow(pt2.y-pt1.y,2));}function _angleDiff(a,b){return(a-b+PITAU)%TAU-PI;}function _normalizeAngle(a){return(a%TAU+TAU)%TAU;}function _angleBetween(angle,start2,end,sameAngleIsFullCircle){var a=_normalizeAngle(angle);var s=_normalizeAngle(start2);var e=_normalizeAngle(end);var angleToStart=_normalizeAngle(s-a);var angleToEnd=_normalizeAngle(e-a);var startToAngle=_normalizeAngle(a-s);var endToAngle=_normalizeAngle(a-e);return a===s||a===e||sameAngleIsFullCircle&&s===e||angleToStart>angleToEnd&&startToAngle<endToAngle;}function _limitValue(value,min3,max3){return Math.max(min3,Math.min(max3,value));}function _int16Range(value){return _limitValue(value,-32768,32767);}function _isBetween(value,start2,end){var epsilon=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1e-6;return value>=Math.min(start2,end)-epsilon&&value<=Math.max(start2,end)+epsilon;}function _lookup(table,value,cmp){cmp=cmp||function(index3){return table[index3]<value;};var hi=table.length-1;var lo=0;var mid;while(hi-lo>1){mid=lo+hi>>1;if(cmp(mid)){lo=mid;}else{hi=mid;}}return{lo:lo,hi:hi};}var _lookupByKey=function _lookupByKey(table,key,value,last){return _lookup(table,value,last?function(index3){return table[index3][key]<=value;}:function(index3){return table[index3][key]<value;});};var _rlookupByKey=function _rlookupByKey(table,key,value){return _lookup(table,value,function(index3){return table[index3][key]>=value;});};function _filterBetween(values,min3,max3){var start2=0;var end=values.length;while(start2<end&&values[start2]<min3){start2++;}while(end>start2&&values[end-1]>max3){end--;}return start2>0||end<values.length?values.slice(start2,end):values;}var arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(array2,listener){if(array2._chartjs){array2._chartjs.listeners.push(listener);return;}Object.defineProperty(array2,"_chartjs",{configurable:true,enumerable:false,value:{listeners:[listener]}});arrayEvents.forEach(function(key){var method="_onData"+_capitalize(key);var base=array2[key];Object.defineProperty(array2,key,{configurable:true,enumerable:false,value:function value(){for(var _len=arguments.length,args=new Array(_len),_key2=0;_key2<_len;_key2++){args[_key2]=arguments[_key2];}var res=base.apply(this,args);array2._chartjs.listeners.forEach(function(object){if(typeof object[method]==="function"){object[method].apply(object,args);}});return res;}});});}function unlistenArrayEvents(array2,listener){var stub=array2._chartjs;if(!stub){return;}var listeners=stub.listeners;var index3=listeners.indexOf(listener);if(index3!==-1){listeners.splice(index3,1);}if(listeners.length>0){return;}arrayEvents.forEach(function(key){delete array2[key];});delete array2._chartjs;}function _arrayUnique(items){var set4=/* @__PURE__ */new Set();var i,ilen;for(i=0,ilen=items.length;i<ilen;++i){set4.add(items[i]);}if(set4.size===ilen){return items;}return Array.from(set4);}var requestAnimFrame=function(){if(typeof window==="undefined"){return function(callback2){return callback2();};}return window.requestAnimationFrame;}();function throttled(fn,thisArg,updateFn){var updateArgs=updateFn||function(args2){return Array.prototype.slice.call(args2);};var ticking=false;var args=[];return function(){for(var _len2=arguments.length,rest=new Array(_len2),_key3=0;_key3<_len2;_key3++){rest[_key3]=arguments[_key3];}args=updateArgs(rest);if(!ticking){ticking=true;requestAnimFrame.call(window,function(){ticking=false;fn.apply(thisArg,args);});}};}function debounce(fn,delay){var timeout2;return function(){for(var _len3=arguments.length,args=new Array(_len3),_key4=0;_key4<_len3;_key4++){args[_key4]=arguments[_key4];}if(delay){clearTimeout(timeout2);timeout2=setTimeout(fn,delay,args);}else{fn.apply(this,args);}return delay;};}var _toLeftRightCenter=function _toLeftRightCenter(align){return align==="start"?"left":align==="end"?"right":"center";};var _alignStartEnd=function _alignStartEnd(align,start2,end){return align==="start"?start2:align==="end"?end:(start2+end)/2;};var _textX=function _textX(align,left,right,rtl){var check=rtl?"left":"right";return align===check?right:align==="center"?(left+right)/2:left;};function _getStartAndCountOfVisiblePoints(meta,points,animationsDisabled){var pointCount=points.length;var start2=0;var count=pointCount;if(meta._sorted){var iScale=meta.iScale,_parsed=meta._parsed;var axis=iScale.axis;var _iScale$getUserBounds=iScale.getUserBounds(),min3=_iScale$getUserBounds.min,max3=_iScale$getUserBounds.max,minDefined=_iScale$getUserBounds.minDefined,maxDefined=_iScale$getUserBounds.maxDefined;if(minDefined){start2=_limitValue(Math.min(_lookupByKey(_parsed,iScale.axis,min3).lo,animationsDisabled?pointCount:_lookupByKey(points,axis,iScale.getPixelForValue(min3)).lo),0,pointCount-1);}if(maxDefined){count=_limitValue(Math.max(_lookupByKey(_parsed,iScale.axis,max3,true).hi+1,animationsDisabled?0:_lookupByKey(points,axis,iScale.getPixelForValue(max3),true).hi+1),start2,pointCount)-start2;}else{count=pointCount-start2;}}return{start:start2,count:count};}function _scaleRangesChanged(meta){var xScale=meta.xScale,yScale=meta.yScale,_scaleRanges=meta._scaleRanges;var newRanges={xmin:xScale.min,xmax:xScale.max,ymin:yScale.min,ymax:yScale.max};if(!_scaleRanges){meta._scaleRanges=newRanges;return true;}var changed=_scaleRanges.xmin!==xScale.min||_scaleRanges.xmax!==xScale.max||_scaleRanges.ymin!==yScale.min||_scaleRanges.ymax!==yScale.max;Object.assign(_scaleRanges,newRanges);return changed;}var atEdge=function atEdge(t){return t===0||t===1;};var elasticIn=function elasticIn(t,s,p){return-(Math.pow(2,10*(t-=1))*Math.sin((t-s)*TAU/p));};var elasticOut=function elasticOut(t,s,p){return Math.pow(2,-10*t)*Math.sin((t-s)*TAU/p)+1;};var effects={linear:function linear(t){return t;},easeInQuad:function easeInQuad(t){return t*t;},easeOutQuad:function easeOutQuad(t){return-t*(t-2);},easeInOutQuad:function easeInOutQuad(t){return(t/=0.5)<1?0.5*t*t:-0.5*(--t*(t-2)-1);},easeInCubic:function easeInCubic(t){return t*t*t;},easeOutCubic:function easeOutCubic(t){return(t-=1)*t*t+1;},easeInOutCubic:function easeInOutCubic(t){return(t/=0.5)<1?0.5*t*t*t:0.5*((t-=2)*t*t+2);},easeInQuart:function easeInQuart(t){return t*t*t*t;},easeOutQuart:function easeOutQuart(t){return-((t-=1)*t*t*t-1);},easeInOutQuart:function easeInOutQuart(t){return(t/=0.5)<1?0.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2);},easeInQuint:function easeInQuint(t){return t*t*t*t*t;},easeOutQuint:function easeOutQuint(t){return(t-=1)*t*t*t*t+1;},easeInOutQuint:function easeInOutQuint(t){return(t/=0.5)<1?0.5*t*t*t*t*t:0.5*((t-=2)*t*t*t*t+2);},easeInSine:function easeInSine(t){return-Math.cos(t*HALF_PI)+1;},easeOutSine:function easeOutSine(t){return Math.sin(t*HALF_PI);},easeInOutSine:function easeInOutSine(t){return-0.5*(Math.cos(PI*t)-1);},easeInExpo:function easeInExpo(t){return t===0?0:Math.pow(2,10*(t-1));},easeOutExpo:function easeOutExpo(t){return t===1?1:-Math.pow(2,-10*t)+1;},easeInOutExpo:function easeInOutExpo(t){return atEdge(t)?t:t<0.5?0.5*Math.pow(2,10*(t*2-1)):0.5*(-Math.pow(2,-10*(t*2-1))+2);},easeInCirc:function easeInCirc(t){return t>=1?t:-(Math.sqrt(1-t*t)-1);},easeOutCirc:function easeOutCirc(t){return Math.sqrt(1-(t-=1)*t);},easeInOutCirc:function easeInOutCirc(t){return(t/=0.5)<1?-0.5*(Math.sqrt(1-t*t)-1):0.5*(Math.sqrt(1-(t-=2)*t)+1);},easeInElastic:function easeInElastic(t){return atEdge(t)?t:elasticIn(t,0.075,0.3);},easeOutElastic:function easeOutElastic(t){return atEdge(t)?t:elasticOut(t,0.075,0.3);},easeInOutElastic:function easeInOutElastic(t){var s=0.1125;var p=0.45;return atEdge(t)?t:t<0.5?0.5*elasticIn(t*2,s,p):0.5+0.5*elasticOut(t*2-1,s,p);},easeInBack:function easeInBack(t){var s=1.70158;return t*t*((s+1)*t-s);},easeOutBack:function easeOutBack(t){var s=1.70158;return(t-=1)*t*((s+1)*t+s)+1;},easeInOutBack:function easeInOutBack(t){var s=1.70158;if((t/=0.5)<1){return 0.5*(t*t*(((s*=1.525)+1)*t-s));}return 0.5*((t-=2)*t*(((s*=1.525)+1)*t+s)+2);},easeInBounce:function easeInBounce(t){return 1-effects.easeOutBounce(1-t);},easeOutBounce:function easeOutBounce(t){var m=7.5625;var d=2.75;if(t<1/d){return m*t*t;}if(t<2/d){return m*(t-=1.5/d)*t+0.75;}if(t<2.5/d){return m*(t-=2.25/d)*t+0.9375;}return m*(t-=2.625/d)*t+0.984375;},easeInOutBounce:function easeInOutBounce(t){return t<0.5?effects.easeInBounce(t*2)*0.5:effects.easeOutBounce(t*2-1)*0.5+0.5;}};function round(v){return v+0.5|0;}var lim=function lim(v,l,h){return Math.max(Math.min(v,h),l);};function p2b(v){return lim(round(v*2.55),0,255);}function n2b(v){return lim(round(v*255),0,255);}function b2n(v){return lim(round(v/2.55)/100,0,1);}function n2p(v){return lim(round(v*100),0,100);}var map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};var hex=_toConsumableArray("0123456789ABCDEF");var h1=function h1(b){return hex[b&15];};var h2=function h2(b){return hex[(b&240)>>4]+hex[b&15];};var eq=function eq(b){return(b&240)>>4===(b&15);};var isShort=function isShort(v){return eq(v.r)&&eq(v.g)&&eq(v.b)&&eq(v.a);};function hexParse(str){var len=str.length;var ret;if(str[0]==="#"){if(len===4||len===5){ret={r:255&map$1[str[1]]*17,g:255&map$1[str[2]]*17,b:255&map$1[str[3]]*17,a:len===5?map$1[str[4]]*17:255};}else if(len===7||len===9){ret={r:map$1[str[1]]<<4|map$1[str[2]],g:map$1[str[3]]<<4|map$1[str[4]],b:map$1[str[5]]<<4|map$1[str[6]],a:len===9?map$1[str[7]]<<4|map$1[str[8]]:255};}}return ret;}var alpha=function alpha(a,f){return a<255?f(a):"";};function _hexString(v){var f=isShort(v)?h1:h2;return v?"#"+f(v.r)+f(v.g)+f(v.b)+alpha(v.a,f):void 0;}var HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(h,s,l){var a=s*Math.min(l,1-l);var f=function f(n){var k=arguments.length>1&&arguments[1]!==undefined?arguments[1]:(n+h/30)%12;return l-a*Math.max(Math.min(k-3,9-k,1),-1);};return[f(0),f(8),f(4)];}function hsv2rgbn(h,s,v){var f=function f(n){var k=arguments.length>1&&arguments[1]!==undefined?arguments[1]:(n+h/60)%6;return v-v*s*Math.max(Math.min(k,4-k,1),0);};return[f(5),f(3),f(1)];}function hwb2rgbn(h,w,b){var rgb2=hsl2rgbn(h,1,0.5);var i;if(w+b>1){i=1/(w+b);w*=i;b*=i;}for(i=0;i<3;i++){rgb2[i]*=1-w-b;rgb2[i]+=w;}return rgb2;}function hueValue(r,g,b,d,max3){if(r===max3){return(g-b)/d+(g<b?6:0);}if(g===max3){return(b-r)/d+2;}return(r-g)/d+4;}function rgb2hsl(v){var range=255;var r=v.r/range;var g=v.g/range;var b=v.b/range;var max3=Math.max(r,g,b);var min3=Math.min(r,g,b);var l=(max3+min3)/2;var h,s,d;if(max3!==min3){d=max3-min3;s=l>0.5?d/(2-max3-min3):d/(max3+min3);h=hueValue(r,g,b,d,max3);h=h*60+0.5;}return[h|0,s||0,l];}function calln(f,a,b,c){return(Array.isArray(a)?f(a[0],a[1],a[2]):f(a,b,c)).map(n2b);}function hsl2rgb(h,s,l){return calln(hsl2rgbn,h,s,l);}function hwb2rgb(h,w,b){return calln(hwb2rgbn,h,w,b);}function hsv2rgb(h,s,v){return calln(hsv2rgbn,h,s,v);}function hue(h){return(h%360+360)%360;}function hueParse(str){var m=HUE_RE.exec(str);var a=255;var v;if(!m){return;}if(m[5]!==v){a=m[6]?p2b(+m[5]):n2b(+m[5]);}var h=hue(+m[2]);var p1=+m[3]/100;var p2=+m[4]/100;if(m[1]==="hwb"){v=hwb2rgb(h,p1,p2);}else if(m[1]==="hsv"){v=hsv2rgb(h,p1,p2);}else{v=hsl2rgb(h,p1,p2);}return{r:v[0],g:v[1],b:v[2],a:a};}function _rotate(v,deg){var h=rgb2hsl(v);h[0]=hue(h[0]+deg);h=hsl2rgb(h);v.r=h[0];v.g=h[1];v.b=h[2];}function _hslString(v){if(!v){return;}var a=rgb2hsl(v);var h=a[0];var s=n2p(a[1]);var l=n2p(a[2]);return v.a<255?"hsla(".concat(h,", ").concat(s,"%, ").concat(l,"%, ").concat(b2n(v.a),")"):"hsl(".concat(h,", ").concat(s,"%, ").concat(l,"%)");}var map={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"};var names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){var unpacked={};var keys=Object.keys(names$1);var tkeys=Object.keys(map);var i,j,k,ok,nk;for(i=0;i<keys.length;i++){ok=nk=keys[i];for(j=0;j<tkeys.length;j++){k=tkeys[j];nk=nk.replace(k,map[k]);}k=parseInt(names$1[ok],16);unpacked[nk]=[k>>16&255,k>>8&255,k&255];}return unpacked;}var names;function nameParse(str){if(!names){names=unpack();names.transparent=[0,0,0,0];}var a=names[str.toLowerCase()];return a&&{r:a[0],g:a[1],b:a[2],a:a.length===4?a[3]:255};}var RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(str){var m=RGB_RE.exec(str);var a=255;var r,g,b;if(!m){return;}if(m[7]!==r){var v=+m[7];a=m[8]?p2b(v):lim(v*255,0,255);}r=+m[1];g=+m[3];b=+m[5];r=255&(m[2]?p2b(r):lim(r,0,255));g=255&(m[4]?p2b(g):lim(g,0,255));b=255&(m[6]?p2b(b):lim(b,0,255));return{r:r,g:g,b:b,a:a};}function _rgbString(v){return v&&(v.a<255?"rgba(".concat(v.r,", ").concat(v.g,", ").concat(v.b,", ").concat(b2n(v.a),")"):"rgb(".concat(v.r,", ").concat(v.g,", ").concat(v.b,")"));}var to=function to(v){return v<=31308e-7?v*12.92:Math.pow(v,1/2.4)*1.055-0.055;};var from=function from(v){return v<=0.04045?v/12.92:Math.pow((v+0.055)/1.055,2.4);};function _interpolate2(rgb1,rgb2,t){var r=from(b2n(rgb1.r));var g=from(b2n(rgb1.g));var b=from(b2n(rgb1.b));return{r:n2b(to(r+t*(from(b2n(rgb2.r))-r))),g:n2b(to(g+t*(from(b2n(rgb2.g))-g))),b:n2b(to(b+t*(from(b2n(rgb2.b))-b))),a:rgb1.a+t*(rgb2.a-rgb1.a)};}function modHSL(v,i,ratio){if(v){var tmp=rgb2hsl(v);tmp[i]=Math.max(0,Math.min(tmp[i]+tmp[i]*ratio,i===0?360:1));tmp=hsl2rgb(tmp);v.r=tmp[0];v.g=tmp[1];v.b=tmp[2];}}function clone(v,proto){return v?Object.assign(proto||{},v):v;}function fromObject(input){var v={r:0,g:0,b:0,a:255};if(Array.isArray(input)){if(input.length>=3){v={r:input[0],g:input[1],b:input[2],a:255};if(input.length>3){v.a=n2b(input[3]);}}}else{v=clone(input,{r:0,g:0,b:0,a:1});v.a=n2b(v.a);}return v;}function functionParse(str){if(str.charAt(0)==="r"){return rgbParse(str);}return hueParse(str);}var Color=/*#__PURE__*/function(){function _Color(input){_classCallCheck(this,_Color);if(input instanceof _Color){return input;}var type2=_typeof(input);var v;if(type2==="object"){v=fromObject(input);}else if(type2==="string"){v=hexParse(input)||nameParse(input)||functionParse(input);}this._rgb=v;this._valid=!!v;}_createClass(_Color,[{key:"valid",get:function get(){return this._valid;}},{key:"rgb",get:function get(){var v=clone(this._rgb);if(v){v.a=b2n(v.a);}return v;},set:function set(obj){this._rgb=fromObject(obj);}},{key:"rgbString",value:function rgbString(){return this._valid?_rgbString(this._rgb):void 0;}},{key:"hexString",value:function hexString(){return this._valid?_hexString(this._rgb):void 0;}},{key:"hslString",value:function hslString(){return this._valid?_hslString(this._rgb):void 0;}},{key:"mix",value:function mix(color3,weight){if(color3){var c1=this.rgb;var c2=color3.rgb;var w2;var p=weight===w2?0.5:weight;var w=2*p-1;var a=c1.a-c2.a;var w1=((w*a===-1?w:(w+a)/(1+w*a))+1)/2;w2=1-w1;c1.r=255&w1*c1.r+w2*c2.r+0.5;c1.g=255&w1*c1.g+w2*c2.g+0.5;c1.b=255&w1*c1.b+w2*c2.b+0.5;c1.a=p*c1.a+(1-p)*c2.a;this.rgb=c1;}return this;}},{key:"interpolate",value:function interpolate(color3,t){if(color3){this._rgb=_interpolate2(this._rgb,color3._rgb,t);}return this;}},{key:"clone",value:function clone(){return new _Color(this.rgb);}},{key:"alpha",value:function alpha(a){this._rgb.a=n2b(a);return this;}},{key:"clearer",value:function clearer(ratio){var rgb2=this._rgb;rgb2.a*=1-ratio;return this;}},{key:"greyscale",value:function greyscale(){var rgb2=this._rgb;var val=round(rgb2.r*0.3+rgb2.g*0.59+rgb2.b*0.11);rgb2.r=rgb2.g=rgb2.b=val;return this;}},{key:"opaquer",value:function opaquer(ratio){var rgb2=this._rgb;rgb2.a*=1+ratio;return this;}},{key:"negate",value:function negate(){var v=this._rgb;v.r=255-v.r;v.g=255-v.g;v.b=255-v.b;return this;}},{key:"lighten",value:function lighten(ratio){modHSL(this._rgb,2,ratio);return this;}},{key:"darken",value:function darken(ratio){modHSL(this._rgb,2,-ratio);return this;}},{key:"saturate",value:function saturate(ratio){modHSL(this._rgb,1,ratio);return this;}},{key:"desaturate",value:function desaturate(ratio){modHSL(this._rgb,1,-ratio);return this;}},{key:"rotate",value:function rotate(deg){_rotate(this._rgb,deg);return this;}}]);return _Color;}();function index_esm(input){return new Color(input);}function isPatternOrGradient(value){if(value&&_typeof(value)==="object"){var type2=value.toString();return type2==="[object CanvasPattern]"||type2==="[object CanvasGradient]";}return false;}function _color(value){return isPatternOrGradient(value)?value:index_esm(value);}function getHoverColor(value){return isPatternOrGradient(value)?value:index_esm(value).saturate(0.5).darken(0.1).hexString();}var overrides=/* @__PURE__ */Object.create(null);var descriptors=/* @__PURE__ */Object.create(null);function getScope$1(node,key){if(!key){return node;}var keys=key.split(".");for(var i=0,n=keys.length;i<n;++i){var k=keys[i];node=node[k]||(node[k]=/* @__PURE__ */Object.create(null));}return node;}function _set(root2,scope,values){if(typeof scope==="string"){return merge(getScope$1(root2,scope),values);}return merge(getScope$1(root2,""),scope);}var Defaults=/*#__PURE__*/function(){function Defaults(_descriptors2){_classCallCheck(this,Defaults);this.animation=void 0;this.backgroundColor="rgba(0,0,0,0.1)";this.borderColor="rgba(0,0,0,0.1)";this.color="#666";this.datasets={};this.devicePixelRatio=function(context){return context.chart.platform.getDevicePixelRatio();};this.elements={};this.events=["mousemove","mouseout","click","touchstart","touchmove"];this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null};this.hover={};this.hoverBackgroundColor=function(ctx,options){return getHoverColor(options.backgroundColor);};this.hoverBorderColor=function(ctx,options){return getHoverColor(options.borderColor);};this.hoverColor=function(ctx,options){return getHoverColor(options.color);};this.indexAxis="x";this.interaction={mode:"nearest",intersect:true,includeInvisible:false};this.maintainAspectRatio=true;this.onHover=null;this.onClick=null;this.parsing=true;this.plugins={};this.responsive=true;this.scale=void 0;this.scales={};this.showLine=true;this.drawActiveElementsOnTop=true;this.describe(_descriptors2);}_createClass(Defaults,[{key:"set",value:function set(scope,values){return _set(this,scope,values);}},{key:"get",value:function get(scope){return getScope$1(this,scope);}},{key:"describe",value:function describe(scope,values){return _set(descriptors,scope,values);}},{key:"override",value:function override(scope,values){return _set(overrides,scope,values);}},{key:"route",value:function route(scope,name,targetScope,targetName){var _Object$definePropert;var scopeObject=getScope$1(this,scope);var targetScopeObject=getScope$1(this,targetScope);var privateName="_"+name;Object.defineProperties(scopeObject,(_Object$definePropert={},_defineProperty(_Object$definePropert,privateName,{value:scopeObject[name],writable:true}),_defineProperty(_Object$definePropert,name,{enumerable:true,get:function get(){var local=this[privateName];var target=targetScopeObject[targetName];if(isObject(local)){return Object.assign({},target,local);}return valueOrDefault(local,target);},set:function set(value){this[privateName]=value;}}),_Object$definePropert));}}]);return Defaults;}();var defaults=new Defaults({_scriptable:function _scriptable(name){return!name.startsWith("on");},_indexable:function _indexable(name){return name!=="events";},hover:{_fallback:"interaction"},interaction:{_scriptable:false,_indexable:false}});function toFontString(font){if(!font||isNullOrUndef(font.size)||isNullOrUndef(font.family)){return null;}return(font.style?font.style+" ":"")+(font.weight?font.weight+" ":"")+font.size+"px "+font.family;}function _measureText(ctx,data,gc,longest,string){var textWidth=data[string];if(!textWidth){textWidth=data[string]=ctx.measureText(string).width;gc.push(string);}if(textWidth>longest){longest=textWidth;}return longest;}function _longestText(ctx,font,arrayOfThings,cache){cache=cache||{};var data=cache.data=cache.data||{};var gc=cache.garbageCollect=cache.garbageCollect||[];if(cache.font!==font){data=cache.data={};gc=cache.garbageCollect=[];cache.font=font;}ctx.save();ctx.font=font;var longest=0;var ilen=arrayOfThings.length;var i,j,jlen,thing,nestedThing;for(i=0;i<ilen;i++){thing=arrayOfThings[i];if(thing!==void 0&&thing!==null&&isArray(thing)!==true){longest=_measureText(ctx,data,gc,longest,thing);}else if(isArray(thing)){for(j=0,jlen=thing.length;j<jlen;j++){nestedThing=thing[j];if(nestedThing!==void 0&&nestedThing!==null&&!isArray(nestedThing)){longest=_measureText(ctx,data,gc,longest,nestedThing);}}}}ctx.restore();var gcLen=gc.length/2;if(gcLen>arrayOfThings.length){for(i=0;i<gcLen;i++){delete data[gc[i]];}gc.splice(0,gcLen);}return longest;}function _alignPixel(chart,pixel,width){var devicePixelRatio2=chart.currentDevicePixelRatio;var halfWidth=width!==0?Math.max(width/2,0.5):0;return Math.round((pixel-halfWidth)*devicePixelRatio2)/devicePixelRatio2+halfWidth;}function clearCanvas(canvas,ctx){ctx=ctx||canvas.getContext("2d");ctx.save();ctx.resetTransform();ctx.clearRect(0,0,canvas.width,canvas.height);ctx.restore();}function drawPoint(ctx,options,x,y){drawPointLegend(ctx,options,x,y,null);}function drawPointLegend(ctx,options,x,y,w){var type2,xOffset,yOffset,size,cornerRadius,width;var style=options.pointStyle;var rotation=options.rotation;var radius3=options.radius;var rad=(rotation||0)*RAD_PER_DEG;if(style&&_typeof(style)==="object"){type2=style.toString();if(type2==="[object HTMLImageElement]"||type2==="[object HTMLCanvasElement]"){ctx.save();ctx.translate(x,y);ctx.rotate(rad);ctx.drawImage(style,-style.width/2,-style.height/2,style.width,style.height);ctx.restore();return;}}if(isNaN(radius3)||radius3<=0){return;}ctx.beginPath();switch(style){default:if(w){ctx.ellipse(x,y,w/2,radius3,0,0,TAU);}else{ctx.arc(x,y,radius3,0,TAU);}ctx.closePath();break;case"triangle":ctx.moveTo(x+Math.sin(rad)*radius3,y-Math.cos(rad)*radius3);rad+=TWO_THIRDS_PI;ctx.lineTo(x+Math.sin(rad)*radius3,y-Math.cos(rad)*radius3);rad+=TWO_THIRDS_PI;ctx.lineTo(x+Math.sin(rad)*radius3,y-Math.cos(rad)*radius3);ctx.closePath();break;case"rectRounded":cornerRadius=radius3*0.516;size=radius3-cornerRadius;xOffset=Math.cos(rad+QUARTER_PI)*size;yOffset=Math.sin(rad+QUARTER_PI)*size;ctx.arc(x-xOffset,y-yOffset,cornerRadius,rad-PI,rad-HALF_PI);ctx.arc(x+yOffset,y-xOffset,cornerRadius,rad-HALF_PI,rad);ctx.arc(x+xOffset,y+yOffset,cornerRadius,rad,rad+HALF_PI);ctx.arc(x-yOffset,y+xOffset,cornerRadius,rad+HALF_PI,rad+PI);ctx.closePath();break;case"rect":if(!rotation){size=Math.SQRT1_2*radius3;width=w?w/2:size;ctx.rect(x-width,y-size,2*width,2*size);break;}rad+=QUARTER_PI;case"rectRot":xOffset=Math.cos(rad)*radius3;yOffset=Math.sin(rad)*radius3;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+yOffset,y-xOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.lineTo(x-yOffset,y+xOffset);ctx.closePath();break;case"crossRot":rad+=QUARTER_PI;case"cross":xOffset=Math.cos(rad)*radius3;yOffset=Math.sin(rad)*radius3;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.moveTo(x+yOffset,y-xOffset);ctx.lineTo(x-yOffset,y+xOffset);break;case"star":xOffset=Math.cos(rad)*radius3;yOffset=Math.sin(rad)*radius3;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.moveTo(x+yOffset,y-xOffset);ctx.lineTo(x-yOffset,y+xOffset);rad+=QUARTER_PI;xOffset=Math.cos(rad)*radius3;yOffset=Math.sin(rad)*radius3;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.moveTo(x+yOffset,y-xOffset);ctx.lineTo(x-yOffset,y+xOffset);break;case"line":xOffset=w?w/2:Math.cos(rad)*radius3;yOffset=Math.sin(rad)*radius3;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);break;case"dash":ctx.moveTo(x,y);ctx.lineTo(x+Math.cos(rad)*radius3,y+Math.sin(rad)*radius3);break;}ctx.fill();if(options.borderWidth>0){ctx.stroke();}}function _isPointInArea(point,area,margin){margin=margin||0.5;return!area||point&&point.x>area.left-margin&&point.x<area.right+margin&&point.y>area.top-margin&&point.y<area.bottom+margin;}function clipArea(ctx,area){ctx.save();ctx.beginPath();ctx.rect(area.left,area.top,area.right-area.left,area.bottom-area.top);ctx.clip();}function unclipArea(ctx){ctx.restore();}function _steppedLineTo(ctx,previous,target,flip,mode){if(!previous){return ctx.lineTo(target.x,target.y);}if(mode==="middle"){var midpoint=(previous.x+target.x)/2;ctx.lineTo(midpoint,previous.y);ctx.lineTo(midpoint,target.y);}else if(mode==="after"!==!!flip){ctx.lineTo(previous.x,target.y);}else{ctx.lineTo(target.x,previous.y);}ctx.lineTo(target.x,target.y);}function _bezierCurveTo(ctx,previous,target,flip){if(!previous){return ctx.lineTo(target.x,target.y);}ctx.bezierCurveTo(flip?previous.cp1x:previous.cp2x,flip?previous.cp1y:previous.cp2y,flip?target.cp2x:target.cp1x,flip?target.cp2y:target.cp1y,target.x,target.y);}function renderText(ctx,text,x,y,font){var opts=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};var lines=isArray(text)?text:[text];var stroke=opts.strokeWidth>0&&opts.strokeColor!=="";var i,line;ctx.save();ctx.font=font.string;setRenderOpts(ctx,opts);for(i=0;i<lines.length;++i){line=lines[i];if(stroke){if(opts.strokeColor){ctx.strokeStyle=opts.strokeColor;}if(!isNullOrUndef(opts.strokeWidth)){ctx.lineWidth=opts.strokeWidth;}ctx.strokeText(line,x,y,opts.maxWidth);}ctx.fillText(line,x,y,opts.maxWidth);decorateText(ctx,x,y,line,opts);y+=font.lineHeight;}ctx.restore();}function setRenderOpts(ctx,opts){if(opts.translation){ctx.translate(opts.translation[0],opts.translation[1]);}if(!isNullOrUndef(opts.rotation)){ctx.rotate(opts.rotation);}if(opts.color){ctx.fillStyle=opts.color;}if(opts.textAlign){ctx.textAlign=opts.textAlign;}if(opts.textBaseline){ctx.textBaseline=opts.textBaseline;}}function decorateText(ctx,x,y,line,opts){if(opts.strikethrough||opts.underline){var metrics=ctx.measureText(line);var left=x-metrics.actualBoundingBoxLeft;var right=x+metrics.actualBoundingBoxRight;var top=y-metrics.actualBoundingBoxAscent;var bottom=y+metrics.actualBoundingBoxDescent;var yDecoration=opts.strikethrough?(top+bottom)/2:bottom;ctx.strokeStyle=ctx.fillStyle;ctx.beginPath();ctx.lineWidth=opts.decorationWidth||2;ctx.moveTo(left,yDecoration);ctx.lineTo(right,yDecoration);ctx.stroke();}}function addRoundedRectPath(ctx,rect){var x=rect.x,y=rect.y,w=rect.w,h=rect.h,radius3=rect.radius;ctx.arc(x+radius3.topLeft,y+radius3.topLeft,radius3.topLeft,-HALF_PI,PI,true);ctx.lineTo(x,y+h-radius3.bottomLeft);ctx.arc(x+radius3.bottomLeft,y+h-radius3.bottomLeft,radius3.bottomLeft,PI,HALF_PI,true);ctx.lineTo(x+w-radius3.bottomRight,y+h);ctx.arc(x+w-radius3.bottomRight,y+h-radius3.bottomRight,radius3.bottomRight,HALF_PI,0,true);ctx.lineTo(x+w,y+radius3.topRight);ctx.arc(x+w-radius3.topRight,y+radius3.topRight,radius3.topRight,0,-HALF_PI,true);ctx.lineTo(x+radius3.topLeft,y);}var LINE_HEIGHT=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);var FONT_STYLE=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function toLineHeight(value,size){var matches=(""+value).match(LINE_HEIGHT);if(!matches||matches[1]==="normal"){return size*1.2;}value=+matches[2];switch(matches[3]){case"px":return value;case"%":value/=100;break;}return size*value;}var numberOrZero=function numberOrZero(v){return+v||0;};function _readValueToProps(value,props){var ret={};var objProps=isObject(props);var keys=objProps?Object.keys(props):props;var read=isObject(value)?objProps?function(prop){return valueOrDefault(value[prop],value[props[prop]]);}:function(prop){return value[prop];}:function(){return value;};var _iterator5=_createForOfIteratorHelper(keys),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var prop=_step5.value;ret[prop]=numberOrZero(read(prop));}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return ret;}function toTRBL(value){return _readValueToProps(value,{top:"y",right:"x",bottom:"y",left:"x"});}function toTRBLCorners(value){return _readValueToProps(value,["topLeft","topRight","bottomLeft","bottomRight"]);}function toPadding(value){var obj=toTRBL(value);obj.width=obj.left+obj.right;obj.height=obj.top+obj.bottom;return obj;}function toFont(options,fallback){options=options||{};fallback=fallback||defaults.font;var size=valueOrDefault(options.size,fallback.size);if(typeof size==="string"){size=parseInt(size,10);}var style=valueOrDefault(options.style,fallback.style);if(style&&!(""+style).match(FONT_STYLE)){console.warn('Invalid font style specified: "'+style+'"');style="";}var font={family:valueOrDefault(options.family,fallback.family),lineHeight:toLineHeight(valueOrDefault(options.lineHeight,fallback.lineHeight),size),size:size,style:style,weight:valueOrDefault(options.weight,fallback.weight),string:""};font.string=toFontString(font);return font;}function resolve(inputs,context,index3,info){var cacheable=true;var i,ilen,value;for(i=0,ilen=inputs.length;i<ilen;++i){value=inputs[i];if(value===void 0){continue;}if(context!==void 0&&typeof value==="function"){value=value(context);cacheable=false;}if(index3!==void 0&&isArray(value)){value=value[index3%value.length];cacheable=false;}if(value!==void 0){if(info&&!cacheable){info.cacheable=false;}return value;}}}function _addGrace(minmax,grace,beginAtZero){var min3=minmax.min,max3=minmax.max;var change=toDimension(grace,(max3-min3)/2);var keepZero=function keepZero(value,add){return beginAtZero&&value===0?0:value+add;};return{min:keepZero(min3,-Math.abs(change)),max:keepZero(max3,change)};}function createContext(parentContext,context){return Object.assign(Object.create(parentContext),context);}function _createResolver(scopes){var _cache;var prefixes2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[""];var rootScopes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:scopes;var fallback=arguments.length>3?arguments[3]:undefined;var getTarget=arguments.length>4&&arguments[4]!==undefined?arguments[4]:function(){return scopes[0];};if(!defined(fallback)){fallback=_resolve("_fallback",scopes);}var cache=(_cache={},_defineProperty(_cache,Symbol.toStringTag,"Object"),_defineProperty(_cache,"_cacheable",true),_defineProperty(_cache,"_scopes",scopes),_defineProperty(_cache,"_rootScopes",rootScopes),_defineProperty(_cache,"_fallback",fallback),_defineProperty(_cache,"_getTarget",getTarget),_defineProperty(_cache,"override",function override(scope){return _createResolver([scope].concat(_toConsumableArray(scopes)),prefixes2,rootScopes,fallback);}),_cache);return new Proxy(cache,{deleteProperty:function deleteProperty(target,prop){delete target[prop];delete target._keys;delete scopes[0][prop];return true;},get:function get(target,prop){return _cached(target,prop,function(){return _resolveWithPrefixes(prop,prefixes2,scopes,target);});},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,prop){return Reflect.getOwnPropertyDescriptor(target._scopes[0],prop);},getPrototypeOf:function getPrototypeOf(){return Reflect.getPrototypeOf(scopes[0]);},has:function has(target,prop){return getKeysFromAllScopes(target).includes(prop);},ownKeys:function ownKeys(target){return getKeysFromAllScopes(target);},set:function set(target,prop,value){var storage=target._storage||(target._storage=getTarget());target[prop]=storage[prop]=value;delete target._keys;return true;}});}function _attachContext(proxy,context,subProxy,descriptorDefaults){var cache={_cacheable:false,_proxy:proxy,_context:context,_subProxy:subProxy,_stack:/* @__PURE__ */new Set(),_descriptors:_descriptors(proxy,descriptorDefaults),setContext:function setContext(ctx){return _attachContext(proxy,ctx,subProxy,descriptorDefaults);},override:function override(scope){return _attachContext(proxy.override(scope),context,subProxy,descriptorDefaults);}};return new Proxy(cache,{deleteProperty:function deleteProperty(target,prop){delete target[prop];delete proxy[prop];return true;},get:function get(target,prop,receiver){return _cached(target,prop,function(){return _resolveWithContext(target,prop,receiver);});},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,prop){return target._descriptors.allKeys?Reflect.has(proxy,prop)?{enumerable:true,configurable:true}:void 0:Reflect.getOwnPropertyDescriptor(proxy,prop);},getPrototypeOf:function getPrototypeOf(){return Reflect.getPrototypeOf(proxy);},has:function has(target,prop){return Reflect.has(proxy,prop);},ownKeys:function ownKeys(){return Reflect.ownKeys(proxy);},set:function set(target,prop,value){proxy[prop]=value;delete target[prop];return true;}});}function _descriptors(proxy){var defaults3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{scriptable:true,indexable:true};var _proxy$_scriptable=proxy._scriptable,_scriptable=_proxy$_scriptable===void 0?defaults3.scriptable:_proxy$_scriptable,_proxy$_indexable=proxy._indexable,_indexable=_proxy$_indexable===void 0?defaults3.indexable:_proxy$_indexable,_proxy$_allKeys=proxy._allKeys,_allKeys=_proxy$_allKeys===void 0?defaults3.allKeys:_proxy$_allKeys;return{allKeys:_allKeys,scriptable:_scriptable,indexable:_indexable,isScriptable:isFunction(_scriptable)?_scriptable:function(){return _scriptable;},isIndexable:isFunction(_indexable)?_indexable:function(){return _indexable;}};}var readKey=function readKey(prefix,name){return prefix?prefix+_capitalize(name):name;};var needsSubResolver=function needsSubResolver(prop,value){return isObject(value)&&prop!=="adapters"&&(Object.getPrototypeOf(value)===null||value.constructor===Object);};function _cached(target,prop,resolve2){if(Object.prototype.hasOwnProperty.call(target,prop)){return target[prop];}var value=resolve2();target[prop]=value;return value;}function _resolveWithContext(target,prop,receiver){var _proxy=target._proxy,_context=target._context,_subProxy=target._subProxy,descriptors2=target._descriptors;var value=_proxy[prop];if(isFunction(value)&&descriptors2.isScriptable(prop)){value=_resolveScriptable(prop,value,target,receiver);}if(isArray(value)&&value.length){value=_resolveArray(prop,value,target,descriptors2.isIndexable);}if(needsSubResolver(prop,value)){value=_attachContext(value,_context,_subProxy&&_subProxy[prop],descriptors2);}return value;}function _resolveScriptable(prop,value,target,receiver){var _proxy=target._proxy,_context=target._context,_subProxy=target._subProxy,_stack=target._stack;if(_stack.has(prop)){throw new Error("Recursion detected: "+Array.from(_stack).join("->")+"->"+prop);}_stack.add(prop);value=value(_context,_subProxy||receiver);_stack["delete"](prop);if(needsSubResolver(prop,value)){value=createSubResolver(_proxy._scopes,_proxy,prop,value);}return value;}function _resolveArray(prop,value,target,isIndexable){var _proxy=target._proxy,_context=target._context,_subProxy=target._subProxy,descriptors2=target._descriptors;if(defined(_context.index)&&isIndexable(prop)){value=value[_context.index%value.length];}else if(isObject(value[0])){var arr=value;var scopes=_proxy._scopes.filter(function(s){return s!==arr;});value=[];var _iterator6=_createForOfIteratorHelper(arr),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var item=_step6.value;var resolver=createSubResolver(scopes,_proxy,prop,item);value.push(_attachContext(resolver,_context,_subProxy&&_subProxy[prop],descriptors2));}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}return value;}function resolveFallback(fallback,prop,value){return isFunction(fallback)?fallback(prop,value):fallback;}var getScope=function getScope(key,parent){return key===true?parent:typeof key==="string"?resolveObjectKey(parent,key):void 0;};function addScopes(set4,parentScopes,key,parentFallback,value){var _iterator7=_createForOfIteratorHelper(parentScopes),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var parent=_step7.value;var scope=getScope(key,parent);if(scope){set4.add(scope);var fallback=resolveFallback(scope._fallback,key,value);if(defined(fallback)&&fallback!==key&&fallback!==parentFallback){return fallback;}}else if(scope===false&&defined(parentFallback)&&key!==parentFallback){return null;}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return false;}function createSubResolver(parentScopes,resolver,prop,value){var rootScopes=resolver._rootScopes;var fallback=resolveFallback(resolver._fallback,prop,value);var allScopes=[].concat(_toConsumableArray(parentScopes),_toConsumableArray(rootScopes));var set4=/* @__PURE__ */new Set();set4.add(value);var key=addScopesFromKey(set4,allScopes,prop,fallback||prop,value);if(key===null){return false;}if(defined(fallback)&&fallback!==prop){key=addScopesFromKey(set4,allScopes,fallback,key,value);if(key===null){return false;}}return _createResolver(Array.from(set4),[""],rootScopes,fallback,function(){return subGetTarget(resolver,prop,value);});}function addScopesFromKey(set4,allScopes,key,fallback,item){while(key){key=addScopes(set4,allScopes,key,fallback,item);}return key;}function subGetTarget(resolver,prop,value){var parent=resolver._getTarget();if(!(prop in parent)){parent[prop]={};}var target=parent[prop];if(isArray(target)&&isObject(value)){return value;}return target;}function _resolveWithPrefixes(prop,prefixes2,scopes,proxy){var value;var _iterator8=_createForOfIteratorHelper(prefixes2),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var prefix=_step8.value;value=_resolve(readKey(prefix,prop),scopes);if(defined(value)){return needsSubResolver(prop,value)?createSubResolver(scopes,proxy,prop,value):value;}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}function _resolve(key,scopes){var _iterator9=_createForOfIteratorHelper(scopes),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var scope=_step9.value;if(!scope){continue;}var value=scope[key];if(defined(value)){return value;}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}function getKeysFromAllScopes(target){var keys=target._keys;if(!keys){keys=target._keys=resolveKeysFromAllScopes(target._scopes);}return keys;}function resolveKeysFromAllScopes(scopes){var set4=/* @__PURE__ */new Set();var _iterator10=_createForOfIteratorHelper(scopes),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var scope=_step10.value;var _iterator11=_createForOfIteratorHelper(Object.keys(scope).filter(function(k){return!k.startsWith("_");})),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var key=_step11.value;set4.add(key);}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}return Array.from(set4);}function _parseObjectDataRadialScale(meta,data,start2,count){var iScale=meta.iScale;var _this$_parsing$key=this._parsing.key,key=_this$_parsing$key===void 0?"r":_this$_parsing$key;var parsed=new Array(count);var i,ilen,index3,item;for(i=0,ilen=count;i<ilen;++i){index3=i+start2;item=data[index3];parsed[i]={r:iScale.parse(resolveObjectKey(item,key),index3)};}return parsed;}var EPSILON=Number.EPSILON||1e-14;var getPoint=function getPoint(points,i){return i<points.length&&!points[i].skip&&points[i];};var getValueAxis=function getValueAxis(indexAxis){return indexAxis==="x"?"y":"x";};function splineCurve(firstPoint,middlePoint,afterPoint,t){var previous=firstPoint.skip?middlePoint:firstPoint;var current=middlePoint;var next=afterPoint.skip?middlePoint:afterPoint;var d01=distanceBetweenPoints(current,previous);var d12=distanceBetweenPoints(next,current);var s01=d01/(d01+d12);var s12=d12/(d01+d12);s01=isNaN(s01)?0:s01;s12=isNaN(s12)?0:s12;var fa=t*s01;var fb=t*s12;return{previous:{x:current.x-fa*(next.x-previous.x),y:current.y-fa*(next.y-previous.y)},next:{x:current.x+fb*(next.x-previous.x),y:current.y+fb*(next.y-previous.y)}};}function monotoneAdjust(points,deltaK,mK){var pointsLen=points.length;var alphaK,betaK,tauK,squaredMagnitude,pointCurrent;var pointAfter=getPoint(points,0);for(var i=0;i<pointsLen-1;++i){pointCurrent=pointAfter;pointAfter=getPoint(points,i+1);if(!pointCurrent||!pointAfter){continue;}if(almostEquals(deltaK[i],0,EPSILON)){mK[i]=mK[i+1]=0;continue;}alphaK=mK[i]/deltaK[i];betaK=mK[i+1]/deltaK[i];squaredMagnitude=Math.pow(alphaK,2)+Math.pow(betaK,2);if(squaredMagnitude<=9){continue;}tauK=3/Math.sqrt(squaredMagnitude);mK[i]=alphaK*tauK*deltaK[i];mK[i+1]=betaK*tauK*deltaK[i];}}function monotoneCompute(points,mK){var indexAxis=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"x";var valueAxis=getValueAxis(indexAxis);var pointsLen=points.length;var delta,pointBefore,pointCurrent;var pointAfter=getPoint(points,0);for(var i=0;i<pointsLen;++i){pointBefore=pointCurrent;pointCurrent=pointAfter;pointAfter=getPoint(points,i+1);if(!pointCurrent){continue;}var iPixel=pointCurrent[indexAxis];var vPixel=pointCurrent[valueAxis];if(pointBefore){delta=(iPixel-pointBefore[indexAxis])/3;pointCurrent["cp1".concat(indexAxis)]=iPixel-delta;pointCurrent["cp1".concat(valueAxis)]=vPixel-delta*mK[i];}if(pointAfter){delta=(pointAfter[indexAxis]-iPixel)/3;pointCurrent["cp2".concat(indexAxis)]=iPixel+delta;pointCurrent["cp2".concat(valueAxis)]=vPixel+delta*mK[i];}}}function splineCurveMonotone(points){var indexAxis=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"x";var valueAxis=getValueAxis(indexAxis);var pointsLen=points.length;var deltaK=Array(pointsLen).fill(0);var mK=Array(pointsLen);var i,pointBefore,pointCurrent;var pointAfter=getPoint(points,0);for(i=0;i<pointsLen;++i){pointBefore=pointCurrent;pointCurrent=pointAfter;pointAfter=getPoint(points,i+1);if(!pointCurrent){continue;}if(pointAfter){var slopeDelta=pointAfter[indexAxis]-pointCurrent[indexAxis];deltaK[i]=slopeDelta!==0?(pointAfter[valueAxis]-pointCurrent[valueAxis])/slopeDelta:0;}mK[i]=!pointBefore?deltaK[i]:!pointAfter?deltaK[i-1]:sign(deltaK[i-1])!==sign(deltaK[i])?0:(deltaK[i-1]+deltaK[i])/2;}monotoneAdjust(points,deltaK,mK);monotoneCompute(points,mK,indexAxis);}function capControlPoint(pt,min3,max3){return Math.max(Math.min(pt,max3),min3);}function capBezierPoints(points,area){var i,ilen,point,inArea,inAreaPrev;var inAreaNext=_isPointInArea(points[0],area);for(i=0,ilen=points.length;i<ilen;++i){inAreaPrev=inArea;inArea=inAreaNext;inAreaNext=i<ilen-1&&_isPointInArea(points[i+1],area);if(!inArea){continue;}point=points[i];if(inAreaPrev){point.cp1x=capControlPoint(point.cp1x,area.left,area.right);point.cp1y=capControlPoint(point.cp1y,area.top,area.bottom);}if(inAreaNext){point.cp2x=capControlPoint(point.cp2x,area.left,area.right);point.cp2y=capControlPoint(point.cp2y,area.top,area.bottom);}}}function _updateBezierControlPoints(points,options,area,loop,indexAxis){var i,ilen,point,controlPoints;if(options.spanGaps){points=points.filter(function(pt){return!pt.skip;});}if(options.cubicInterpolationMode==="monotone"){splineCurveMonotone(points,indexAxis);}else{var prev=loop?points[points.length-1]:points[0];for(i=0,ilen=points.length;i<ilen;++i){point=points[i];controlPoints=splineCurve(prev,point,points[Math.min(i+1,ilen-(loop?0:1))%ilen],options.tension);point.cp1x=controlPoints.previous.x;point.cp1y=controlPoints.previous.y;point.cp2x=controlPoints.next.x;point.cp2y=controlPoints.next.y;prev=point;}}if(options.capBezierPoints){capBezierPoints(points,area);}}function _isDomSupported(){return typeof window!=="undefined"&&typeof document!=="undefined";}function _getParentNode(domNode){var parent=domNode.parentNode;if(parent&&parent.toString()==="[object ShadowRoot]"){parent=parent.host;}return parent;}function parseMaxStyle(styleValue2,node,parentProperty){var valueInPixels;if(typeof styleValue2==="string"){valueInPixels=parseInt(styleValue2,10);if(styleValue2.indexOf("%")!==-1){valueInPixels=valueInPixels/100*node.parentNode[parentProperty];}}else{valueInPixels=styleValue2;}return valueInPixels;}var getComputedStyle=function getComputedStyle(element){return window.getComputedStyle(element,null);};function getStyle(el,property){return getComputedStyle(el).getPropertyValue(property);}var positions=["top","right","bottom","left"];function getPositionedStyle(styles,style,suffix){var result={};suffix=suffix?"-"+suffix:"";for(var i=0;i<4;i++){var pos=positions[i];result[pos]=parseFloat(styles[style+"-"+pos+suffix])||0;}result.width=result.left+result.right;result.height=result.top+result.bottom;return result;}var useOffsetPos=function useOffsetPos(x,y,target){return(x>0||y>0)&&(!target||!target.shadowRoot);};function getCanvasPosition(e,canvas){var touches=e.touches;var source=touches&&touches.length?touches[0]:e;var offsetX=source.offsetX,offsetY=source.offsetY;var box=false;var x,y;if(useOffsetPos(offsetX,offsetY,e.target)){x=offsetX;y=offsetY;}else{var rect=canvas.getBoundingClientRect();x=source.clientX-rect.left;y=source.clientY-rect.top;box=true;}return{x:x,y:y,box:box};}function getRelativePosition(evt,chart){if("native"in evt){return evt;}var canvas=chart.canvas,currentDevicePixelRatio=chart.currentDevicePixelRatio;var style=getComputedStyle(canvas);var borderBox=style.boxSizing==="border-box";var paddings=getPositionedStyle(style,"padding");var borders=getPositionedStyle(style,"border","width");var _getCanvasPosition=getCanvasPosition(evt,canvas),x=_getCanvasPosition.x,y=_getCanvasPosition.y,box=_getCanvasPosition.box;var xOffset=paddings.left+(box&&borders.left);var yOffset=paddings.top+(box&&borders.top);var width=chart.width,height=chart.height;if(borderBox){width-=paddings.width+borders.width;height-=paddings.height+borders.height;}return{x:Math.round((x-xOffset)/width*canvas.width/currentDevicePixelRatio),y:Math.round((y-yOffset)/height*canvas.height/currentDevicePixelRatio)};}function getContainerSize(canvas,width,height){var maxWidth,maxHeight;if(width===void 0||height===void 0){var container=_getParentNode(canvas);if(!container){width=canvas.clientWidth;height=canvas.clientHeight;}else{var rect=container.getBoundingClientRect();var containerStyle=getComputedStyle(container);var containerBorder=getPositionedStyle(containerStyle,"border","width");var containerPadding=getPositionedStyle(containerStyle,"padding");width=rect.width-containerPadding.width-containerBorder.width;height=rect.height-containerPadding.height-containerBorder.height;maxWidth=parseMaxStyle(containerStyle.maxWidth,container,"clientWidth");maxHeight=parseMaxStyle(containerStyle.maxHeight,container,"clientHeight");}}return{width:width,height:height,maxWidth:maxWidth||INFINITY,maxHeight:maxHeight||INFINITY};}var round1=function round1(v){return Math.round(v*10)/10;};function _getMaximumSize(canvas,bbWidth,bbHeight,aspectRatio){var style=getComputedStyle(canvas);var margins=getPositionedStyle(style,"margin");var maxWidth=parseMaxStyle(style.maxWidth,canvas,"clientWidth")||INFINITY;var maxHeight=parseMaxStyle(style.maxHeight,canvas,"clientHeight")||INFINITY;var containerSize=getContainerSize(canvas,bbWidth,bbHeight);var width=containerSize.width,height=containerSize.height;if(style.boxSizing==="content-box"){var borders=getPositionedStyle(style,"border","width");var paddings=getPositionedStyle(style,"padding");width-=paddings.width+borders.width;height-=paddings.height+borders.height;}width=Math.max(0,width-margins.width);height=Math.max(0,aspectRatio?Math.floor(width/aspectRatio):height-margins.height);width=round1(Math.min(width,maxWidth,containerSize.maxWidth));height=round1(Math.min(height,maxHeight,containerSize.maxHeight));if(width&&!height){height=round1(width/2);}return{width:width,height:height};}function retinaScale(chart,forceRatio,forceStyle){var pixelRatio=forceRatio||1;var deviceHeight=Math.floor(chart.height*pixelRatio);var deviceWidth=Math.floor(chart.width*pixelRatio);chart.height=deviceHeight/pixelRatio;chart.width=deviceWidth/pixelRatio;var canvas=chart.canvas;if(canvas.style&&(forceStyle||!canvas.style.height&&!canvas.style.width)){canvas.style.height="".concat(chart.height,"px");canvas.style.width="".concat(chart.width,"px");}if(chart.currentDevicePixelRatio!==pixelRatio||canvas.height!==deviceHeight||canvas.width!==deviceWidth){chart.currentDevicePixelRatio=pixelRatio;canvas.height=deviceHeight;canvas.width=deviceWidth;chart.ctx.setTransform(pixelRatio,0,0,pixelRatio,0,0);return true;}return false;}var supportsEventListenerOptions=function(){var passiveSupported=false;try{var options={get passive(){passiveSupported=true;return false;}};window.addEventListener("test",null,options);window.removeEventListener("test",null,options);}catch(e){}return passiveSupported;}();function readUsedSize(element,property){var value=getStyle(element,property);var matches=value&&value.match(/^(\d+)(\.\d+)?px$/);return matches?+matches[1]:void 0;}function _pointInLine(p1,p2,t,mode){return{x:p1.x+t*(p2.x-p1.x),y:p1.y+t*(p2.y-p1.y)};}function _steppedInterpolation(p1,p2,t,mode){return{x:p1.x+t*(p2.x-p1.x),y:mode==="middle"?t<0.5?p1.y:p2.y:mode==="after"?t<1?p1.y:p2.y:t>0?p2.y:p1.y};}function _bezierInterpolation(p1,p2,t,mode){var cp1={x:p1.cp2x,y:p1.cp2y};var cp2={x:p2.cp1x,y:p2.cp1y};var a=_pointInLine(p1,cp1,t);var b=_pointInLine(cp1,cp2,t);var c=_pointInLine(cp2,p2,t);var d=_pointInLine(a,b,t);var e=_pointInLine(b,c,t);return _pointInLine(d,e,t);}var intlCache=/* @__PURE__ */new Map();function getNumberFormat(locale2,options){options=options||{};var cacheKey=locale2+JSON.stringify(options);var formatter2=intlCache.get(cacheKey);if(!formatter2){formatter2=new Intl.NumberFormat(locale2,options);intlCache.set(cacheKey,formatter2);}return formatter2;}function formatNumber(num,locale2,options){return getNumberFormat(locale2,options).format(num);}var getRightToLeftAdapter=function getRightToLeftAdapter(rectX,width){return{x:function x(_x){return rectX+rectX+width-_x;},setWidth:function setWidth(w){width=w;},textAlign:function textAlign(align){if(align==="center"){return align;}return align==="right"?"left":"right";},xPlus:function xPlus(x,value){return x-value;},leftForLtr:function leftForLtr(x,itemWidth){return x-itemWidth;}};};var getLeftToRightAdapter=function getLeftToRightAdapter(){return{x:function x(_x2){return _x2;},setWidth:function setWidth(w){},textAlign:function textAlign(align){return align;},xPlus:function xPlus(x,value){return x+value;},leftForLtr:function leftForLtr(x,_itemWidth){return x;}};};function getRtlAdapter(rtl,rectX,width){return rtl?getRightToLeftAdapter(rectX,width):getLeftToRightAdapter();}function overrideTextDirection(ctx,direction){var style,original;if(direction==="ltr"||direction==="rtl"){style=ctx.canvas.style;original=[style.getPropertyValue("direction"),style.getPropertyPriority("direction")];style.setProperty("direction",direction,"important");ctx.prevTextDirection=original;}}function restoreTextDirection(ctx,original){if(original!==void 0){delete ctx.prevTextDirection;ctx.canvas.style.setProperty("direction",original[0],original[1]);}}function propertyFn(property){if(property==="angle"){return{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle};}return{between:_isBetween,compare:function compare(a,b){return a-b;},normalize:function normalize(x){return x;}};}function normalizeSegment(_ref){var start2=_ref.start,end=_ref.end,count=_ref.count,loop=_ref.loop,style=_ref.style;return{start:start2%count,end:end%count,loop:loop&&(end-start2+1)%count===0,style:style};}function getSegment(segment,points,bounds){var property=bounds.property,startBound=bounds.start,endBound=bounds.end;var _propertyFn=propertyFn(property),between=_propertyFn.between,normalize=_propertyFn.normalize;var count=points.length;var start2=segment.start,end=segment.end,loop=segment.loop;var i,ilen;if(loop){start2+=count;end+=count;for(i=0,ilen=count;i<ilen;++i){if(!between(normalize(points[start2%count][property]),startBound,endBound)){break;}start2--;end--;}start2%=count;end%=count;}if(end<start2){end+=count;}return{start:start2,end:end,loop:loop,style:segment.style};}function _boundSegment(segment,points,bounds){if(!bounds){return[segment];}var property=bounds.property,startBound=bounds.start,endBound=bounds.end;var count=points.length;var _propertyFn2=propertyFn(property),compare=_propertyFn2.compare,between=_propertyFn2.between,normalize=_propertyFn2.normalize;var _getSegment=getSegment(segment,points,bounds),start2=_getSegment.start,end=_getSegment.end,loop=_getSegment.loop,style=_getSegment.style;var result=[];var inside=false;var subStart=null;var value,point,prevValue;var startIsBefore=function startIsBefore(){return between(startBound,prevValue,value)&&compare(startBound,prevValue)!==0;};var endIsBefore=function endIsBefore(){return compare(endBound,value)===0||between(endBound,prevValue,value);};var shouldStart=function shouldStart(){return inside||startIsBefore();};var shouldStop=function shouldStop(){return!inside||endIsBefore();};for(var i=start2,prev=start2;i<=end;++i){point=points[i%count];if(point.skip){continue;}value=normalize(point[property]);if(value===prevValue){continue;}inside=between(value,startBound,endBound);if(subStart===null&&shouldStart()){subStart=compare(value,startBound)===0?i:prev;}if(subStart!==null&&shouldStop()){result.push(normalizeSegment({start:subStart,end:i,loop:loop,count:count,style:style}));subStart=null;}prev=i;prevValue=value;}if(subStart!==null){result.push(normalizeSegment({start:subStart,end:end,loop:loop,count:count,style:style}));}return result;}function _boundSegments(line,bounds){var result=[];var segments=line.segments;for(var i=0;i<segments.length;i++){var sub=_boundSegment(segments[i],line.points,bounds);if(sub.length){result.push.apply(result,_toConsumableArray(sub));}}return result;}function findStartAndEnd(points,count,loop,spanGaps){var start2=0;var end=count-1;if(loop&&!spanGaps){while(start2<count&&!points[start2].skip){start2++;}}while(start2<count&&points[start2].skip){start2++;}start2%=count;if(loop){end+=start2;}while(end>start2&&points[end%count].skip){end--;}end%=count;return{start:start2,end:end};}function solidSegments(points,start2,max3,loop){var count=points.length;var result=[];var last=start2;var prev=points[start2];var end;for(end=start2+1;end<=max3;++end){var cur=points[end%count];if(cur.skip||cur.stop){if(!prev.skip){loop=false;result.push({start:start2%count,end:(end-1)%count,loop:loop});start2=last=cur.stop?end:null;}}else{last=end;if(prev.skip){start2=end;}}prev=cur;}if(last!==null){result.push({start:start2%count,end:last%count,loop:loop});}return result;}function _computeSegments(line,segmentOptions){var points=line.points;var spanGaps=line.options.spanGaps;var count=points.length;if(!count){return[];}var loop=!!line._loop;var _findStartAndEnd=findStartAndEnd(points,count,loop,spanGaps),start2=_findStartAndEnd.start,end=_findStartAndEnd.end;if(spanGaps===true){return splitByStyles(line,[{start:start2,end:end,loop:loop}],points,segmentOptions);}var max3=end<start2?end+count:end;var completeLoop=!!line._fullLoop&&start2===0&&end===count-1;return splitByStyles(line,solidSegments(points,start2,max3,completeLoop),points,segmentOptions);}function splitByStyles(line,segments,points,segmentOptions){if(!segmentOptions||!segmentOptions.setContext||!points){return segments;}return doSplitByStyles(line,segments,points,segmentOptions);}function doSplitByStyles(line,segments,points,segmentOptions){var chartContext=line._chart.getContext();var baseStyle=readStyle(line.options);var datasetIndex=line._datasetIndex,spanGaps=line.options.spanGaps;var count=points.length;var result=[];var prevStyle=baseStyle;var start2=segments[0].start;var i=start2;function addStyle(s,e,l,st){var dir=spanGaps?-1:1;if(s===e){return;}s+=count;while(points[s%count].skip){s-=dir;}while(points[e%count].skip){e+=dir;}if(s%count!==e%count){result.push({start:s%count,end:e%count,loop:l,style:st});prevStyle=st;start2=e%count;}}var _iterator12=_createForOfIteratorHelper(segments),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var segment=_step12.value;start2=spanGaps?start2:segment.start;var prev=points[start2%count];var style=void 0;for(i=start2+1;i<=segment.end;i++){var pt=points[i%count];style=readStyle(segmentOptions.setContext(createContext(chartContext,{type:"segment",p0:prev,p1:pt,p0DataIndex:(i-1)%count,p1DataIndex:i%count,datasetIndex:datasetIndex})));if(styleChanged(style,prevStyle)){addStyle(start2,i-1,segment.loop,prevStyle);}prev=pt;prevStyle=style;}if(start2<i-1){addStyle(start2,i-1,segment.loop,prevStyle);}}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}return result;}function readStyle(options){return{backgroundColor:options.backgroundColor,borderCapStyle:options.borderCapStyle,borderDash:options.borderDash,borderDashOffset:options.borderDashOffset,borderJoinStyle:options.borderJoinStyle,borderWidth:options.borderWidth,borderColor:options.borderColor};}function styleChanged(style,prevStyle){return prevStyle&&JSON.stringify(style)!==JSON.stringify(prevStyle);}// node_modules/chart.js/dist/chart.mjs
var Animator=/*#__PURE__*/function(){function Animator(){_classCallCheck(this,Animator);this._request=null;this._charts=/* @__PURE__ */new Map();this._running=false;this._lastDate=void 0;}_createClass(Animator,[{key:"_notify",value:function _notify(chart,anims,date,type2){var callbacks=anims.listeners[type2];var numSteps=anims.duration;callbacks.forEach(function(fn){return fn({chart:chart,initial:anims.initial,numSteps:numSteps,currentStep:Math.min(date-anims.start,numSteps)});});}},{key:"_refresh",value:function _refresh(){var _this=this;if(this._request){return;}this._running=true;this._request=requestAnimFrame.call(window,function(){_this._update();_this._request=null;if(_this._running){_this._refresh();}});}},{key:"_update",value:function _update(){var _this2=this;var date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Date.now();var remaining=0;this._charts.forEach(function(anims,chart){if(!anims.running||!anims.items.length){return;}var items=anims.items;var i=items.length-1;var draw3=false;var item;for(;i>=0;--i){item=items[i];if(item._active){if(item._total>anims.duration){anims.duration=item._total;}item.tick(date);draw3=true;}else{items[i]=items[items.length-1];items.pop();}}if(draw3){chart.draw();_this2._notify(chart,anims,date,"progress");}if(!items.length){anims.running=false;_this2._notify(chart,anims,date,"complete");anims.initial=false;}remaining+=items.length;});this._lastDate=date;if(remaining===0){this._running=false;}}},{key:"_getAnims",value:function _getAnims(chart){var charts=this._charts;var anims=charts.get(chart);if(!anims){anims={running:false,initial:true,items:[],listeners:{complete:[],progress:[]}};charts.set(chart,anims);}return anims;}},{key:"listen",value:function listen(chart,event,cb){this._getAnims(chart).listeners[event].push(cb);}},{key:"add",value:function add(chart,items){var _this$_getAnims$items;if(!items||!items.length){return;}(_this$_getAnims$items=this._getAnims(chart).items).push.apply(_this$_getAnims$items,_toConsumableArray(items));}},{key:"has",value:function has(chart){return this._getAnims(chart).items.length>0;}},{key:"start",value:function start(chart){var anims=this._charts.get(chart);if(!anims){return;}anims.running=true;anims.start=Date.now();anims.duration=anims.items.reduce(function(acc,cur){return Math.max(acc,cur._duration);},0);this._refresh();}},{key:"running",value:function running(chart){if(!this._running){return false;}var anims=this._charts.get(chart);if(!anims||!anims.running||!anims.items.length){return false;}return true;}},{key:"stop",value:function stop(chart){var anims=this._charts.get(chart);if(!anims||!anims.items.length){return;}var items=anims.items;var i=items.length-1;for(;i>=0;--i){items[i].cancel();}anims.items=[];this._notify(chart,anims,Date.now(),"complete");}},{key:"remove",value:function remove(chart){return this._charts["delete"](chart);}}]);return Animator;}();var animator=new Animator();var transparent="transparent";var interpolators={"boolean":function boolean(from2,to2,factor){return factor>0.5?to2:from2;},color:function color(from2,to2,factor){var c0=_color(from2||transparent);var c1=c0.valid&&_color(to2||transparent);return c1&&c1.valid?c1.mix(c0,factor).hexString():to2;},number:function number(from2,to2,factor){return from2+(to2-from2)*factor;}};var Animation=/*#__PURE__*/function(){function Animation(cfg,target,prop,to2){_classCallCheck(this,Animation);var currentValue=target[prop];to2=resolve([cfg.to,to2,currentValue,cfg.from]);var from2=resolve([cfg.from,currentValue,to2]);this._active=true;this._fn=cfg.fn||interpolators[cfg.type||_typeof(from2)];this._easing=effects[cfg.easing]||effects.linear;this._start=Math.floor(Date.now()+(cfg.delay||0));this._duration=this._total=Math.floor(cfg.duration);this._loop=!!cfg.loop;this._target=target;this._prop=prop;this._from=from2;this._to=to2;this._promises=void 0;}_createClass(Animation,[{key:"active",value:function active(){return this._active;}},{key:"update",value:function update(cfg,to2,date){if(this._active){this._notify(false);var currentValue=this._target[this._prop];var elapsed=date-this._start;var remain=this._duration-elapsed;this._start=date;this._duration=Math.floor(Math.max(remain,cfg.duration));this._total+=elapsed;this._loop=!!cfg.loop;this._to=resolve([cfg.to,to2,currentValue,cfg.from]);this._from=resolve([cfg.from,currentValue,to2]);}}},{key:"cancel",value:function cancel(){if(this._active){this.tick(Date.now());this._active=false;this._notify(false);}}},{key:"tick",value:function tick(date){var elapsed=date-this._start;var duration=this._duration;var prop=this._prop;var from2=this._from;var loop=this._loop;var to2=this._to;var factor;this._active=from2!==to2&&(loop||elapsed<duration);if(!this._active){this._target[prop]=to2;this._notify(true);return;}if(elapsed<0){this._target[prop]=from2;return;}factor=elapsed/duration%2;factor=loop&&factor>1?2-factor:factor;factor=this._easing(Math.min(1,Math.max(0,factor)));this._target[prop]=this._fn(from2,to2,factor);}},{key:"wait",value:function wait(){var promises=this._promises||(this._promises=[]);return new Promise(function(res,rej){promises.push({res:res,rej:rej});});}},{key:"_notify",value:function _notify(resolved){var method=resolved?"res":"rej";var promises=this._promises||[];for(var i=0;i<promises.length;i++){promises[i][method]();}}}]);return Animation;}();var numbers=["x","y","borderWidth","radius","tension"];var colors=["color","borderColor","backgroundColor"];defaults.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var animationOptions=Object.keys(defaults.animation);defaults.describe("animation",{_fallback:false,_indexable:false,_scriptable:function _scriptable(name){return name!=="onProgress"&&name!=="onComplete"&&name!=="fn";}});defaults.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}});defaults.describe("animations",{_fallback:"animation"});defaults.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function fn(v){return v|0;}}}}});var Animations=/*#__PURE__*/function(){function Animations(chart,config){_classCallCheck(this,Animations);this._chart=chart;this._properties=/* @__PURE__ */new Map();this.configure(config);}_createClass(Animations,[{key:"configure",value:function configure(config){if(!isObject(config)){return;}var animatedProps=this._properties;Object.getOwnPropertyNames(config).forEach(function(key){var cfg=config[key];if(!isObject(cfg)){return;}var resolved={};for(var _i=0,_animationOptions=animationOptions;_i<_animationOptions.length;_i++){var option=_animationOptions[_i];resolved[option]=cfg[option];}(isArray(cfg.properties)&&cfg.properties||[key]).forEach(function(prop){if(prop===key||!animatedProps.has(prop)){animatedProps.set(prop,resolved);}});});}},{key:"_animateOptions",value:function _animateOptions(target,values){var newOptions=values.options;var options=resolveTargetOptions(target,newOptions);if(!options){return[];}var animations=this._createAnimations(options,newOptions);if(newOptions.$shared){awaitAll(target.options.$animations,newOptions).then(function(){target.options=newOptions;},function(){});}return animations;}},{key:"_createAnimations",value:function _createAnimations(target,values){var animatedProps=this._properties;var animations=[];var running=target.$animations||(target.$animations={});var props=Object.keys(values);var date=Date.now();var i;for(i=props.length-1;i>=0;--i){var prop=props[i];if(prop.charAt(0)==="$"){continue;}if(prop==="options"){animations.push.apply(animations,_toConsumableArray(this._animateOptions(target,values)));continue;}var value=values[prop];var animation=running[prop];var cfg=animatedProps.get(prop);if(animation){if(cfg&&animation.active()){animation.update(cfg,value,date);continue;}else{animation.cancel();}}if(!cfg||!cfg.duration){target[prop]=value;continue;}running[prop]=animation=new Animation(cfg,target,prop,value);animations.push(animation);}return animations;}},{key:"update",value:function update(target,values){if(this._properties.size===0){Object.assign(target,values);return;}var animations=this._createAnimations(target,values);if(animations.length){animator.add(this._chart,animations);return true;}}}]);return Animations;}();function awaitAll(animations,properties){var running=[];var keys=Object.keys(properties);for(var i=0;i<keys.length;i++){var anim=animations[keys[i]];if(anim&&anim.active()){running.push(anim.wait());}}return Promise.all(running);}function resolveTargetOptions(target,newOptions){if(!newOptions){return;}var options=target.options;if(!options){target.options=newOptions;return;}if(options.$shared){target.options=options=Object.assign({},options,{$shared:false,$animations:{}});}return options;}function scaleClip(scale,allowedOverflow){var opts=scale&&scale.options||{};var reverse=opts.reverse;var min3=opts.min===void 0?allowedOverflow:0;var max3=opts.max===void 0?allowedOverflow:0;return{start:reverse?max3:min3,end:reverse?min3:max3};}function defaultClip(xScale,yScale,allowedOverflow){if(allowedOverflow===false){return false;}var x=scaleClip(xScale,allowedOverflow);var y=scaleClip(yScale,allowedOverflow);return{top:y.end,right:x.end,bottom:y.start,left:x.start};}function toClip(value){var t,r,b,l;if(isObject(value)){t=value.top;r=value.right;b=value.bottom;l=value.left;}else{t=r=b=l=value;}return{top:t,right:r,bottom:b,left:l,disabled:value===false};}function getSortedDatasetIndices(chart,filterVisible){var keys=[];var metasets=chart._getSortedDatasetMetas(filterVisible);var i,ilen;for(i=0,ilen=metasets.length;i<ilen;++i){keys.push(metasets[i].index);}return keys;}function _applyStack(stack,value,dsIndex){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var keys=stack.keys;var singleMode=options.mode==="single";var i,ilen,datasetIndex,otherValue;if(value===null){return;}for(i=0,ilen=keys.length;i<ilen;++i){datasetIndex=+keys[i];if(datasetIndex===dsIndex){if(options.all){continue;}break;}otherValue=stack.values[datasetIndex];if(isNumberFinite(otherValue)&&(singleMode||value===0||sign(value)===sign(otherValue))){value+=otherValue;}}return value;}function convertObjectDataToArray(data){var keys=Object.keys(data);var adata=new Array(keys.length);var i,ilen,key;for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];adata[i]={x:key,y:data[key]};}return adata;}function isStacked(scale,meta){var stacked=scale&&scale.options.stacked;return stacked||stacked===void 0&&meta.stack!==void 0;}function getStackKey(indexScale,valueScale,meta){return"".concat(indexScale.id,".").concat(valueScale.id,".").concat(meta.stack||meta.type);}function getUserBounds(scale){var _scale$getUserBounds=scale.getUserBounds(),min3=_scale$getUserBounds.min,max3=_scale$getUserBounds.max,minDefined=_scale$getUserBounds.minDefined,maxDefined=_scale$getUserBounds.maxDefined;return{min:minDefined?min3:Number.NEGATIVE_INFINITY,max:maxDefined?max3:Number.POSITIVE_INFINITY};}function getOrCreateStack(stacks,stackKey,indexValue){var subStack=stacks[stackKey]||(stacks[stackKey]={});return subStack[indexValue]||(subStack[indexValue]={});}function getLastIndexInStack(stack,vScale,positive,type2){var _iterator13=_createForOfIteratorHelper(vScale.getMatchingVisibleMetas(type2).reverse()),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var meta=_step13.value;var value=stack[meta.index];if(positive&&value>0||!positive&&value<0){return meta.index;}}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}return null;}function updateStacks(controller,parsed){var chart=controller.chart,meta=controller._cachedMeta;var stacks=chart._stacks||(chart._stacks={});var iScale=meta.iScale,vScale=meta.vScale,datasetIndex=meta.index;var iAxis=iScale.axis;var vAxis=vScale.axis;var key=getStackKey(iScale,vScale,meta);var ilen=parsed.length;var stack;for(var i=0;i<ilen;++i){var item=parsed[i];var index3=item[iAxis],value=item[vAxis];var itemStacks=item._stacks||(item._stacks={});stack=itemStacks[vAxis]=getOrCreateStack(stacks,key,index3);stack[datasetIndex]=value;stack._top=getLastIndexInStack(stack,vScale,true,meta.type);stack._bottom=getLastIndexInStack(stack,vScale,false,meta.type);}}function getFirstScaleId(chart,axis){var scales2=chart.scales;return Object.keys(scales2).filter(function(key){return scales2[key].axis===axis;}).shift();}function createDatasetContext(parent,index3){return createContext(parent,{active:false,dataset:void 0,datasetIndex:index3,index:index3,mode:"default",type:"dataset"});}function createDataContext(parent,index3,element){return createContext(parent,{active:false,dataIndex:index3,parsed:void 0,raw:void 0,element:element,index:index3,mode:"default",type:"data"});}function clearStacks(meta,items){var datasetIndex=meta.controller.index;var axis=meta.vScale&&meta.vScale.axis;if(!axis){return;}items=items||meta._parsed;var _iterator14=_createForOfIteratorHelper(items),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var parsed=_step14.value;var stacks=parsed._stacks;if(!stacks||stacks[axis]===void 0||stacks[axis][datasetIndex]===void 0){return;}delete stacks[axis][datasetIndex];}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}}var isDirectUpdateMode=function isDirectUpdateMode(mode){return mode==="reset"||mode==="none";};var cloneIfNotShared=function cloneIfNotShared(cached,shared){return shared?cached:Object.assign({},cached);};var createStack=function createStack(canStack,meta,chart){return canStack&&!meta.hidden&&meta._stacked&&{keys:getSortedDatasetIndices(chart,true),values:null};};var DatasetController=/*#__PURE__*/function(){function DatasetController(chart,datasetIndex){_classCallCheck(this,DatasetController);this.chart=chart;this._ctx=chart.ctx;this.index=datasetIndex;this._cachedDataOpts={};this._cachedMeta=this.getMeta();this._type=this._cachedMeta.type;this.options=void 0;this._parsing=false;this._data=void 0;this._objectData=void 0;this._sharedOptions=void 0;this._drawStart=void 0;this._drawCount=void 0;this.enableOptionSharing=false;this.supportsDecimation=false;this.$context=void 0;this._syncList=[];this.initialize();}_createClass(DatasetController,[{key:"initialize",value:function initialize(){var meta=this._cachedMeta;this.configure();this.linkScales();meta._stacked=isStacked(meta.vScale,meta);this.addElements();}},{key:"updateIndex",value:function updateIndex(datasetIndex){if(this.index!==datasetIndex){clearStacks(this._cachedMeta);}this.index=datasetIndex;}},{key:"linkScales",value:function linkScales(){var chart=this.chart;var meta=this._cachedMeta;var dataset=this.getDataset();var chooseId=function chooseId(axis,x,y,r){return axis==="x"?x:axis==="r"?r:y;};var xid=meta.xAxisID=valueOrDefault(dataset.xAxisID,getFirstScaleId(chart,"x"));var yid=meta.yAxisID=valueOrDefault(dataset.yAxisID,getFirstScaleId(chart,"y"));var rid=meta.rAxisID=valueOrDefault(dataset.rAxisID,getFirstScaleId(chart,"r"));var indexAxis=meta.indexAxis;var iid=meta.iAxisID=chooseId(indexAxis,xid,yid,rid);var vid=meta.vAxisID=chooseId(indexAxis,yid,xid,rid);meta.xScale=this.getScaleForId(xid);meta.yScale=this.getScaleForId(yid);meta.rScale=this.getScaleForId(rid);meta.iScale=this.getScaleForId(iid);meta.vScale=this.getScaleForId(vid);}},{key:"getDataset",value:function getDataset(){return this.chart.data.datasets[this.index];}},{key:"getMeta",value:function getMeta(){return this.chart.getDatasetMeta(this.index);}},{key:"getScaleForId",value:function getScaleForId(scaleID){return this.chart.scales[scaleID];}},{key:"_getOtherScale",value:function _getOtherScale(scale){var meta=this._cachedMeta;return scale===meta.iScale?meta.vScale:meta.iScale;}},{key:"reset",value:function reset(){this._update("reset");}},{key:"_destroy",value:function _destroy(){var meta=this._cachedMeta;if(this._data){unlistenArrayEvents(this._data,this);}if(meta._stacked){clearStacks(meta);}}},{key:"_dataCheck",value:function _dataCheck(){var dataset=this.getDataset();var data=dataset.data||(dataset.data=[]);var _data=this._data;if(isObject(data)){this._data=convertObjectDataToArray(data);}else if(_data!==data){if(_data){unlistenArrayEvents(_data,this);var meta=this._cachedMeta;clearStacks(meta);meta._parsed=[];}if(data&&Object.isExtensible(data)){listenArrayEvents(data,this);}this._syncList=[];this._data=data;}}},{key:"addElements",value:function addElements(){var meta=this._cachedMeta;this._dataCheck();if(this.datasetElementType){meta.dataset=new this.datasetElementType();}}},{key:"buildOrUpdateElements",value:function buildOrUpdateElements(resetNewElements){var meta=this._cachedMeta;var dataset=this.getDataset();var stackChanged=false;this._dataCheck();var oldStacked=meta._stacked;meta._stacked=isStacked(meta.vScale,meta);if(meta.stack!==dataset.stack){stackChanged=true;clearStacks(meta);meta.stack=dataset.stack;}this._resyncElements(resetNewElements);if(stackChanged||oldStacked!==meta._stacked){updateStacks(this,meta._parsed);}}},{key:"configure",value:function configure(){var config=this.chart.config;var scopeKeys=config.datasetScopeKeys(this._type);var scopes=config.getOptionScopes(this.getDataset(),scopeKeys,true);this.options=config.createResolver(scopes,this.getContext());this._parsing=this.options.parsing;this._cachedDataOpts={};}},{key:"parse",value:function parse(start2,count){var meta=this._cachedMeta,data=this._data;var iScale=meta.iScale,_stacked=meta._stacked;var iAxis=iScale.axis;var sorted=start2===0&&count===data.length?true:meta._sorted;var prev=start2>0&&meta._parsed[start2-1];var i,cur,parsed;if(this._parsing===false){meta._parsed=data;meta._sorted=true;parsed=data;}else{if(isArray(data[start2])){parsed=this.parseArrayData(meta,data,start2,count);}else if(isObject(data[start2])){parsed=this.parseObjectData(meta,data,start2,count);}else{parsed=this.parsePrimitiveData(meta,data,start2,count);}var isNotInOrderComparedToPrev=function isNotInOrderComparedToPrev(){return cur[iAxis]===null||prev&&cur[iAxis]<prev[iAxis];};for(i=0;i<count;++i){meta._parsed[i+start2]=cur=parsed[i];if(sorted){if(isNotInOrderComparedToPrev()){sorted=false;}prev=cur;}}meta._sorted=sorted;}if(_stacked){updateStacks(this,parsed);}}},{key:"parsePrimitiveData",value:function parsePrimitiveData(meta,data,start2,count){var iScale=meta.iScale,vScale=meta.vScale;var iAxis=iScale.axis;var vAxis=vScale.axis;var labels=iScale.getLabels();var singleScale=iScale===vScale;var parsed=new Array(count);var i,ilen,index3;for(i=0,ilen=count;i<ilen;++i){var _parsed$i;index3=i+start2;parsed[i]=(_parsed$i={},_defineProperty(_parsed$i,iAxis,singleScale||iScale.parse(labels[index3],index3)),_defineProperty(_parsed$i,vAxis,vScale.parse(data[index3],index3)),_parsed$i);}return parsed;}},{key:"parseArrayData",value:function parseArrayData(meta,data,start2,count){var xScale=meta.xScale,yScale=meta.yScale;var parsed=new Array(count);var i,ilen,index3,item;for(i=0,ilen=count;i<ilen;++i){index3=i+start2;item=data[index3];parsed[i]={x:xScale.parse(item[0],index3),y:yScale.parse(item[1],index3)};}return parsed;}},{key:"parseObjectData",value:function parseObjectData(meta,data,start2,count){var xScale=meta.xScale,yScale=meta.yScale;var _this$_parsing=this._parsing,_this$_parsing$xAxisK=_this$_parsing.xAxisKey,xAxisKey=_this$_parsing$xAxisK===void 0?"x":_this$_parsing$xAxisK,_this$_parsing$yAxisK=_this$_parsing.yAxisKey,yAxisKey=_this$_parsing$yAxisK===void 0?"y":_this$_parsing$yAxisK;var parsed=new Array(count);var i,ilen,index3,item;for(i=0,ilen=count;i<ilen;++i){index3=i+start2;item=data[index3];parsed[i]={x:xScale.parse(resolveObjectKey(item,xAxisKey),index3),y:yScale.parse(resolveObjectKey(item,yAxisKey),index3)};}return parsed;}},{key:"getParsed",value:function getParsed(index3){return this._cachedMeta._parsed[index3];}},{key:"getDataElement",value:function getDataElement(index3){return this._cachedMeta.data[index3];}},{key:"applyStack",value:function applyStack(scale,parsed,mode){var chart=this.chart;var meta=this._cachedMeta;var value=parsed[scale.axis];var stack={keys:getSortedDatasetIndices(chart,true),values:parsed._stacks[scale.axis]};return _applyStack(stack,value,meta.index,{mode:mode});}},{key:"updateRangeFromParsed",value:function updateRangeFromParsed(range,scale,parsed,stack){var parsedValue=parsed[scale.axis];var value=parsedValue===null?NaN:parsedValue;var values=stack&&parsed._stacks[scale.axis];if(stack&&values){stack.values=values;value=_applyStack(stack,parsedValue,this._cachedMeta.index);}range.min=Math.min(range.min,value);range.max=Math.max(range.max,value);}},{key:"getMinMax",value:function getMinMax(scale,canStack){var meta=this._cachedMeta;var _parsed=meta._parsed;var sorted=meta._sorted&&scale===meta.iScale;var ilen=_parsed.length;var otherScale=this._getOtherScale(scale);var stack=createStack(canStack,meta,this.chart);var range={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};var _getUserBounds=getUserBounds(otherScale),otherMin=_getUserBounds.min,otherMax=_getUserBounds.max;var i,parsed;function _skip(){parsed=_parsed[i];var otherValue=parsed[otherScale.axis];return!isNumberFinite(parsed[scale.axis])||otherMin>otherValue||otherMax<otherValue;}for(i=0;i<ilen;++i){if(_skip()){continue;}this.updateRangeFromParsed(range,scale,parsed,stack);if(sorted){break;}}if(sorted){for(i=ilen-1;i>=0;--i){if(_skip()){continue;}this.updateRangeFromParsed(range,scale,parsed,stack);break;}}return range;}},{key:"getAllParsedValues",value:function getAllParsedValues(scale){var parsed=this._cachedMeta._parsed;var values=[];var i,ilen,value;for(i=0,ilen=parsed.length;i<ilen;++i){value=parsed[i][scale.axis];if(isNumberFinite(value)){values.push(value);}}return values;}},{key:"getMaxOverflow",value:function getMaxOverflow(){return false;}},{key:"getLabelAndValue",value:function getLabelAndValue(index3){var meta=this._cachedMeta;var iScale=meta.iScale;var vScale=meta.vScale;var parsed=this.getParsed(index3);return{label:iScale?""+iScale.getLabelForValue(parsed[iScale.axis]):"",value:vScale?""+vScale.getLabelForValue(parsed[vScale.axis]):""};}},{key:"_update",value:function _update(mode){var meta=this._cachedMeta;this.update(mode||"default");meta._clip=toClip(valueOrDefault(this.options.clip,defaultClip(meta.xScale,meta.yScale,this.getMaxOverflow())));}},{key:"update",value:function update(mode){}},{key:"draw",value:function draw(){var ctx=this._ctx;var chart=this.chart;var meta=this._cachedMeta;var elements2=meta.data||[];var area=chart.chartArea;var active=[];var start2=this._drawStart||0;var count=this._drawCount||elements2.length-start2;var drawActiveElementsOnTop=this.options.drawActiveElementsOnTop;var i;if(meta.dataset){meta.dataset.draw(ctx,area,start2,count);}for(i=start2;i<start2+count;++i){var element=elements2[i];if(element.hidden){continue;}if(element.active&&drawActiveElementsOnTop){active.push(element);}else{element.draw(ctx,area);}}for(i=0;i<active.length;++i){active[i].draw(ctx,area);}}},{key:"getStyle",value:function getStyle(index3,active){var mode=active?"active":"default";return index3===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(mode):this.resolveDataElementOptions(index3||0,mode);}},{key:"getContext",value:function getContext(index3,active,mode){var dataset=this.getDataset();var context;if(index3>=0&&index3<this._cachedMeta.data.length){var element=this._cachedMeta.data[index3];context=element.$context||(element.$context=createDataContext(this.getContext(),index3,element));context.parsed=this.getParsed(index3);context.raw=dataset.data[index3];context.index=context.dataIndex=index3;}else{context=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index));context.dataset=dataset;context.index=context.datasetIndex=this.index;}context.active=!!active;context.mode=mode;return context;}},{key:"resolveDatasetElementOptions",value:function resolveDatasetElementOptions(mode){return this._resolveElementOptions(this.datasetElementType.id,mode);}},{key:"resolveDataElementOptions",value:function resolveDataElementOptions(index3,mode){return this._resolveElementOptions(this.dataElementType.id,mode,index3);}},{key:"_resolveElementOptions",value:function _resolveElementOptions(elementType){var _this3=this;var mode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"default";var index3=arguments.length>2?arguments[2]:undefined;var active=mode==="active";var cache=this._cachedDataOpts;var cacheKey=elementType+"-"+mode;var cached=cache[cacheKey];var sharing=this.enableOptionSharing&&defined(index3);if(cached){return cloneIfNotShared(cached,sharing);}var config=this.chart.config;var scopeKeys=config.datasetElementScopeKeys(this._type,elementType);var prefixes2=active?["".concat(elementType,"Hover"),"hover",elementType,""]:[elementType,""];var scopes=config.getOptionScopes(this.getDataset(),scopeKeys);var names2=Object.keys(defaults.elements[elementType]);var context=function context(){return _this3.getContext(index3,active);};var values=config.resolveNamedOptions(scopes,names2,context,prefixes2);if(values.$shared){values.$shared=sharing;cache[cacheKey]=Object.freeze(cloneIfNotShared(values,sharing));}return values;}},{key:"_resolveAnimations",value:function _resolveAnimations(index3,transition2,active){var chart=this.chart;var cache=this._cachedDataOpts;var cacheKey="animation-".concat(transition2);var cached=cache[cacheKey];if(cached){return cached;}var options;if(chart.options.animation!==false){var config=this.chart.config;var scopeKeys=config.datasetAnimationScopeKeys(this._type,transition2);var scopes=config.getOptionScopes(this.getDataset(),scopeKeys);options=config.createResolver(scopes,this.getContext(index3,active,transition2));}var animations=new Animations(chart,options&&options.animations);if(options&&options._cacheable){cache[cacheKey]=Object.freeze(animations);}return animations;}},{key:"getSharedOptions",value:function getSharedOptions(options){if(!options.$shared){return;}return this._sharedOptions||(this._sharedOptions=Object.assign({},options));}},{key:"includeOptions",value:function includeOptions(mode,sharedOptions){return!sharedOptions||isDirectUpdateMode(mode)||this.chart._animationsDisabled;}},{key:"_getSharedOptions",value:function _getSharedOptions(start2,mode){var firstOpts=this.resolveDataElementOptions(start2,mode);var previouslySharedOptions=this._sharedOptions;var sharedOptions=this.getSharedOptions(firstOpts);var includeOptions=this.includeOptions(mode,sharedOptions)||sharedOptions!==previouslySharedOptions;this.updateSharedOptions(sharedOptions,mode,firstOpts);return{sharedOptions:sharedOptions,includeOptions:includeOptions};}},{key:"updateElement",value:function updateElement(element,index3,properties,mode){if(isDirectUpdateMode(mode)){Object.assign(element,properties);}else{this._resolveAnimations(index3,mode).update(element,properties);}}},{key:"updateSharedOptions",value:function updateSharedOptions(sharedOptions,mode,newOptions){if(sharedOptions&&!isDirectUpdateMode(mode)){this._resolveAnimations(void 0,mode).update(sharedOptions,newOptions);}}},{key:"_setStyle",value:function _setStyle(element,index3,mode,active){element.active=active;var options=this.getStyle(index3,active);this._resolveAnimations(index3,mode,active).update(element,{options:!active&&this.getSharedOptions(options)||options});}},{key:"removeHoverStyle",value:function removeHoverStyle(element,datasetIndex,index3){this._setStyle(element,index3,"active",false);}},{key:"setHoverStyle",value:function setHoverStyle(element,datasetIndex,index3){this._setStyle(element,index3,"active",true);}},{key:"_removeDatasetHoverStyle",value:function _removeDatasetHoverStyle(){var element=this._cachedMeta.dataset;if(element){this._setStyle(element,void 0,"active",false);}}},{key:"_setDatasetHoverStyle",value:function _setDatasetHoverStyle(){var element=this._cachedMeta.dataset;if(element){this._setStyle(element,void 0,"active",true);}}},{key:"_resyncElements",value:function _resyncElements(resetNewElements){var data=this._data;var elements2=this._cachedMeta.data;var _iterator15=_createForOfIteratorHelper(this._syncList),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var _step15$value=_slicedToArray(_step15.value,3),method=_step15$value[0],arg1=_step15$value[1],arg2=_step15$value[2];this[method](arg1,arg2);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}this._syncList=[];var numMeta=elements2.length;var numData=data.length;var count=Math.min(numData,numMeta);if(count){this.parse(0,count);}if(numData>numMeta){this._insertElements(numMeta,numData-numMeta,resetNewElements);}else if(numData<numMeta){this._removeElements(numData,numMeta-numData);}}},{key:"_insertElements",value:function _insertElements(start2,count){var resetNewElements=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var meta=this._cachedMeta;var data=meta.data;var end=start2+count;var i;var move=function move(arr){arr.length+=count;for(i=arr.length-1;i>=end;i--){arr[i]=arr[i-count];}};move(data);for(i=start2;i<end;++i){data[i]=new this.dataElementType();}if(this._parsing){move(meta._parsed);}this.parse(start2,count);if(resetNewElements){this.updateElements(data,start2,count,"reset");}}},{key:"updateElements",value:function updateElements(element,start2,count,mode){}},{key:"_removeElements",value:function _removeElements(start2,count){var meta=this._cachedMeta;if(this._parsing){var removed=meta._parsed.splice(start2,count);if(meta._stacked){clearStacks(meta,removed);}}meta.data.splice(start2,count);}},{key:"_sync",value:function _sync(args){if(this._parsing){this._syncList.push(args);}else{var _args2=_slicedToArray(args,3),method=_args2[0],arg1=_args2[1],arg2=_args2[2];this[method](arg1,arg2);}this.chart._dataChanges.push([this.index].concat(_toConsumableArray(args)));}},{key:"_onDataPush",value:function _onDataPush(){var count=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-count,count]);}},{key:"_onDataPop",value:function _onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1]);}},{key:"_onDataShift",value:function _onDataShift(){this._sync(["_removeElements",0,1]);}},{key:"_onDataSplice",value:function _onDataSplice(start2,count){if(count){this._sync(["_removeElements",start2,count]);}var newCount=arguments.length-2;if(newCount){this._sync(["_insertElements",start2,newCount]);}}},{key:"_onDataUnshift",value:function _onDataUnshift(){this._sync(["_insertElements",0,arguments.length]);}}]);return DatasetController;}();DatasetController.defaults={};DatasetController.prototype.datasetElementType=null;DatasetController.prototype.dataElementType=null;function getAllScaleValues(scale,type2){if(!scale._cache.$bar){var visibleMetas=scale.getMatchingVisibleMetas(type2);var values=[];for(var i=0,ilen=visibleMetas.length;i<ilen;i++){values=values.concat(visibleMetas[i].controller.getAllParsedValues(scale));}scale._cache.$bar=_arrayUnique(values.sort(function(a,b){return a-b;}));}return scale._cache.$bar;}function computeMinSampleSize(meta){var scale=meta.iScale;var values=getAllScaleValues(scale,meta.type);var min3=scale._length;var i,ilen,curr,prev;var updateMinAndPrev=function updateMinAndPrev(){if(curr===32767||curr===-32768){return;}if(defined(prev)){min3=Math.min(min3,Math.abs(curr-prev)||min3);}prev=curr;};for(i=0,ilen=values.length;i<ilen;++i){curr=scale.getPixelForValue(values[i]);updateMinAndPrev();}prev=void 0;for(i=0,ilen=scale.ticks.length;i<ilen;++i){curr=scale.getPixelForTick(i);updateMinAndPrev();}return min3;}function computeFitCategoryTraits(index3,ruler,options,stackCount){var thickness=options.barThickness;var size,ratio;if(isNullOrUndef(thickness)){size=ruler.min*options.categoryPercentage;ratio=options.barPercentage;}else{size=thickness*stackCount;ratio=1;}return{chunk:size/stackCount,ratio:ratio,start:ruler.pixels[index3]-size/2};}function computeFlexCategoryTraits(index3,ruler,options,stackCount){var pixels=ruler.pixels;var curr=pixels[index3];var prev=index3>0?pixels[index3-1]:null;var next=index3<pixels.length-1?pixels[index3+1]:null;var percent=options.categoryPercentage;if(prev===null){prev=curr-(next===null?ruler.end-ruler.start:next-curr);}if(next===null){next=curr+curr-prev;}var start2=curr-(curr-Math.min(prev,next))/2*percent;var size=Math.abs(next-prev)/2*percent;return{chunk:size/stackCount,ratio:options.barPercentage,start:start2};}function parseFloatBar(entry,item,vScale,i){var startValue=vScale.parse(entry[0],i);var endValue=vScale.parse(entry[1],i);var min3=Math.min(startValue,endValue);var max3=Math.max(startValue,endValue);var barStart=min3;var barEnd=max3;if(Math.abs(min3)>Math.abs(max3)){barStart=max3;barEnd=min3;}item[vScale.axis]=barEnd;item._custom={barStart:barStart,barEnd:barEnd,start:startValue,end:endValue,min:min3,max:max3};}function parseValue(entry,item,vScale,i){if(isArray(entry)){parseFloatBar(entry,item,vScale,i);}else{item[vScale.axis]=vScale.parse(entry,i);}return item;}function parseArrayOrPrimitive(meta,data,start2,count){var iScale=meta.iScale;var vScale=meta.vScale;var labels=iScale.getLabels();var singleScale=iScale===vScale;var parsed=[];var i,ilen,item,entry;for(i=start2,ilen=start2+count;i<ilen;++i){entry=data[i];item={};item[iScale.axis]=singleScale||iScale.parse(labels[i],i);parsed.push(parseValue(entry,item,vScale,i));}return parsed;}function isFloatBar(custom){return custom&&custom.barStart!==void 0&&custom.barEnd!==void 0;}function barSign(size,vScale,actualBase){if(size!==0){return sign(size);}return(vScale.isHorizontal()?1:-1)*(vScale.min>=actualBase?1:-1);}function borderProps(properties){var reverse,start2,end,top,bottom;if(properties.horizontal){reverse=properties.base>properties.x;start2="left";end="right";}else{reverse=properties.base<properties.y;start2="bottom";end="top";}if(reverse){top="end";bottom="start";}else{top="start";bottom="end";}return{start:start2,end:end,reverse:reverse,top:top,bottom:bottom};}function setBorderSkipped(properties,options,stack,index3){var edge=options.borderSkipped;var res={};if(!edge){properties.borderSkipped=res;return;}if(edge===true){properties.borderSkipped={top:true,right:true,bottom:true,left:true};return;}var _borderProps=borderProps(properties),start2=_borderProps.start,end=_borderProps.end,reverse=_borderProps.reverse,top=_borderProps.top,bottom=_borderProps.bottom;if(edge==="middle"&&stack){properties.enableBorderRadius=true;if((stack._top||0)===index3){edge=top;}else if((stack._bottom||0)===index3){edge=bottom;}else{res[parseEdge(bottom,start2,end,reverse)]=true;edge=top;}}res[parseEdge(edge,start2,end,reverse)]=true;properties.borderSkipped=res;}function parseEdge(edge,a,b,reverse){if(reverse){edge=swap(edge,a,b);edge=startEnd(edge,b,a);}else{edge=startEnd(edge,a,b);}return edge;}function swap(orig,v1,v2){return orig===v1?v2:orig===v2?v1:orig;}function startEnd(v,start2,end){return v==="start"?start2:v==="end"?end:v;}function setInflateAmount(properties,_ref2,ratio){var inflateAmount=_ref2.inflateAmount;properties.inflateAmount=inflateAmount==="auto"?ratio===1?0.33:0:inflateAmount;}var BarController=/*#__PURE__*/function(_DatasetController){_inherits(BarController,_DatasetController);var _super=_createSuper(BarController);function BarController(){_classCallCheck(this,BarController);return _super.apply(this,arguments);}_createClass(BarController,[{key:"parsePrimitiveData",value:function parsePrimitiveData(meta,data,start2,count){return parseArrayOrPrimitive(meta,data,start2,count);}},{key:"parseArrayData",value:function parseArrayData(meta,data,start2,count){return parseArrayOrPrimitive(meta,data,start2,count);}},{key:"parseObjectData",value:function parseObjectData(meta,data,start2,count){var iScale=meta.iScale,vScale=meta.vScale;var _this$_parsing2=this._parsing,_this$_parsing2$xAxis=_this$_parsing2.xAxisKey,xAxisKey=_this$_parsing2$xAxis===void 0?"x":_this$_parsing2$xAxis,_this$_parsing2$yAxis=_this$_parsing2.yAxisKey,yAxisKey=_this$_parsing2$yAxis===void 0?"y":_this$_parsing2$yAxis;var iAxisKey=iScale.axis==="x"?xAxisKey:yAxisKey;var vAxisKey=vScale.axis==="x"?xAxisKey:yAxisKey;var parsed=[];var i,ilen,item,obj;for(i=start2,ilen=start2+count;i<ilen;++i){obj=data[i];item={};item[iScale.axis]=iScale.parse(resolveObjectKey(obj,iAxisKey),i);parsed.push(parseValue(resolveObjectKey(obj,vAxisKey),item,vScale,i));}return parsed;}},{key:"updateRangeFromParsed",value:function updateRangeFromParsed(range,scale,parsed,stack){_get(_getPrototypeOf(BarController.prototype),"updateRangeFromParsed",this).call(this,range,scale,parsed,stack);var custom=parsed._custom;if(custom&&scale===this._cachedMeta.vScale){range.min=Math.min(range.min,custom.min);range.max=Math.max(range.max,custom.max);}}},{key:"getMaxOverflow",value:function getMaxOverflow(){return 0;}},{key:"getLabelAndValue",value:function getLabelAndValue(index3){var meta=this._cachedMeta;var iScale=meta.iScale,vScale=meta.vScale;var parsed=this.getParsed(index3);var custom=parsed._custom;var value=isFloatBar(custom)?"["+custom.start+", "+custom.end+"]":""+vScale.getLabelForValue(parsed[vScale.axis]);return{label:""+iScale.getLabelForValue(parsed[iScale.axis]),value:value};}},{key:"initialize",value:function initialize(){this.enableOptionSharing=true;_get(_getPrototypeOf(BarController.prototype),"initialize",this).call(this);var meta=this._cachedMeta;meta.stack=this.getDataset().stack;}},{key:"update",value:function update(mode){var meta=this._cachedMeta;this.updateElements(meta.data,0,meta.data.length,mode);}},{key:"updateElements",value:function updateElements(bars,start2,count,mode){var reset=mode==="reset";var index3=this.index,vScale=this._cachedMeta.vScale;var base=vScale.getBasePixel();var horizontal=vScale.isHorizontal();var ruler=this._getRuler();var _this$_getSharedOptio=this._getSharedOptions(start2,mode),sharedOptions=_this$_getSharedOptio.sharedOptions,includeOptions=_this$_getSharedOptio.includeOptions;for(var i=start2;i<start2+count;i++){var parsed=this.getParsed(i);var vpixels=reset||isNullOrUndef(parsed[vScale.axis])?{base:base,head:base}:this._calculateBarValuePixels(i);var ipixels=this._calculateBarIndexPixels(i,ruler);var stack=(parsed._stacks||{})[vScale.axis];var properties={horizontal:horizontal,base:vpixels.base,enableBorderRadius:!stack||isFloatBar(parsed._custom)||index3===stack._top||index3===stack._bottom,x:horizontal?vpixels.head:ipixels.center,y:horizontal?ipixels.center:vpixels.head,height:horizontal?ipixels.size:Math.abs(vpixels.size),width:horizontal?Math.abs(vpixels.size):ipixels.size};if(includeOptions){properties.options=sharedOptions||this.resolveDataElementOptions(i,bars[i].active?"active":mode);}var options=properties.options||bars[i].options;setBorderSkipped(properties,options,stack,index3);setInflateAmount(properties,options,ruler.ratio);this.updateElement(bars[i],i,properties,mode);}}},{key:"_getStacks",value:function _getStacks(last,dataIndex){var iScale=this._cachedMeta.iScale;var metasets=iScale.getMatchingVisibleMetas(this._type).filter(function(meta){return meta.controller.options.grouped;});var stacked=iScale.options.stacked;var stacks=[];var skipNull=function skipNull(meta){var parsed=meta.controller.getParsed(dataIndex);var val=parsed&&parsed[meta.vScale.axis];if(isNullOrUndef(val)||isNaN(val)){return true;}};var _iterator16=_createForOfIteratorHelper(metasets),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var meta=_step16.value;if(dataIndex!==void 0&&skipNull(meta)){continue;}if(stacked===false||stacks.indexOf(meta.stack)===-1||stacked===void 0&&meta.stack===void 0){stacks.push(meta.stack);}if(meta.index===last){break;}}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}if(!stacks.length){stacks.push(void 0);}return stacks;}},{key:"_getStackCount",value:function _getStackCount(index3){return this._getStacks(void 0,index3).length;}},{key:"_getStackIndex",value:function _getStackIndex(datasetIndex,name,dataIndex){var stacks=this._getStacks(datasetIndex,dataIndex);var index3=name!==void 0?stacks.indexOf(name):-1;return index3===-1?stacks.length-1:index3;}},{key:"_getRuler",value:function _getRuler(){var opts=this.options;var meta=this._cachedMeta;var iScale=meta.iScale;var pixels=[];var i,ilen;for(i=0,ilen=meta.data.length;i<ilen;++i){pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis],i));}var barThickness=opts.barThickness;var min3=barThickness||computeMinSampleSize(meta);return{min:min3,pixels:pixels,start:iScale._startPixel,end:iScale._endPixel,stackCount:this._getStackCount(),scale:iScale,grouped:opts.grouped,ratio:barThickness?1:opts.categoryPercentage*opts.barPercentage};}},{key:"_calculateBarValuePixels",value:function _calculateBarValuePixels(index3){var _this$_cachedMeta=this._cachedMeta,vScale=_this$_cachedMeta.vScale,_stacked=_this$_cachedMeta._stacked,_this$options=this.options,baseValue=_this$options.base,minBarLength=_this$options.minBarLength;var actualBase=baseValue||0;var parsed=this.getParsed(index3);var custom=parsed._custom;var floating=isFloatBar(custom);var value=parsed[vScale.axis];var start2=0;var length=_stacked?this.applyStack(vScale,parsed,_stacked):value;var head,size;if(length!==value){start2=length-value;length=value;}if(floating){value=custom.barStart;length=custom.barEnd-custom.barStart;if(value!==0&&sign(value)!==sign(custom.barEnd)){start2=0;}start2+=value;}var startValue=!isNullOrUndef(baseValue)&&!floating?baseValue:start2;var base=vScale.getPixelForValue(startValue);if(this.chart.getDataVisibility(index3)){head=vScale.getPixelForValue(start2+length);}else{head=base;}size=head-base;if(Math.abs(size)<minBarLength){size=barSign(size,vScale,actualBase)*minBarLength;if(value===actualBase){base-=size/2;}var startPixel=vScale.getPixelForDecimal(0);var endPixel=vScale.getPixelForDecimal(1);var min3=Math.min(startPixel,endPixel);var max3=Math.max(startPixel,endPixel);base=Math.max(Math.min(base,max3),min3);head=base+size;}if(base===vScale.getPixelForValue(actualBase)){var halfGrid=sign(size)*vScale.getLineWidthForValue(actualBase)/2;base+=halfGrid;size-=halfGrid;}return{size:size,base:base,head:head,center:head+size/2};}},{key:"_calculateBarIndexPixels",value:function _calculateBarIndexPixels(index3,ruler){var scale=ruler.scale;var options=this.options;var skipNull=options.skipNull;var maxBarThickness=valueOrDefault(options.maxBarThickness,Infinity);var center,size;if(ruler.grouped){var stackCount=skipNull?this._getStackCount(index3):ruler.stackCount;var range=options.barThickness==="flex"?computeFlexCategoryTraits(index3,ruler,options,stackCount):computeFitCategoryTraits(index3,ruler,options,stackCount);var stackIndex=this._getStackIndex(this.index,this._cachedMeta.stack,skipNull?index3:void 0);center=range.start+range.chunk*stackIndex+range.chunk/2;size=Math.min(maxBarThickness,range.chunk*range.ratio);}else{center=scale.getPixelForValue(this.getParsed(index3)[scale.axis],index3);size=Math.min(maxBarThickness,ruler.min*ruler.ratio);}return{base:center-size/2,head:center+size/2,center:center,size:size};}},{key:"draw",value:function draw(){var meta=this._cachedMeta;var vScale=meta.vScale;var rects=meta.data;var ilen=rects.length;var i=0;for(;i<ilen;++i){if(this.getParsed(i)[vScale.axis]!==null){rects[i].draw(this._ctx);}}}}]);return BarController;}(DatasetController);BarController.id="bar";BarController.defaults={datasetElementType:false,dataElementType:"bar",categoryPercentage:0.8,barPercentage:0.9,grouped:true,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};BarController.overrides={scales:{_index_:{type:"category",offset:true,grid:{offset:true}},_value_:{type:"linear",beginAtZero:true}}};var BubbleController=/*#__PURE__*/function(_DatasetController2){_inherits(BubbleController,_DatasetController2);var _super2=_createSuper(BubbleController);function BubbleController(){_classCallCheck(this,BubbleController);return _super2.apply(this,arguments);}_createClass(BubbleController,[{key:"initialize",value:function initialize(){this.enableOptionSharing=true;_get(_getPrototypeOf(BubbleController.prototype),"initialize",this).call(this);}},{key:"parsePrimitiveData",value:function parsePrimitiveData(meta,data,start2,count){var parsed=_get(_getPrototypeOf(BubbleController.prototype),"parsePrimitiveData",this).call(this,meta,data,start2,count);for(var i=0;i<parsed.length;i++){parsed[i]._custom=this.resolveDataElementOptions(i+start2).radius;}return parsed;}},{key:"parseArrayData",value:function parseArrayData(meta,data,start2,count){var parsed=_get(_getPrototypeOf(BubbleController.prototype),"parseArrayData",this).call(this,meta,data,start2,count);for(var i=0;i<parsed.length;i++){var item=data[start2+i];parsed[i]._custom=valueOrDefault(item[2],this.resolveDataElementOptions(i+start2).radius);}return parsed;}},{key:"parseObjectData",value:function parseObjectData(meta,data,start2,count){var parsed=_get(_getPrototypeOf(BubbleController.prototype),"parseObjectData",this).call(this,meta,data,start2,count);for(var i=0;i<parsed.length;i++){var item=data[start2+i];parsed[i]._custom=valueOrDefault(item&&item.r&&+item.r,this.resolveDataElementOptions(i+start2).radius);}return parsed;}},{key:"getMaxOverflow",value:function getMaxOverflow(){var data=this._cachedMeta.data;var max3=0;for(var i=data.length-1;i>=0;--i){max3=Math.max(max3,data[i].size(this.resolveDataElementOptions(i))/2);}return max3>0&&max3;}},{key:"getLabelAndValue",value:function getLabelAndValue(index3){var meta=this._cachedMeta;var xScale=meta.xScale,yScale=meta.yScale;var parsed=this.getParsed(index3);var x=xScale.getLabelForValue(parsed.x);var y=yScale.getLabelForValue(parsed.y);var r=parsed._custom;return{label:meta.label,value:"("+x+", "+y+(r?", "+r:"")+")"};}},{key:"update",value:function update(mode){var points=this._cachedMeta.data;this.updateElements(points,0,points.length,mode);}},{key:"updateElements",value:function updateElements(points,start2,count,mode){var reset=mode==="reset";var _this$_cachedMeta2=this._cachedMeta,iScale=_this$_cachedMeta2.iScale,vScale=_this$_cachedMeta2.vScale;var _this$_getSharedOptio2=this._getSharedOptions(start2,mode),sharedOptions=_this$_getSharedOptio2.sharedOptions,includeOptions=_this$_getSharedOptio2.includeOptions;var iAxis=iScale.axis;var vAxis=vScale.axis;for(var i=start2;i<start2+count;i++){var point=points[i];var parsed=!reset&&this.getParsed(i);var properties={};var iPixel=properties[iAxis]=reset?iScale.getPixelForDecimal(0.5):iScale.getPixelForValue(parsed[iAxis]);var vPixel=properties[vAxis]=reset?vScale.getBasePixel():vScale.getPixelForValue(parsed[vAxis]);properties.skip=isNaN(iPixel)||isNaN(vPixel);if(includeOptions){properties.options=sharedOptions||this.resolveDataElementOptions(i,point.active?"active":mode);if(reset){properties.options.radius=0;}}this.updateElement(point,i,properties,mode);}}},{key:"resolveDataElementOptions",value:function resolveDataElementOptions(index3,mode){var parsed=this.getParsed(index3);var values=_get(_getPrototypeOf(BubbleController.prototype),"resolveDataElementOptions",this).call(this,index3,mode);if(values.$shared){values=Object.assign({},values,{$shared:false});}var radius3=values.radius;if(mode!=="active"){values.radius=0;}values.radius+=valueOrDefault(parsed&&parsed._custom,radius3);return values;}}]);return BubbleController;}(DatasetController);BubbleController.id="bubble";BubbleController.defaults={datasetElementType:false,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};BubbleController.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:function title(){return"";}}}}};function getRatioAndOffset(rotation,circumference,cutout){var ratioX=1;var ratioY=1;var offsetX=0;var offsetY=0;if(circumference<TAU){var startAngle=rotation;var endAngle=startAngle+circumference;var startX=Math.cos(startAngle);var startY=Math.sin(startAngle);var endX=Math.cos(endAngle);var endY=Math.sin(endAngle);var calcMax=function calcMax(angle,a,b){return _angleBetween(angle,startAngle,endAngle,true)?1:Math.max(a,a*cutout,b,b*cutout);};var calcMin=function calcMin(angle,a,b){return _angleBetween(angle,startAngle,endAngle,true)?-1:Math.min(a,a*cutout,b,b*cutout);};var maxX=calcMax(0,startX,endX);var maxY=calcMax(HALF_PI,startY,endY);var minX=calcMin(PI,startX,endX);var minY=calcMin(PI+HALF_PI,startY,endY);ratioX=(maxX-minX)/2;ratioY=(maxY-minY)/2;offsetX=-(maxX+minX)/2;offsetY=-(maxY+minY)/2;}return{ratioX:ratioX,ratioY:ratioY,offsetX:offsetX,offsetY:offsetY};}var DoughnutController=/*#__PURE__*/function(_DatasetController3){_inherits(DoughnutController,_DatasetController3);var _super3=_createSuper(DoughnutController);function DoughnutController(chart,datasetIndex){var _this4;_classCallCheck(this,DoughnutController);_this4=_super3.call(this,chart,datasetIndex);_this4.enableOptionSharing=true;_this4.innerRadius=void 0;_this4.outerRadius=void 0;_this4.offsetX=void 0;_this4.offsetY=void 0;return _this4;}_createClass(DoughnutController,[{key:"linkScales",value:function linkScales(){}},{key:"parse",value:function parse(start2,count){var data=this.getDataset().data;var meta=this._cachedMeta;if(this._parsing===false){meta._parsed=data;}else{var getter=function getter(i2){return+data[i2];};if(isObject(data[start2])){var _this$_parsing$key2=this._parsing.key,key=_this$_parsing$key2===void 0?"value":_this$_parsing$key2;getter=function getter(i2){return+resolveObjectKey(data[i2],key);};}var i,ilen;for(i=start2,ilen=start2+count;i<ilen;++i){meta._parsed[i]=getter(i);}}}},{key:"_getRotation",value:function _getRotation(){return toRadians(this.options.rotation-90);}},{key:"_getCircumference",value:function _getCircumference(){return toRadians(this.options.circumference);}},{key:"_getRotationExtents",value:function _getRotationExtents(){var min3=TAU;var max3=-TAU;for(var i=0;i<this.chart.data.datasets.length;++i){if(this.chart.isDatasetVisible(i)){var controller=this.chart.getDatasetMeta(i).controller;var rotation=controller._getRotation();var circumference=controller._getCircumference();min3=Math.min(min3,rotation);max3=Math.max(max3,rotation+circumference);}}return{rotation:min3,circumference:max3-min3};}},{key:"update",value:function update(mode){var chart=this.chart;var chartArea=chart.chartArea;var meta=this._cachedMeta;var arcs=meta.data;var spacing=this.getMaxBorderWidth()+this.getMaxOffset(arcs)+this.options.spacing;var maxSize=Math.max((Math.min(chartArea.width,chartArea.height)-spacing)/2,0);var cutout=Math.min(toPercentage(this.options.cutout,maxSize),1);var chartWeight=this._getRingWeight(this.index);var _this$_getRotationExt=this._getRotationExtents(),circumference=_this$_getRotationExt.circumference,rotation=_this$_getRotationExt.rotation;var _getRatioAndOffset=getRatioAndOffset(rotation,circumference,cutout),ratioX=_getRatioAndOffset.ratioX,ratioY=_getRatioAndOffset.ratioY,offsetX=_getRatioAndOffset.offsetX,offsetY=_getRatioAndOffset.offsetY;var maxWidth=(chartArea.width-spacing)/ratioX;var maxHeight=(chartArea.height-spacing)/ratioY;var maxRadius=Math.max(Math.min(maxWidth,maxHeight)/2,0);var outerRadius=toDimension(this.options.radius,maxRadius);var innerRadius=Math.max(outerRadius*cutout,0);var radiusLength=(outerRadius-innerRadius)/this._getVisibleDatasetWeightTotal();this.offsetX=offsetX*outerRadius;this.offsetY=offsetY*outerRadius;meta.total=this.calculateTotal();this.outerRadius=outerRadius-radiusLength*this._getRingWeightOffset(this.index);this.innerRadius=Math.max(this.outerRadius-radiusLength*chartWeight,0);this.updateElements(arcs,0,arcs.length,mode);}},{key:"_circumference",value:function _circumference(i,reset){var opts=this.options;var meta=this._cachedMeta;var circumference=this._getCircumference();if(reset&&opts.animation.animateRotate||!this.chart.getDataVisibility(i)||meta._parsed[i]===null||meta.data[i].hidden){return 0;}return this.calculateCircumference(meta._parsed[i]*circumference/TAU);}},{key:"updateElements",value:function updateElements(arcs,start2,count,mode){var reset=mode==="reset";var chart=this.chart;var chartArea=chart.chartArea;var opts=chart.options;var animationOpts=opts.animation;var centerX=(chartArea.left+chartArea.right)/2;var centerY=(chartArea.top+chartArea.bottom)/2;var animateScale=reset&&animationOpts.animateScale;var innerRadius=animateScale?0:this.innerRadius;var outerRadius=animateScale?0:this.outerRadius;var _this$_getSharedOptio3=this._getSharedOptions(start2,mode),sharedOptions=_this$_getSharedOptio3.sharedOptions,includeOptions=_this$_getSharedOptio3.includeOptions;var startAngle=this._getRotation();var i;for(i=0;i<start2;++i){startAngle+=this._circumference(i,reset);}for(i=start2;i<start2+count;++i){var circumference=this._circumference(i,reset);var arc=arcs[i];var properties={x:centerX+this.offsetX,y:centerY+this.offsetY,startAngle:startAngle,endAngle:startAngle+circumference,circumference:circumference,outerRadius:outerRadius,innerRadius:innerRadius};if(includeOptions){properties.options=sharedOptions||this.resolveDataElementOptions(i,arc.active?"active":mode);}startAngle+=circumference;this.updateElement(arc,i,properties,mode);}}},{key:"calculateTotal",value:function calculateTotal(){var meta=this._cachedMeta;var metaData=meta.data;var total=0;var i;for(i=0;i<metaData.length;i++){var value=meta._parsed[i];if(value!==null&&!isNaN(value)&&this.chart.getDataVisibility(i)&&!metaData[i].hidden){total+=Math.abs(value);}}return total;}},{key:"calculateCircumference",value:function calculateCircumference(value){var total=this._cachedMeta.total;if(total>0&&!isNaN(value)){return TAU*(Math.abs(value)/total);}return 0;}},{key:"getLabelAndValue",value:function getLabelAndValue(index3){var meta=this._cachedMeta;var chart=this.chart;var labels=chart.data.labels||[];var value=formatNumber(meta._parsed[index3],chart.options.locale);return{label:labels[index3]||"",value:value};}},{key:"getMaxBorderWidth",value:function getMaxBorderWidth(arcs){var max3=0;var chart=this.chart;var i,ilen,meta,controller,options;if(!arcs){for(i=0,ilen=chart.data.datasets.length;i<ilen;++i){if(chart.isDatasetVisible(i)){meta=chart.getDatasetMeta(i);arcs=meta.data;controller=meta.controller;break;}}}if(!arcs){return 0;}for(i=0,ilen=arcs.length;i<ilen;++i){options=controller.resolveDataElementOptions(i);if(options.borderAlign!=="inner"){max3=Math.max(max3,options.borderWidth||0,options.hoverBorderWidth||0);}}return max3;}},{key:"getMaxOffset",value:function getMaxOffset(arcs){var max3=0;for(var i=0,ilen=arcs.length;i<ilen;++i){var options=this.resolveDataElementOptions(i);max3=Math.max(max3,options.offset||0,options.hoverOffset||0);}return max3;}},{key:"_getRingWeightOffset",value:function _getRingWeightOffset(datasetIndex){var ringWeightOffset=0;for(var i=0;i<datasetIndex;++i){if(this.chart.isDatasetVisible(i)){ringWeightOffset+=this._getRingWeight(i);}}return ringWeightOffset;}},{key:"_getRingWeight",value:function _getRingWeight(datasetIndex){return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight,1),0);}},{key:"_getVisibleDatasetWeightTotal",value:function _getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1;}}]);return DoughnutController;}(DatasetController);DoughnutController.id="doughnut";DoughnutController.defaults={datasetElementType:false,dataElementType:"arc",animation:{animateRotate:true,animateScale:false},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};DoughnutController.descriptors={_scriptable:function _scriptable(name){return name!=="spacing";},_indexable:function _indexable(name){return name!=="spacing";}};DoughnutController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function generateLabels(chart){var data=chart.data;if(data.labels.length&&data.datasets.length){var pointStyle=chart.legend.options.labels.pointStyle;return data.labels.map(function(label,i){var meta=chart.getDatasetMeta(0);var style=meta.controller.getStyle(i);return{text:label,fillStyle:style.backgroundColor,strokeStyle:style.borderColor,lineWidth:style.borderWidth,pointStyle:pointStyle,hidden:!chart.getDataVisibility(i),index:i};});}return[];}},onClick:function onClick(e,legendItem,legend5){legend5.chart.toggleDataVisibility(legendItem.index);legend5.chart.update();}},tooltip:{callbacks:{title:function title(){return"";},label:function label(tooltipItem){var dataLabel=tooltipItem.label;var value=": "+tooltipItem.formattedValue;if(isArray(dataLabel)){dataLabel=dataLabel.slice();dataLabel[0]+=value;}else{dataLabel+=value;}return dataLabel;}}}}};var LineController=/*#__PURE__*/function(_DatasetController4){_inherits(LineController,_DatasetController4);var _super4=_createSuper(LineController);function LineController(){_classCallCheck(this,LineController);return _super4.apply(this,arguments);}_createClass(LineController,[{key:"initialize",value:function initialize(){this.enableOptionSharing=true;this.supportsDecimation=true;_get(_getPrototypeOf(LineController.prototype),"initialize",this).call(this);}},{key:"update",value:function update(mode){var meta=this._cachedMeta;var line=meta.dataset,_meta$data=meta.data,points=_meta$data===void 0?[]:_meta$data,_dataset=meta._dataset;var animationsDisabled=this.chart._animationsDisabled;var _getStartAndCountOfVi=_getStartAndCountOfVisiblePoints(meta,points,animationsDisabled),start2=_getStartAndCountOfVi.start,count=_getStartAndCountOfVi.count;this._drawStart=start2;this._drawCount=count;if(_scaleRangesChanged(meta)){start2=0;count=points.length;}line._chart=this.chart;line._datasetIndex=this.index;line._decimated=!!_dataset._decimated;line.points=points;var options=this.resolveDatasetElementOptions(mode);if(!this.options.showLine){options.borderWidth=0;}options.segment=this.options.segment;this.updateElement(line,void 0,{animated:!animationsDisabled,options:options},mode);this.updateElements(points,start2,count,mode);}},{key:"updateElements",value:function updateElements(points,start2,count,mode){var reset=mode==="reset";var _this$_cachedMeta3=this._cachedMeta,iScale=_this$_cachedMeta3.iScale,vScale=_this$_cachedMeta3.vScale,_stacked=_this$_cachedMeta3._stacked,_dataset=_this$_cachedMeta3._dataset;var _this$_getSharedOptio4=this._getSharedOptions(start2,mode),sharedOptions=_this$_getSharedOptio4.sharedOptions,includeOptions=_this$_getSharedOptio4.includeOptions;var iAxis=iScale.axis;var vAxis=vScale.axis;var _this$options2=this.options,spanGaps=_this$options2.spanGaps,segment=_this$options2.segment;var maxGapLength=isNumber(spanGaps)?spanGaps:Number.POSITIVE_INFINITY;var directUpdate=this.chart._animationsDisabled||reset||mode==="none";var prevParsed=start2>0&&this.getParsed(start2-1);for(var i=start2;i<start2+count;++i){var point=points[i];var parsed=this.getParsed(i);var properties=directUpdate?point:{};var nullData=isNullOrUndef(parsed[vAxis]);var iPixel=properties[iAxis]=iScale.getPixelForValue(parsed[iAxis],i);var vPixel=properties[vAxis]=reset||nullData?vScale.getBasePixel():vScale.getPixelForValue(_stacked?this.applyStack(vScale,parsed,_stacked):parsed[vAxis],i);properties.skip=isNaN(iPixel)||isNaN(vPixel)||nullData;properties.stop=i>0&&Math.abs(parsed[iAxis]-prevParsed[iAxis])>maxGapLength;if(segment){properties.parsed=parsed;properties.raw=_dataset.data[i];}if(includeOptions){properties.options=sharedOptions||this.resolveDataElementOptions(i,point.active?"active":mode);}if(!directUpdate){this.updateElement(point,i,properties,mode);}prevParsed=parsed;}}},{key:"getMaxOverflow",value:function getMaxOverflow(){var meta=this._cachedMeta;var dataset=meta.dataset;var border=dataset.options&&dataset.options.borderWidth||0;var data=meta.data||[];if(!data.length){return border;}var firstPoint=data[0].size(this.resolveDataElementOptions(0));var lastPoint=data[data.length-1].size(this.resolveDataElementOptions(data.length-1));return Math.max(border,firstPoint,lastPoint)/2;}},{key:"draw",value:function draw(){var meta=this._cachedMeta;meta.dataset.updateControlPoints(this.chart.chartArea,meta.iScale.axis);_get(_getPrototypeOf(LineController.prototype),"draw",this).call(this);}}]);return LineController;}(DatasetController);LineController.id="line";LineController.defaults={datasetElementType:"line",dataElementType:"point",showLine:true,spanGaps:false};LineController.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};var PolarAreaController=/*#__PURE__*/function(_DatasetController5){_inherits(PolarAreaController,_DatasetController5);var _super5=_createSuper(PolarAreaController);function PolarAreaController(chart,datasetIndex){var _this5;_classCallCheck(this,PolarAreaController);_this5=_super5.call(this,chart,datasetIndex);_this5.innerRadius=void 0;_this5.outerRadius=void 0;return _this5;}_createClass(PolarAreaController,[{key:"getLabelAndValue",value:function getLabelAndValue(index3){var meta=this._cachedMeta;var chart=this.chart;var labels=chart.data.labels||[];var value=formatNumber(meta._parsed[index3].r,chart.options.locale);return{label:labels[index3]||"",value:value};}},{key:"parseObjectData",value:function parseObjectData(meta,data,start2,count){return _parseObjectDataRadialScale.bind(this)(meta,data,start2,count);}},{key:"update",value:function update(mode){var arcs=this._cachedMeta.data;this._updateRadius();this.updateElements(arcs,0,arcs.length,mode);}},{key:"getMinMax",value:function getMinMax(){var _this6=this;var meta=this._cachedMeta;var range={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};meta.data.forEach(function(element,index3){var parsed=_this6.getParsed(index3).r;if(!isNaN(parsed)&&_this6.chart.getDataVisibility(index3)){if(parsed<range.min){range.min=parsed;}if(parsed>range.max){range.max=parsed;}}});return range;}},{key:"_updateRadius",value:function _updateRadius(){var chart=this.chart;var chartArea=chart.chartArea;var opts=chart.options;var minSize=Math.min(chartArea.right-chartArea.left,chartArea.bottom-chartArea.top);var outerRadius=Math.max(minSize/2,0);var innerRadius=Math.max(opts.cutoutPercentage?outerRadius/100*opts.cutoutPercentage:1,0);var radiusLength=(outerRadius-innerRadius)/chart.getVisibleDatasetCount();this.outerRadius=outerRadius-radiusLength*this.index;this.innerRadius=this.outerRadius-radiusLength;}},{key:"updateElements",value:function updateElements(arcs,start2,count,mode){var reset=mode==="reset";var chart=this.chart;var opts=chart.options;var animationOpts=opts.animation;var scale=this._cachedMeta.rScale;var centerX=scale.xCenter;var centerY=scale.yCenter;var datasetStartAngle=scale.getIndexAngle(0)-0.5*PI;var angle=datasetStartAngle;var i;var defaultAngle=360/this.countVisibleElements();for(i=0;i<start2;++i){angle+=this._computeAngle(i,mode,defaultAngle);}for(i=start2;i<start2+count;i++){var arc=arcs[i];var startAngle=angle;var endAngle=angle+this._computeAngle(i,mode,defaultAngle);var outerRadius=chart.getDataVisibility(i)?scale.getDistanceFromCenterForValue(this.getParsed(i).r):0;angle=endAngle;if(reset){if(animationOpts.animateScale){outerRadius=0;}if(animationOpts.animateRotate){startAngle=endAngle=datasetStartAngle;}}var properties={x:centerX,y:centerY,innerRadius:0,outerRadius:outerRadius,startAngle:startAngle,endAngle:endAngle,options:this.resolveDataElementOptions(i,arc.active?"active":mode)};this.updateElement(arc,i,properties,mode);}}},{key:"countVisibleElements",value:function countVisibleElements(){var _this7=this;var meta=this._cachedMeta;var count=0;meta.data.forEach(function(element,index3){if(!isNaN(_this7.getParsed(index3).r)&&_this7.chart.getDataVisibility(index3)){count++;}});return count;}},{key:"_computeAngle",value:function _computeAngle(index3,mode,defaultAngle){return this.chart.getDataVisibility(index3)?toRadians(this.resolveDataElementOptions(index3,mode).angle||defaultAngle):0;}}]);return PolarAreaController;}(DatasetController);PolarAreaController.id="polarArea";PolarAreaController.defaults={dataElementType:"arc",animation:{animateRotate:true,animateScale:true},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};PolarAreaController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function generateLabels(chart){var data=chart.data;if(data.labels.length&&data.datasets.length){var pointStyle=chart.legend.options.labels.pointStyle;return data.labels.map(function(label,i){var meta=chart.getDatasetMeta(0);var style=meta.controller.getStyle(i);return{text:label,fillStyle:style.backgroundColor,strokeStyle:style.borderColor,lineWidth:style.borderWidth,pointStyle:pointStyle,hidden:!chart.getDataVisibility(i),index:i};});}return[];}},onClick:function onClick(e,legendItem,legend5){legend5.chart.toggleDataVisibility(legendItem.index);legend5.chart.update();}},tooltip:{callbacks:{title:function title(){return"";},label:function label(context){return context.chart.data.labels[context.dataIndex]+": "+context.formattedValue;}}}},scales:{r:{type:"radialLinear",angleLines:{display:false},beginAtZero:true,grid:{circular:true},pointLabels:{display:false},startAngle:0}}};var PieController=/*#__PURE__*/function(_DoughnutController){_inherits(PieController,_DoughnutController);var _super6=_createSuper(PieController);function PieController(){_classCallCheck(this,PieController);return _super6.apply(this,arguments);}return _createClass(PieController);}(DoughnutController);PieController.id="pie";PieController.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};var RadarController=/*#__PURE__*/function(_DatasetController6){_inherits(RadarController,_DatasetController6);var _super7=_createSuper(RadarController);function RadarController(){_classCallCheck(this,RadarController);return _super7.apply(this,arguments);}_createClass(RadarController,[{key:"getLabelAndValue",value:function getLabelAndValue(index3){var vScale=this._cachedMeta.vScale;var parsed=this.getParsed(index3);return{label:vScale.getLabels()[index3],value:""+vScale.getLabelForValue(parsed[vScale.axis])};}},{key:"parseObjectData",value:function parseObjectData(meta,data,start2,count){return _parseObjectDataRadialScale.bind(this)(meta,data,start2,count);}},{key:"update",value:function update(mode){var meta=this._cachedMeta;var line=meta.dataset;var points=meta.data||[];var labels=meta.iScale.getLabels();line.points=points;if(mode!=="resize"){var options=this.resolveDatasetElementOptions(mode);if(!this.options.showLine){options.borderWidth=0;}var properties={_loop:true,_fullLoop:labels.length===points.length,options:options};this.updateElement(line,void 0,properties,mode);}this.updateElements(points,0,points.length,mode);}},{key:"updateElements",value:function updateElements(points,start2,count,mode){var scale=this._cachedMeta.rScale;var reset=mode==="reset";for(var i=start2;i<start2+count;i++){var point=points[i];var options=this.resolveDataElementOptions(i,point.active?"active":mode);var pointPosition=scale.getPointPositionForValue(i,this.getParsed(i).r);var x=reset?scale.xCenter:pointPosition.x;var y=reset?scale.yCenter:pointPosition.y;var properties={x:x,y:y,angle:pointPosition.angle,skip:isNaN(x)||isNaN(y),options:options};this.updateElement(point,i,properties,mode);}}}]);return RadarController;}(DatasetController);RadarController.id="radar";RadarController.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:true,elements:{line:{fill:"start"}}};RadarController.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};var Element=/*#__PURE__*/function(){function Element(){_classCallCheck(this,Element);this.x=void 0;this.y=void 0;this.active=false;this.options=void 0;this.$animations=void 0;}_createClass(Element,[{key:"tooltipPosition",value:function tooltipPosition(useFinalPosition){var _this$getProps=this.getProps(["x","y"],useFinalPosition),x=_this$getProps.x,y=_this$getProps.y;return{x:x,y:y};}},{key:"hasValue",value:function hasValue(){return isNumber(this.x)&&isNumber(this.y);}},{key:"getProps",value:function getProps(props,_final){var _this8=this;var anims=this.$animations;if(!_final||!anims){return this;}var ret={};props.forEach(function(prop){ret[prop]=anims[prop]&&anims[prop].active()?anims[prop]._to:_this8[prop];});return ret;}}]);return Element;}();Element.defaults={};Element.defaultRoutes=void 0;var formatters={values:function values(value){return isArray(value)?value:""+value;},numeric:function numeric(tickValue,index3,ticks){if(tickValue===0){return"0";}var locale2=this.chart.options.locale;var notation;var delta=tickValue;if(ticks.length>1){var maxTick=Math.max(Math.abs(ticks[0].value),Math.abs(ticks[ticks.length-1].value));if(maxTick<1e-4||maxTick>1e15){notation="scientific";}delta=calculateDelta(tickValue,ticks);}var logDelta=log10(Math.abs(delta));var numDecimal=Math.max(Math.min(-1*Math.floor(logDelta),20),0);var options={notation:notation,minimumFractionDigits:numDecimal,maximumFractionDigits:numDecimal};Object.assign(options,this.options.ticks.format);return formatNumber(tickValue,locale2,options);},logarithmic:function logarithmic(tickValue,index3,ticks){if(tickValue===0){return"0";}var remain=tickValue/Math.pow(10,Math.floor(log10(tickValue)));if(remain===1||remain===2||remain===5){return formatters.numeric.call(this,tickValue,index3,ticks);}return"";}};function calculateDelta(tickValue,ticks){var delta=ticks.length>3?ticks[2].value-ticks[1].value:ticks[1].value-ticks[0].value;if(Math.abs(delta)>=1&&tickValue!==Math.floor(tickValue)){delta=tickValue-Math.floor(tickValue);}return delta;}var Ticks={formatters:formatters};defaults.set("scale",{display:true,offset:false,reverse:false,beginAtZero:false,bounds:"ticks",grace:0,grid:{display:true,lineWidth:1,drawBorder:true,drawOnChartArea:true,drawTicks:true,tickLength:8,tickWidth:function tickWidth(_ctx,options){return options.lineWidth;},tickColor:function tickColor(_ctx,options){return options.color;},offset:false,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:false,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:false,textStrokeWidth:0,textStrokeColor:"",padding:3,display:true,autoSkip:true,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:false,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});defaults.route("scale.ticks","color","","color");defaults.route("scale.grid","color","","borderColor");defaults.route("scale.grid","borderColor","","borderColor");defaults.route("scale.title","color","","color");defaults.describe("scale",{_fallback:false,_scriptable:function _scriptable(name){return!name.startsWith("before")&&!name.startsWith("after")&&name!=="callback"&&name!=="parser";},_indexable:function _indexable(name){return name!=="borderDash"&&name!=="tickBorderDash";}});defaults.describe("scales",{_fallback:"scale"});defaults.describe("scale.ticks",{_scriptable:function _scriptable(name){return name!=="backdropPadding"&&name!=="callback";},_indexable:function _indexable(name){return name!=="backdropPadding";}});function autoSkip(scale,ticks){var tickOpts=scale.options.ticks;var ticksLimit=tickOpts.maxTicksLimit||determineMaxTicks(scale);var majorIndices=tickOpts.major.enabled?getMajorIndices(ticks):[];var numMajorIndices=majorIndices.length;var first=majorIndices[0];var last=majorIndices[numMajorIndices-1];var newTicks=[];if(numMajorIndices>ticksLimit){skipMajors(ticks,newTicks,majorIndices,numMajorIndices/ticksLimit);return newTicks;}var spacing=calculateSpacing(majorIndices,ticks,ticksLimit);if(numMajorIndices>0){var i,ilen;var avgMajorSpacing=numMajorIndices>1?Math.round((last-first)/(numMajorIndices-1)):null;skip(ticks,newTicks,spacing,isNullOrUndef(avgMajorSpacing)?0:first-avgMajorSpacing,first);for(i=0,ilen=numMajorIndices-1;i<ilen;i++){skip(ticks,newTicks,spacing,majorIndices[i],majorIndices[i+1]);}skip(ticks,newTicks,spacing,last,isNullOrUndef(avgMajorSpacing)?ticks.length:last+avgMajorSpacing);return newTicks;}skip(ticks,newTicks,spacing);return newTicks;}function determineMaxTicks(scale){var offset=scale.options.offset;var tickLength=scale._tickSize();var maxScale=scale._length/tickLength+(offset?0:1);var maxChart=scale._maxLength/tickLength;return Math.floor(Math.min(maxScale,maxChart));}function calculateSpacing(majorIndices,ticks,ticksLimit){var evenMajorSpacing=getEvenSpacing(majorIndices);var spacing=ticks.length/ticksLimit;if(!evenMajorSpacing){return Math.max(spacing,1);}var factors=_factorize(evenMajorSpacing);for(var i=0,ilen=factors.length-1;i<ilen;i++){var factor=factors[i];if(factor>spacing){return factor;}}return Math.max(spacing,1);}function getMajorIndices(ticks){var result=[];var i,ilen;for(i=0,ilen=ticks.length;i<ilen;i++){if(ticks[i].major){result.push(i);}}return result;}function skipMajors(ticks,newTicks,majorIndices,spacing){var count=0;var next=majorIndices[0];var i;spacing=Math.ceil(spacing);for(i=0;i<ticks.length;i++){if(i===next){newTicks.push(ticks[i]);count++;next=majorIndices[count*spacing];}}}function skip(ticks,newTicks,spacing,majorStart,majorEnd){var start2=valueOrDefault(majorStart,0);var end=Math.min(valueOrDefault(majorEnd,ticks.length),ticks.length);var count=0;var length,i,next;spacing=Math.ceil(spacing);if(majorEnd){length=majorEnd-majorStart;spacing=length/Math.floor(length/spacing);}next=start2;while(next<0){count++;next=Math.round(start2+count*spacing);}for(i=Math.max(start2,0);i<end;i++){if(i===next){newTicks.push(ticks[i]);count++;next=Math.round(start2+count*spacing);}}}function getEvenSpacing(arr){var len=arr.length;var i,diff;if(len<2){return false;}for(diff=arr[0],i=1;i<len;++i){if(arr[i]-arr[i-1]!==diff){return false;}}return diff;}var reverseAlign=function reverseAlign(align){return align==="left"?"right":align==="right"?"left":align;};var offsetFromEdge=function offsetFromEdge(scale,edge,offset){return edge==="top"||edge==="left"?scale[edge]+offset:scale[edge]-offset;};function sample(arr,numItems){var result=[];var increment=arr.length/numItems;var len=arr.length;var i=0;for(;i<len;i+=increment){result.push(arr[Math.floor(i)]);}return result;}function getPixelForGridLine(scale,index3,offsetGridLines){var length=scale.ticks.length;var validIndex2=Math.min(index3,length-1);var start2=scale._startPixel;var end=scale._endPixel;var epsilon=1e-6;var lineValue=scale.getPixelForTick(validIndex2);var offset;if(offsetGridLines){if(length===1){offset=Math.max(lineValue-start2,end-lineValue);}else if(index3===0){offset=(scale.getPixelForTick(1)-lineValue)/2;}else{offset=(lineValue-scale.getPixelForTick(validIndex2-1))/2;}lineValue+=validIndex2<index3?offset:-offset;if(lineValue<start2-epsilon||lineValue>end+epsilon){return;}}return lineValue;}function garbageCollect(caches,length){each(caches,function(cache){var gc=cache.gc;var gcLen=gc.length/2;var i;if(gcLen>length){for(i=0;i<gcLen;++i){delete cache.data[gc[i]];}gc.splice(0,gcLen);}});}function getTickMarkLength(options){return options.drawTicks?options.tickLength:0;}function getTitleHeight(options,fallback){if(!options.display){return 0;}var font=toFont(options.font,fallback);var padding=toPadding(options.padding);var lines=isArray(options.text)?options.text.length:1;return lines*font.lineHeight+padding.height;}function createScaleContext(parent,scale){return createContext(parent,{scale:scale,type:"scale"});}function createTickContext(parent,index3,tick){return createContext(parent,{tick:tick,index:index3,type:"tick"});}function titleAlign(align,position,reverse){var ret=_toLeftRightCenter(align);if(reverse&&position!=="right"||!reverse&&position==="right"){ret=reverseAlign(ret);}return ret;}function titleArgs(scale,offset,position,align){var top=scale.top,left=scale.left,bottom=scale.bottom,right=scale.right,chart=scale.chart;var chartArea=chart.chartArea,scales2=chart.scales;var rotation=0;var maxWidth,titleX,titleY;var height=bottom-top;var width=right-left;if(scale.isHorizontal()){titleX=_alignStartEnd(align,left,right);if(isObject(position)){var positionAxisID=Object.keys(position)[0];var value=position[positionAxisID];titleY=scales2[positionAxisID].getPixelForValue(value)+height-offset;}else if(position==="center"){titleY=(chartArea.bottom+chartArea.top)/2+height-offset;}else{titleY=offsetFromEdge(scale,position,offset);}maxWidth=right-left;}else{if(isObject(position)){var _positionAxisID=Object.keys(position)[0];var _value=position[_positionAxisID];titleX=scales2[_positionAxisID].getPixelForValue(_value)-width+offset;}else if(position==="center"){titleX=(chartArea.left+chartArea.right)/2-width+offset;}else{titleX=offsetFromEdge(scale,position,offset);}titleY=_alignStartEnd(align,bottom,top);rotation=position==="left"?-HALF_PI:HALF_PI;}return{titleX:titleX,titleY:titleY,maxWidth:maxWidth,rotation:rotation};}var Scale=/*#__PURE__*/function(_Element){_inherits(_Scale,_Element);var _super8=_createSuper(_Scale);function _Scale(cfg){var _this9;_classCallCheck(this,_Scale);_this9=_super8.call(this);_this9.id=cfg.id;_this9.type=cfg.type;_this9.options=void 0;_this9.ctx=cfg.ctx;_this9.chart=cfg.chart;_this9.top=void 0;_this9.bottom=void 0;_this9.left=void 0;_this9.right=void 0;_this9.width=void 0;_this9.height=void 0;_this9._margins={left:0,right:0,top:0,bottom:0};_this9.maxWidth=void 0;_this9.maxHeight=void 0;_this9.paddingTop=void 0;_this9.paddingBottom=void 0;_this9.paddingLeft=void 0;_this9.paddingRight=void 0;_this9.axis=void 0;_this9.labelRotation=void 0;_this9.min=void 0;_this9.max=void 0;_this9._range=void 0;_this9.ticks=[];_this9._gridLineItems=null;_this9._labelItems=null;_this9._labelSizes=null;_this9._length=0;_this9._maxLength=0;_this9._longestTextCache={};_this9._startPixel=void 0;_this9._endPixel=void 0;_this9._reversePixels=false;_this9._userMax=void 0;_this9._userMin=void 0;_this9._suggestedMax=void 0;_this9._suggestedMin=void 0;_this9._ticksLength=0;_this9._borderValue=0;_this9._cache={};_this9._dataLimitsCached=false;_this9.$context=void 0;return _this9;}_createClass(_Scale,[{key:"init",value:function init(options){this.options=options.setContext(this.getContext());this.axis=options.axis;this._userMin=this.parse(options.min);this._userMax=this.parse(options.max);this._suggestedMin=this.parse(options.suggestedMin);this._suggestedMax=this.parse(options.suggestedMax);}},{key:"parse",value:function parse(raw,index3){return raw;}},{key:"getUserBounds",value:function getUserBounds(){var _userMin=this._userMin,_userMax=this._userMax,_suggestedMin=this._suggestedMin,_suggestedMax=this._suggestedMax;_userMin=finiteOrDefault(_userMin,Number.POSITIVE_INFINITY);_userMax=finiteOrDefault(_userMax,Number.NEGATIVE_INFINITY);_suggestedMin=finiteOrDefault(_suggestedMin,Number.POSITIVE_INFINITY);_suggestedMax=finiteOrDefault(_suggestedMax,Number.NEGATIVE_INFINITY);return{min:finiteOrDefault(_userMin,_suggestedMin),max:finiteOrDefault(_userMax,_suggestedMax),minDefined:isNumberFinite(_userMin),maxDefined:isNumberFinite(_userMax)};}},{key:"getMinMax",value:function getMinMax(canStack){var _this$getUserBounds=this.getUserBounds(),min3=_this$getUserBounds.min,max3=_this$getUserBounds.max,minDefined=_this$getUserBounds.minDefined,maxDefined=_this$getUserBounds.maxDefined;var range;if(minDefined&&maxDefined){return{min:min3,max:max3};}var metas=this.getMatchingVisibleMetas();for(var i=0,ilen=metas.length;i<ilen;++i){range=metas[i].controller.getMinMax(this,canStack);if(!minDefined){min3=Math.min(min3,range.min);}if(!maxDefined){max3=Math.max(max3,range.max);}}min3=maxDefined&&min3>max3?max3:min3;max3=minDefined&&min3>max3?min3:max3;return{min:finiteOrDefault(min3,finiteOrDefault(max3,min3)),max:finiteOrDefault(max3,finiteOrDefault(min3,max3))};}},{key:"getPadding",value:function getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0};}},{key:"getTicks",value:function getTicks(){return this.ticks;}},{key:"getLabels",value:function getLabels(){var data=this.chart.data;return this.options.labels||(this.isHorizontal()?data.xLabels:data.yLabels)||data.labels||[];}},{key:"beforeLayout",value:function beforeLayout(){this._cache={};this._dataLimitsCached=false;}},{key:"beforeUpdate",value:function beforeUpdate(){callback(this.options.beforeUpdate,[this]);}},{key:"update",value:function update(maxWidth,maxHeight,margins){var _this$options3=this.options,beginAtZero=_this$options3.beginAtZero,grace=_this$options3.grace,tickOpts=_this$options3.ticks;var sampleSize=tickOpts.sampleSize;this.beforeUpdate();this.maxWidth=maxWidth;this.maxHeight=maxHeight;this._margins=margins=Object.assign({left:0,right:0,top:0,bottom:0},margins);this.ticks=null;this._labelSizes=null;this._gridLineItems=null;this._labelItems=null;this.beforeSetDimensions();this.setDimensions();this.afterSetDimensions();this._maxLength=this.isHorizontal()?this.width+margins.left+margins.right:this.height+margins.top+margins.bottom;if(!this._dataLimitsCached){this.beforeDataLimits();this.determineDataLimits();this.afterDataLimits();this._range=_addGrace(this,grace,beginAtZero);this._dataLimitsCached=true;}this.beforeBuildTicks();this.ticks=this.buildTicks()||[];this.afterBuildTicks();var samplingEnabled=sampleSize<this.ticks.length;this._convertTicksToLabels(samplingEnabled?sample(this.ticks,sampleSize):this.ticks);this.configure();this.beforeCalculateLabelRotation();this.calculateLabelRotation();this.afterCalculateLabelRotation();if(tickOpts.display&&(tickOpts.autoSkip||tickOpts.source==="auto")){this.ticks=autoSkip(this,this.ticks);this._labelSizes=null;this.afterAutoSkip();}if(samplingEnabled){this._convertTicksToLabels(this.ticks);}this.beforeFit();this.fit();this.afterFit();this.afterUpdate();}},{key:"configure",value:function configure(){var reversePixels=this.options.reverse;var startPixel,endPixel;if(this.isHorizontal()){startPixel=this.left;endPixel=this.right;}else{startPixel=this.top;endPixel=this.bottom;reversePixels=!reversePixels;}this._startPixel=startPixel;this._endPixel=endPixel;this._reversePixels=reversePixels;this._length=endPixel-startPixel;this._alignToPixels=this.options.alignToPixels;}},{key:"afterUpdate",value:function afterUpdate(){callback(this.options.afterUpdate,[this]);}},{key:"beforeSetDimensions",value:function beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this]);}},{key:"setDimensions",value:function setDimensions(){if(this.isHorizontal()){this.width=this.maxWidth;this.left=0;this.right=this.width;}else{this.height=this.maxHeight;this.top=0;this.bottom=this.height;}this.paddingLeft=0;this.paddingTop=0;this.paddingRight=0;this.paddingBottom=0;}},{key:"afterSetDimensions",value:function afterSetDimensions(){callback(this.options.afterSetDimensions,[this]);}},{key:"_callHooks",value:function _callHooks(name){this.chart.notifyPlugins(name,this.getContext());callback(this.options[name],[this]);}},{key:"beforeDataLimits",value:function beforeDataLimits(){this._callHooks("beforeDataLimits");}},{key:"determineDataLimits",value:function determineDataLimits(){}},{key:"afterDataLimits",value:function afterDataLimits(){this._callHooks("afterDataLimits");}},{key:"beforeBuildTicks",value:function beforeBuildTicks(){this._callHooks("beforeBuildTicks");}},{key:"buildTicks",value:function buildTicks(){return[];}},{key:"afterBuildTicks",value:function afterBuildTicks(){this._callHooks("afterBuildTicks");}},{key:"beforeTickToLabelConversion",value:function beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this]);}},{key:"generateTickLabels",value:function generateTickLabels(ticks){var tickOpts=this.options.ticks;var i,ilen,tick;for(i=0,ilen=ticks.length;i<ilen;i++){tick=ticks[i];tick.label=callback(tickOpts.callback,[tick.value,i,ticks],this);}}},{key:"afterTickToLabelConversion",value:function afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this]);}},{key:"beforeCalculateLabelRotation",value:function beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this]);}},{key:"calculateLabelRotation",value:function calculateLabelRotation(){var options=this.options;var tickOpts=options.ticks;var numTicks=this.ticks.length;var minRotation=tickOpts.minRotation||0;var maxRotation=tickOpts.maxRotation;var labelRotation=minRotation;var tickWidth,maxHeight,maxLabelDiagonal;if(!this._isVisible()||!tickOpts.display||minRotation>=maxRotation||numTicks<=1||!this.isHorizontal()){this.labelRotation=minRotation;return;}var labelSizes=this._getLabelSizes();var maxLabelWidth=labelSizes.widest.width;var maxLabelHeight=labelSizes.highest.height;var maxWidth=_limitValue(this.chart.width-maxLabelWidth,0,this.maxWidth);tickWidth=options.offset?this.maxWidth/numTicks:maxWidth/(numTicks-1);if(maxLabelWidth+6>tickWidth){tickWidth=maxWidth/(numTicks-(options.offset?0.5:1));maxHeight=this.maxHeight-getTickMarkLength(options.grid)-tickOpts.padding-getTitleHeight(options.title,this.chart.options.font);maxLabelDiagonal=Math.sqrt(maxLabelWidth*maxLabelWidth+maxLabelHeight*maxLabelHeight);labelRotation=toDegrees(Math.min(Math.asin(_limitValue((labelSizes.highest.height+6)/tickWidth,-1,1)),Math.asin(_limitValue(maxHeight/maxLabelDiagonal,-1,1))-Math.asin(_limitValue(maxLabelHeight/maxLabelDiagonal,-1,1))));labelRotation=Math.max(minRotation,Math.min(maxRotation,labelRotation));}this.labelRotation=labelRotation;}},{key:"afterCalculateLabelRotation",value:function afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this]);}},{key:"afterAutoSkip",value:function afterAutoSkip(){}},{key:"beforeFit",value:function beforeFit(){callback(this.options.beforeFit,[this]);}},{key:"fit",value:function fit(){var minSize={width:0,height:0};var chart=this.chart,_this$options4=this.options,tickOpts=_this$options4.ticks,titleOpts=_this$options4.title,gridOpts=_this$options4.grid;var display=this._isVisible();var isHorizontal=this.isHorizontal();if(display){var titleHeight=getTitleHeight(titleOpts,chart.options.font);if(isHorizontal){minSize.width=this.maxWidth;minSize.height=getTickMarkLength(gridOpts)+titleHeight;}else{minSize.height=this.maxHeight;minSize.width=getTickMarkLength(gridOpts)+titleHeight;}if(tickOpts.display&&this.ticks.length){var _this$_getLabelSizes=this._getLabelSizes(),first=_this$_getLabelSizes.first,last=_this$_getLabelSizes.last,widest=_this$_getLabelSizes.widest,highest=_this$_getLabelSizes.highest;var tickPadding=tickOpts.padding*2;var angleRadians=toRadians(this.labelRotation);var cos=Math.cos(angleRadians);var sin=Math.sin(angleRadians);if(isHorizontal){var labelHeight=tickOpts.mirror?0:sin*widest.width+cos*highest.height;minSize.height=Math.min(this.maxHeight,minSize.height+labelHeight+tickPadding);}else{var labelWidth=tickOpts.mirror?0:cos*widest.width+sin*highest.height;minSize.width=Math.min(this.maxWidth,minSize.width+labelWidth+tickPadding);}this._calculatePadding(first,last,sin,cos);}}this._handleMargins();if(isHorizontal){this.width=this._length=chart.width-this._margins.left-this._margins.right;this.height=minSize.height;}else{this.width=minSize.width;this.height=this._length=chart.height-this._margins.top-this._margins.bottom;}}},{key:"_calculatePadding",value:function _calculatePadding(first,last,sin,cos){var _this$options5=this.options,_this$options5$ticks=_this$options5.ticks,align=_this$options5$ticks.align,padding=_this$options5$ticks.padding,position=_this$options5.position;var isRotated=this.labelRotation!==0;var labelsBelowTicks=position!=="top"&&this.axis==="x";if(this.isHorizontal()){var offsetLeft=this.getPixelForTick(0)-this.left;var offsetRight=this.right-this.getPixelForTick(this.ticks.length-1);var paddingLeft=0;var paddingRight=0;if(isRotated){if(labelsBelowTicks){paddingLeft=cos*first.width;paddingRight=sin*last.height;}else{paddingLeft=sin*first.height;paddingRight=cos*last.width;}}else if(align==="start"){paddingRight=last.width;}else if(align==="end"){paddingLeft=first.width;}else if(align!=="inner"){paddingLeft=first.width/2;paddingRight=last.width/2;}this.paddingLeft=Math.max((paddingLeft-offsetLeft+padding)*this.width/(this.width-offsetLeft),0);this.paddingRight=Math.max((paddingRight-offsetRight+padding)*this.width/(this.width-offsetRight),0);}else{var paddingTop=last.height/2;var paddingBottom=first.height/2;if(align==="start"){paddingTop=0;paddingBottom=first.height;}else if(align==="end"){paddingTop=last.height;paddingBottom=0;}this.paddingTop=paddingTop+padding;this.paddingBottom=paddingBottom+padding;}}},{key:"_handleMargins",value:function _handleMargins(){if(this._margins){this._margins.left=Math.max(this.paddingLeft,this._margins.left);this._margins.top=Math.max(this.paddingTop,this._margins.top);this._margins.right=Math.max(this.paddingRight,this._margins.right);this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom);}}},{key:"afterFit",value:function afterFit(){callback(this.options.afterFit,[this]);}},{key:"isHorizontal",value:function isHorizontal(){var _this$options6=this.options,axis=_this$options6.axis,position=_this$options6.position;return position==="top"||position==="bottom"||axis==="x";}},{key:"isFullSize",value:function isFullSize(){return this.options.fullSize;}},{key:"_convertTicksToLabels",value:function _convertTicksToLabels(ticks){this.beforeTickToLabelConversion();this.generateTickLabels(ticks);var i,ilen;for(i=0,ilen=ticks.length;i<ilen;i++){if(isNullOrUndef(ticks[i].label)){ticks.splice(i,1);ilen--;i--;}}this.afterTickToLabelConversion();}},{key:"_getLabelSizes",value:function _getLabelSizes(){var labelSizes=this._labelSizes;if(!labelSizes){var sampleSize=this.options.ticks.sampleSize;var ticks=this.ticks;if(sampleSize<ticks.length){ticks=sample(ticks,sampleSize);}this._labelSizes=labelSizes=this._computeLabelSizes(ticks,ticks.length);}return labelSizes;}},{key:"_computeLabelSizes",value:function _computeLabelSizes(ticks,length){var ctx=this.ctx,caches=this._longestTextCache;var widths=[];var heights=[];var widestLabelSize=0;var highestLabelSize=0;var i,j,jlen,label,tickFont,fontString2,cache,lineHeight,width,height,nestedLabel;for(i=0;i<length;++i){label=ticks[i].label;tickFont=this._resolveTickFontOptions(i);ctx.font=fontString2=tickFont.string;cache=caches[fontString2]=caches[fontString2]||{data:{},gc:[]};lineHeight=tickFont.lineHeight;width=height=0;if(!isNullOrUndef(label)&&!isArray(label)){width=_measureText(ctx,cache.data,cache.gc,width,label);height=lineHeight;}else if(isArray(label)){for(j=0,jlen=label.length;j<jlen;++j){nestedLabel=label[j];if(!isNullOrUndef(nestedLabel)&&!isArray(nestedLabel)){width=_measureText(ctx,cache.data,cache.gc,width,nestedLabel);height+=lineHeight;}}}widths.push(width);heights.push(height);widestLabelSize=Math.max(width,widestLabelSize);highestLabelSize=Math.max(height,highestLabelSize);}garbageCollect(caches,length);var widest=widths.indexOf(widestLabelSize);var highest=heights.indexOf(highestLabelSize);var valueAt=function valueAt(idx){return{width:widths[idx]||0,height:heights[idx]||0};};return{first:valueAt(0),last:valueAt(length-1),widest:valueAt(widest),highest:valueAt(highest),widths:widths,heights:heights};}},{key:"getLabelForValue",value:function getLabelForValue(value){return value;}},{key:"getPixelForValue",value:function getPixelForValue(value,index3){return NaN;}},{key:"getValueForPixel",value:function getValueForPixel(pixel){}},{key:"getPixelForTick",value:function getPixelForTick(index3){var ticks=this.ticks;if(index3<0||index3>ticks.length-1){return null;}return this.getPixelForValue(ticks[index3].value);}},{key:"getPixelForDecimal",value:function getPixelForDecimal(decimal){if(this._reversePixels){decimal=1-decimal;}var pixel=this._startPixel+decimal*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,pixel,0):pixel);}},{key:"getDecimalForPixel",value:function getDecimalForPixel(pixel){var decimal=(pixel-this._startPixel)/this._length;return this._reversePixels?1-decimal:decimal;}},{key:"getBasePixel",value:function getBasePixel(){return this.getPixelForValue(this.getBaseValue());}},{key:"getBaseValue",value:function getBaseValue(){var min3=this.min,max3=this.max;return min3<0&&max3<0?max3:min3>0&&max3>0?min3:0;}},{key:"getContext",value:function getContext(index3){var ticks=this.ticks||[];if(index3>=0&&index3<ticks.length){var tick=ticks[index3];return tick.$context||(tick.$context=createTickContext(this.getContext(),index3,tick));}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this));}},{key:"_tickSize",value:function _tickSize(){var optionTicks=this.options.ticks;var rot=toRadians(this.labelRotation);var cos=Math.abs(Math.cos(rot));var sin=Math.abs(Math.sin(rot));var labelSizes=this._getLabelSizes();var padding=optionTicks.autoSkipPadding||0;var w=labelSizes?labelSizes.widest.width+padding:0;var h=labelSizes?labelSizes.highest.height+padding:0;return this.isHorizontal()?h*cos>w*sin?w/cos:h/sin:h*sin<w*cos?h/cos:w/sin;}},{key:"_isVisible",value:function _isVisible(){var display=this.options.display;if(display!=="auto"){return!!display;}return this.getMatchingVisibleMetas().length>0;}},{key:"_computeGridLineItems",value:function _computeGridLineItems(chartArea){var axis=this.axis;var chart=this.chart;var options=this.options;var grid=options.grid,position=options.position;var offset=grid.offset;var isHorizontal=this.isHorizontal();var ticks=this.ticks;var ticksLength=ticks.length+(offset?1:0);var tl=getTickMarkLength(grid);var items=[];var borderOpts=grid.setContext(this.getContext());var axisWidth=borderOpts.drawBorder?borderOpts.borderWidth:0;var axisHalfWidth=axisWidth/2;var alignBorderValue=function alignBorderValue(pixel){return _alignPixel(chart,pixel,axisWidth);};var borderValue,i,lineValue,alignedLineValue;var tx1,ty1,tx2,ty2,x1,y1,x2,y2;if(position==="top"){borderValue=alignBorderValue(this.bottom);ty1=this.bottom-tl;ty2=borderValue-axisHalfWidth;y1=alignBorderValue(chartArea.top)+axisHalfWidth;y2=chartArea.bottom;}else if(position==="bottom"){borderValue=alignBorderValue(this.top);y1=chartArea.top;y2=alignBorderValue(chartArea.bottom)-axisHalfWidth;ty1=borderValue+axisHalfWidth;ty2=this.top+tl;}else if(position==="left"){borderValue=alignBorderValue(this.right);tx1=this.right-tl;tx2=borderValue-axisHalfWidth;x1=alignBorderValue(chartArea.left)+axisHalfWidth;x2=chartArea.right;}else if(position==="right"){borderValue=alignBorderValue(this.left);x1=chartArea.left;x2=alignBorderValue(chartArea.right)-axisHalfWidth;tx1=borderValue+axisHalfWidth;tx2=this.left+tl;}else if(axis==="x"){if(position==="center"){borderValue=alignBorderValue((chartArea.top+chartArea.bottom)/2+0.5);}else if(isObject(position)){var positionAxisID=Object.keys(position)[0];var value=position[positionAxisID];borderValue=alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));}y1=chartArea.top;y2=chartArea.bottom;ty1=borderValue+axisHalfWidth;ty2=ty1+tl;}else if(axis==="y"){if(position==="center"){borderValue=alignBorderValue((chartArea.left+chartArea.right)/2);}else if(isObject(position)){var _positionAxisID2=Object.keys(position)[0];var _value2=position[_positionAxisID2];borderValue=alignBorderValue(this.chart.scales[_positionAxisID2].getPixelForValue(_value2));}tx1=borderValue-axisHalfWidth;tx2=tx1-tl;x1=chartArea.left;x2=chartArea.right;}var limit=valueOrDefault(options.ticks.maxTicksLimit,ticksLength);var step=Math.max(1,Math.ceil(ticksLength/limit));for(i=0;i<ticksLength;i+=step){var optsAtIndex=grid.setContext(this.getContext(i));var lineWidth=optsAtIndex.lineWidth;var lineColor=optsAtIndex.color;var borderDash=optsAtIndex.borderDash||[];var borderDashOffset=optsAtIndex.borderDashOffset;var tickWidth=optsAtIndex.tickWidth;var tickColor=optsAtIndex.tickColor;var tickBorderDash=optsAtIndex.tickBorderDash||[];var tickBorderDashOffset=optsAtIndex.tickBorderDashOffset;lineValue=getPixelForGridLine(this,i,offset);if(lineValue===void 0){continue;}alignedLineValue=_alignPixel(chart,lineValue,lineWidth);if(isHorizontal){tx1=tx2=x1=x2=alignedLineValue;}else{ty1=ty2=y1=y2=alignedLineValue;}items.push({tx1:tx1,ty1:ty1,tx2:tx2,ty2:ty2,x1:x1,y1:y1,x2:x2,y2:y2,width:lineWidth,color:lineColor,borderDash:borderDash,borderDashOffset:borderDashOffset,tickWidth:tickWidth,tickColor:tickColor,tickBorderDash:tickBorderDash,tickBorderDashOffset:tickBorderDashOffset});}this._ticksLength=ticksLength;this._borderValue=borderValue;return items;}},{key:"_computeLabelItems",value:function _computeLabelItems(chartArea){var axis=this.axis;var options=this.options;var position=options.position,optionTicks=options.ticks;var isHorizontal=this.isHorizontal();var ticks=this.ticks;var align=optionTicks.align,crossAlign=optionTicks.crossAlign,padding=optionTicks.padding,mirror=optionTicks.mirror;var tl=getTickMarkLength(options.grid);var tickAndPadding=tl+padding;var hTickAndPadding=mirror?-padding:tickAndPadding;var rotation=-toRadians(this.labelRotation);var items=[];var i,ilen,tick,label,x,y,textAlign,pixel,font,lineHeight,lineCount,textOffset;var textBaseline="middle";if(position==="top"){y=this.bottom-hTickAndPadding;textAlign=this._getXAxisLabelAlignment();}else if(position==="bottom"){y=this.top+hTickAndPadding;textAlign=this._getXAxisLabelAlignment();}else if(position==="left"){var ret=this._getYAxisLabelAlignment(tl);textAlign=ret.textAlign;x=ret.x;}else if(position==="right"){var _ret=this._getYAxisLabelAlignment(tl);textAlign=_ret.textAlign;x=_ret.x;}else if(axis==="x"){if(position==="center"){y=(chartArea.top+chartArea.bottom)/2+tickAndPadding;}else if(isObject(position)){var positionAxisID=Object.keys(position)[0];var value=position[positionAxisID];y=this.chart.scales[positionAxisID].getPixelForValue(value)+tickAndPadding;}textAlign=this._getXAxisLabelAlignment();}else if(axis==="y"){if(position==="center"){x=(chartArea.left+chartArea.right)/2-tickAndPadding;}else if(isObject(position)){var _positionAxisID3=Object.keys(position)[0];var _value3=position[_positionAxisID3];x=this.chart.scales[_positionAxisID3].getPixelForValue(_value3);}textAlign=this._getYAxisLabelAlignment(tl).textAlign;}if(axis==="y"){if(align==="start"){textBaseline="top";}else if(align==="end"){textBaseline="bottom";}}var labelSizes=this._getLabelSizes();for(i=0,ilen=ticks.length;i<ilen;++i){tick=ticks[i];label=tick.label;var optsAtIndex=optionTicks.setContext(this.getContext(i));pixel=this.getPixelForTick(i)+optionTicks.labelOffset;font=this._resolveTickFontOptions(i);lineHeight=font.lineHeight;lineCount=isArray(label)?label.length:1;var halfCount=lineCount/2;var color3=optsAtIndex.color;var strokeColor=optsAtIndex.textStrokeColor;var strokeWidth=optsAtIndex.textStrokeWidth;var tickTextAlign=textAlign;if(isHorizontal){x=pixel;if(textAlign==="inner"){if(i===ilen-1){tickTextAlign=!this.options.reverse?"right":"left";}else if(i===0){tickTextAlign=!this.options.reverse?"left":"right";}else{tickTextAlign="center";}}if(position==="top"){if(crossAlign==="near"||rotation!==0){textOffset=-lineCount*lineHeight+lineHeight/2;}else if(crossAlign==="center"){textOffset=-labelSizes.highest.height/2-halfCount*lineHeight+lineHeight;}else{textOffset=-labelSizes.highest.height+lineHeight/2;}}else{if(crossAlign==="near"||rotation!==0){textOffset=lineHeight/2;}else if(crossAlign==="center"){textOffset=labelSizes.highest.height/2-halfCount*lineHeight;}else{textOffset=labelSizes.highest.height-lineCount*lineHeight;}}if(mirror){textOffset*=-1;}}else{y=pixel;textOffset=(1-lineCount)*lineHeight/2;}var backdrop=void 0;if(optsAtIndex.showLabelBackdrop){var labelPadding=toPadding(optsAtIndex.backdropPadding);var height=labelSizes.heights[i];var width=labelSizes.widths[i];var top=y+textOffset-labelPadding.top;var left=x-labelPadding.left;switch(textBaseline){case"middle":top-=height/2;break;case"bottom":top-=height;break;}switch(textAlign){case"center":left-=width/2;break;case"right":left-=width;break;}backdrop={left:left,top:top,width:width+labelPadding.width,height:height+labelPadding.height,color:optsAtIndex.backdropColor};}items.push({rotation:rotation,label:label,font:font,color:color3,strokeColor:strokeColor,strokeWidth:strokeWidth,textOffset:textOffset,textAlign:tickTextAlign,textBaseline:textBaseline,translation:[x,y],backdrop:backdrop});}return items;}},{key:"_getXAxisLabelAlignment",value:function _getXAxisLabelAlignment(){var _this$options7=this.options,position=_this$options7.position,ticks=_this$options7.ticks;var rotation=-toRadians(this.labelRotation);if(rotation){return position==="top"?"left":"right";}var align="center";if(ticks.align==="start"){align="left";}else if(ticks.align==="end"){align="right";}else if(ticks.align==="inner"){align="inner";}return align;}},{key:"_getYAxisLabelAlignment",value:function _getYAxisLabelAlignment(tl){var _this$options8=this.options,position=_this$options8.position,_this$options8$ticks=_this$options8.ticks,crossAlign=_this$options8$ticks.crossAlign,mirror=_this$options8$ticks.mirror,padding=_this$options8$ticks.padding;var labelSizes=this._getLabelSizes();var tickAndPadding=tl+padding;var widest=labelSizes.widest.width;var textAlign;var x;if(position==="left"){if(mirror){x=this.right+padding;if(crossAlign==="near"){textAlign="left";}else if(crossAlign==="center"){textAlign="center";x+=widest/2;}else{textAlign="right";x+=widest;}}else{x=this.right-tickAndPadding;if(crossAlign==="near"){textAlign="right";}else if(crossAlign==="center"){textAlign="center";x-=widest/2;}else{textAlign="left";x=this.left;}}}else if(position==="right"){if(mirror){x=this.left+padding;if(crossAlign==="near"){textAlign="right";}else if(crossAlign==="center"){textAlign="center";x-=widest/2;}else{textAlign="left";x-=widest;}}else{x=this.left+tickAndPadding;if(crossAlign==="near"){textAlign="left";}else if(crossAlign==="center"){textAlign="center";x+=widest/2;}else{textAlign="right";x=this.right;}}}else{textAlign="right";}return{textAlign:textAlign,x:x};}},{key:"_computeLabelArea",value:function _computeLabelArea(){if(this.options.ticks.mirror){return;}var chart=this.chart;var position=this.options.position;if(position==="left"||position==="right"){return{top:0,left:this.left,bottom:chart.height,right:this.right};}if(position==="top"||position==="bottom"){return{top:this.top,left:0,bottom:this.bottom,right:chart.width};}}},{key:"drawBackground",value:function drawBackground(){var ctx=this.ctx,backgroundColor4=this.options.backgroundColor,left=this.left,top=this.top,width=this.width,height=this.height;if(backgroundColor4){ctx.save();ctx.fillStyle=backgroundColor4;ctx.fillRect(left,top,width,height);ctx.restore();}}},{key:"getLineWidthForValue",value:function getLineWidthForValue(value){var grid=this.options.grid;if(!this._isVisible()||!grid.display){return 0;}var ticks=this.ticks;var index3=ticks.findIndex(function(t){return t.value===value;});if(index3>=0){var opts=grid.setContext(this.getContext(index3));return opts.lineWidth;}return 0;}},{key:"drawGrid",value:function drawGrid(chartArea){var grid=this.options.grid;var ctx=this.ctx;var items=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(chartArea));var i,ilen;var drawLine=function drawLine(p1,p2,style){if(!style.width||!style.color){return;}ctx.save();ctx.lineWidth=style.width;ctx.strokeStyle=style.color;ctx.setLineDash(style.borderDash||[]);ctx.lineDashOffset=style.borderDashOffset;ctx.beginPath();ctx.moveTo(p1.x,p1.y);ctx.lineTo(p2.x,p2.y);ctx.stroke();ctx.restore();};if(grid.display){for(i=0,ilen=items.length;i<ilen;++i){var item=items[i];if(grid.drawOnChartArea){drawLine({x:item.x1,y:item.y1},{x:item.x2,y:item.y2},item);}if(grid.drawTicks){drawLine({x:item.tx1,y:item.ty1},{x:item.tx2,y:item.ty2},{color:item.tickColor,width:item.tickWidth,borderDash:item.tickBorderDash,borderDashOffset:item.tickBorderDashOffset});}}}}},{key:"drawBorder",value:function drawBorder(){var chart=this.chart,ctx=this.ctx,grid=this.options.grid;var borderOpts=grid.setContext(this.getContext());var axisWidth=grid.drawBorder?borderOpts.borderWidth:0;if(!axisWidth){return;}var lastLineWidth=grid.setContext(this.getContext(0)).lineWidth;var borderValue=this._borderValue;var x1,x2,y1,y2;if(this.isHorizontal()){x1=_alignPixel(chart,this.left,axisWidth)-axisWidth/2;x2=_alignPixel(chart,this.right,lastLineWidth)+lastLineWidth/2;y1=y2=borderValue;}else{y1=_alignPixel(chart,this.top,axisWidth)-axisWidth/2;y2=_alignPixel(chart,this.bottom,lastLineWidth)+lastLineWidth/2;x1=x2=borderValue;}ctx.save();ctx.lineWidth=borderOpts.borderWidth;ctx.strokeStyle=borderOpts.borderColor;ctx.beginPath();ctx.moveTo(x1,y1);ctx.lineTo(x2,y2);ctx.stroke();ctx.restore();}},{key:"drawLabels",value:function drawLabels(chartArea){var optionTicks=this.options.ticks;if(!optionTicks.display){return;}var ctx=this.ctx;var area=this._computeLabelArea();if(area){clipArea(ctx,area);}var items=this._labelItems||(this._labelItems=this._computeLabelItems(chartArea));var i,ilen;for(i=0,ilen=items.length;i<ilen;++i){var item=items[i];var tickFont=item.font;var label=item.label;if(item.backdrop){ctx.fillStyle=item.backdrop.color;ctx.fillRect(item.backdrop.left,item.backdrop.top,item.backdrop.width,item.backdrop.height);}var y=item.textOffset;renderText(ctx,label,0,y,tickFont,item);}if(area){unclipArea(ctx);}}},{key:"drawTitle",value:function drawTitle(){var ctx=this.ctx,_this$options9=this.options,position=_this$options9.position,title4=_this$options9.title,reverse=_this$options9.reverse;if(!title4.display){return;}var font=toFont(title4.font);var padding=toPadding(title4.padding);var align=title4.align;var offset=font.lineHeight/2;if(position==="bottom"||position==="center"||isObject(position)){offset+=padding.bottom;if(isArray(title4.text)){offset+=font.lineHeight*(title4.text.length-1);}}else{offset+=padding.top;}var _titleArgs=titleArgs(this,offset,position,align),titleX=_titleArgs.titleX,titleY=_titleArgs.titleY,maxWidth=_titleArgs.maxWidth,rotation=_titleArgs.rotation;renderText(ctx,title4.text,0,0,font,{color:title4.color,maxWidth:maxWidth,rotation:rotation,textAlign:titleAlign(align,position,reverse),textBaseline:"middle",translation:[titleX,titleY]});}},{key:"draw",value:function draw(chartArea){if(!this._isVisible()){return;}this.drawBackground();this.drawGrid(chartArea);this.drawBorder();this.drawTitle();this.drawLabels(chartArea);}},{key:"_layers",value:function _layers(){var _this10=this;var opts=this.options;var tz=opts.ticks&&opts.ticks.z||0;var gz=valueOrDefault(opts.grid&&opts.grid.z,-1);if(!this._isVisible()||this.draw!==_Scale.prototype.draw){return[{z:tz,draw:function draw(chartArea){_this10.draw(chartArea);}}];}return[{z:gz,draw:function draw(chartArea){_this10.drawBackground();_this10.drawGrid(chartArea);_this10.drawTitle();}},{z:gz+1,draw:function draw(){_this10.drawBorder();}},{z:tz,draw:function draw(chartArea){_this10.drawLabels(chartArea);}}];}},{key:"getMatchingVisibleMetas",value:function getMatchingVisibleMetas(type2){var metas=this.chart.getSortedVisibleDatasetMetas();var axisID=this.axis+"AxisID";var result=[];var i,ilen;for(i=0,ilen=metas.length;i<ilen;++i){var meta=metas[i];if(meta[axisID]===this.id&&(!type2||meta.type===type2)){result.push(meta);}}return result;}},{key:"_resolveTickFontOptions",value:function _resolveTickFontOptions(index3){var opts=this.options.ticks.setContext(this.getContext(index3));return toFont(opts.font);}},{key:"_maxDigits",value:function _maxDigits(){var fontSize=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/fontSize;}}]);return _Scale;}(Element);var TypedRegistry=/*#__PURE__*/function(){function TypedRegistry(type2,scope,override){_classCallCheck(this,TypedRegistry);this.type=type2;this.scope=scope;this.override=override;this.items=/* @__PURE__ */Object.create(null);}_createClass(TypedRegistry,[{key:"isForType",value:function isForType(type2){return Object.prototype.isPrototypeOf.call(this.type.prototype,type2.prototype);}},{key:"register",value:function register(item){var proto=Object.getPrototypeOf(item);var parentScope;if(isIChartComponent(proto)){parentScope=this.register(proto);}var items=this.items;var id2=item.id;var scope=this.scope+"."+id2;if(!id2){throw new Error("class does not have id: "+item);}if(id2 in items){return scope;}items[id2]=item;registerDefaults(item,scope,parentScope);if(this.override){defaults.override(item.id,item.overrides);}return scope;}},{key:"get",value:function get(id2){return this.items[id2];}},{key:"unregister",value:function unregister(item){var items=this.items;var id2=item.id;var scope=this.scope;if(id2 in items){delete items[id2];}if(scope&&id2 in defaults[scope]){delete defaults[scope][id2];if(this.override){delete overrides[id2];}}}}]);return TypedRegistry;}();function registerDefaults(item,scope,parentScope){var itemDefaults=merge(/* @__PURE__ */Object.create(null),[parentScope?defaults.get(parentScope):{},defaults.get(scope),item.defaults]);defaults.set(scope,itemDefaults);if(item.defaultRoutes){routeDefaults(scope,item.defaultRoutes);}if(item.descriptors){defaults.describe(scope,item.descriptors);}}function routeDefaults(scope,routes){Object.keys(routes).forEach(function(property){var propertyParts=property.split(".");var sourceName=propertyParts.pop();var sourceScope=[scope].concat(propertyParts).join(".");var parts=routes[property].split(".");var targetName=parts.pop();var targetScope=parts.join(".");defaults.route(sourceScope,sourceName,targetScope,targetName);});}function isIChartComponent(proto){return"id"in proto&&"defaults"in proto;}var Registry=/*#__PURE__*/function(){function Registry(){_classCallCheck(this,Registry);this.controllers=new TypedRegistry(DatasetController,"datasets",true);this.elements=new TypedRegistry(Element,"elements");this.plugins=new TypedRegistry(Object,"plugins");this.scales=new TypedRegistry(Scale,"scales");this._typedRegistries=[this.controllers,this.scales,this.elements];}_createClass(Registry,[{key:"add",value:function add(){for(var _len4=arguments.length,args=new Array(_len4),_key5=0;_key5<_len4;_key5++){args[_key5]=arguments[_key5];}this._each("register",args);}},{key:"remove",value:function remove(){for(var _len5=arguments.length,args=new Array(_len5),_key6=0;_key6<_len5;_key6++){args[_key6]=arguments[_key6];}this._each("unregister",args);}},{key:"addControllers",value:function addControllers(){for(var _len6=arguments.length,args=new Array(_len6),_key7=0;_key7<_len6;_key7++){args[_key7]=arguments[_key7];}this._each("register",args,this.controllers);}},{key:"addElements",value:function addElements(){for(var _len7=arguments.length,args=new Array(_len7),_key8=0;_key8<_len7;_key8++){args[_key8]=arguments[_key8];}this._each("register",args,this.elements);}},{key:"addPlugins",value:function addPlugins(){for(var _len8=arguments.length,args=new Array(_len8),_key9=0;_key9<_len8;_key9++){args[_key9]=arguments[_key9];}this._each("register",args,this.plugins);}},{key:"addScales",value:function addScales(){for(var _len9=arguments.length,args=new Array(_len9),_key10=0;_key10<_len9;_key10++){args[_key10]=arguments[_key10];}this._each("register",args,this.scales);}},{key:"getController",value:function getController(id2){return this._get(id2,this.controllers,"controller");}},{key:"getElement",value:function getElement(id2){return this._get(id2,this.elements,"element");}},{key:"getPlugin",value:function getPlugin(id2){return this._get(id2,this.plugins,"plugin");}},{key:"getScale",value:function getScale(id2){return this._get(id2,this.scales,"scale");}},{key:"removeControllers",value:function removeControllers(){for(var _len10=arguments.length,args=new Array(_len10),_key11=0;_key11<_len10;_key11++){args[_key11]=arguments[_key11];}this._each("unregister",args,this.controllers);}},{key:"removeElements",value:function removeElements(){for(var _len11=arguments.length,args=new Array(_len11),_key12=0;_key12<_len11;_key12++){args[_key12]=arguments[_key12];}this._each("unregister",args,this.elements);}},{key:"removePlugins",value:function removePlugins(){for(var _len12=arguments.length,args=new Array(_len12),_key13=0;_key13<_len12;_key13++){args[_key13]=arguments[_key13];}this._each("unregister",args,this.plugins);}},{key:"removeScales",value:function removeScales(){for(var _len13=arguments.length,args=new Array(_len13),_key14=0;_key14<_len13;_key14++){args[_key14]=arguments[_key14];}this._each("unregister",args,this.scales);}},{key:"_each",value:function _each(method,args,typedRegistry){var _this11=this;_toConsumableArray(args).forEach(function(arg){var reg=typedRegistry||_this11._getRegistryForType(arg);if(typedRegistry||reg.isForType(arg)||reg===_this11.plugins&&arg.id){_this11._exec(method,reg,arg);}else{each(arg,function(item){var itemReg=typedRegistry||_this11._getRegistryForType(item);_this11._exec(method,itemReg,item);});}});}},{key:"_exec",value:function _exec(method,registry2,component){var camelMethod=_capitalize(method);callback(component["before"+camelMethod],[],component);registry2[method](component);callback(component["after"+camelMethod],[],component);}},{key:"_getRegistryForType",value:function _getRegistryForType(type2){for(var i=0;i<this._typedRegistries.length;i++){var reg=this._typedRegistries[i];if(reg.isForType(type2)){return reg;}}return this.plugins;}},{key:"_get",value:function _get(id2,typedRegistry,type2){var item=typedRegistry.get(id2);if(item===void 0){throw new Error('"'+id2+'" is not a registered '+type2+".");}return item;}}]);return Registry;}();var registry=new Registry();var ScatterController=/*#__PURE__*/function(_DatasetController7){_inherits(ScatterController,_DatasetController7);var _super9=_createSuper(ScatterController);function ScatterController(){_classCallCheck(this,ScatterController);return _super9.apply(this,arguments);}_createClass(ScatterController,[{key:"update",value:function update(mode){var meta=this._cachedMeta;var _meta$data2=meta.data,points=_meta$data2===void 0?[]:_meta$data2;var animationsDisabled=this.chart._animationsDisabled;var _getStartAndCountOfVi2=_getStartAndCountOfVisiblePoints(meta,points,animationsDisabled),start2=_getStartAndCountOfVi2.start,count=_getStartAndCountOfVi2.count;this._drawStart=start2;this._drawCount=count;if(_scaleRangesChanged(meta)){start2=0;count=points.length;}if(this.options.showLine){var line=meta.dataset,_dataset=meta._dataset;line._chart=this.chart;line._datasetIndex=this.index;line._decimated=!!_dataset._decimated;line.points=points;var options=this.resolveDatasetElementOptions(mode);options.segment=this.options.segment;this.updateElement(line,void 0,{animated:!animationsDisabled,options:options},mode);}this.updateElements(points,start2,count,mode);}},{key:"addElements",value:function addElements(){var showLine=this.options.showLine;if(!this.datasetElementType&&showLine){this.datasetElementType=registry.getElement("line");}_get(_getPrototypeOf(ScatterController.prototype),"addElements",this).call(this);}},{key:"updateElements",value:function updateElements(points,start2,count,mode){var reset=mode==="reset";var _this$_cachedMeta4=this._cachedMeta,iScale=_this$_cachedMeta4.iScale,vScale=_this$_cachedMeta4.vScale,_stacked=_this$_cachedMeta4._stacked,_dataset=_this$_cachedMeta4._dataset;var firstOpts=this.resolveDataElementOptions(start2,mode);var sharedOptions=this.getSharedOptions(firstOpts);var includeOptions=this.includeOptions(mode,sharedOptions);var iAxis=iScale.axis;var vAxis=vScale.axis;var _this$options10=this.options,spanGaps=_this$options10.spanGaps,segment=_this$options10.segment;var maxGapLength=isNumber(spanGaps)?spanGaps:Number.POSITIVE_INFINITY;var directUpdate=this.chart._animationsDisabled||reset||mode==="none";var prevParsed=start2>0&&this.getParsed(start2-1);for(var i=start2;i<start2+count;++i){var point=points[i];var parsed=this.getParsed(i);var properties=directUpdate?point:{};var nullData=isNullOrUndef(parsed[vAxis]);var iPixel=properties[iAxis]=iScale.getPixelForValue(parsed[iAxis],i);var vPixel=properties[vAxis]=reset||nullData?vScale.getBasePixel():vScale.getPixelForValue(_stacked?this.applyStack(vScale,parsed,_stacked):parsed[vAxis],i);properties.skip=isNaN(iPixel)||isNaN(vPixel)||nullData;properties.stop=i>0&&Math.abs(parsed[iAxis]-prevParsed[iAxis])>maxGapLength;if(segment){properties.parsed=parsed;properties.raw=_dataset.data[i];}if(includeOptions){properties.options=sharedOptions||this.resolveDataElementOptions(i,point.active?"active":mode);}if(!directUpdate){this.updateElement(point,i,properties,mode);}prevParsed=parsed;}this.updateSharedOptions(sharedOptions,mode,firstOpts);}},{key:"getMaxOverflow",value:function getMaxOverflow(){var meta=this._cachedMeta;var data=meta.data||[];if(!this.options.showLine){var max3=0;for(var i=data.length-1;i>=0;--i){max3=Math.max(max3,data[i].size(this.resolveDataElementOptions(i))/2);}return max3>0&&max3;}var dataset=meta.dataset;var border=dataset.options&&dataset.options.borderWidth||0;if(!data.length){return border;}var firstPoint=data[0].size(this.resolveDataElementOptions(0));var lastPoint=data[data.length-1].size(this.resolveDataElementOptions(data.length-1));return Math.max(border,firstPoint,lastPoint)/2;}}]);return ScatterController;}(DatasetController);ScatterController.id="scatter";ScatterController.defaults={datasetElementType:false,dataElementType:"point",showLine:false,fill:false};ScatterController.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:function title(){return"";},label:function label(item){return"("+item.label+", "+item.formattedValue+")";}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var controllers=/* @__PURE__ */Object.freeze({__proto__:null,BarController:BarController,BubbleController:BubbleController,DoughnutController:DoughnutController,LineController:LineController,PolarAreaController:PolarAreaController,PieController:PieController,RadarController:RadarController,ScatterController:ScatterController});function _abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.");}var DateAdapter=/*#__PURE__*/function(){function DateAdapter(options){_classCallCheck(this,DateAdapter);this.options=options||{};}_createClass(DateAdapter,[{key:"init",value:function init(chartOptions){}},{key:"formats",value:function formats(){return _abstract();}},{key:"parse",value:function parse(value,format2){return _abstract();}},{key:"format",value:function format(timestamp,format2){return _abstract();}},{key:"add",value:function add(timestamp,amount,unit){return _abstract();}},{key:"diff",value:function diff(a,b,unit){return _abstract();}},{key:"startOf",value:function startOf(timestamp,unit,weekday){return _abstract();}},{key:"endOf",value:function endOf(timestamp,unit){return _abstract();}}]);return DateAdapter;}();DateAdapter.override=function(members){Object.assign(DateAdapter.prototype,members);};var adapters={_date:DateAdapter};function binarySearch(metaset,axis,value,intersect){var controller=metaset.controller,data=metaset.data,_sorted=metaset._sorted;var iScale=controller._cachedMeta.iScale;if(iScale&&axis===iScale.axis&&axis!=="r"&&_sorted&&data.length){var lookupMethod=iScale._reversePixels?_rlookupByKey:_lookupByKey;if(!intersect){return lookupMethod(data,axis,value);}else if(controller._sharedOptions){var el=data[0];var range=typeof el.getRange==="function"&&el.getRange(axis);if(range){var start2=lookupMethod(data,axis,value-range);var end=lookupMethod(data,axis,value+range);return{lo:start2.lo,hi:end.hi};}}}return{lo:0,hi:data.length-1};}function evaluateInteractionItems(chart,axis,position,handler,intersect){var metasets=chart.getSortedVisibleDatasetMetas();var value=position[axis];for(var i=0,ilen=metasets.length;i<ilen;++i){var _metasets$i=metasets[i],index3=_metasets$i.index,data=_metasets$i.data;var _binarySearch=binarySearch(metasets[i],axis,value,intersect),lo=_binarySearch.lo,hi=_binarySearch.hi;for(var j=lo;j<=hi;++j){var element=data[j];if(!element.skip){handler(element,index3,j);}}}}function getDistanceMetricForAxis(axis){var useX=axis.indexOf("x")!==-1;var useY=axis.indexOf("y")!==-1;return function(pt1,pt2){var deltaX=useX?Math.abs(pt1.x-pt2.x):0;var deltaY=useY?Math.abs(pt1.y-pt2.y):0;return Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2));};}function getIntersectItems(chart,position,axis,useFinalPosition,includeInvisible){var items=[];if(!includeInvisible&&!chart.isPointInArea(position)){return items;}var evaluationFunc=function evaluationFunc(element,datasetIndex,index3){if(!includeInvisible&&!_isPointInArea(element,chart.chartArea,0)){return;}if(element.inRange(position.x,position.y,useFinalPosition)){items.push({element:element,datasetIndex:datasetIndex,index:index3});}};evaluateInteractionItems(chart,axis,position,evaluationFunc,true);return items;}function getNearestRadialItems(chart,position,axis,useFinalPosition){var items=[];function evaluationFunc(element,datasetIndex,index3){var _element$getProps=element.getProps(["startAngle","endAngle"],useFinalPosition),startAngle=_element$getProps.startAngle,endAngle=_element$getProps.endAngle;var _getAngleFromPoint=getAngleFromPoint(element,{x:position.x,y:position.y}),angle=_getAngleFromPoint.angle;if(_angleBetween(angle,startAngle,endAngle)){items.push({element:element,datasetIndex:datasetIndex,index:index3});}}evaluateInteractionItems(chart,axis,position,evaluationFunc);return items;}function getNearestCartesianItems(chart,position,axis,intersect,useFinalPosition,includeInvisible){var items=[];var distanceMetric=getDistanceMetricForAxis(axis);var minDistance=Number.POSITIVE_INFINITY;function evaluationFunc(element,datasetIndex,index3){var inRange2=element.inRange(position.x,position.y,useFinalPosition);if(intersect&&!inRange2){return;}var center=element.getCenterPoint(useFinalPosition);var pointInArea=!!includeInvisible||chart.isPointInArea(center);if(!pointInArea&&!inRange2){return;}var distance=distanceMetric(position,center);if(distance<minDistance){items=[{element:element,datasetIndex:datasetIndex,index:index3}];minDistance=distance;}else if(distance===minDistance){items.push({element:element,datasetIndex:datasetIndex,index:index3});}}evaluateInteractionItems(chart,axis,position,evaluationFunc);return items;}function getNearestItems(chart,position,axis,intersect,useFinalPosition,includeInvisible){if(!includeInvisible&&!chart.isPointInArea(position)){return[];}return axis==="r"&&!intersect?getNearestRadialItems(chart,position,axis,useFinalPosition):getNearestCartesianItems(chart,position,axis,intersect,useFinalPosition,includeInvisible);}function getAxisItems(chart,position,axis,intersect,useFinalPosition){var items=[];var rangeMethod=axis==="x"?"inXRange":"inYRange";var intersectsItem=false;evaluateInteractionItems(chart,axis,position,function(element,datasetIndex,index3){if(element[rangeMethod](position[axis],useFinalPosition)){items.push({element:element,datasetIndex:datasetIndex,index:index3});intersectsItem=intersectsItem||element.inRange(position.x,position.y,useFinalPosition);}});if(intersect&&!intersectsItem){return[];}return items;}var Interaction={evaluateInteractionItems:evaluateInteractionItems,modes:{index:function index(chart,e,options,useFinalPosition){var position=getRelativePosition(e,chart);var axis=options.axis||"x";var includeInvisible=options.includeInvisible||false;var items=options.intersect?getIntersectItems(chart,position,axis,useFinalPosition,includeInvisible):getNearestItems(chart,position,axis,false,useFinalPosition,includeInvisible);var elements2=[];if(!items.length){return[];}chart.getSortedVisibleDatasetMetas().forEach(function(meta){var index3=items[0].index;var element=meta.data[index3];if(element&&!element.skip){elements2.push({element:element,datasetIndex:meta.index,index:index3});}});return elements2;},dataset:function dataset(chart,e,options,useFinalPosition){var position=getRelativePosition(e,chart);var axis=options.axis||"xy";var includeInvisible=options.includeInvisible||false;var items=options.intersect?getIntersectItems(chart,position,axis,useFinalPosition,includeInvisible):getNearestItems(chart,position,axis,false,useFinalPosition,includeInvisible);if(items.length>0){var datasetIndex=items[0].datasetIndex;var data=chart.getDatasetMeta(datasetIndex).data;items=[];for(var i=0;i<data.length;++i){items.push({element:data[i],datasetIndex:datasetIndex,index:i});}}return items;},point:function point(chart,e,options,useFinalPosition){var position=getRelativePosition(e,chart);var axis=options.axis||"xy";var includeInvisible=options.includeInvisible||false;return getIntersectItems(chart,position,axis,useFinalPosition,includeInvisible);},nearest:function nearest(chart,e,options,useFinalPosition){var position=getRelativePosition(e,chart);var axis=options.axis||"xy";var includeInvisible=options.includeInvisible||false;return getNearestItems(chart,position,axis,options.intersect,useFinalPosition,includeInvisible);},x:function x(chart,e,options,useFinalPosition){var position=getRelativePosition(e,chart);return getAxisItems(chart,position,"x",options.intersect,useFinalPosition);},y:function y(chart,e,options,useFinalPosition){var position=getRelativePosition(e,chart);return getAxisItems(chart,position,"y",options.intersect,useFinalPosition);}}};var STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(array2,position){return array2.filter(function(v){return v.pos===position;});}function filterDynamicPositionByAxis(array2,axis){return array2.filter(function(v){return STATIC_POSITIONS.indexOf(v.pos)===-1&&v.box.axis===axis;});}function sortByWeight(array2,reverse){return array2.sort(function(a,b){var v0=reverse?b:a;var v1=reverse?a:b;return v0.weight===v1.weight?v0.index-v1.index:v0.weight-v1.weight;});}function wrapBoxes(boxes){var layoutBoxes=[];var i,ilen,box,pos,stack,stackWeight;for(i=0,ilen=(boxes||[]).length;i<ilen;++i){box=boxes[i];var _box=box;pos=_box.position;var _box$options=_box.options;stack=_box$options.stack;var _box$options$stackWei=_box$options.stackWeight;stackWeight=_box$options$stackWei===void 0?1:_box$options$stackWei;layoutBoxes.push({index:i,box:box,pos:pos,horizontal:box.isHorizontal(),weight:box.weight,stack:stack&&pos+stack,stackWeight:stackWeight});}return layoutBoxes;}function buildStacks(layouts2){var stacks={};var _iterator17=_createForOfIteratorHelper(layouts2),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var wrap=_step17.value;var stack=wrap.stack,pos=wrap.pos,stackWeight=wrap.stackWeight;if(!stack||!STATIC_POSITIONS.includes(pos)){continue;}var _stack=stacks[stack]||(stacks[stack]={count:0,placed:0,weight:0,size:0});_stack.count++;_stack.weight+=stackWeight;}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}return stacks;}function setLayoutDims(layouts2,params){var stacks=buildStacks(layouts2);var vBoxMaxWidth=params.vBoxMaxWidth,hBoxMaxHeight=params.hBoxMaxHeight;var i,ilen,layout2;for(i=0,ilen=layouts2.length;i<ilen;++i){layout2=layouts2[i];var fullSize=layout2.box.fullSize;var stack=stacks[layout2.stack];var factor=stack&&layout2.stackWeight/stack.weight;if(layout2.horizontal){layout2.width=factor?factor*vBoxMaxWidth:fullSize&&params.availableWidth;layout2.height=hBoxMaxHeight;}else{layout2.width=vBoxMaxWidth;layout2.height=factor?factor*hBoxMaxHeight:fullSize&&params.availableHeight;}}return stacks;}function buildLayoutBoxes(boxes){var layoutBoxes=wrapBoxes(boxes);var fullSize=sortByWeight(layoutBoxes.filter(function(wrap){return wrap.box.fullSize;}),true);var left=sortByWeight(filterByPosition(layoutBoxes,"left"),true);var right=sortByWeight(filterByPosition(layoutBoxes,"right"));var top=sortByWeight(filterByPosition(layoutBoxes,"top"),true);var bottom=sortByWeight(filterByPosition(layoutBoxes,"bottom"));var centerHorizontal=filterDynamicPositionByAxis(layoutBoxes,"x");var centerVertical=filterDynamicPositionByAxis(layoutBoxes,"y");return{fullSize:fullSize,leftAndTop:left.concat(top),rightAndBottom:right.concat(centerVertical).concat(bottom).concat(centerHorizontal),chartArea:filterByPosition(layoutBoxes,"chartArea"),vertical:left.concat(right).concat(centerVertical),horizontal:top.concat(bottom).concat(centerHorizontal)};}function getCombinedMax(maxPadding,chartArea,a,b){return Math.max(maxPadding[a],chartArea[a])+Math.max(maxPadding[b],chartArea[b]);}function updateMaxPadding(maxPadding,boxPadding){maxPadding.top=Math.max(maxPadding.top,boxPadding.top);maxPadding.left=Math.max(maxPadding.left,boxPadding.left);maxPadding.bottom=Math.max(maxPadding.bottom,boxPadding.bottom);maxPadding.right=Math.max(maxPadding.right,boxPadding.right);}function updateDims(chartArea,params,layout2,stacks){var pos=layout2.pos,box=layout2.box;var maxPadding=chartArea.maxPadding;if(!isObject(pos)){if(layout2.size){chartArea[pos]-=layout2.size;}var stack=stacks[layout2.stack]||{size:0,count:1};stack.size=Math.max(stack.size,layout2.horizontal?box.height:box.width);layout2.size=stack.size/stack.count;chartArea[pos]+=layout2.size;}if(box.getPadding){updateMaxPadding(maxPadding,box.getPadding());}var newWidth=Math.max(0,params.outerWidth-getCombinedMax(maxPadding,chartArea,"left","right"));var newHeight=Math.max(0,params.outerHeight-getCombinedMax(maxPadding,chartArea,"top","bottom"));var widthChanged=newWidth!==chartArea.w;var heightChanged=newHeight!==chartArea.h;chartArea.w=newWidth;chartArea.h=newHeight;return layout2.horizontal?{same:widthChanged,other:heightChanged}:{same:heightChanged,other:widthChanged};}function handleMaxPadding(chartArea){var maxPadding=chartArea.maxPadding;function updatePos(pos){var change=Math.max(maxPadding[pos]-chartArea[pos],0);chartArea[pos]+=change;return change;}chartArea.y+=updatePos("top");chartArea.x+=updatePos("left");updatePos("right");updatePos("bottom");}function getMargins(horizontal,chartArea){var maxPadding=chartArea.maxPadding;function marginForPositions(positions3){var margin={left:0,top:0,right:0,bottom:0};positions3.forEach(function(pos){margin[pos]=Math.max(chartArea[pos],maxPadding[pos]);});return margin;}return horizontal?marginForPositions(["left","right"]):marginForPositions(["top","bottom"]);}function fitBoxes(boxes,chartArea,params,stacks){var refitBoxes=[];var i,ilen,layout2,box,refit,changed;for(i=0,ilen=boxes.length,refit=0;i<ilen;++i){layout2=boxes[i];box=layout2.box;box.update(layout2.width||chartArea.w,layout2.height||chartArea.h,getMargins(layout2.horizontal,chartArea));var _updateDims=updateDims(chartArea,params,layout2,stacks),same=_updateDims.same,other=_updateDims.other;refit|=same&&refitBoxes.length;changed=changed||other;if(!box.fullSize){refitBoxes.push(layout2);}}return refit&&fitBoxes(refitBoxes,chartArea,params,stacks)||changed;}function setBoxDims(box,left,top,width,height){box.top=top;box.left=left;box.right=left+width;box.bottom=top+height;box.width=width;box.height=height;}function placeBoxes(boxes,chartArea,params,stacks){var userPadding=params.padding;var x=chartArea.x,y=chartArea.y;var _iterator18=_createForOfIteratorHelper(boxes),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var layout2=_step18.value;var box=layout2.box;var stack=stacks[layout2.stack]||{count:1,placed:0,weight:1};var weight=layout2.stackWeight/stack.weight||1;if(layout2.horizontal){var width=chartArea.w*weight;var height=stack.size||box.height;if(defined(stack.start)){y=stack.start;}if(box.fullSize){setBoxDims(box,userPadding.left,y,params.outerWidth-userPadding.right-userPadding.left,height);}else{setBoxDims(box,chartArea.left+stack.placed,y,width,height);}stack.start=y;stack.placed+=width;y=box.bottom;}else{var _height=chartArea.h*weight;var _width=stack.size||box.width;if(defined(stack.start)){x=stack.start;}if(box.fullSize){setBoxDims(box,x,userPadding.top,_width,params.outerHeight-userPadding.bottom-userPadding.top);}else{setBoxDims(box,x,chartArea.top+stack.placed,_width,_height);}stack.start=x;stack.placed+=_height;x=box.right;}}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}chartArea.x=x;chartArea.y=y;}defaults.set("layout",{autoPadding:true,padding:{top:0,right:0,bottom:0,left:0}});var layouts={addBox:function addBox(chart,item){if(!chart.boxes){chart.boxes=[];}item.fullSize=item.fullSize||false;item.position=item.position||"top";item.weight=item.weight||0;item._layers=item._layers||function(){return[{z:0,draw:function draw(chartArea){item.draw(chartArea);}}];};chart.boxes.push(item);},removeBox:function removeBox(chart,layoutItem){var index3=chart.boxes?chart.boxes.indexOf(layoutItem):-1;if(index3!==-1){chart.boxes.splice(index3,1);}},configure:function configure(chart,item,options){item.fullSize=options.fullSize;item.position=options.position;item.weight=options.weight;},update:function update(chart,width,height,minPadding){if(!chart){return;}var padding=toPadding(chart.options.layout.padding);var availableWidth=Math.max(width-padding.width,0);var availableHeight=Math.max(height-padding.height,0);var boxes=buildLayoutBoxes(chart.boxes);var verticalBoxes=boxes.vertical;var horizontalBoxes=boxes.horizontal;each(chart.boxes,function(box){if(typeof box.beforeLayout==="function"){box.beforeLayout();}});var visibleVerticalBoxCount=verticalBoxes.reduce(function(total,wrap){return wrap.box.options&&wrap.box.options.display===false?total:total+1;},0)||1;var params=Object.freeze({outerWidth:width,outerHeight:height,padding:padding,availableWidth:availableWidth,availableHeight:availableHeight,vBoxMaxWidth:availableWidth/2/visibleVerticalBoxCount,hBoxMaxHeight:availableHeight/2});var maxPadding=Object.assign({},padding);updateMaxPadding(maxPadding,toPadding(minPadding));var chartArea=Object.assign({maxPadding:maxPadding,w:availableWidth,h:availableHeight,x:padding.left,y:padding.top},padding);var stacks=setLayoutDims(verticalBoxes.concat(horizontalBoxes),params);fitBoxes(boxes.fullSize,chartArea,params,stacks);fitBoxes(verticalBoxes,chartArea,params,stacks);if(fitBoxes(horizontalBoxes,chartArea,params,stacks)){fitBoxes(verticalBoxes,chartArea,params,stacks);}handleMaxPadding(chartArea);placeBoxes(boxes.leftAndTop,chartArea,params,stacks);chartArea.x+=chartArea.w;chartArea.y+=chartArea.h;placeBoxes(boxes.rightAndBottom,chartArea,params,stacks);chart.chartArea={left:chartArea.left,top:chartArea.top,right:chartArea.left+chartArea.w,bottom:chartArea.top+chartArea.h,height:chartArea.h,width:chartArea.w};each(boxes.chartArea,function(layout2){var box=layout2.box;Object.assign(box,chart.chartArea);box.update(chartArea.w,chartArea.h,{left:0,top:0,right:0,bottom:0});});}};var BasePlatform=/*#__PURE__*/function(){function BasePlatform(){_classCallCheck(this,BasePlatform);}_createClass(BasePlatform,[{key:"acquireContext",value:function acquireContext(canvas,aspectRatio){}},{key:"releaseContext",value:function releaseContext(context){return false;}},{key:"addEventListener",value:function addEventListener(chart,type2,listener){}},{key:"removeEventListener",value:function removeEventListener(chart,type2,listener){}},{key:"getDevicePixelRatio",value:function getDevicePixelRatio(){return 1;}},{key:"getMaximumSize",value:function getMaximumSize(element,width,height,aspectRatio){width=Math.max(0,width||element.width);height=height||element.height;return{width:width,height:Math.max(0,aspectRatio?Math.floor(width/aspectRatio):height)};}},{key:"isAttached",value:function isAttached(canvas){return true;}},{key:"updateConfig",value:function updateConfig(config){}}]);return BasePlatform;}();var BasicPlatform=/*#__PURE__*/function(_BasePlatform){_inherits(BasicPlatform,_BasePlatform);var _super10=_createSuper(BasicPlatform);function BasicPlatform(){_classCallCheck(this,BasicPlatform);return _super10.apply(this,arguments);}_createClass(BasicPlatform,[{key:"acquireContext",value:function acquireContext(item){return item&&item.getContext&&item.getContext("2d")||null;}},{key:"updateConfig",value:function updateConfig(config){config.options.animation=false;}}]);return BasicPlatform;}(BasePlatform);var EXPANDO_KEY="$chartjs";var EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};var isNullOrEmpty=function isNullOrEmpty(value){return value===null||value==="";};function initCanvas(canvas,aspectRatio){var style=canvas.style;var renderHeight=canvas.getAttribute("height");var renderWidth=canvas.getAttribute("width");canvas[EXPANDO_KEY]={initial:{height:renderHeight,width:renderWidth,style:{display:style.display,height:style.height,width:style.width}}};style.display=style.display||"block";style.boxSizing=style.boxSizing||"border-box";if(isNullOrEmpty(renderWidth)){var displayWidth=readUsedSize(canvas,"width");if(displayWidth!==void 0){canvas.width=displayWidth;}}if(isNullOrEmpty(renderHeight)){if(canvas.style.height===""){canvas.height=canvas.width/(aspectRatio||2);}else{var displayHeight=readUsedSize(canvas,"height");if(displayHeight!==void 0){canvas.height=displayHeight;}}}return canvas;}var eventListenerOptions=supportsEventListenerOptions?{passive:true}:false;function addListener(node,type2,listener){node.addEventListener(type2,listener,eventListenerOptions);}function removeListener(chart,type2,listener){chart.canvas.removeEventListener(type2,listener,eventListenerOptions);}function fromNativeEvent(event,chart){var type2=EVENT_TYPES[event.type]||event.type;var _getRelativePosition=getRelativePosition(event,chart),x=_getRelativePosition.x,y=_getRelativePosition.y;return{type:type2,chart:chart,"native":event,x:x!==void 0?x:null,y:y!==void 0?y:null};}function nodeListContains(nodeList,canvas){var _iterator19=_createForOfIteratorHelper(nodeList),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var node=_step19.value;if(node===canvas||node.contains(canvas)){return true;}}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}}function createAttachObserver(chart,type2,listener){var canvas=chart.canvas;var observer=new MutationObserver(function(entries){var trigger=false;var _iterator20=_createForOfIteratorHelper(entries),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var entry=_step20.value;trigger=trigger||nodeListContains(entry.addedNodes,canvas);trigger=trigger&&!nodeListContains(entry.removedNodes,canvas);}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}if(trigger){listener();}});observer.observe(document,{childList:true,subtree:true});return observer;}function createDetachObserver(chart,type2,listener){var canvas=chart.canvas;var observer=new MutationObserver(function(entries){var trigger=false;var _iterator21=_createForOfIteratorHelper(entries),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var entry=_step21.value;trigger=trigger||nodeListContains(entry.removedNodes,canvas);trigger=trigger&&!nodeListContains(entry.addedNodes,canvas);}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}if(trigger){listener();}});observer.observe(document,{childList:true,subtree:true});return observer;}var drpListeningCharts=/* @__PURE__ */new Map();var oldDevicePixelRatio=0;function onWindowResize(){var dpr=window.devicePixelRatio;if(dpr===oldDevicePixelRatio){return;}oldDevicePixelRatio=dpr;drpListeningCharts.forEach(function(resize,chart){if(chart.currentDevicePixelRatio!==dpr){resize();}});}function listenDevicePixelRatioChanges(chart,resize){if(!drpListeningCharts.size){window.addEventListener("resize",onWindowResize);}drpListeningCharts.set(chart,resize);}function unlistenDevicePixelRatioChanges(chart){drpListeningCharts["delete"](chart);if(!drpListeningCharts.size){window.removeEventListener("resize",onWindowResize);}}function createResizeObserver(chart,type2,listener){var canvas=chart.canvas;var container=canvas&&_getParentNode(canvas);if(!container){return;}var resize=throttled(function(width,height){var w=container.clientWidth;listener(width,height);if(w<container.clientWidth){listener();}},window);var observer=new ResizeObserver(function(entries){var entry=entries[0];var width=entry.contentRect.width;var height=entry.contentRect.height;if(width===0&&height===0){return;}resize(width,height);});observer.observe(container);listenDevicePixelRatioChanges(chart,resize);return observer;}function releaseObserver(chart,type2,observer){if(observer){observer.disconnect();}if(type2==="resize"){unlistenDevicePixelRatioChanges(chart);}}function createProxyAndListen(chart,type2,listener){var canvas=chart.canvas;var proxy=throttled(function(event){if(chart.ctx!==null){listener(fromNativeEvent(event,chart));}},chart,function(args){var event=args[0];return[event,event.offsetX,event.offsetY];});addListener(canvas,type2,proxy);return proxy;}var DomPlatform=/*#__PURE__*/function(_BasePlatform2){_inherits(DomPlatform,_BasePlatform2);var _super11=_createSuper(DomPlatform);function DomPlatform(){_classCallCheck(this,DomPlatform);return _super11.apply(this,arguments);}_createClass(DomPlatform,[{key:"acquireContext",value:function acquireContext(canvas,aspectRatio){var context=canvas&&canvas.getContext&&canvas.getContext("2d");if(context&&context.canvas===canvas){initCanvas(canvas,aspectRatio);return context;}return null;}},{key:"releaseContext",value:function releaseContext(context){var canvas=context.canvas;if(!canvas[EXPANDO_KEY]){return false;}var initial=canvas[EXPANDO_KEY].initial;["height","width"].forEach(function(prop){var value=initial[prop];if(isNullOrUndef(value)){canvas.removeAttribute(prop);}else{canvas.setAttribute(prop,value);}});var style=initial.style||{};Object.keys(style).forEach(function(key){canvas.style[key]=style[key];});canvas.width=canvas.width;delete canvas[EXPANDO_KEY];return true;}},{key:"addEventListener",value:function addEventListener(chart,type2,listener){this.removeEventListener(chart,type2);var proxies=chart.$proxies||(chart.$proxies={});var handlers={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver};var handler=handlers[type2]||createProxyAndListen;proxies[type2]=handler(chart,type2,listener);}},{key:"removeEventListener",value:function removeEventListener(chart,type2){var proxies=chart.$proxies||(chart.$proxies={});var proxy=proxies[type2];if(!proxy){return;}var handlers={attach:releaseObserver,detach:releaseObserver,resize:releaseObserver};var handler=handlers[type2]||removeListener;handler(chart,type2,proxy);proxies[type2]=void 0;}},{key:"getDevicePixelRatio",value:function getDevicePixelRatio(){return window.devicePixelRatio;}},{key:"getMaximumSize",value:function getMaximumSize(canvas,width,height,aspectRatio){return _getMaximumSize(canvas,width,height,aspectRatio);}},{key:"isAttached",value:function isAttached(canvas){var container=_getParentNode(canvas);return!!(container&&container.isConnected);}}]);return DomPlatform;}(BasePlatform);function _detectPlatform(canvas){if(!_isDomSupported()||typeof OffscreenCanvas!=="undefined"&&canvas instanceof OffscreenCanvas){return BasicPlatform;}return DomPlatform;}var PluginService=/*#__PURE__*/function(){function PluginService(){_classCallCheck(this,PluginService);this._init=[];}_createClass(PluginService,[{key:"notify",value:function notify(chart,hook,args,filter2){if(hook==="beforeInit"){this._init=this._createDescriptors(chart,true);this._notify(this._init,chart,"install");}var descriptors2=filter2?this._descriptors(chart).filter(filter2):this._descriptors(chart);var result=this._notify(descriptors2,chart,hook,args);if(hook==="afterDestroy"){this._notify(descriptors2,chart,"stop");this._notify(this._init,chart,"uninstall");}return result;}},{key:"_notify",value:function _notify(descriptors2,chart,hook,args){args=args||{};var _iterator22=_createForOfIteratorHelper(descriptors2),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var descriptor=_step22.value;var plugin2=descriptor.plugin;var method=plugin2[hook];var params=[chart,args,descriptor.options];if(callback(method,params,plugin2)===false&&args.cancelable){return false;}}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}return true;}},{key:"invalidate",value:function invalidate(){if(!isNullOrUndef(this._cache)){this._oldCache=this._cache;this._cache=void 0;}}},{key:"_descriptors",value:function _descriptors(chart){if(this._cache){return this._cache;}var descriptors2=this._cache=this._createDescriptors(chart);this._notifyStateChanges(chart);return descriptors2;}},{key:"_createDescriptors",value:function _createDescriptors(chart,all){var config=chart&&chart.config;var options=valueOrDefault(config.options&&config.options.plugins,{});var plugins2=allPlugins(config);return options===false&&!all?[]:createDescriptors(chart,plugins2,options,all);}},{key:"_notifyStateChanges",value:function _notifyStateChanges(chart){var previousDescriptors=this._oldCache||[];var descriptors2=this._cache;var diff=function diff(a,b){return a.filter(function(x){return!b.some(function(y){return x.plugin.id===y.plugin.id;});});};this._notify(diff(previousDescriptors,descriptors2),chart,"stop");this._notify(diff(descriptors2,previousDescriptors),chart,"start");}}]);return PluginService;}();function allPlugins(config){var localIds={};var plugins2=[];var keys=Object.keys(registry.plugins.items);for(var i=0;i<keys.length;i++){plugins2.push(registry.getPlugin(keys[i]));}var local=config.plugins||[];for(var _i2=0;_i2<local.length;_i2++){var plugin2=local[_i2];if(plugins2.indexOf(plugin2)===-1){plugins2.push(plugin2);localIds[plugin2.id]=true;}}return{plugins:plugins2,localIds:localIds};}function getOpts(options,all){if(!all&&options===false){return null;}if(options===true){return{};}return options;}function createDescriptors(chart,_ref3,options,all){var plugins2=_ref3.plugins,localIds=_ref3.localIds;var result=[];var context=chart.getContext();var _iterator23=_createForOfIteratorHelper(plugins2),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var plugin2=_step23.value;var id2=plugin2.id;var opts=getOpts(options[id2],all);if(opts===null){continue;}result.push({plugin:plugin2,options:pluginOpts(chart.config,{plugin:plugin2,local:localIds[id2]},opts,context)});}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}return result;}function pluginOpts(config,_ref4,opts,context){var plugin2=_ref4.plugin,local=_ref4.local;var keys=config.pluginScopeKeys(plugin2);var scopes=config.getOptionScopes(opts,keys);if(local&&plugin2.defaults){scopes.push(plugin2.defaults);}return config.createResolver(scopes,context,[""],{scriptable:false,indexable:false,allKeys:true});}function getIndexAxis(type2,options){var datasetDefaults=defaults.datasets[type2]||{};var datasetOptions=(options.datasets||{})[type2]||{};return datasetOptions.indexAxis||options.indexAxis||datasetDefaults.indexAxis||"x";}function getAxisFromDefaultScaleID(id2,indexAxis){var axis=id2;if(id2==="_index_"){axis=indexAxis;}else if(id2==="_value_"){axis=indexAxis==="x"?"y":"x";}return axis;}function getDefaultScaleIDFromAxis(axis,indexAxis){return axis===indexAxis?"_index_":"_value_";}function axisFromPosition(position){if(position==="top"||position==="bottom"){return"x";}if(position==="left"||position==="right"){return"y";}}function determineAxis(id2,scaleOptions){if(id2==="x"||id2==="y"){return id2;}return scaleOptions.axis||axisFromPosition(scaleOptions.position)||id2.charAt(0).toLowerCase();}function mergeScaleConfig(config,options){var chartDefaults=overrides[config.type]||{scales:{}};var configScales=options.scales||{};var chartIndexAxis=getIndexAxis(config.type,options);var firstIDs=/* @__PURE__ */Object.create(null);var scales2=/* @__PURE__ */Object.create(null);Object.keys(configScales).forEach(function(id2){var scaleConf=configScales[id2];if(!isObject(scaleConf)){return console.error("Invalid scale configuration for scale: ".concat(id2));}if(scaleConf._proxy){return console.warn("Ignoring resolver passed as options for scale: ".concat(id2));}var axis=determineAxis(id2,scaleConf);var defaultId=getDefaultScaleIDFromAxis(axis,chartIndexAxis);var defaultScaleOptions=chartDefaults.scales||{};firstIDs[axis]=firstIDs[axis]||id2;scales2[id2]=mergeIf(/* @__PURE__ */Object.create(null),[{axis:axis},scaleConf,defaultScaleOptions[axis],defaultScaleOptions[defaultId]]);});config.data.datasets.forEach(function(dataset){var type2=dataset.type||config.type;var indexAxis=dataset.indexAxis||getIndexAxis(type2,options);var datasetDefaults=overrides[type2]||{};var defaultScaleOptions=datasetDefaults.scales||{};Object.keys(defaultScaleOptions).forEach(function(defaultID){var axis=getAxisFromDefaultScaleID(defaultID,indexAxis);var id2=dataset[axis+"AxisID"]||firstIDs[axis]||axis;scales2[id2]=scales2[id2]||/* @__PURE__ */Object.create(null);mergeIf(scales2[id2],[{axis:axis},configScales[id2],defaultScaleOptions[defaultID]]);});});Object.keys(scales2).forEach(function(key){var scale=scales2[key];mergeIf(scale,[defaults.scales[scale.type],defaults.scale]);});return scales2;}function initOptions(config){var options=config.options||(config.options={});options.plugins=valueOrDefault(options.plugins,{});options.scales=mergeScaleConfig(config,options);}function initData(data){data=data||{};data.datasets=data.datasets||[];data.labels=data.labels||[];return data;}function initConfig(config){config=config||{};config.data=initData(config.data);initOptions(config);return config;}var keyCache=/* @__PURE__ */new Map();var keysCached=/* @__PURE__ */new Set();function cachedKeys(cacheKey,generate){var keys=keyCache.get(cacheKey);if(!keys){keys=generate();keyCache.set(cacheKey,keys);keysCached.add(keys);}return keys;}var addIfFound=function addIfFound(set4,obj,key){var opts=resolveObjectKey(obj,key);if(opts!==void 0){set4.add(opts);}};var Config=/*#__PURE__*/function(){function Config(config){_classCallCheck(this,Config);this._config=initConfig(config);this._scopeCache=/* @__PURE__ */new Map();this._resolverCache=/* @__PURE__ */new Map();}_createClass(Config,[{key:"platform",get:function get(){return this._config.platform;}},{key:"type",get:function get(){return this._config.type;},set:function set(type2){this._config.type=type2;}},{key:"data",get:function get(){return this._config.data;},set:function set(data){this._config.data=initData(data);}},{key:"options",get:function get(){return this._config.options;},set:function set(options){this._config.options=options;}},{key:"plugins",get:function get(){return this._config.plugins;}},{key:"update",value:function update(){var config=this._config;this.clearCache();initOptions(config);}},{key:"clearCache",value:function clearCache(){this._scopeCache.clear();this._resolverCache.clear();}},{key:"datasetScopeKeys",value:function datasetScopeKeys(datasetType){return cachedKeys(datasetType,function(){return[["datasets.".concat(datasetType),""]];});}},{key:"datasetAnimationScopeKeys",value:function datasetAnimationScopeKeys(datasetType,transition2){return cachedKeys("".concat(datasetType,".transition.").concat(transition2),function(){return[["datasets.".concat(datasetType,".transitions.").concat(transition2),"transitions.".concat(transition2)],["datasets.".concat(datasetType),""]];});}},{key:"datasetElementScopeKeys",value:function datasetElementScopeKeys(datasetType,elementType){return cachedKeys("".concat(datasetType,"-").concat(elementType),function(){return[["datasets.".concat(datasetType,".elements.").concat(elementType),"datasets.".concat(datasetType),"elements.".concat(elementType),""]];});}},{key:"pluginScopeKeys",value:function pluginScopeKeys(plugin2){var id2=plugin2.id;var type2=this.type;return cachedKeys("".concat(type2,"-plugin-").concat(id2),function(){return[["plugins.".concat(id2)].concat(_toConsumableArray(plugin2.additionalOptionScopes||[]))];});}},{key:"_cachedScopes",value:function _cachedScopes(mainScope,resetCache){var _scopeCache=this._scopeCache;var cache=_scopeCache.get(mainScope);if(!cache||resetCache){cache=/* @__PURE__ */new Map();_scopeCache.set(mainScope,cache);}return cache;}},{key:"getOptionScopes",value:function getOptionScopes(mainScope,keyLists,resetCache){var options=this.options,type2=this.type;var cache=this._cachedScopes(mainScope,resetCache);var cached=cache.get(keyLists);if(cached){return cached;}var scopes=/* @__PURE__ */new Set();keyLists.forEach(function(keys){if(mainScope){scopes.add(mainScope);keys.forEach(function(key){return addIfFound(scopes,mainScope,key);});}keys.forEach(function(key){return addIfFound(scopes,options,key);});keys.forEach(function(key){return addIfFound(scopes,overrides[type2]||{},key);});keys.forEach(function(key){return addIfFound(scopes,defaults,key);});keys.forEach(function(key){return addIfFound(scopes,descriptors,key);});});var array2=Array.from(scopes);if(array2.length===0){array2.push(/* @__PURE__ */Object.create(null));}if(keysCached.has(keyLists)){cache.set(keyLists,array2);}return array2;}},{key:"chartOptionScopes",value:function chartOptionScopes(){var options=this.options,type2=this.type;return[options,overrides[type2]||{},defaults.datasets[type2]||{},{type:type2},defaults,descriptors];}},{key:"resolveNamedOptions",value:function resolveNamedOptions(scopes,names2,context){var prefixes2=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[""];var result={$shared:true};var _getResolver=getResolver(this._resolverCache,scopes,prefixes2),resolver=_getResolver.resolver,subPrefixes=_getResolver.subPrefixes;var options=resolver;if(needContext(resolver,names2)){result.$shared=false;context=isFunction(context)?context():context;var subResolver=this.createResolver(scopes,context,subPrefixes);options=_attachContext(resolver,context,subResolver);}var _iterator24=_createForOfIteratorHelper(names2),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var prop=_step24.value;result[prop]=options[prop];}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}return result;}},{key:"createResolver",value:function createResolver(scopes,context){var prefixes2=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[""];var descriptorDefaults=arguments.length>3?arguments[3]:undefined;var _getResolver2=getResolver(this._resolverCache,scopes,prefixes2),resolver=_getResolver2.resolver;return isObject(context)?_attachContext(resolver,context,void 0,descriptorDefaults):resolver;}}]);return Config;}();function getResolver(resolverCache,scopes,prefixes2){var cache=resolverCache.get(scopes);if(!cache){cache=/* @__PURE__ */new Map();resolverCache.set(scopes,cache);}var cacheKey=prefixes2.join();var cached=cache.get(cacheKey);if(!cached){var resolver=_createResolver(scopes,prefixes2);cached={resolver:resolver,subPrefixes:prefixes2.filter(function(p){return!p.toLowerCase().includes("hover");})};cache.set(cacheKey,cached);}return cached;}var hasFunction=function hasFunction(value){return isObject(value)&&Object.getOwnPropertyNames(value).reduce(function(acc,key){return acc||isFunction(value[key]);},false);};function needContext(proxy,names2){var _descriptors3=_descriptors(proxy),isScriptable=_descriptors3.isScriptable,isIndexable=_descriptors3.isIndexable;var _iterator25=_createForOfIteratorHelper(names2),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var prop=_step25.value;var scriptable=isScriptable(prop);var indexable=isIndexable(prop);var value=(indexable||scriptable)&&proxy[prop];if(scriptable&&(isFunction(value)||hasFunction(value))||indexable&&isArray(value)){return true;}}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}return false;}var version="3.9.1";var KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(position,axis){return position==="top"||position==="bottom"||KNOWN_POSITIONS.indexOf(position)===-1&&axis==="x";}function compare2Level(l1,l2){return function(a,b){return a[l1]===b[l1]?a[l2]-b[l2]:a[l1]-b[l1];};}function onAnimationsComplete(context){var chart=context.chart;var animationOptions2=chart.options.animation;chart.notifyPlugins("afterRender");callback(animationOptions2&&animationOptions2.onComplete,[context],chart);}function onAnimationProgress(context){var chart=context.chart;var animationOptions2=chart.options.animation;callback(animationOptions2&&animationOptions2.onProgress,[context],chart);}function getCanvas(item){if(_isDomSupported()&&typeof item==="string"){item=document.getElementById(item);}else if(item&&item.length){item=item[0];}if(item&&item.canvas){item=item.canvas;}return item;}var instances={};var getChart=function getChart(key){var canvas=getCanvas(key);return Object.values(instances).filter(function(c){return c.canvas===canvas;}).pop();};function moveNumericKeys(obj,start2,move){var keys=Object.keys(obj);for(var _i3=0,_keys=keys;_i3<_keys.length;_i3++){var key=_keys[_i3];var intKey=+key;if(intKey>=start2){var value=obj[key];delete obj[key];if(move>0||intKey>start2){obj[intKey+move]=value;}}}}function determineLastEvent(e,lastEvent,inChartArea,isClick){if(!inChartArea||e.type==="mouseout"){return null;}if(isClick){return lastEvent;}return e;}var Chart=/*#__PURE__*/function(){function Chart(item,userConfig){var _this12=this;_classCallCheck(this,Chart);var config=this.config=new Config(userConfig);var initialCanvas=getCanvas(item);var existingChart=getChart(initialCanvas);if(existingChart){throw new Error("Canvas is already in use. Chart with ID '"+existingChart.id+"' must be destroyed before the canvas with ID '"+existingChart.canvas.id+"' can be reused.");}var options=config.createResolver(config.chartOptionScopes(),this.getContext());this.platform=new(config.platform||_detectPlatform(initialCanvas))();this.platform.updateConfig(config);var context=this.platform.acquireContext(initialCanvas,options.aspectRatio);var canvas=context&&context.canvas;var height=canvas&&canvas.height;var width=canvas&&canvas.width;this.id=uid();this.ctx=context;this.canvas=canvas;this.width=width;this.height=height;this._options=options;this._aspectRatio=this.aspectRatio;this._layers=[];this._metasets=[];this._stacks=void 0;this.boxes=[];this.currentDevicePixelRatio=void 0;this.chartArea=void 0;this._active=[];this._lastEvent=void 0;this._listeners={};this._responsiveListeners=void 0;this._sortedMetasets=[];this.scales={};this._plugins=new PluginService();this.$proxies={};this._hiddenIndices={};this.attached=false;this._animationsDisabled=void 0;this.$context=void 0;this._doResize=debounce(function(mode){return _this12.update(mode);},options.resizeDelay||0);this._dataChanges=[];instances[this.id]=this;if(!context||!canvas){console.error("Failed to create chart: can't acquire context from the given item");return;}animator.listen(this,"complete",onAnimationsComplete);animator.listen(this,"progress",onAnimationProgress);this._initialize();if(this.attached){this.update();}}_createClass(Chart,[{key:"aspectRatio",get:function get(){var _this$options11=this.options,aspectRatio=_this$options11.aspectRatio,maintainAspectRatio=_this$options11.maintainAspectRatio,width=this.width,height=this.height,_aspectRatio=this._aspectRatio;if(!isNullOrUndef(aspectRatio)){return aspectRatio;}if(maintainAspectRatio&&_aspectRatio){return _aspectRatio;}return height?width/height:null;}},{key:"data",get:function get(){return this.config.data;},set:function set(data){this.config.data=data;}},{key:"options",get:function get(){return this._options;},set:function set(options){this.config.options=options;}},{key:"_initialize",value:function _initialize(){this.notifyPlugins("beforeInit");if(this.options.responsive){this.resize();}else{retinaScale(this,this.options.devicePixelRatio);}this.bindEvents();this.notifyPlugins("afterInit");return this;}},{key:"clear",value:function clear(){clearCanvas(this.canvas,this.ctx);return this;}},{key:"stop",value:function stop(){animator.stop(this);return this;}},{key:"resize",value:function resize(width,height){if(!animator.running(this)){this._resize(width,height);}else{this._resizeBeforeDraw={width:width,height:height};}}},{key:"_resize",value:function _resize(width,height){var options=this.options;var canvas=this.canvas;var aspectRatio=options.maintainAspectRatio&&this.aspectRatio;var newSize=this.platform.getMaximumSize(canvas,width,height,aspectRatio);var newRatio=options.devicePixelRatio||this.platform.getDevicePixelRatio();var mode=this.width?"resize":"attach";this.width=newSize.width;this.height=newSize.height;this._aspectRatio=this.aspectRatio;if(!retinaScale(this,newRatio,true)){return;}this.notifyPlugins("resize",{size:newSize});callback(options.onResize,[this,newSize],this);if(this.attached){if(this._doResize(mode)){this.render();}}}},{key:"ensureScalesHaveIDs",value:function ensureScalesHaveIDs(){var options=this.options;var scalesOptions=options.scales||{};each(scalesOptions,function(axisOptions,axisID){axisOptions.id=axisID;});}},{key:"buildOrUpdateScales",value:function buildOrUpdateScales(){var _this13=this;var options=this.options;var scaleOpts=options.scales;var scales2=this.scales;var updated=Object.keys(scales2).reduce(function(obj,id2){obj[id2]=false;return obj;},{});var items=[];if(scaleOpts){items=items.concat(Object.keys(scaleOpts).map(function(id2){var scaleOptions=scaleOpts[id2];var axis=determineAxis(id2,scaleOptions);var isRadial=axis==="r";var isHorizontal=axis==="x";return{options:scaleOptions,dposition:isRadial?"chartArea":isHorizontal?"bottom":"left",dtype:isRadial?"radialLinear":isHorizontal?"category":"linear"};}));}each(items,function(item){var scaleOptions=item.options;var id2=scaleOptions.id;var axis=determineAxis(id2,scaleOptions);var scaleType=valueOrDefault(scaleOptions.type,item.dtype);if(scaleOptions.position===void 0||positionIsHorizontal(scaleOptions.position,axis)!==positionIsHorizontal(item.dposition)){scaleOptions.position=item.dposition;}updated[id2]=true;var scale=null;if(id2 in scales2&&scales2[id2].type===scaleType){scale=scales2[id2];}else{var scaleClass=registry.getScale(scaleType);scale=new scaleClass({id:id2,type:scaleType,ctx:_this13.ctx,chart:_this13});scales2[scale.id]=scale;}scale.init(scaleOptions,options);});each(updated,function(hasUpdated,id2){if(!hasUpdated){delete scales2[id2];}});each(scales2,function(scale){layouts.configure(_this13,scale,scale.options);layouts.addBox(_this13,scale);});}},{key:"_updateMetasets",value:function _updateMetasets(){var metasets=this._metasets;var numData=this.data.datasets.length;var numMeta=metasets.length;metasets.sort(function(a,b){return a.index-b.index;});if(numMeta>numData){for(var i=numData;i<numMeta;++i){this._destroyDatasetMeta(i);}metasets.splice(numData,numMeta-numData);}this._sortedMetasets=metasets.slice(0).sort(compare2Level("order","index"));}},{key:"_removeUnreferencedMetasets",value:function _removeUnreferencedMetasets(){var _this14=this;var metasets=this._metasets,datasets=this.data.datasets;if(metasets.length>datasets.length){delete this._stacks;}metasets.forEach(function(meta,index3){if(datasets.filter(function(x){return x===meta._dataset;}).length===0){_this14._destroyDatasetMeta(index3);}});}},{key:"buildOrUpdateControllers",value:function buildOrUpdateControllers(){var newControllers=[];var datasets=this.data.datasets;var i,ilen;this._removeUnreferencedMetasets();for(i=0,ilen=datasets.length;i<ilen;i++){var dataset=datasets[i];var meta=this.getDatasetMeta(i);var type2=dataset.type||this.config.type;if(meta.type&&meta.type!==type2){this._destroyDatasetMeta(i);meta=this.getDatasetMeta(i);}meta.type=type2;meta.indexAxis=dataset.indexAxis||getIndexAxis(type2,this.options);meta.order=dataset.order||0;meta.index=i;meta.label=""+dataset.label;meta.visible=this.isDatasetVisible(i);if(meta.controller){meta.controller.updateIndex(i);meta.controller.linkScales();}else{var ControllerClass=registry.getController(type2);var _defaults$datasets$ty=defaults.datasets[type2],datasetElementType=_defaults$datasets$ty.datasetElementType,dataElementType=_defaults$datasets$ty.dataElementType;Object.assign(ControllerClass.prototype,{dataElementType:registry.getElement(dataElementType),datasetElementType:datasetElementType&&registry.getElement(datasetElementType)});meta.controller=new ControllerClass(this,i);newControllers.push(meta.controller);}}this._updateMetasets();return newControllers;}},{key:"_resetElements",value:function _resetElements(){var _this15=this;each(this.data.datasets,function(dataset,datasetIndex){_this15.getDatasetMeta(datasetIndex).controller.reset();},this);}},{key:"reset",value:function reset(){this._resetElements();this.notifyPlugins("reset");}},{key:"update",value:function update(mode){var config=this.config;config.update();var options=this._options=config.createResolver(config.chartOptionScopes(),this.getContext());var animsDisabled=this._animationsDisabled=!options.animation;this._updateScales();this._checkEventBindings();this._updateHiddenIndices();this._plugins.invalidate();if(this.notifyPlugins("beforeUpdate",{mode:mode,cancelable:true})===false){return;}var newControllers=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");var minPadding=0;for(var i=0,ilen=this.data.datasets.length;i<ilen;i++){var _this$getDatasetMeta=this.getDatasetMeta(i),controller=_this$getDatasetMeta.controller;var reset=!animsDisabled&&newControllers.indexOf(controller)===-1;controller.buildOrUpdateElements(reset);minPadding=Math.max(+controller.getMaxOverflow(),minPadding);}minPadding=this._minPadding=options.layout.autoPadding?minPadding:0;this._updateLayout(minPadding);if(!animsDisabled){each(newControllers,function(controller){controller.reset();});}this._updateDatasets(mode);this.notifyPlugins("afterUpdate",{mode:mode});this._layers.sort(compare2Level("z","_idx"));var _active=this._active,_lastEvent=this._lastEvent;if(_lastEvent){this._eventHandler(_lastEvent,true);}else if(_active.length){this._updateHoverStyles(_active,_active,true);}this.render();}},{key:"_updateScales",value:function _updateScales(){var _this16=this;each(this.scales,function(scale){layouts.removeBox(_this16,scale);});this.ensureScalesHaveIDs();this.buildOrUpdateScales();}},{key:"_checkEventBindings",value:function _checkEventBindings(){var options=this.options;var existingEvents=new Set(Object.keys(this._listeners));var newEvents=new Set(options.events);if(!setsEqual(existingEvents,newEvents)||!!this._responsiveListeners!==options.responsive){this.unbindEvents();this.bindEvents();}}},{key:"_updateHiddenIndices",value:function _updateHiddenIndices(){var _hiddenIndices=this._hiddenIndices;var changes=this._getUniformDataChanges()||[];var _iterator26=_createForOfIteratorHelper(changes),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var _step26$value=_step26.value,method=_step26$value.method,start2=_step26$value.start,count=_step26$value.count;var move=method==="_removeElements"?-count:count;moveNumericKeys(_hiddenIndices,start2,move);}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}}},{key:"_getUniformDataChanges",value:function _getUniformDataChanges(){var _dataChanges=this._dataChanges;if(!_dataChanges||!_dataChanges.length){return;}this._dataChanges=[];var datasetCount=this.data.datasets.length;var makeSet=function makeSet(idx){return new Set(_dataChanges.filter(function(c){return c[0]===idx;}).map(function(c,i){return i+","+c.splice(1).join(",");}));};var changeSet=makeSet(0);for(var i=1;i<datasetCount;i++){if(!setsEqual(changeSet,makeSet(i))){return;}}return Array.from(changeSet).map(function(c){return c.split(",");}).map(function(a){return{method:a[1],start:+a[2],count:+a[3]};});}},{key:"_updateLayout",value:function _updateLayout(minPadding){var _this17=this;if(this.notifyPlugins("beforeLayout",{cancelable:true})===false){return;}layouts.update(this,this.width,this.height,minPadding);var area=this.chartArea;var noArea=area.width<=0||area.height<=0;this._layers=[];each(this.boxes,function(box){var _this17$_layers;if(noArea&&box.position==="chartArea"){return;}if(box.configure){box.configure();}(_this17$_layers=_this17._layers).push.apply(_this17$_layers,_toConsumableArray(box._layers()));},this);this._layers.forEach(function(item,index3){item._idx=index3;});this.notifyPlugins("afterLayout");}},{key:"_updateDatasets",value:function _updateDatasets(mode){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:mode,cancelable:true})===false){return;}for(var i=0,ilen=this.data.datasets.length;i<ilen;++i){this.getDatasetMeta(i).controller.configure();}for(var _i4=0,_ilen=this.data.datasets.length;_i4<_ilen;++_i4){this._updateDataset(_i4,isFunction(mode)?mode({datasetIndex:_i4}):mode);}this.notifyPlugins("afterDatasetsUpdate",{mode:mode});}},{key:"_updateDataset",value:function _updateDataset(index3,mode){var meta=this.getDatasetMeta(index3);var args={meta:meta,index:index3,mode:mode,cancelable:true};if(this.notifyPlugins("beforeDatasetUpdate",args)===false){return;}meta.controller._update(mode);args.cancelable=false;this.notifyPlugins("afterDatasetUpdate",args);}},{key:"render",value:function render(){if(this.notifyPlugins("beforeRender",{cancelable:true})===false){return;}if(animator.has(this)){if(this.attached&&!animator.running(this)){animator.start(this);}}else{this.draw();onAnimationsComplete({chart:this});}}},{key:"draw",value:function draw(){var i;if(this._resizeBeforeDraw){var _this$_resizeBeforeDr=this._resizeBeforeDraw,width=_this$_resizeBeforeDr.width,height=_this$_resizeBeforeDr.height;this._resize(width,height);this._resizeBeforeDraw=null;}this.clear();if(this.width<=0||this.height<=0){return;}if(this.notifyPlugins("beforeDraw",{cancelable:true})===false){return;}var layers=this._layers;for(i=0;i<layers.length&&layers[i].z<=0;++i){layers[i].draw(this.chartArea);}this._drawDatasets();for(;i<layers.length;++i){layers[i].draw(this.chartArea);}this.notifyPlugins("afterDraw");}},{key:"_getSortedDatasetMetas",value:function _getSortedDatasetMetas(filterVisible){var metasets=this._sortedMetasets;var result=[];var i,ilen;for(i=0,ilen=metasets.length;i<ilen;++i){var meta=metasets[i];if(!filterVisible||meta.visible){result.push(meta);}}return result;}},{key:"getSortedVisibleDatasetMetas",value:function getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(true);}},{key:"_drawDatasets",value:function _drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:true})===false){return;}var metasets=this.getSortedVisibleDatasetMetas();for(var i=metasets.length-1;i>=0;--i){this._drawDataset(metasets[i]);}this.notifyPlugins("afterDatasetsDraw");}},{key:"_drawDataset",value:function _drawDataset(meta){var ctx=this.ctx;var clip=meta._clip;var useClip=!clip.disabled;var area=this.chartArea;var args={meta:meta,index:meta.index,cancelable:true};if(this.notifyPlugins("beforeDatasetDraw",args)===false){return;}if(useClip){clipArea(ctx,{left:clip.left===false?0:area.left-clip.left,right:clip.right===false?this.width:area.right+clip.right,top:clip.top===false?0:area.top-clip.top,bottom:clip.bottom===false?this.height:area.bottom+clip.bottom});}meta.controller.draw();if(useClip){unclipArea(ctx);}args.cancelable=false;this.notifyPlugins("afterDatasetDraw",args);}},{key:"isPointInArea",value:function isPointInArea(point){return _isPointInArea(point,this.chartArea,this._minPadding);}},{key:"getElementsAtEventForMode",value:function getElementsAtEventForMode(e,mode,options,useFinalPosition){var method=Interaction.modes[mode];if(typeof method==="function"){return method(this,e,options,useFinalPosition);}return[];}},{key:"getDatasetMeta",value:function getDatasetMeta(datasetIndex){var dataset=this.data.datasets[datasetIndex];var metasets=this._metasets;var meta=metasets.filter(function(x){return x&&x._dataset===dataset;}).pop();if(!meta){meta={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:dataset&&dataset.order||0,index:datasetIndex,_dataset:dataset,_parsed:[],_sorted:false};metasets.push(meta);}return meta;}},{key:"getContext",value:function getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}));}},{key:"getVisibleDatasetCount",value:function getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length;}},{key:"isDatasetVisible",value:function isDatasetVisible(datasetIndex){var dataset=this.data.datasets[datasetIndex];if(!dataset){return false;}var meta=this.getDatasetMeta(datasetIndex);return typeof meta.hidden==="boolean"?!meta.hidden:!dataset.hidden;}},{key:"setDatasetVisibility",value:function setDatasetVisibility(datasetIndex,visible){var meta=this.getDatasetMeta(datasetIndex);meta.hidden=!visible;}},{key:"toggleDataVisibility",value:function toggleDataVisibility(index3){this._hiddenIndices[index3]=!this._hiddenIndices[index3];}},{key:"getDataVisibility",value:function getDataVisibility(index3){return!this._hiddenIndices[index3];}},{key:"_updateVisibility",value:function _updateVisibility(datasetIndex,dataIndex,visible){var mode=visible?"show":"hide";var meta=this.getDatasetMeta(datasetIndex);var anims=meta.controller._resolveAnimations(void 0,mode);if(defined(dataIndex)){meta.data[dataIndex].hidden=!visible;this.update();}else{this.setDatasetVisibility(datasetIndex,visible);anims.update(meta,{visible:visible});this.update(function(ctx){return ctx.datasetIndex===datasetIndex?mode:void 0;});}}},{key:"hide",value:function hide(datasetIndex,dataIndex){this._updateVisibility(datasetIndex,dataIndex,false);}},{key:"show",value:function show(datasetIndex,dataIndex){this._updateVisibility(datasetIndex,dataIndex,true);}},{key:"_destroyDatasetMeta",value:function _destroyDatasetMeta(datasetIndex){var meta=this._metasets[datasetIndex];if(meta&&meta.controller){meta.controller._destroy();}delete this._metasets[datasetIndex];}},{key:"_stop",value:function _stop(){var i,ilen;this.stop();animator.remove(this);for(i=0,ilen=this.data.datasets.length;i<ilen;++i){this._destroyDatasetMeta(i);}}},{key:"destroy",value:function destroy(){this.notifyPlugins("beforeDestroy");var canvas=this.canvas,ctx=this.ctx;this._stop();this.config.clearCache();if(canvas){this.unbindEvents();clearCanvas(canvas,ctx);this.platform.releaseContext(ctx);this.canvas=null;this.ctx=null;}this.notifyPlugins("destroy");delete instances[this.id];this.notifyPlugins("afterDestroy");}},{key:"toBase64Image",value:function toBase64Image(){var _this$canvas;return(_this$canvas=this.canvas).toDataURL.apply(_this$canvas,arguments);}},{key:"bindEvents",value:function bindEvents(){this.bindUserEvents();if(this.options.responsive){this.bindResponsiveEvents();}else{this.attached=true;}}},{key:"bindUserEvents",value:function bindUserEvents(){var _this18=this;var listeners=this._listeners;var platform=this.platform;var _add=function _add(type2,listener2){platform.addEventListener(_this18,type2,listener2);listeners[type2]=listener2;};var listener=function listener(e,x,y){e.offsetX=x;e.offsetY=y;_this18._eventHandler(e);};each(this.options.events,function(type2){return _add(type2,listener);});}},{key:"bindResponsiveEvents",value:function bindResponsiveEvents(){var _this19=this;if(!this._responsiveListeners){this._responsiveListeners={};}var listeners=this._responsiveListeners;var platform=this.platform;var _add=function _add(type2,listener2){platform.addEventListener(_this19,type2,listener2);listeners[type2]=listener2;};var _remove=function _remove(type2,listener2){if(listeners[type2]){platform.removeEventListener(_this19,type2,listener2);delete listeners[type2];}};var listener=function listener(width,height){if(_this19.canvas){_this19.resize(width,height);}};var detached;var attached=function attached(){_remove("attach",attached);_this19.attached=true;_this19.resize();_add("resize",listener);_add("detach",detached);};detached=function detached(){_this19.attached=false;_remove("resize",listener);_this19._stop();_this19._resize(0,0);_add("attach",attached);};if(platform.isAttached(this.canvas)){attached();}else{detached();}}},{key:"unbindEvents",value:function unbindEvents(){var _this20=this;each(this._listeners,function(listener,type2){_this20.platform.removeEventListener(_this20,type2,listener);});this._listeners={};each(this._responsiveListeners,function(listener,type2){_this20.platform.removeEventListener(_this20,type2,listener);});this._responsiveListeners=void 0;}},{key:"updateHoverStyle",value:function updateHoverStyle(items,mode,enabled){var prefix=enabled?"set":"remove";var meta,item,i,ilen;if(mode==="dataset"){meta=this.getDatasetMeta(items[0].datasetIndex);meta.controller["_"+prefix+"DatasetHoverStyle"]();}for(i=0,ilen=items.length;i<ilen;++i){item=items[i];var controller=item&&this.getDatasetMeta(item.datasetIndex).controller;if(controller){controller[prefix+"HoverStyle"](item.element,item.datasetIndex,item.index);}}}},{key:"getActiveElements",value:function getActiveElements(){return this._active||[];}},{key:"setActiveElements",value:function setActiveElements(activeElements){var _this21=this;var lastActive=this._active||[];var active=activeElements.map(function(_ref5){var datasetIndex=_ref5.datasetIndex,index3=_ref5.index;var meta=_this21.getDatasetMeta(datasetIndex);if(!meta){throw new Error("No dataset found at index "+datasetIndex);}return{datasetIndex:datasetIndex,element:meta.data[index3],index:index3};});var changed=!_elementsEqual(active,lastActive);if(changed){this._active=active;this._lastEvent=null;this._updateHoverStyles(active,lastActive);}}},{key:"notifyPlugins",value:function notifyPlugins(hook,args,filter2){return this._plugins.notify(this,hook,args,filter2);}},{key:"_updateHoverStyles",value:function _updateHoverStyles(active,lastActive,replay){var hoverOptions=this.options.hover;var diff=function diff(a,b){return a.filter(function(x){return!b.some(function(y){return x.datasetIndex===y.datasetIndex&&x.index===y.index;});});};var deactivated=diff(lastActive,active);var activated=replay?active:diff(active,lastActive);if(deactivated.length){this.updateHoverStyle(deactivated,hoverOptions.mode,false);}if(activated.length&&hoverOptions.mode){this.updateHoverStyle(activated,hoverOptions.mode,true);}}},{key:"_eventHandler",value:function _eventHandler(e,replay){var _this22=this;var args={event:e,replay:replay,cancelable:true,inChartArea:this.isPointInArea(e)};var eventFilter=function eventFilter(plugin2){return(plugin2.options.events||_this22.options.events).includes(e["native"].type);};if(this.notifyPlugins("beforeEvent",args,eventFilter)===false){return;}var changed=this._handleEvent(e,replay,args.inChartArea);args.cancelable=false;this.notifyPlugins("afterEvent",args,eventFilter);if(changed||args.changed){this.render();}return this;}},{key:"_handleEvent",value:function _handleEvent(e,replay,inChartArea){var _this$_active=this._active,lastActive=_this$_active===void 0?[]:_this$_active,options=this.options;var useFinalPosition=replay;var active=this._getActiveElements(e,lastActive,inChartArea,useFinalPosition);var isClick=_isClickEvent(e);var lastEvent=determineLastEvent(e,this._lastEvent,inChartArea,isClick);if(inChartArea){this._lastEvent=null;callback(options.onHover,[e,active,this],this);if(isClick){callback(options.onClick,[e,active,this],this);}}var changed=!_elementsEqual(active,lastActive);if(changed||replay){this._active=active;this._updateHoverStyles(active,lastActive,replay);}this._lastEvent=lastEvent;return changed;}},{key:"_getActiveElements",value:function _getActiveElements(e,lastActive,inChartArea,useFinalPosition){if(e.type==="mouseout"){return[];}if(!inChartArea){return lastActive;}var hoverOptions=this.options.hover;return this.getElementsAtEventForMode(e,hoverOptions.mode,hoverOptions,useFinalPosition);}}]);return Chart;}();var invalidatePlugins=function invalidatePlugins(){return each(Chart.instances,function(chart){return chart._plugins.invalidate();});};var enumerable=true;Object.defineProperties(Chart,{defaults:{enumerable:enumerable,value:defaults},instances:{enumerable:enumerable,value:instances},overrides:{enumerable:enumerable,value:overrides},registry:{enumerable:enumerable,value:registry},version:{enumerable:enumerable,value:version},getChart:{enumerable:enumerable,value:getChart},register:{enumerable:enumerable,value:function value(){registry.add.apply(registry,arguments);invalidatePlugins();}},unregister:{enumerable:enumerable,value:function value(){registry.remove.apply(registry,arguments);invalidatePlugins();}}});function clipArc(ctx,element,endAngle){var startAngle=element.startAngle,pixelMargin=element.pixelMargin,x=element.x,y=element.y,outerRadius=element.outerRadius,innerRadius=element.innerRadius;var angleMargin=pixelMargin/outerRadius;ctx.beginPath();ctx.arc(x,y,outerRadius,startAngle-angleMargin,endAngle+angleMargin);if(innerRadius>pixelMargin){angleMargin=pixelMargin/innerRadius;ctx.arc(x,y,innerRadius,endAngle+angleMargin,startAngle-angleMargin,true);}else{ctx.arc(x,y,pixelMargin,endAngle+HALF_PI,startAngle-HALF_PI);}ctx.closePath();ctx.clip();}function toRadiusCorners(value){return _readValueToProps(value,["outerStart","outerEnd","innerStart","innerEnd"]);}function parseBorderRadius$1(arc,innerRadius,outerRadius,angleDelta){var o=toRadiusCorners(arc.options.borderRadius);var halfThickness=(outerRadius-innerRadius)/2;var innerLimit=Math.min(halfThickness,angleDelta*innerRadius/2);var computeOuterLimit=function computeOuterLimit(val){var outerArcLimit=(outerRadius-Math.min(halfThickness,val))*angleDelta/2;return _limitValue(val,0,Math.min(halfThickness,outerArcLimit));};return{outerStart:computeOuterLimit(o.outerStart),outerEnd:computeOuterLimit(o.outerEnd),innerStart:_limitValue(o.innerStart,0,innerLimit),innerEnd:_limitValue(o.innerEnd,0,innerLimit)};}function rThetaToXY(r,theta,x,y){return{x:x+r*Math.cos(theta),y:y+r*Math.sin(theta)};}function pathArc(ctx,element,offset,spacing,end,circular){var x=element.x,y=element.y,start2=element.startAngle,pixelMargin=element.pixelMargin,innerR=element.innerRadius;var outerRadius=Math.max(element.outerRadius+spacing+offset-pixelMargin,0);var innerRadius=innerR>0?innerR+spacing+offset+pixelMargin:0;var spacingOffset=0;var alpha2=end-start2;if(spacing){var noSpacingInnerRadius=innerR>0?innerR-spacing:0;var noSpacingOuterRadius=outerRadius>0?outerRadius-spacing:0;var avNogSpacingRadius=(noSpacingInnerRadius+noSpacingOuterRadius)/2;var adjustedAngle=avNogSpacingRadius!==0?alpha2*avNogSpacingRadius/(avNogSpacingRadius+spacing):alpha2;spacingOffset=(alpha2-adjustedAngle)/2;}var beta=Math.max(1e-3,alpha2*outerRadius-offset/PI)/outerRadius;var angleOffset=(alpha2-beta)/2;var startAngle=start2+angleOffset+spacingOffset;var endAngle=end-angleOffset-spacingOffset;var _parseBorderRadius$=parseBorderRadius$1(element,innerRadius,outerRadius,endAngle-startAngle),outerStart=_parseBorderRadius$.outerStart,outerEnd=_parseBorderRadius$.outerEnd,innerStart=_parseBorderRadius$.innerStart,innerEnd=_parseBorderRadius$.innerEnd;var outerStartAdjustedRadius=outerRadius-outerStart;var outerEndAdjustedRadius=outerRadius-outerEnd;var outerStartAdjustedAngle=startAngle+outerStart/outerStartAdjustedRadius;var outerEndAdjustedAngle=endAngle-outerEnd/outerEndAdjustedRadius;var innerStartAdjustedRadius=innerRadius+innerStart;var innerEndAdjustedRadius=innerRadius+innerEnd;var innerStartAdjustedAngle=startAngle+innerStart/innerStartAdjustedRadius;var innerEndAdjustedAngle=endAngle-innerEnd/innerEndAdjustedRadius;ctx.beginPath();if(circular){ctx.arc(x,y,outerRadius,outerStartAdjustedAngle,outerEndAdjustedAngle);if(outerEnd>0){var pCenter=rThetaToXY(outerEndAdjustedRadius,outerEndAdjustedAngle,x,y);ctx.arc(pCenter.x,pCenter.y,outerEnd,outerEndAdjustedAngle,endAngle+HALF_PI);}var p4=rThetaToXY(innerEndAdjustedRadius,endAngle,x,y);ctx.lineTo(p4.x,p4.y);if(innerEnd>0){var _pCenter=rThetaToXY(innerEndAdjustedRadius,innerEndAdjustedAngle,x,y);ctx.arc(_pCenter.x,_pCenter.y,innerEnd,endAngle+HALF_PI,innerEndAdjustedAngle+Math.PI);}ctx.arc(x,y,innerRadius,endAngle-innerEnd/innerRadius,startAngle+innerStart/innerRadius,true);if(innerStart>0){var _pCenter2=rThetaToXY(innerStartAdjustedRadius,innerStartAdjustedAngle,x,y);ctx.arc(_pCenter2.x,_pCenter2.y,innerStart,innerStartAdjustedAngle+Math.PI,startAngle-HALF_PI);}var p8=rThetaToXY(outerStartAdjustedRadius,startAngle,x,y);ctx.lineTo(p8.x,p8.y);if(outerStart>0){var _pCenter3=rThetaToXY(outerStartAdjustedRadius,outerStartAdjustedAngle,x,y);ctx.arc(_pCenter3.x,_pCenter3.y,outerStart,startAngle-HALF_PI,outerStartAdjustedAngle);}}else{ctx.moveTo(x,y);var outerStartX=Math.cos(outerStartAdjustedAngle)*outerRadius+x;var outerStartY=Math.sin(outerStartAdjustedAngle)*outerRadius+y;ctx.lineTo(outerStartX,outerStartY);var outerEndX=Math.cos(outerEndAdjustedAngle)*outerRadius+x;var outerEndY=Math.sin(outerEndAdjustedAngle)*outerRadius+y;ctx.lineTo(outerEndX,outerEndY);}ctx.closePath();}function drawArc(ctx,element,offset,spacing,circular){var fullCircles=element.fullCircles,startAngle=element.startAngle,circumference=element.circumference;var endAngle=element.endAngle;if(fullCircles){pathArc(ctx,element,offset,spacing,startAngle+TAU,circular);for(var i=0;i<fullCircles;++i){ctx.fill();}if(!isNaN(circumference)){endAngle=startAngle+circumference%TAU;if(circumference%TAU===0){endAngle+=TAU;}}}pathArc(ctx,element,offset,spacing,endAngle,circular);ctx.fill();return endAngle;}function drawFullCircleBorders(ctx,element,inner){var x=element.x,y=element.y,startAngle=element.startAngle,pixelMargin=element.pixelMargin,fullCircles=element.fullCircles;var outerRadius=Math.max(element.outerRadius-pixelMargin,0);var innerRadius=element.innerRadius+pixelMargin;var i;if(inner){clipArc(ctx,element,startAngle+TAU);}ctx.beginPath();ctx.arc(x,y,innerRadius,startAngle+TAU,startAngle,true);for(i=0;i<fullCircles;++i){ctx.stroke();}ctx.beginPath();ctx.arc(x,y,outerRadius,startAngle,startAngle+TAU);for(i=0;i<fullCircles;++i){ctx.stroke();}}function drawBorder(ctx,element,offset,spacing,endAngle,circular){var options=element.options;var borderWidth3=options.borderWidth,borderJoinStyle=options.borderJoinStyle;var inner=options.borderAlign==="inner";if(!borderWidth3){return;}if(inner){ctx.lineWidth=borderWidth3*2;ctx.lineJoin=borderJoinStyle||"round";}else{ctx.lineWidth=borderWidth3;ctx.lineJoin=borderJoinStyle||"bevel";}if(element.fullCircles){drawFullCircleBorders(ctx,element,inner);}if(inner){clipArc(ctx,element,endAngle);}pathArc(ctx,element,offset,spacing,endAngle,circular);ctx.stroke();}var ArcElement=/*#__PURE__*/function(_Element2){_inherits(ArcElement,_Element2);var _super12=_createSuper(ArcElement);function ArcElement(cfg){var _this23;_classCallCheck(this,ArcElement);_this23=_super12.call(this);_this23.options=void 0;_this23.circumference=void 0;_this23.startAngle=void 0;_this23.endAngle=void 0;_this23.innerRadius=void 0;_this23.outerRadius=void 0;_this23.pixelMargin=0;_this23.fullCircles=0;if(cfg){Object.assign(_assertThisInitialized(_this23),cfg);}return _this23;}_createClass(ArcElement,[{key:"inRange",value:function inRange(chartX,chartY,useFinalPosition){var point=this.getProps(["x","y"],useFinalPosition);var _getAngleFromPoint2=getAngleFromPoint(point,{x:chartX,y:chartY}),angle=_getAngleFromPoint2.angle,distance=_getAngleFromPoint2.distance;var _this$getProps2=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],useFinalPosition),startAngle=_this$getProps2.startAngle,endAngle=_this$getProps2.endAngle,innerRadius=_this$getProps2.innerRadius,outerRadius=_this$getProps2.outerRadius,circumference=_this$getProps2.circumference;var rAdjust=this.options.spacing/2;var _circumference=valueOrDefault(circumference,endAngle-startAngle);var betweenAngles=_circumference>=TAU||_angleBetween(angle,startAngle,endAngle);var withinRadius=_isBetween(distance,innerRadius+rAdjust,outerRadius+rAdjust);return betweenAngles&&withinRadius;}},{key:"getCenterPoint",value:function getCenterPoint(useFinalPosition){var _this$getProps3=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],useFinalPosition),x=_this$getProps3.x,y=_this$getProps3.y,startAngle=_this$getProps3.startAngle,endAngle=_this$getProps3.endAngle,innerRadius=_this$getProps3.innerRadius,outerRadius=_this$getProps3.outerRadius;var _this$options12=this.options,offset=_this$options12.offset,spacing=_this$options12.spacing;var halfAngle=(startAngle+endAngle)/2;var halfRadius=(innerRadius+outerRadius+spacing+offset)/2;return{x:x+Math.cos(halfAngle)*halfRadius,y:y+Math.sin(halfAngle)*halfRadius};}},{key:"tooltipPosition",value:function tooltipPosition(useFinalPosition){return this.getCenterPoint(useFinalPosition);}},{key:"draw",value:function draw(ctx){var options=this.options,circumference=this.circumference;var offset=(options.offset||0)/2;var spacing=(options.spacing||0)/2;var circular=options.circular;this.pixelMargin=options.borderAlign==="inner"?0.33:0;this.fullCircles=circumference>TAU?Math.floor(circumference/TAU):0;if(circumference===0||this.innerRadius<0||this.outerRadius<0){return;}ctx.save();var radiusOffset=0;if(offset){radiusOffset=offset/2;var halfAngle=(this.startAngle+this.endAngle)/2;ctx.translate(Math.cos(halfAngle)*radiusOffset,Math.sin(halfAngle)*radiusOffset);if(this.circumference>=PI){radiusOffset=offset;}}ctx.fillStyle=options.backgroundColor;ctx.strokeStyle=options.borderColor;var endAngle=drawArc(ctx,this,radiusOffset,spacing,circular);drawBorder(ctx,this,radiusOffset,spacing,endAngle,circular);ctx.restore();}}]);return ArcElement;}(Element);ArcElement.id="arc";ArcElement.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:true};ArcElement.defaultRoutes={backgroundColor:"backgroundColor"};function setStyle(ctx,options){var style=arguments.length>2&&arguments[2]!==undefined?arguments[2]:options;ctx.lineCap=valueOrDefault(style.borderCapStyle,options.borderCapStyle);ctx.setLineDash(valueOrDefault(style.borderDash,options.borderDash));ctx.lineDashOffset=valueOrDefault(style.borderDashOffset,options.borderDashOffset);ctx.lineJoin=valueOrDefault(style.borderJoinStyle,options.borderJoinStyle);ctx.lineWidth=valueOrDefault(style.borderWidth,options.borderWidth);ctx.strokeStyle=valueOrDefault(style.borderColor,options.borderColor);}function lineTo(ctx,previous,target){ctx.lineTo(target.x,target.y);}function getLineMethod(options){if(options.stepped){return _steppedLineTo;}if(options.tension||options.cubicInterpolationMode==="monotone"){return _bezierCurveTo;}return lineTo;}function pathVars(points,segment){var params=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var count=points.length;var _params$start=params.start,paramsStart=_params$start===void 0?0:_params$start,_params$end=params.end,paramsEnd=_params$end===void 0?count-1:_params$end;var segmentStart=segment.start,segmentEnd=segment.end;var start2=Math.max(paramsStart,segmentStart);var end=Math.min(paramsEnd,segmentEnd);var outside=paramsStart<segmentStart&&paramsEnd<segmentStart||paramsStart>segmentEnd&&paramsEnd>segmentEnd;return{count:count,start:start2,loop:segment.loop,ilen:end<start2&&!outside?count+end-start2:end-start2};}function pathSegment(ctx,line,segment,params){var points=line.points,options=line.options;var _pathVars=pathVars(points,segment,params),count=_pathVars.count,start2=_pathVars.start,loop=_pathVars.loop,ilen=_pathVars.ilen;var lineMethod=getLineMethod(options);var _ref6=params||{},_ref6$move=_ref6.move,move=_ref6$move===void 0?true:_ref6$move,reverse=_ref6.reverse;var i,point,prev;for(i=0;i<=ilen;++i){point=points[(start2+(reverse?ilen-i:i))%count];if(point.skip){continue;}else if(move){ctx.moveTo(point.x,point.y);move=false;}else{lineMethod(ctx,prev,point,reverse,options.stepped);}prev=point;}if(loop){point=points[(start2+(reverse?ilen:0))%count];lineMethod(ctx,prev,point,reverse,options.stepped);}return!!loop;}function fastPathSegment(ctx,line,segment,params){var points=line.points;var _pathVars2=pathVars(points,segment,params),count=_pathVars2.count,start2=_pathVars2.start,ilen=_pathVars2.ilen;var _ref7=params||{},_ref7$move=_ref7.move,move=_ref7$move===void 0?true:_ref7$move,reverse=_ref7.reverse;var avgX=0;var countX=0;var i,point,prevX,minY,maxY,lastY;var pointIndex=function pointIndex(index3){return(start2+(reverse?ilen-index3:index3))%count;};var drawX=function drawX(){if(minY!==maxY){ctx.lineTo(avgX,maxY);ctx.lineTo(avgX,minY);ctx.lineTo(avgX,lastY);}};if(move){point=points[pointIndex(0)];ctx.moveTo(point.x,point.y);}for(i=0;i<=ilen;++i){point=points[pointIndex(i)];if(point.skip){continue;}var x=point.x;var y=point.y;var truncX=x|0;if(truncX===prevX){if(y<minY){minY=y;}else if(y>maxY){maxY=y;}avgX=(countX*avgX+x)/++countX;}else{drawX();ctx.lineTo(x,y);prevX=truncX;countX=0;minY=maxY=y;}lastY=y;}drawX();}function _getSegmentMethod(line){var opts=line.options;var borderDash=opts.borderDash&&opts.borderDash.length;var useFastPath=!line._decimated&&!line._loop&&!opts.tension&&opts.cubicInterpolationMode!=="monotone"&&!opts.stepped&&!borderDash;return useFastPath?fastPathSegment:pathSegment;}function _getInterpolationMethod(options){if(options.stepped){return _steppedInterpolation;}if(options.tension||options.cubicInterpolationMode==="monotone"){return _bezierInterpolation;}return _pointInLine;}function strokePathWithCache(ctx,line,start2,count){var path=line._path;if(!path){path=line._path=new Path2D();if(line.path(path,start2,count)){path.closePath();}}setStyle(ctx,line.options);ctx.stroke(path);}function strokePathDirect(ctx,line,start2,count){var segments=line.segments,options=line.options;var segmentMethod=_getSegmentMethod(line);var _iterator27=_createForOfIteratorHelper(segments),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var segment=_step27.value;setStyle(ctx,options,segment.style);ctx.beginPath();if(segmentMethod(ctx,line,segment,{start:start2,end:start2+count-1})){ctx.closePath();}ctx.stroke();}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}}var usePath2D=typeof Path2D==="function";function _draw(ctx,line,start2,count){if(usePath2D&&!line.options.segment){strokePathWithCache(ctx,line,start2,count);}else{strokePathDirect(ctx,line,start2,count);}}var LineElement=/*#__PURE__*/function(_Element3){_inherits(LineElement,_Element3);var _super13=_createSuper(LineElement);function LineElement(cfg){var _this24;_classCallCheck(this,LineElement);_this24=_super13.call(this);_this24.animated=true;_this24.options=void 0;_this24._chart=void 0;_this24._loop=void 0;_this24._fullLoop=void 0;_this24._path=void 0;_this24._points=void 0;_this24._segments=void 0;_this24._decimated=false;_this24._pointsUpdated=false;_this24._datasetIndex=void 0;if(cfg){Object.assign(_assertThisInitialized(_this24),cfg);}return _this24;}_createClass(LineElement,[{key:"updateControlPoints",value:function updateControlPoints(chartArea,indexAxis){var options=this.options;if((options.tension||options.cubicInterpolationMode==="monotone")&&!options.stepped&&!this._pointsUpdated){var loop=options.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,options,chartArea,loop,indexAxis);this._pointsUpdated=true;}}},{key:"points",get:function get(){return this._points;},set:function set(points){this._points=points;delete this._segments;delete this._path;this._pointsUpdated=false;}},{key:"segments",get:function get(){return this._segments||(this._segments=_computeSegments(this,this.options.segment));}},{key:"first",value:function first(){var segments=this.segments;var points=this.points;return segments.length&&points[segments[0].start];}},{key:"last",value:function last(){var segments=this.segments;var points=this.points;var count=segments.length;return count&&points[segments[count-1].end];}},{key:"interpolate",value:function interpolate(point,property){var options=this.options;var value=point[property];var points=this.points;var segments=_boundSegments(this,{property:property,start:value,end:value});if(!segments.length){return;}var result=[];var _interpolate=_getInterpolationMethod(options);var i,ilen;for(i=0,ilen=segments.length;i<ilen;++i){var _segments$i=segments[i],start2=_segments$i.start,end=_segments$i.end;var p1=points[start2];var p2=points[end];if(p1===p2){result.push(p1);continue;}var t=Math.abs((value-p1[property])/(p2[property]-p1[property]));var interpolated=_interpolate(p1,p2,t,options.stepped);interpolated[property]=point[property];result.push(interpolated);}return result.length===1?result[0]:result;}},{key:"pathSegment",value:function pathSegment(ctx,segment,params){var segmentMethod=_getSegmentMethod(this);return segmentMethod(ctx,this,segment,params);}},{key:"path",value:function path(ctx,start2,count){var segments=this.segments;var segmentMethod=_getSegmentMethod(this);var loop=this._loop;start2=start2||0;count=count||this.points.length-start2;var _iterator28=_createForOfIteratorHelper(segments),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var segment=_step28.value;loop&=segmentMethod(ctx,this,segment,{start:start2,end:start2+count-1});}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}return!!loop;}},{key:"draw",value:function draw(ctx,chartArea,start2,count){var options=this.options||{};var points=this.points||[];if(points.length&&options.borderWidth){ctx.save();_draw(ctx,this,start2,count);ctx.restore();}if(this.animated){this._pointsUpdated=false;this._path=void 0;}}}]);return LineElement;}(Element);LineElement.id="line";LineElement.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:true,cubicInterpolationMode:"default",fill:false,spanGaps:false,stepped:false,tension:0};LineElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};LineElement.descriptors={_scriptable:true,_indexable:function _indexable(name){return name!=="borderDash"&&name!=="fill";}};function inRange$1(el,pos,axis,useFinalPosition){var options=el.options;var _el$getProps=el.getProps([axis],useFinalPosition),value=_el$getProps[axis];return Math.abs(pos-value)<options.radius+options.hitRadius;}var PointElement=/*#__PURE__*/function(_Element4){_inherits(PointElement,_Element4);var _super14=_createSuper(PointElement);function PointElement(cfg){var _this25;_classCallCheck(this,PointElement);_this25=_super14.call(this);_this25.options=void 0;_this25.parsed=void 0;_this25.skip=void 0;_this25.stop=void 0;if(cfg){Object.assign(_assertThisInitialized(_this25),cfg);}return _this25;}_createClass(PointElement,[{key:"inRange",value:function inRange(mouseX,mouseY,useFinalPosition){var options=this.options;var _this$getProps4=this.getProps(["x","y"],useFinalPosition),x=_this$getProps4.x,y=_this$getProps4.y;return Math.pow(mouseX-x,2)+Math.pow(mouseY-y,2)<Math.pow(options.hitRadius+options.radius,2);}},{key:"inXRange",value:function inXRange(mouseX,useFinalPosition){return inRange$1(this,mouseX,"x",useFinalPosition);}},{key:"inYRange",value:function inYRange(mouseY,useFinalPosition){return inRange$1(this,mouseY,"y",useFinalPosition);}},{key:"getCenterPoint",value:function getCenterPoint(useFinalPosition){var _this$getProps5=this.getProps(["x","y"],useFinalPosition),x=_this$getProps5.x,y=_this$getProps5.y;return{x:x,y:y};}},{key:"size",value:function size(options){options=options||this.options||{};var radius3=options.radius||0;radius3=Math.max(radius3,radius3&&options.hoverRadius||0);var borderWidth3=radius3&&options.borderWidth||0;return(radius3+borderWidth3)*2;}},{key:"draw",value:function draw(ctx,area){var options=this.options;if(this.skip||options.radius<0.1||!_isPointInArea(this,area,this.size(options)/2)){return;}ctx.strokeStyle=options.borderColor;ctx.lineWidth=options.borderWidth;ctx.fillStyle=options.backgroundColor;drawPoint(ctx,options,this.x,this.y);}},{key:"getRange",value:function getRange(){var options=this.options||{};return options.radius+options.hitRadius;}}]);return PointElement;}(Element);PointElement.id="point";PointElement.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};PointElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function getBarBounds(bar,useFinalPosition){var _bar$getProps=bar.getProps(["x","y","base","width","height"],useFinalPosition),x=_bar$getProps.x,y=_bar$getProps.y,base=_bar$getProps.base,width=_bar$getProps.width,height=_bar$getProps.height;var left,right,top,bottom,half;if(bar.horizontal){half=height/2;left=Math.min(x,base);right=Math.max(x,base);top=y-half;bottom=y+half;}else{half=width/2;left=x-half;right=x+half;top=Math.min(y,base);bottom=Math.max(y,base);}return{left:left,top:top,right:right,bottom:bottom};}function skipOrLimit(skip2,value,min3,max3){return skip2?0:_limitValue(value,min3,max3);}function parseBorderWidth(bar,maxW,maxH){var value=bar.options.borderWidth;var skip2=bar.borderSkipped;var o=toTRBL(value);return{t:skipOrLimit(skip2.top,o.top,0,maxH),r:skipOrLimit(skip2.right,o.right,0,maxW),b:skipOrLimit(skip2.bottom,o.bottom,0,maxH),l:skipOrLimit(skip2.left,o.left,0,maxW)};}function parseBorderRadius(bar,maxW,maxH){var _bar$getProps2=bar.getProps(["enableBorderRadius"]),enableBorderRadius=_bar$getProps2.enableBorderRadius;var value=bar.options.borderRadius;var o=toTRBLCorners(value);var maxR=Math.min(maxW,maxH);var skip2=bar.borderSkipped;var enableBorder=enableBorderRadius||isObject(value);return{topLeft:skipOrLimit(!enableBorder||skip2.top||skip2.left,o.topLeft,0,maxR),topRight:skipOrLimit(!enableBorder||skip2.top||skip2.right,o.topRight,0,maxR),bottomLeft:skipOrLimit(!enableBorder||skip2.bottom||skip2.left,o.bottomLeft,0,maxR),bottomRight:skipOrLimit(!enableBorder||skip2.bottom||skip2.right,o.bottomRight,0,maxR)};}function boundingRects(bar){var bounds=getBarBounds(bar);var width=bounds.right-bounds.left;var height=bounds.bottom-bounds.top;var border=parseBorderWidth(bar,width/2,height/2);var radius3=parseBorderRadius(bar,width/2,height/2);return{outer:{x:bounds.left,y:bounds.top,w:width,h:height,radius:radius3},inner:{x:bounds.left+border.l,y:bounds.top+border.t,w:width-border.l-border.r,h:height-border.t-border.b,radius:{topLeft:Math.max(0,radius3.topLeft-Math.max(border.t,border.l)),topRight:Math.max(0,radius3.topRight-Math.max(border.t,border.r)),bottomLeft:Math.max(0,radius3.bottomLeft-Math.max(border.b,border.l)),bottomRight:Math.max(0,radius3.bottomRight-Math.max(border.b,border.r))}}};}function _inRange(bar,x,y,useFinalPosition){var skipX=x===null;var skipY=y===null;var skipBoth=skipX&&skipY;var bounds=bar&&!skipBoth&&getBarBounds(bar,useFinalPosition);return bounds&&(skipX||_isBetween(x,bounds.left,bounds.right))&&(skipY||_isBetween(y,bounds.top,bounds.bottom));}function hasRadius(radius3){return radius3.topLeft||radius3.topRight||radius3.bottomLeft||radius3.bottomRight;}function addNormalRectPath(ctx,rect){ctx.rect(rect.x,rect.y,rect.w,rect.h);}function inflateRect(rect,amount){var refRect=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var x=rect.x!==refRect.x?-amount:0;var y=rect.y!==refRect.y?-amount:0;var w=(rect.x+rect.w!==refRect.x+refRect.w?amount:0)-x;var h=(rect.y+rect.h!==refRect.y+refRect.h?amount:0)-y;return{x:rect.x+x,y:rect.y+y,w:rect.w+w,h:rect.h+h,radius:rect.radius};}var BarElement=/*#__PURE__*/function(_Element5){_inherits(BarElement,_Element5);var _super15=_createSuper(BarElement);function BarElement(cfg){var _this26;_classCallCheck(this,BarElement);_this26=_super15.call(this);_this26.options=void 0;_this26.horizontal=void 0;_this26.base=void 0;_this26.width=void 0;_this26.height=void 0;_this26.inflateAmount=void 0;if(cfg){Object.assign(_assertThisInitialized(_this26),cfg);}return _this26;}_createClass(BarElement,[{key:"draw",value:function draw(ctx){var inflateAmount=this.inflateAmount,_this$options13=this.options,borderColor4=_this$options13.borderColor,backgroundColor4=_this$options13.backgroundColor;var _boundingRects=boundingRects(this),inner=_boundingRects.inner,outer=_boundingRects.outer;var addRectPath=hasRadius(outer.radius)?addRoundedRectPath:addNormalRectPath;ctx.save();if(outer.w!==inner.w||outer.h!==inner.h){ctx.beginPath();addRectPath(ctx,inflateRect(outer,inflateAmount,inner));ctx.clip();addRectPath(ctx,inflateRect(inner,-inflateAmount,outer));ctx.fillStyle=borderColor4;ctx.fill("evenodd");}ctx.beginPath();addRectPath(ctx,inflateRect(inner,inflateAmount));ctx.fillStyle=backgroundColor4;ctx.fill();ctx.restore();}},{key:"inRange",value:function inRange(mouseX,mouseY,useFinalPosition){return _inRange(this,mouseX,mouseY,useFinalPosition);}},{key:"inXRange",value:function inXRange(mouseX,useFinalPosition){return _inRange(this,mouseX,null,useFinalPosition);}},{key:"inYRange",value:function inYRange(mouseY,useFinalPosition){return _inRange(this,null,mouseY,useFinalPosition);}},{key:"getCenterPoint",value:function getCenterPoint(useFinalPosition){var _this$getProps6=this.getProps(["x","y","base","horizontal"],useFinalPosition),x=_this$getProps6.x,y=_this$getProps6.y,base=_this$getProps6.base,horizontal=_this$getProps6.horizontal;return{x:horizontal?(x+base)/2:x,y:horizontal?y:(y+base)/2};}},{key:"getRange",value:function getRange(axis){return axis==="x"?this.width/2:this.height/2;}}]);return BarElement;}(Element);BarElement.id="bar";BarElement.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};BarElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var elements=/* @__PURE__ */Object.freeze({__proto__:null,ArcElement:ArcElement,LineElement:LineElement,PointElement:PointElement,BarElement:BarElement});function lttbDecimation(data,start2,count,availableWidth,options){var samples=options.samples||availableWidth;if(samples>=count){return data.slice(start2,start2+count);}var decimated=[];var bucketWidth=(count-2)/(samples-2);var sampledIndex=0;var endIndex=start2+count-1;var a=start2;var i,maxAreaPoint,maxArea,area,nextA;decimated[sampledIndex++]=data[a];for(i=0;i<samples-2;i++){var avgX=0;var avgY=0;var j=void 0;var avgRangeStart=Math.floor((i+1)*bucketWidth)+1+start2;var avgRangeEnd=Math.min(Math.floor((i+2)*bucketWidth)+1,count)+start2;var avgRangeLength=avgRangeEnd-avgRangeStart;for(j=avgRangeStart;j<avgRangeEnd;j++){avgX+=data[j].x;avgY+=data[j].y;}avgX/=avgRangeLength;avgY/=avgRangeLength;var rangeOffs=Math.floor(i*bucketWidth)+1+start2;var rangeTo=Math.min(Math.floor((i+1)*bucketWidth)+1,count)+start2;var _data$a=data[a],pointAx=_data$a.x,pointAy=_data$a.y;maxArea=area=-1;for(j=rangeOffs;j<rangeTo;j++){area=0.5*Math.abs((pointAx-avgX)*(data[j].y-pointAy)-(pointAx-data[j].x)*(avgY-pointAy));if(area>maxArea){maxArea=area;maxAreaPoint=data[j];nextA=j;}}decimated[sampledIndex++]=maxAreaPoint;a=nextA;}decimated[sampledIndex++]=data[endIndex];return decimated;}function minMaxDecimation(data,start2,count,availableWidth){var avgX=0;var countX=0;var i,point,x,y,prevX,minIndex,maxIndex,startIndex,minY,maxY;var decimated=[];var endIndex=start2+count-1;var xMin=data[start2].x;var xMax=data[endIndex].x;var dx=xMax-xMin;for(i=start2;i<start2+count;++i){point=data[i];x=(point.x-xMin)/dx*availableWidth;y=point.y;var truncX=x|0;if(truncX===prevX){if(y<minY){minY=y;minIndex=i;}else if(y>maxY){maxY=y;maxIndex=i;}avgX=(countX*avgX+point.x)/++countX;}else{var lastIndex=i-1;if(!isNullOrUndef(minIndex)&&!isNullOrUndef(maxIndex)){var intermediateIndex1=Math.min(minIndex,maxIndex);var intermediateIndex2=Math.max(minIndex,maxIndex);if(intermediateIndex1!==startIndex&&intermediateIndex1!==lastIndex){decimated.push(_objectSpread(_objectSpread({},data[intermediateIndex1]),{},{x:avgX}));}if(intermediateIndex2!==startIndex&&intermediateIndex2!==lastIndex){decimated.push(_objectSpread(_objectSpread({},data[intermediateIndex2]),{},{x:avgX}));}}if(i>0&&lastIndex!==startIndex){decimated.push(data[lastIndex]);}decimated.push(point);prevX=truncX;countX=0;minY=maxY=y;minIndex=maxIndex=startIndex=i;}}return decimated;}function cleanDecimatedDataset(dataset){if(dataset._decimated){var data=dataset._data;delete dataset._decimated;delete dataset._data;Object.defineProperty(dataset,"data",{value:data});}}function cleanDecimatedData(chart){chart.data.datasets.forEach(function(dataset){cleanDecimatedDataset(dataset);});}function getStartAndCountOfVisiblePointsSimplified(meta,points){var pointCount=points.length;var start2=0;var count;var iScale=meta.iScale;var _iScale$getUserBounds2=iScale.getUserBounds(),min3=_iScale$getUserBounds2.min,max3=_iScale$getUserBounds2.max,minDefined=_iScale$getUserBounds2.minDefined,maxDefined=_iScale$getUserBounds2.maxDefined;if(minDefined){start2=_limitValue(_lookupByKey(points,iScale.axis,min3).lo,0,pointCount-1);}if(maxDefined){count=_limitValue(_lookupByKey(points,iScale.axis,max3).hi+1,start2,pointCount)-start2;}else{count=pointCount-start2;}return{start:start2,count:count};}var plugin_decimation={id:"decimation",defaults:{algorithm:"min-max",enabled:false},beforeElementsUpdate:function beforeElementsUpdate(chart,args,options){if(!options.enabled){cleanDecimatedData(chart);return;}var availableWidth=chart.width;chart.data.datasets.forEach(function(dataset,datasetIndex){var _data=dataset._data,indexAxis=dataset.indexAxis;var meta=chart.getDatasetMeta(datasetIndex);var data=_data||dataset.data;if(resolve([indexAxis,chart.options.indexAxis])==="y"){return;}if(!meta.controller.supportsDecimation){return;}var xAxis=chart.scales[meta.xAxisID];if(xAxis.type!=="linear"&&xAxis.type!=="time"){return;}if(chart.options.parsing){return;}var _getStartAndCountOfVi3=getStartAndCountOfVisiblePointsSimplified(meta,data),start2=_getStartAndCountOfVi3.start,count=_getStartAndCountOfVi3.count;var threshold=options.threshold||4*availableWidth;if(count<=threshold){cleanDecimatedDataset(dataset);return;}if(isNullOrUndef(_data)){dataset._data=data;delete dataset.data;Object.defineProperty(dataset,"data",{configurable:true,enumerable:true,get:function get(){return this._decimated;},set:function set(d){this._data=d;}});}var decimated;switch(options.algorithm){case"lttb":decimated=lttbDecimation(data,start2,count,availableWidth,options);break;case"min-max":decimated=minMaxDecimation(data,start2,count,availableWidth);break;default:throw new Error("Unsupported decimation algorithm '".concat(options.algorithm,"'"));}dataset._decimated=decimated;});},destroy:function destroy(chart){cleanDecimatedData(chart);}};function _segments(line,target,property){var segments=line.segments;var points=line.points;var tpoints=target.points;var parts=[];var _iterator29=_createForOfIteratorHelper(segments),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var segment=_step29.value;var start2=segment.start,end=segment.end;end=_findSegmentEnd(start2,end,points);var bounds=_getBounds(property,points[start2],points[end],segment.loop);if(!target.segments){parts.push({source:segment,target:bounds,start:points[start2],end:points[end]});continue;}var targetSegments=_boundSegments(target,bounds);var _iterator30=_createForOfIteratorHelper(targetSegments),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var tgt=_step30.value;var subBounds=_getBounds(property,tpoints[tgt.start],tpoints[tgt.end],tgt.loop);var fillSources=_boundSegment(segment,points,subBounds);var _iterator31=_createForOfIteratorHelper(fillSources),_step31;try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var fillSource=_step31.value;parts.push({source:fillSource,target:tgt,start:_defineProperty({},property,_getEdge(bounds,subBounds,"start",Math.max)),end:_defineProperty({},property,_getEdge(bounds,subBounds,"end",Math.min))});}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}return parts;}function _getBounds(property,first,last,loop){if(loop){return;}var start2=first[property];var end=last[property];if(property==="angle"){start2=_normalizeAngle(start2);end=_normalizeAngle(end);}return{property:property,start:start2,end:end};}function _pointsFromSegments(boundary,line){var _ref8=boundary||{},_ref8$x=_ref8.x,x=_ref8$x===void 0?null:_ref8$x,_ref8$y=_ref8.y,y=_ref8$y===void 0?null:_ref8$y;var linePoints=line.points;var points=[];line.segments.forEach(function(_ref9){var start2=_ref9.start,end=_ref9.end;end=_findSegmentEnd(start2,end,linePoints);var first=linePoints[start2];var last=linePoints[end];if(y!==null){points.push({x:first.x,y:y});points.push({x:last.x,y:y});}else if(x!==null){points.push({x:x,y:first.y});points.push({x:x,y:last.y});}});return points;}function _findSegmentEnd(start2,end,points){for(;end>start2;end--){var point=points[end];if(!isNaN(point.x)&&!isNaN(point.y)){break;}}return end;}function _getEdge(a,b,prop,fn){if(a&&b){return fn(a[prop],b[prop]);}return a?a[prop]:b?b[prop]:0;}function _createBoundaryLine(boundary,line){var points=[];var _loop=false;if(isArray(boundary)){_loop=true;points=boundary;}else{points=_pointsFromSegments(boundary,line);}return points.length?new LineElement({points:points,options:{tension:0},_loop:_loop,_fullLoop:_loop}):null;}function _shouldApplyFill(source){return source&&source.fill!==false;}function _resolveTarget(sources,index3,propagate){var source=sources[index3];var fill2=source.fill;var visited=[index3];var target;if(!propagate){return fill2;}while(fill2!==false&&visited.indexOf(fill2)===-1){if(!isNumberFinite(fill2)){return fill2;}target=sources[fill2];if(!target){return false;}if(target.visible){return fill2;}visited.push(fill2);fill2=target.fill;}return false;}function _decodeFill(line,index3,count){var fill2=parseFillOption(line);if(isObject(fill2)){return isNaN(fill2.value)?false:fill2;}var target=parseFloat(fill2);if(isNumberFinite(target)&&Math.floor(target)===target){return decodeTargetIndex(fill2[0],index3,target,count);}return["origin","start","end","stack","shape"].indexOf(fill2)>=0&&fill2;}function decodeTargetIndex(firstCh,index3,target,count){if(firstCh==="-"||firstCh==="+"){target=index3+target;}if(target===index3||target<0||target>=count){return false;}return target;}function _getTargetPixel(fill2,scale){var pixel=null;if(fill2==="start"){pixel=scale.bottom;}else if(fill2==="end"){pixel=scale.top;}else if(isObject(fill2)){pixel=scale.getPixelForValue(fill2.value);}else if(scale.getBasePixel){pixel=scale.getBasePixel();}return pixel;}function _getTargetValue(fill2,scale,startValue){var value;if(fill2==="start"){value=startValue;}else if(fill2==="end"){value=scale.options.reverse?scale.min:scale.max;}else if(isObject(fill2)){value=fill2.value;}else{value=scale.getBaseValue();}return value;}function parseFillOption(line){var options=line.options;var fillOption=options.fill;var fill2=valueOrDefault(fillOption&&fillOption.target,fillOption);if(fill2===void 0){fill2=!!options.backgroundColor;}if(fill2===false||fill2===null){return false;}if(fill2===true){return"origin";}return fill2;}function _buildStackLine(source){var scale=source.scale,index3=source.index,line=source.line;var points=[];var segments=line.segments;var sourcePoints=line.points;var linesBelow=getLinesBelow(scale,index3);linesBelow.push(_createBoundaryLine({x:null,y:scale.bottom},line));for(var i=0;i<segments.length;i++){var segment=segments[i];for(var j=segment.start;j<=segment.end;j++){addPointsBelow(points,sourcePoints[j],linesBelow);}}return new LineElement({points:points,options:{}});}function getLinesBelow(scale,index3){var below=[];var metas=scale.getMatchingVisibleMetas("line");for(var i=0;i<metas.length;i++){var meta=metas[i];if(meta.index===index3){break;}if(!meta.hidden){below.unshift(meta.dataset);}}return below;}function addPointsBelow(points,sourcePoint,linesBelow){var postponed=[];for(var j=0;j<linesBelow.length;j++){var line=linesBelow[j];var _findPoint=findPoint(line,sourcePoint,"x"),first=_findPoint.first,last=_findPoint.last,point=_findPoint.point;if(!point||first&&last){continue;}if(first){postponed.unshift(point);}else{points.push(point);if(!last){break;}}}points.push.apply(points,postponed);}function findPoint(line,sourcePoint,property){var point=line.interpolate(sourcePoint,property);if(!point){return{};}var pointValue=point[property];var segments=line.segments;var linePoints=line.points;var first=false;var last=false;for(var i=0;i<segments.length;i++){var segment=segments[i];var firstValue=linePoints[segment.start][property];var lastValue=linePoints[segment.end][property];if(_isBetween(pointValue,firstValue,lastValue)){first=pointValue===firstValue;last=pointValue===lastValue;break;}}return{first:first,last:last,point:point};}var simpleArc=/*#__PURE__*/function(){function simpleArc(opts){_classCallCheck(this,simpleArc);this.x=opts.x;this.y=opts.y;this.radius=opts.radius;}_createClass(simpleArc,[{key:"pathSegment",value:function pathSegment(ctx,bounds,opts){var x=this.x,y=this.y,radius3=this.radius;bounds=bounds||{start:0,end:TAU};ctx.arc(x,y,radius3,bounds.end,bounds.start,true);return!opts.bounds;}},{key:"interpolate",value:function interpolate(point){var x=this.x,y=this.y,radius3=this.radius;var angle=point.angle;return{x:x+Math.cos(angle)*radius3,y:y+Math.sin(angle)*radius3,angle:angle};}}]);return simpleArc;}();function _getTarget(source){var chart=source.chart,fill2=source.fill,line=source.line;if(isNumberFinite(fill2)){return getLineByIndex(chart,fill2);}if(fill2==="stack"){return _buildStackLine(source);}if(fill2==="shape"){return true;}var boundary=computeBoundary(source);if(boundary instanceof simpleArc){return boundary;}return _createBoundaryLine(boundary,line);}function getLineByIndex(chart,index3){var meta=chart.getDatasetMeta(index3);var visible=meta&&chart.isDatasetVisible(index3);return visible?meta.dataset:null;}function computeBoundary(source){var scale=source.scale||{};if(scale.getPointPositionForValue){return computeCircularBoundary(source);}return computeLinearBoundary(source);}function computeLinearBoundary(source){var _source$scale=source.scale,scale=_source$scale===void 0?{}:_source$scale,fill2=source.fill;var pixel=_getTargetPixel(fill2,scale);if(isNumberFinite(pixel)){var horizontal=scale.isHorizontal();return{x:horizontal?pixel:null,y:horizontal?null:pixel};}return null;}function computeCircularBoundary(source){var scale=source.scale,fill2=source.fill;var options=scale.options;var length=scale.getLabels().length;var start2=options.reverse?scale.max:scale.min;var value=_getTargetValue(fill2,scale,start2);var target=[];if(options.grid.circular){var center=scale.getPointPositionForValue(0,start2);return new simpleArc({x:center.x,y:center.y,radius:scale.getDistanceFromCenterForValue(value)});}for(var i=0;i<length;++i){target.push(scale.getPointPositionForValue(i,value));}return target;}function _drawfill(ctx,source,area){var target=_getTarget(source);var line=source.line,scale=source.scale,axis=source.axis;var lineOpts=line.options;var fillOption=lineOpts.fill;var color3=lineOpts.backgroundColor;var _ref10=fillOption||{},_ref10$above=_ref10.above,above=_ref10$above===void 0?color3:_ref10$above,_ref10$below=_ref10.below,below=_ref10$below===void 0?color3:_ref10$below;if(target&&line.points.length){clipArea(ctx,area);doFill(ctx,{line:line,target:target,above:above,below:below,area:area,scale:scale,axis:axis});unclipArea(ctx);}}function doFill(ctx,cfg){var line=cfg.line,target=cfg.target,above=cfg.above,below=cfg.below,area=cfg.area,scale=cfg.scale;var property=line._loop?"angle":cfg.axis;ctx.save();if(property==="x"&&below!==above){clipVertical(ctx,target,area.top);fill(ctx,{line:line,target:target,color:above,scale:scale,property:property});ctx.restore();ctx.save();clipVertical(ctx,target,area.bottom);}fill(ctx,{line:line,target:target,color:below,scale:scale,property:property});ctx.restore();}function clipVertical(ctx,target,clipY){var segments=target.segments,points=target.points;var first=true;var lineLoop=false;ctx.beginPath();var _iterator32=_createForOfIteratorHelper(segments),_step32;try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var segment=_step32.value;var start2=segment.start,end=segment.end;var firstPoint=points[start2];var lastPoint=points[_findSegmentEnd(start2,end,points)];if(first){ctx.moveTo(firstPoint.x,firstPoint.y);first=false;}else{ctx.lineTo(firstPoint.x,clipY);ctx.lineTo(firstPoint.x,firstPoint.y);}lineLoop=!!target.pathSegment(ctx,segment,{move:lineLoop});if(lineLoop){ctx.closePath();}else{ctx.lineTo(lastPoint.x,clipY);}}}catch(err){_iterator32.e(err);}finally{_iterator32.f();}ctx.lineTo(target.first().x,clipY);ctx.closePath();ctx.clip();}function fill(ctx,cfg){var line=cfg.line,target=cfg.target,property=cfg.property,color3=cfg.color,scale=cfg.scale;var segments=_segments(line,target,property);var _iterator33=_createForOfIteratorHelper(segments),_step33;try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var _step33$value=_step33.value,src=_step33$value.source,tgt=_step33$value.target,start2=_step33$value.start,end=_step33$value.end;var _src$style=src.style,_src$style2=_src$style===void 0?{}:_src$style,_src$style2$backgroun=_src$style2.backgroundColor,backgroundColor4=_src$style2$backgroun===void 0?color3:_src$style2$backgroun;var notShape=target!==true;ctx.save();ctx.fillStyle=backgroundColor4;clipBounds(ctx,scale,notShape&&_getBounds(property,start2,end));ctx.beginPath();var lineLoop=!!line.pathSegment(ctx,src);var loop=void 0;if(notShape){if(lineLoop){ctx.closePath();}else{interpolatedLineTo(ctx,target,end,property);}var targetLoop=!!target.pathSegment(ctx,tgt,{move:lineLoop,reverse:true});loop=lineLoop&&targetLoop;if(!loop){interpolatedLineTo(ctx,target,start2,property);}}ctx.closePath();ctx.fill(loop?"evenodd":"nonzero");ctx.restore();}}catch(err){_iterator33.e(err);}finally{_iterator33.f();}}function clipBounds(ctx,scale,bounds){var _scale$chart$chartAre=scale.chart.chartArea,top=_scale$chart$chartAre.top,bottom=_scale$chart$chartAre.bottom;var _ref11=bounds||{},property=_ref11.property,start2=_ref11.start,end=_ref11.end;if(property==="x"){ctx.beginPath();ctx.rect(start2,top,end-start2,bottom-top);ctx.clip();}}function interpolatedLineTo(ctx,target,point,property){var interpolatedPoint=target.interpolate(point,property);if(interpolatedPoint){ctx.lineTo(interpolatedPoint.x,interpolatedPoint.y);}}var index={id:"filler",afterDatasetsUpdate:function afterDatasetsUpdate(chart,_args,options){var count=(chart.data.datasets||[]).length;var sources=[];var meta,i,line,source;for(i=0;i<count;++i){meta=chart.getDatasetMeta(i);line=meta.dataset;source=null;if(line&&line.options&&line instanceof LineElement){source={visible:chart.isDatasetVisible(i),index:i,fill:_decodeFill(line,i,count),chart:chart,axis:meta.controller.options.indexAxis,scale:meta.vScale,line:line};}meta.$filler=source;sources.push(source);}for(i=0;i<count;++i){source=sources[i];if(!source||source.fill===false){continue;}source.fill=_resolveTarget(sources,i,options.propagate);}},beforeDraw:function beforeDraw(chart,_args,options){var draw3=options.drawTime==="beforeDraw";var metasets=chart.getSortedVisibleDatasetMetas();var area=chart.chartArea;for(var i=metasets.length-1;i>=0;--i){var source=metasets[i].$filler;if(!source){continue;}source.line.updateControlPoints(area,source.axis);if(draw3&&source.fill){_drawfill(chart.ctx,source,area);}}},beforeDatasetsDraw:function beforeDatasetsDraw(chart,_args,options){if(options.drawTime!=="beforeDatasetsDraw"){return;}var metasets=chart.getSortedVisibleDatasetMetas();for(var i=metasets.length-1;i>=0;--i){var source=metasets[i].$filler;if(_shouldApplyFill(source)){_drawfill(chart.ctx,source,chart.chartArea);}}},beforeDatasetDraw:function beforeDatasetDraw(chart,args,options){var source=args.meta.$filler;if(!_shouldApplyFill(source)||options.drawTime!=="beforeDatasetDraw"){return;}_drawfill(chart.ctx,source,chart.chartArea);},defaults:{propagate:true,drawTime:"beforeDatasetDraw"}};var getBoxSize=function getBoxSize(labelOpts,fontSize){var _labelOpts$boxHeight=labelOpts.boxHeight,boxHeight=_labelOpts$boxHeight===void 0?fontSize:_labelOpts$boxHeight,_labelOpts$boxWidth=labelOpts.boxWidth,boxWidth=_labelOpts$boxWidth===void 0?fontSize:_labelOpts$boxWidth;if(labelOpts.usePointStyle){boxHeight=Math.min(boxHeight,fontSize);boxWidth=labelOpts.pointStyleWidth||Math.min(boxWidth,fontSize);}return{boxWidth:boxWidth,boxHeight:boxHeight,itemHeight:Math.max(fontSize,boxHeight)};};var itemsEqual=function itemsEqual(a,b){return a!==null&&b!==null&&a.datasetIndex===b.datasetIndex&&a.index===b.index;};var Legend=/*#__PURE__*/function(_Element6){_inherits(Legend,_Element6);var _super16=_createSuper(Legend);function Legend(config){var _this27;_classCallCheck(this,Legend);_this27=_super16.call(this);_this27._added=false;_this27.legendHitBoxes=[];_this27._hoveredItem=null;_this27.doughnutMode=false;_this27.chart=config.chart;_this27.options=config.options;_this27.ctx=config.ctx;_this27.legendItems=void 0;_this27.columnSizes=void 0;_this27.lineWidths=void 0;_this27.maxHeight=void 0;_this27.maxWidth=void 0;_this27.top=void 0;_this27.bottom=void 0;_this27.left=void 0;_this27.right=void 0;_this27.height=void 0;_this27.width=void 0;_this27._margins=void 0;_this27.position=void 0;_this27.weight=void 0;_this27.fullSize=void 0;return _this27;}_createClass(Legend,[{key:"update",value:function update(maxWidth,maxHeight,margins){this.maxWidth=maxWidth;this.maxHeight=maxHeight;this._margins=margins;this.setDimensions();this.buildLabels();this.fit();}},{key:"setDimensions",value:function setDimensions(){if(this.isHorizontal()){this.width=this.maxWidth;this.left=this._margins.left;this.right=this.width;}else{this.height=this.maxHeight;this.top=this._margins.top;this.bottom=this.height;}}},{key:"buildLabels",value:function buildLabels(){var _this28=this;var labelOpts=this.options.labels||{};var legendItems=callback(labelOpts.generateLabels,[this.chart],this)||[];if(labelOpts.filter){legendItems=legendItems.filter(function(item){return labelOpts.filter(item,_this28.chart.data);});}if(labelOpts.sort){legendItems=legendItems.sort(function(a,b){return labelOpts.sort(a,b,_this28.chart.data);});}if(this.options.reverse){legendItems.reverse();}this.legendItems=legendItems;}},{key:"fit",value:function fit(){var options=this.options,ctx=this.ctx;if(!options.display){this.width=this.height=0;return;}var labelOpts=options.labels;var labelFont=toFont(labelOpts.font);var fontSize=labelFont.size;var titleHeight=this._computeTitleHeight();var _getBoxSize=getBoxSize(labelOpts,fontSize),boxWidth=_getBoxSize.boxWidth,itemHeight=_getBoxSize.itemHeight;var width,height;ctx.font=labelFont.string;if(this.isHorizontal()){width=this.maxWidth;height=this._fitRows(titleHeight,fontSize,boxWidth,itemHeight)+10;}else{height=this.maxHeight;width=this._fitCols(titleHeight,fontSize,boxWidth,itemHeight)+10;}this.width=Math.min(width,options.maxWidth||this.maxWidth);this.height=Math.min(height,options.maxHeight||this.maxHeight);}},{key:"_fitRows",value:function _fitRows(titleHeight,fontSize,boxWidth,itemHeight){var ctx=this.ctx,maxWidth=this.maxWidth,padding=this.options.labels.padding;var hitboxes=this.legendHitBoxes=[];var lineWidths=this.lineWidths=[0];var lineHeight=itemHeight+padding;var totalHeight=titleHeight;ctx.textAlign="left";ctx.textBaseline="middle";var row=-1;var top=-lineHeight;this.legendItems.forEach(function(legendItem,i){var itemWidth=boxWidth+fontSize/2+ctx.measureText(legendItem.text).width;if(i===0||lineWidths[lineWidths.length-1]+itemWidth+2*padding>maxWidth){totalHeight+=lineHeight;lineWidths[lineWidths.length-(i>0?0:1)]=0;top+=lineHeight;row++;}hitboxes[i]={left:0,top:top,row:row,width:itemWidth,height:itemHeight};lineWidths[lineWidths.length-1]+=itemWidth+padding;});return totalHeight;}},{key:"_fitCols",value:function _fitCols(titleHeight,fontSize,boxWidth,itemHeight){var ctx=this.ctx,maxHeight=this.maxHeight,padding=this.options.labels.padding;var hitboxes=this.legendHitBoxes=[];var columnSizes=this.columnSizes=[];var heightLimit=maxHeight-titleHeight;var totalWidth=padding;var currentColWidth=0;var currentColHeight=0;var left=0;var col=0;this.legendItems.forEach(function(legendItem,i){var itemWidth=boxWidth+fontSize/2+ctx.measureText(legendItem.text).width;if(i>0&&currentColHeight+itemHeight+2*padding>heightLimit){totalWidth+=currentColWidth+padding;columnSizes.push({width:currentColWidth,height:currentColHeight});left+=currentColWidth+padding;col++;currentColWidth=currentColHeight=0;}hitboxes[i]={left:left,top:currentColHeight,col:col,width:itemWidth,height:itemHeight};currentColWidth=Math.max(currentColWidth,itemWidth);currentColHeight+=itemHeight+padding;});totalWidth+=currentColWidth;columnSizes.push({width:currentColWidth,height:currentColHeight});return totalWidth;}},{key:"adjustHitBoxes",value:function adjustHitBoxes(){if(!this.options.display){return;}var titleHeight=this._computeTitleHeight();var hitboxes=this.legendHitBoxes,_this$options14=this.options,align=_this$options14.align,padding=_this$options14.labels.padding,rtl=_this$options14.rtl;var rtlHelper=getRtlAdapter(rtl,this.left,this.width);if(this.isHorizontal()){var row=0;var left=_alignStartEnd(align,this.left+padding,this.right-this.lineWidths[row]);var _iterator34=_createForOfIteratorHelper(hitboxes),_step34;try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var hitbox=_step34.value;if(row!==hitbox.row){row=hitbox.row;left=_alignStartEnd(align,this.left+padding,this.right-this.lineWidths[row]);}hitbox.top+=this.top+titleHeight+padding;hitbox.left=rtlHelper.leftForLtr(rtlHelper.x(left),hitbox.width);left+=hitbox.width+padding;}}catch(err){_iterator34.e(err);}finally{_iterator34.f();}}else{var col=0;var top=_alignStartEnd(align,this.top+titleHeight+padding,this.bottom-this.columnSizes[col].height);var _iterator35=_createForOfIteratorHelper(hitboxes),_step35;try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var _hitbox=_step35.value;if(_hitbox.col!==col){col=_hitbox.col;top=_alignStartEnd(align,this.top+titleHeight+padding,this.bottom-this.columnSizes[col].height);}_hitbox.top=top;_hitbox.left+=this.left+padding;_hitbox.left=rtlHelper.leftForLtr(rtlHelper.x(_hitbox.left),_hitbox.width);top+=_hitbox.height+padding;}}catch(err){_iterator35.e(err);}finally{_iterator35.f();}}}},{key:"isHorizontal",value:function isHorizontal(){return this.options.position==="top"||this.options.position==="bottom";}},{key:"draw",value:function draw(){if(this.options.display){var ctx=this.ctx;clipArea(ctx,this);this._draw();unclipArea(ctx);}}},{key:"_draw",value:function _draw(){var _this29=this;var opts=this.options,columnSizes=this.columnSizes,lineWidths=this.lineWidths,ctx=this.ctx;var align=opts.align,labelOpts=opts.labels;var defaultColor=defaults.color;var rtlHelper=getRtlAdapter(opts.rtl,this.left,this.width);var labelFont=toFont(labelOpts.font);var fontColor=labelOpts.color,padding=labelOpts.padding;var fontSize=labelFont.size;var halfFontSize=fontSize/2;var cursor;this.drawTitle();ctx.textAlign=rtlHelper.textAlign("left");ctx.textBaseline="middle";ctx.lineWidth=0.5;ctx.font=labelFont.string;var _getBoxSize2=getBoxSize(labelOpts,fontSize),boxWidth=_getBoxSize2.boxWidth,boxHeight=_getBoxSize2.boxHeight,itemHeight=_getBoxSize2.itemHeight;var drawLegendBox=function drawLegendBox(x,y,legendItem){if(isNaN(boxWidth)||boxWidth<=0||isNaN(boxHeight)||boxHeight<0){return;}ctx.save();var lineWidth=valueOrDefault(legendItem.lineWidth,1);ctx.fillStyle=valueOrDefault(legendItem.fillStyle,defaultColor);ctx.lineCap=valueOrDefault(legendItem.lineCap,"butt");ctx.lineDashOffset=valueOrDefault(legendItem.lineDashOffset,0);ctx.lineJoin=valueOrDefault(legendItem.lineJoin,"miter");ctx.lineWidth=lineWidth;ctx.strokeStyle=valueOrDefault(legendItem.strokeStyle,defaultColor);ctx.setLineDash(valueOrDefault(legendItem.lineDash,[]));if(labelOpts.usePointStyle){var drawOptions={radius:boxHeight*Math.SQRT2/2,pointStyle:legendItem.pointStyle,rotation:legendItem.rotation,borderWidth:lineWidth};var centerX=rtlHelper.xPlus(x,boxWidth/2);var centerY=y+halfFontSize;drawPointLegend(ctx,drawOptions,centerX,centerY,labelOpts.pointStyleWidth&&boxWidth);}else{var yBoxTop=y+Math.max((fontSize-boxHeight)/2,0);var xBoxLeft=rtlHelper.leftForLtr(x,boxWidth);var borderRadius=toTRBLCorners(legendItem.borderRadius);ctx.beginPath();if(Object.values(borderRadius).some(function(v){return v!==0;})){addRoundedRectPath(ctx,{x:xBoxLeft,y:yBoxTop,w:boxWidth,h:boxHeight,radius:borderRadius});}else{ctx.rect(xBoxLeft,yBoxTop,boxWidth,boxHeight);}ctx.fill();if(lineWidth!==0){ctx.stroke();}}ctx.restore();};var fillText=function fillText(x,y,legendItem){renderText(ctx,legendItem.text,x,y+itemHeight/2,labelFont,{strikethrough:legendItem.hidden,textAlign:rtlHelper.textAlign(legendItem.textAlign)});};var isHorizontal=this.isHorizontal();var titleHeight=this._computeTitleHeight();if(isHorizontal){cursor={x:_alignStartEnd(align,this.left+padding,this.right-lineWidths[0]),y:this.top+padding+titleHeight,line:0};}else{cursor={x:this.left+padding,y:_alignStartEnd(align,this.top+titleHeight+padding,this.bottom-columnSizes[0].height),line:0};}overrideTextDirection(this.ctx,opts.textDirection);var lineHeight=itemHeight+padding;this.legendItems.forEach(function(legendItem,i){ctx.strokeStyle=legendItem.fontColor||fontColor;ctx.fillStyle=legendItem.fontColor||fontColor;var textWidth=ctx.measureText(legendItem.text).width;var textAlign=rtlHelper.textAlign(legendItem.textAlign||(legendItem.textAlign=labelOpts.textAlign));var width=boxWidth+halfFontSize+textWidth;var x=cursor.x;var y=cursor.y;rtlHelper.setWidth(_this29.width);if(isHorizontal){if(i>0&&x+width+padding>_this29.right){y=cursor.y+=lineHeight;cursor.line++;x=cursor.x=_alignStartEnd(align,_this29.left+padding,_this29.right-lineWidths[cursor.line]);}}else if(i>0&&y+lineHeight>_this29.bottom){x=cursor.x=x+columnSizes[cursor.line].width+padding;cursor.line++;y=cursor.y=_alignStartEnd(align,_this29.top+titleHeight+padding,_this29.bottom-columnSizes[cursor.line].height);}var realX=rtlHelper.x(x);drawLegendBox(realX,y,legendItem);x=_textX(textAlign,x+boxWidth+halfFontSize,isHorizontal?x+width:_this29.right,opts.rtl);fillText(rtlHelper.x(x),y,legendItem);if(isHorizontal){cursor.x+=width+padding;}else{cursor.y+=lineHeight;}});restoreTextDirection(this.ctx,opts.textDirection);}},{key:"drawTitle",value:function drawTitle(){var opts=this.options;var titleOpts=opts.title;var titleFont=toFont(titleOpts.font);var titlePadding=toPadding(titleOpts.padding);if(!titleOpts.display){return;}var rtlHelper=getRtlAdapter(opts.rtl,this.left,this.width);var ctx=this.ctx;var position=titleOpts.position;var halfFontSize=titleFont.size/2;var topPaddingPlusHalfFontSize=titlePadding.top+halfFontSize;var y;var left=this.left;var maxWidth=this.width;if(this.isHorizontal()){maxWidth=Math.max.apply(Math,_toConsumableArray(this.lineWidths));y=this.top+topPaddingPlusHalfFontSize;left=_alignStartEnd(opts.align,left,this.right-maxWidth);}else{var maxHeight=this.columnSizes.reduce(function(acc,size){return Math.max(acc,size.height);},0);y=topPaddingPlusHalfFontSize+_alignStartEnd(opts.align,this.top,this.bottom-maxHeight-opts.labels.padding-this._computeTitleHeight());}var x=_alignStartEnd(position,left,left+maxWidth);ctx.textAlign=rtlHelper.textAlign(_toLeftRightCenter(position));ctx.textBaseline="middle";ctx.strokeStyle=titleOpts.color;ctx.fillStyle=titleOpts.color;ctx.font=titleFont.string;renderText(ctx,titleOpts.text,x,y,titleFont);}},{key:"_computeTitleHeight",value:function _computeTitleHeight(){var titleOpts=this.options.title;var titleFont=toFont(titleOpts.font);var titlePadding=toPadding(titleOpts.padding);return titleOpts.display?titleFont.lineHeight+titlePadding.height:0;}},{key:"_getLegendItemAt",value:function _getLegendItemAt(x,y){var i,hitBox,lh;if(_isBetween(x,this.left,this.right)&&_isBetween(y,this.top,this.bottom)){lh=this.legendHitBoxes;for(i=0;i<lh.length;++i){hitBox=lh[i];if(_isBetween(x,hitBox.left,hitBox.left+hitBox.width)&&_isBetween(y,hitBox.top,hitBox.top+hitBox.height)){return this.legendItems[i];}}}return null;}},{key:"handleEvent",value:function handleEvent(e){var opts=this.options;if(!isListened(e.type,opts)){return;}var hoveredItem=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){var previous=this._hoveredItem;var sameItem=itemsEqual(previous,hoveredItem);if(previous&&!sameItem){callback(opts.onLeave,[e,previous,this],this);}this._hoveredItem=hoveredItem;if(hoveredItem&&!sameItem){callback(opts.onHover,[e,hoveredItem,this],this);}}else if(hoveredItem){callback(opts.onClick,[e,hoveredItem,this],this);}}}]);return Legend;}(Element);function isListened(type2,opts){if((type2==="mousemove"||type2==="mouseout")&&(opts.onHover||opts.onLeave)){return true;}if(opts.onClick&&(type2==="click"||type2==="mouseup")){return true;}return false;}var plugin_legend={id:"legend",_element:Legend,start:function start(chart,_args,options){var legend5=chart.legend=new Legend({ctx:chart.ctx,options:options,chart:chart});layouts.configure(chart,legend5,options);layouts.addBox(chart,legend5);},stop:function stop(chart){layouts.removeBox(chart,chart.legend);delete chart.legend;},beforeUpdate:function beforeUpdate(chart,_args,options){var legend5=chart.legend;layouts.configure(chart,legend5,options);legend5.options=options;},afterUpdate:function afterUpdate(chart){var legend5=chart.legend;legend5.buildLabels();legend5.adjustHitBoxes();},afterEvent:function afterEvent(chart,args){if(!args.replay){chart.legend.handleEvent(args.event);}},defaults:{display:true,position:"top",align:"center",fullSize:true,reverse:false,weight:1e3,onClick:function onClick(e,legendItem,legend5){var index3=legendItem.datasetIndex;var ci=legend5.chart;if(ci.isDatasetVisible(index3)){ci.hide(index3);legendItem.hidden=true;}else{ci.show(index3);legendItem.hidden=false;}},onHover:null,onLeave:null,labels:{color:function color(ctx){return ctx.chart.options.color;},boxWidth:40,padding:10,generateLabels:function generateLabels(chart){var datasets=chart.data.datasets;var _chart$legend$options=chart.legend.options.labels,usePointStyle=_chart$legend$options.usePointStyle,pointStyle=_chart$legend$options.pointStyle,textAlign=_chart$legend$options.textAlign,color3=_chart$legend$options.color;return chart._getSortedDatasetMetas().map(function(meta){var style=meta.controller.getStyle(usePointStyle?0:void 0);var borderWidth3=toPadding(style.borderWidth);return{text:datasets[meta.index].label,fillStyle:style.backgroundColor,fontColor:color3,hidden:!meta.visible,lineCap:style.borderCapStyle,lineDash:style.borderDash,lineDashOffset:style.borderDashOffset,lineJoin:style.borderJoinStyle,lineWidth:(borderWidth3.width+borderWidth3.height)/4,strokeStyle:style.borderColor,pointStyle:pointStyle||style.pointStyle,rotation:style.rotation,textAlign:textAlign||style.textAlign,borderRadius:0,datasetIndex:meta.index};},this);}},title:{color:function color(ctx){return ctx.chart.options.color;},display:false,position:"center",text:""}},descriptors:{_scriptable:function _scriptable(name){return!name.startsWith("on");},labels:{_scriptable:function _scriptable(name){return!["generateLabels","filter","sort"].includes(name);}}}};var Title=/*#__PURE__*/function(_Element7){_inherits(Title,_Element7);var _super17=_createSuper(Title);function Title(config){var _this30;_classCallCheck(this,Title);_this30=_super17.call(this);_this30.chart=config.chart;_this30.options=config.options;_this30.ctx=config.ctx;_this30._padding=void 0;_this30.top=void 0;_this30.bottom=void 0;_this30.left=void 0;_this30.right=void 0;_this30.width=void 0;_this30.height=void 0;_this30.position=void 0;_this30.weight=void 0;_this30.fullSize=void 0;return _this30;}_createClass(Title,[{key:"update",value:function update(maxWidth,maxHeight){var opts=this.options;this.left=0;this.top=0;if(!opts.display){this.width=this.height=this.right=this.bottom=0;return;}this.width=this.right=maxWidth;this.height=this.bottom=maxHeight;var lineCount=isArray(opts.text)?opts.text.length:1;this._padding=toPadding(opts.padding);var textSize=lineCount*toFont(opts.font).lineHeight+this._padding.height;if(this.isHorizontal()){this.height=textSize;}else{this.width=textSize;}}},{key:"isHorizontal",value:function isHorizontal(){var pos=this.options.position;return pos==="top"||pos==="bottom";}},{key:"_drawArgs",value:function _drawArgs(offset){var top=this.top,left=this.left,bottom=this.bottom,right=this.right,options=this.options;var align=options.align;var rotation=0;var maxWidth,titleX,titleY;if(this.isHorizontal()){titleX=_alignStartEnd(align,left,right);titleY=top+offset;maxWidth=right-left;}else{if(options.position==="left"){titleX=left+offset;titleY=_alignStartEnd(align,bottom,top);rotation=PI*-0.5;}else{titleX=right-offset;titleY=_alignStartEnd(align,top,bottom);rotation=PI*0.5;}maxWidth=bottom-top;}return{titleX:titleX,titleY:titleY,maxWidth:maxWidth,rotation:rotation};}},{key:"draw",value:function draw(){var ctx=this.ctx;var opts=this.options;if(!opts.display){return;}var fontOpts=toFont(opts.font);var lineHeight=fontOpts.lineHeight;var offset=lineHeight/2+this._padding.top;var _this$_drawArgs=this._drawArgs(offset),titleX=_this$_drawArgs.titleX,titleY=_this$_drawArgs.titleY,maxWidth=_this$_drawArgs.maxWidth,rotation=_this$_drawArgs.rotation;renderText(ctx,opts.text,0,0,fontOpts,{color:opts.color,maxWidth:maxWidth,rotation:rotation,textAlign:_toLeftRightCenter(opts.align),textBaseline:"middle",translation:[titleX,titleY]});}}]);return Title;}(Element);function createTitle(chart,titleOpts){var title4=new Title({ctx:chart.ctx,options:titleOpts,chart:chart});layouts.configure(chart,title4,titleOpts);layouts.addBox(chart,title4);chart.titleBlock=title4;}var plugin_title={id:"title",_element:Title,start:function start(chart,_args,options){createTitle(chart,options);},stop:function stop(chart){var titleBlock=chart.titleBlock;layouts.removeBox(chart,titleBlock);delete chart.titleBlock;},beforeUpdate:function beforeUpdate(chart,_args,options){var title4=chart.titleBlock;layouts.configure(chart,title4,options);title4.options=options;},defaults:{align:"center",display:false,font:{weight:"bold"},fullSize:true,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:true,_indexable:false}};var map2=/* @__PURE__ */new WeakMap();var plugin_subtitle={id:"subtitle",start:function start(chart,_args,options){var title4=new Title({ctx:chart.ctx,options:options,chart:chart});layouts.configure(chart,title4,options);layouts.addBox(chart,title4);map2.set(chart,title4);},stop:function stop(chart){layouts.removeBox(chart,map2.get(chart));map2["delete"](chart);},beforeUpdate:function beforeUpdate(chart,_args,options){var title4=map2.get(chart);layouts.configure(chart,title4,options);title4.options=options;},defaults:{align:"center",display:false,font:{weight:"normal"},fullSize:true,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:true,_indexable:false}};var positioners={average:function average(items){if(!items.length){return false;}var i,len;var x=0;var y=0;var count=0;for(i=0,len=items.length;i<len;++i){var el=items[i].element;if(el&&el.hasValue()){var pos=el.tooltipPosition();x+=pos.x;y+=pos.y;++count;}}return{x:x/count,y:y/count};},nearest:function nearest(items,eventPosition){if(!items.length){return false;}var x=eventPosition.x;var y=eventPosition.y;var minDistance=Number.POSITIVE_INFINITY;var i,len,nearestElement;for(i=0,len=items.length;i<len;++i){var el=items[i].element;if(el&&el.hasValue()){var center=el.getCenterPoint();var d=distanceBetweenPoints(eventPosition,center);if(d<minDistance){minDistance=d;nearestElement=el;}}}if(nearestElement){var tp=nearestElement.tooltipPosition();x=tp.x;y=tp.y;}return{x:x,y:y};}};function pushOrConcat(base,toPush){if(toPush){if(isArray(toPush)){Array.prototype.push.apply(base,toPush);}else{base.push(toPush);}}return base;}function splitNewlines(str){if((typeof str==="string"||str instanceof String)&&str.indexOf("\n")>-1){return str.split("\n");}return str;}function createTooltipItem(chart,item){var element=item.element,datasetIndex=item.datasetIndex,index3=item.index;var controller=chart.getDatasetMeta(datasetIndex).controller;var _controller$getLabelA=controller.getLabelAndValue(index3),label=_controller$getLabelA.label,value=_controller$getLabelA.value;return{chart:chart,label:label,parsed:controller.getParsed(index3),raw:chart.data.datasets[datasetIndex].data[index3],formattedValue:value,dataset:controller.getDataset(),dataIndex:index3,datasetIndex:datasetIndex,element:element};}function getTooltipSize(tooltip5,options){var ctx=tooltip5.chart.ctx;var body=tooltip5.body,footer=tooltip5.footer,title4=tooltip5.title;var boxWidth=options.boxWidth,boxHeight=options.boxHeight;var bodyFont=toFont(options.bodyFont);var titleFont=toFont(options.titleFont);var footerFont=toFont(options.footerFont);var titleLineCount=title4.length;var footerLineCount=footer.length;var bodyLineItemCount=body.length;var padding=toPadding(options.padding);var height=padding.height;var width=0;var combinedBodyLength=body.reduce(function(count,bodyItem){return count+bodyItem.before.length+bodyItem.lines.length+bodyItem.after.length;},0);combinedBodyLength+=tooltip5.beforeBody.length+tooltip5.afterBody.length;if(titleLineCount){height+=titleLineCount*titleFont.lineHeight+(titleLineCount-1)*options.titleSpacing+options.titleMarginBottom;}if(combinedBodyLength){var bodyLineHeight=options.displayColors?Math.max(boxHeight,bodyFont.lineHeight):bodyFont.lineHeight;height+=bodyLineItemCount*bodyLineHeight+(combinedBodyLength-bodyLineItemCount)*bodyFont.lineHeight+(combinedBodyLength-1)*options.bodySpacing;}if(footerLineCount){height+=options.footerMarginTop+footerLineCount*footerFont.lineHeight+(footerLineCount-1)*options.footerSpacing;}var widthPadding=0;var maxLineWidth=function maxLineWidth(line){width=Math.max(width,ctx.measureText(line).width+widthPadding);};ctx.save();ctx.font=titleFont.string;each(tooltip5.title,maxLineWidth);ctx.font=bodyFont.string;each(tooltip5.beforeBody.concat(tooltip5.afterBody),maxLineWidth);widthPadding=options.displayColors?boxWidth+2+options.boxPadding:0;each(body,function(bodyItem){each(bodyItem.before,maxLineWidth);each(bodyItem.lines,maxLineWidth);each(bodyItem.after,maxLineWidth);});widthPadding=0;ctx.font=footerFont.string;each(tooltip5.footer,maxLineWidth);ctx.restore();width+=padding.width;return{width:width,height:height};}function determineYAlign(chart,size){var y=size.y,height=size.height;if(y<height/2){return"top";}else if(y>chart.height-height/2){return"bottom";}return"center";}function doesNotFitWithAlign(xAlign,chart,options,size){var x=size.x,width=size.width;var caret=options.caretSize+options.caretPadding;if(xAlign==="left"&&x+width+caret>chart.width){return true;}if(xAlign==="right"&&x-width-caret<0){return true;}}function determineXAlign(chart,options,size,yAlign){var x=size.x,width=size.width;var chartWidth=chart.width,_chart$chartArea=chart.chartArea,left=_chart$chartArea.left,right=_chart$chartArea.right;var xAlign="center";if(yAlign==="center"){xAlign=x<=(left+right)/2?"left":"right";}else if(x<=width/2){xAlign="left";}else if(x>=chartWidth-width/2){xAlign="right";}if(doesNotFitWithAlign(xAlign,chart,options,size)){xAlign="center";}return xAlign;}function determineAlignment(chart,options,size){var yAlign=size.yAlign||options.yAlign||determineYAlign(chart,size);return{xAlign:size.xAlign||options.xAlign||determineXAlign(chart,options,size,yAlign),yAlign:yAlign};}function alignX(size,xAlign){var x=size.x,width=size.width;if(xAlign==="right"){x-=width;}else if(xAlign==="center"){x-=width/2;}return x;}function alignY(size,yAlign,paddingAndSize){var y=size.y,height=size.height;if(yAlign==="top"){y+=paddingAndSize;}else if(yAlign==="bottom"){y-=height+paddingAndSize;}else{y-=height/2;}return y;}function getBackgroundPoint(options,size,alignment,chart){var caretSize=options.caretSize,caretPadding=options.caretPadding,cornerRadius=options.cornerRadius;var xAlign=alignment.xAlign,yAlign=alignment.yAlign;var paddingAndSize=caretSize+caretPadding;var _toTRBLCorners=toTRBLCorners(cornerRadius),topLeft=_toTRBLCorners.topLeft,topRight=_toTRBLCorners.topRight,bottomLeft=_toTRBLCorners.bottomLeft,bottomRight=_toTRBLCorners.bottomRight;var x=alignX(size,xAlign);var y=alignY(size,yAlign,paddingAndSize);if(yAlign==="center"){if(xAlign==="left"){x+=paddingAndSize;}else if(xAlign==="right"){x-=paddingAndSize;}}else if(xAlign==="left"){x-=Math.max(topLeft,bottomLeft)+caretSize;}else if(xAlign==="right"){x+=Math.max(topRight,bottomRight)+caretSize;}return{x:_limitValue(x,0,chart.width-size.width),y:_limitValue(y,0,chart.height-size.height)};}function getAlignedX(tooltip5,align,options){var padding=toPadding(options.padding);return align==="center"?tooltip5.x+tooltip5.width/2:align==="right"?tooltip5.x+tooltip5.width-padding.right:tooltip5.x+padding.left;}function getBeforeAfterBodyLines(callback2){return pushOrConcat([],splitNewlines(callback2));}function createTooltipContext(parent,tooltip5,tooltipItems){return createContext(parent,{tooltip:tooltip5,tooltipItems:tooltipItems,type:"tooltip"});}function overrideCallbacks(callbacks,context){var override=context&&context.dataset&&context.dataset.tooltip&&context.dataset.tooltip.callbacks;return override?callbacks.override(override):callbacks;}var Tooltip=/*#__PURE__*/function(_Element8){_inherits(Tooltip,_Element8);var _super18=_createSuper(Tooltip);function Tooltip(config){var _this31;_classCallCheck(this,Tooltip);_this31=_super18.call(this);_this31.opacity=0;_this31._active=[];_this31._eventPosition=void 0;_this31._size=void 0;_this31._cachedAnimations=void 0;_this31._tooltipItems=[];_this31.$animations=void 0;_this31.$context=void 0;_this31.chart=config.chart||config._chart;_this31._chart=_this31.chart;_this31.options=config.options;_this31.dataPoints=void 0;_this31.title=void 0;_this31.beforeBody=void 0;_this31.body=void 0;_this31.afterBody=void 0;_this31.footer=void 0;_this31.xAlign=void 0;_this31.yAlign=void 0;_this31.x=void 0;_this31.y=void 0;_this31.height=void 0;_this31.width=void 0;_this31.caretX=void 0;_this31.caretY=void 0;_this31.labelColors=void 0;_this31.labelPointStyles=void 0;_this31.labelTextColors=void 0;return _this31;}_createClass(Tooltip,[{key:"initialize",value:function initialize(options){this.options=options;this._cachedAnimations=void 0;this.$context=void 0;}},{key:"_resolveAnimations",value:function _resolveAnimations(){var cached=this._cachedAnimations;if(cached){return cached;}var chart=this.chart;var options=this.options.setContext(this.getContext());var opts=options.enabled&&chart.options.animation&&options.animations;var animations=new Animations(this.chart,opts);if(opts._cacheable){this._cachedAnimations=Object.freeze(animations);}return animations;}},{key:"getContext",value:function getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems));}},{key:"getTitle",value:function getTitle(context,options){var callbacks=options.callbacks;var beforeTitle=callbacks.beforeTitle.apply(this,[context]);var title4=callbacks.title.apply(this,[context]);var afterTitle=callbacks.afterTitle.apply(this,[context]);var lines=[];lines=pushOrConcat(lines,splitNewlines(beforeTitle));lines=pushOrConcat(lines,splitNewlines(title4));lines=pushOrConcat(lines,splitNewlines(afterTitle));return lines;}},{key:"getBeforeBody",value:function getBeforeBody(tooltipItems,options){return getBeforeAfterBodyLines(options.callbacks.beforeBody.apply(this,[tooltipItems]));}},{key:"getBody",value:function getBody(tooltipItems,options){var _this32=this;var callbacks=options.callbacks;var bodyItems=[];each(tooltipItems,function(context){var bodyItem={before:[],lines:[],after:[]};var scoped=overrideCallbacks(callbacks,context);pushOrConcat(bodyItem.before,splitNewlines(scoped.beforeLabel.call(_this32,context)));pushOrConcat(bodyItem.lines,scoped.label.call(_this32,context));pushOrConcat(bodyItem.after,splitNewlines(scoped.afterLabel.call(_this32,context)));bodyItems.push(bodyItem);});return bodyItems;}},{key:"getAfterBody",value:function getAfterBody(tooltipItems,options){return getBeforeAfterBodyLines(options.callbacks.afterBody.apply(this,[tooltipItems]));}},{key:"getFooter",value:function getFooter(tooltipItems,options){var callbacks=options.callbacks;var beforeFooter=callbacks.beforeFooter.apply(this,[tooltipItems]);var footer=callbacks.footer.apply(this,[tooltipItems]);var afterFooter=callbacks.afterFooter.apply(this,[tooltipItems]);var lines=[];lines=pushOrConcat(lines,splitNewlines(beforeFooter));lines=pushOrConcat(lines,splitNewlines(footer));lines=pushOrConcat(lines,splitNewlines(afterFooter));return lines;}},{key:"_createItems",value:function _createItems(options){var _this33=this;var active=this._active;var data=this.chart.data;var labelColors=[];var labelPointStyles=[];var labelTextColors=[];var tooltipItems=[];var i,len;for(i=0,len=active.length;i<len;++i){tooltipItems.push(createTooltipItem(this.chart,active[i]));}if(options.filter){tooltipItems=tooltipItems.filter(function(element,index3,array2){return options.filter(element,index3,array2,data);});}if(options.itemSort){tooltipItems=tooltipItems.sort(function(a,b){return options.itemSort(a,b,data);});}each(tooltipItems,function(context){var scoped=overrideCallbacks(options.callbacks,context);labelColors.push(scoped.labelColor.call(_this33,context));labelPointStyles.push(scoped.labelPointStyle.call(_this33,context));labelTextColors.push(scoped.labelTextColor.call(_this33,context));});this.labelColors=labelColors;this.labelPointStyles=labelPointStyles;this.labelTextColors=labelTextColors;this.dataPoints=tooltipItems;return tooltipItems;}},{key:"update",value:function update(changed,replay){var options=this.options.setContext(this.getContext());var active=this._active;var properties;var tooltipItems=[];if(!active.length){if(this.opacity!==0){properties={opacity:0};}}else{var position=positioners[options.position].call(this,active,this._eventPosition);tooltipItems=this._createItems(options);this.title=this.getTitle(tooltipItems,options);this.beforeBody=this.getBeforeBody(tooltipItems,options);this.body=this.getBody(tooltipItems,options);this.afterBody=this.getAfterBody(tooltipItems,options);this.footer=this.getFooter(tooltipItems,options);var size=this._size=getTooltipSize(this,options);var positionAndSize=Object.assign({},position,size);var alignment=determineAlignment(this.chart,options,positionAndSize);var backgroundPoint=getBackgroundPoint(options,positionAndSize,alignment,this.chart);this.xAlign=alignment.xAlign;this.yAlign=alignment.yAlign;properties={opacity:1,x:backgroundPoint.x,y:backgroundPoint.y,width:size.width,height:size.height,caretX:position.x,caretY:position.y};}this._tooltipItems=tooltipItems;this.$context=void 0;if(properties){this._resolveAnimations().update(this,properties);}if(changed&&options.external){options.external.call(this,{chart:this.chart,tooltip:this,replay:replay});}}},{key:"drawCaret",value:function drawCaret(tooltipPoint,ctx,size,options){var caretPosition=this.getCaretPosition(tooltipPoint,size,options);ctx.lineTo(caretPosition.x1,caretPosition.y1);ctx.lineTo(caretPosition.x2,caretPosition.y2);ctx.lineTo(caretPosition.x3,caretPosition.y3);}},{key:"getCaretPosition",value:function getCaretPosition(tooltipPoint,size,options){var xAlign=this.xAlign,yAlign=this.yAlign;var caretSize=options.caretSize,cornerRadius=options.cornerRadius;var _toTRBLCorners2=toTRBLCorners(cornerRadius),topLeft=_toTRBLCorners2.topLeft,topRight=_toTRBLCorners2.topRight,bottomLeft=_toTRBLCorners2.bottomLeft,bottomRight=_toTRBLCorners2.bottomRight;var ptX=tooltipPoint.x,ptY=tooltipPoint.y;var width=size.width,height=size.height;var x1,x2,x3,y1,y2,y3;if(yAlign==="center"){y2=ptY+height/2;if(xAlign==="left"){x1=ptX;x2=x1-caretSize;y1=y2+caretSize;y3=y2-caretSize;}else{x1=ptX+width;x2=x1+caretSize;y1=y2-caretSize;y3=y2+caretSize;}x3=x1;}else{if(xAlign==="left"){x2=ptX+Math.max(topLeft,bottomLeft)+caretSize;}else if(xAlign==="right"){x2=ptX+width-Math.max(topRight,bottomRight)-caretSize;}else{x2=this.caretX;}if(yAlign==="top"){y1=ptY;y2=y1-caretSize;x1=x2-caretSize;x3=x2+caretSize;}else{y1=ptY+height;y2=y1+caretSize;x1=x2+caretSize;x3=x2-caretSize;}y3=y1;}return{x1:x1,x2:x2,x3:x3,y1:y1,y2:y2,y3:y3};}},{key:"drawTitle",value:function drawTitle(pt,ctx,options){var title4=this.title;var length=title4.length;var titleFont,titleSpacing,i;if(length){var rtlHelper=getRtlAdapter(options.rtl,this.x,this.width);pt.x=getAlignedX(this,options.titleAlign,options);ctx.textAlign=rtlHelper.textAlign(options.titleAlign);ctx.textBaseline="middle";titleFont=toFont(options.titleFont);titleSpacing=options.titleSpacing;ctx.fillStyle=options.titleColor;ctx.font=titleFont.string;for(i=0;i<length;++i){ctx.fillText(title4[i],rtlHelper.x(pt.x),pt.y+titleFont.lineHeight/2);pt.y+=titleFont.lineHeight+titleSpacing;if(i+1===length){pt.y+=options.titleMarginBottom-titleSpacing;}}}}},{key:"_drawColorBox",value:function _drawColorBox(ctx,pt,i,rtlHelper,options){var labelColors=this.labelColors[i];var labelPointStyle=this.labelPointStyles[i];var boxHeight=options.boxHeight,boxWidth=options.boxWidth,boxPadding=options.boxPadding;var bodyFont=toFont(options.bodyFont);var colorX=getAlignedX(this,"left",options);var rtlColorX=rtlHelper.x(colorX);var yOffSet=boxHeight<bodyFont.lineHeight?(bodyFont.lineHeight-boxHeight)/2:0;var colorY=pt.y+yOffSet;if(options.usePointStyle){var drawOptions={radius:Math.min(boxWidth,boxHeight)/2,pointStyle:labelPointStyle.pointStyle,rotation:labelPointStyle.rotation,borderWidth:1};var centerX=rtlHelper.leftForLtr(rtlColorX,boxWidth)+boxWidth/2;var centerY=colorY+boxHeight/2;ctx.strokeStyle=options.multiKeyBackground;ctx.fillStyle=options.multiKeyBackground;drawPoint(ctx,drawOptions,centerX,centerY);ctx.strokeStyle=labelColors.borderColor;ctx.fillStyle=labelColors.backgroundColor;drawPoint(ctx,drawOptions,centerX,centerY);}else{ctx.lineWidth=isObject(labelColors.borderWidth)?Math.max.apply(Math,_toConsumableArray(Object.values(labelColors.borderWidth))):labelColors.borderWidth||1;ctx.strokeStyle=labelColors.borderColor;ctx.setLineDash(labelColors.borderDash||[]);ctx.lineDashOffset=labelColors.borderDashOffset||0;var outerX=rtlHelper.leftForLtr(rtlColorX,boxWidth-boxPadding);var innerX=rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX,1),boxWidth-boxPadding-2);var borderRadius=toTRBLCorners(labelColors.borderRadius);if(Object.values(borderRadius).some(function(v){return v!==0;})){ctx.beginPath();ctx.fillStyle=options.multiKeyBackground;addRoundedRectPath(ctx,{x:outerX,y:colorY,w:boxWidth,h:boxHeight,radius:borderRadius});ctx.fill();ctx.stroke();ctx.fillStyle=labelColors.backgroundColor;ctx.beginPath();addRoundedRectPath(ctx,{x:innerX,y:colorY+1,w:boxWidth-2,h:boxHeight-2,radius:borderRadius});ctx.fill();}else{ctx.fillStyle=options.multiKeyBackground;ctx.fillRect(outerX,colorY,boxWidth,boxHeight);ctx.strokeRect(outerX,colorY,boxWidth,boxHeight);ctx.fillStyle=labelColors.backgroundColor;ctx.fillRect(innerX,colorY+1,boxWidth-2,boxHeight-2);}}ctx.fillStyle=this.labelTextColors[i];}},{key:"drawBody",value:function drawBody(pt,ctx,options){var body=this.body;var bodySpacing=options.bodySpacing,bodyAlign=options.bodyAlign,displayColors=options.displayColors,boxHeight=options.boxHeight,boxWidth=options.boxWidth,boxPadding=options.boxPadding;var bodyFont=toFont(options.bodyFont);var bodyLineHeight=bodyFont.lineHeight;var xLinePadding=0;var rtlHelper=getRtlAdapter(options.rtl,this.x,this.width);var fillLineOfText=function fillLineOfText(line){ctx.fillText(line,rtlHelper.x(pt.x+xLinePadding),pt.y+bodyLineHeight/2);pt.y+=bodyLineHeight+bodySpacing;};var bodyAlignForCalculation=rtlHelper.textAlign(bodyAlign);var bodyItem,textColor,lines,i,j,ilen,jlen;ctx.textAlign=bodyAlign;ctx.textBaseline="middle";ctx.font=bodyFont.string;pt.x=getAlignedX(this,bodyAlignForCalculation,options);ctx.fillStyle=options.bodyColor;each(this.beforeBody,fillLineOfText);xLinePadding=displayColors&&bodyAlignForCalculation!=="right"?bodyAlign==="center"?boxWidth/2+boxPadding:boxWidth+2+boxPadding:0;for(i=0,ilen=body.length;i<ilen;++i){bodyItem=body[i];textColor=this.labelTextColors[i];ctx.fillStyle=textColor;each(bodyItem.before,fillLineOfText);lines=bodyItem.lines;if(displayColors&&lines.length){this._drawColorBox(ctx,pt,i,rtlHelper,options);bodyLineHeight=Math.max(bodyFont.lineHeight,boxHeight);}for(j=0,jlen=lines.length;j<jlen;++j){fillLineOfText(lines[j]);bodyLineHeight=bodyFont.lineHeight;}each(bodyItem.after,fillLineOfText);}xLinePadding=0;bodyLineHeight=bodyFont.lineHeight;each(this.afterBody,fillLineOfText);pt.y-=bodySpacing;}},{key:"drawFooter",value:function drawFooter(pt,ctx,options){var footer=this.footer;var length=footer.length;var footerFont,i;if(length){var rtlHelper=getRtlAdapter(options.rtl,this.x,this.width);pt.x=getAlignedX(this,options.footerAlign,options);pt.y+=options.footerMarginTop;ctx.textAlign=rtlHelper.textAlign(options.footerAlign);ctx.textBaseline="middle";footerFont=toFont(options.footerFont);ctx.fillStyle=options.footerColor;ctx.font=footerFont.string;for(i=0;i<length;++i){ctx.fillText(footer[i],rtlHelper.x(pt.x),pt.y+footerFont.lineHeight/2);pt.y+=footerFont.lineHeight+options.footerSpacing;}}}},{key:"drawBackground",value:function drawBackground(pt,ctx,tooltipSize,options){var xAlign=this.xAlign,yAlign=this.yAlign;var x=pt.x,y=pt.y;var width=tooltipSize.width,height=tooltipSize.height;var _toTRBLCorners3=toTRBLCorners(options.cornerRadius),topLeft=_toTRBLCorners3.topLeft,topRight=_toTRBLCorners3.topRight,bottomLeft=_toTRBLCorners3.bottomLeft,bottomRight=_toTRBLCorners3.bottomRight;ctx.fillStyle=options.backgroundColor;ctx.strokeStyle=options.borderColor;ctx.lineWidth=options.borderWidth;ctx.beginPath();ctx.moveTo(x+topLeft,y);if(yAlign==="top"){this.drawCaret(pt,ctx,tooltipSize,options);}ctx.lineTo(x+width-topRight,y);ctx.quadraticCurveTo(x+width,y,x+width,y+topRight);if(yAlign==="center"&&xAlign==="right"){this.drawCaret(pt,ctx,tooltipSize,options);}ctx.lineTo(x+width,y+height-bottomRight);ctx.quadraticCurveTo(x+width,y+height,x+width-bottomRight,y+height);if(yAlign==="bottom"){this.drawCaret(pt,ctx,tooltipSize,options);}ctx.lineTo(x+bottomLeft,y+height);ctx.quadraticCurveTo(x,y+height,x,y+height-bottomLeft);if(yAlign==="center"&&xAlign==="left"){this.drawCaret(pt,ctx,tooltipSize,options);}ctx.lineTo(x,y+topLeft);ctx.quadraticCurveTo(x,y,x+topLeft,y);ctx.closePath();ctx.fill();if(options.borderWidth>0){ctx.stroke();}}},{key:"_updateAnimationTarget",value:function _updateAnimationTarget(options){var chart=this.chart;var anims=this.$animations;var animX=anims&&anims.x;var animY=anims&&anims.y;if(animX||animY){var position=positioners[options.position].call(this,this._active,this._eventPosition);if(!position){return;}var size=this._size=getTooltipSize(this,options);var positionAndSize=Object.assign({},position,this._size);var alignment=determineAlignment(chart,options,positionAndSize);var point=getBackgroundPoint(options,positionAndSize,alignment,chart);if(animX._to!==point.x||animY._to!==point.y){this.xAlign=alignment.xAlign;this.yAlign=alignment.yAlign;this.width=size.width;this.height=size.height;this.caretX=position.x;this.caretY=position.y;this._resolveAnimations().update(this,point);}}}},{key:"_willRender",value:function _willRender(){return!!this.opacity;}},{key:"draw",value:function draw(ctx){var options=this.options.setContext(this.getContext());var opacity=this.opacity;if(!opacity){return;}this._updateAnimationTarget(options);var tooltipSize={width:this.width,height:this.height};var pt={x:this.x,y:this.y};opacity=Math.abs(opacity)<1e-3?0:opacity;var padding=toPadding(options.padding);var hasTooltipContent=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;if(options.enabled&&hasTooltipContent){ctx.save();ctx.globalAlpha=opacity;this.drawBackground(pt,ctx,tooltipSize,options);overrideTextDirection(ctx,options.textDirection);pt.y+=padding.top;this.drawTitle(pt,ctx,options);this.drawBody(pt,ctx,options);this.drawFooter(pt,ctx,options);restoreTextDirection(ctx,options.textDirection);ctx.restore();}}},{key:"getActiveElements",value:function getActiveElements(){return this._active||[];}},{key:"setActiveElements",value:function setActiveElements(activeElements,eventPosition){var _this34=this;var lastActive=this._active;var active=activeElements.map(function(_ref12){var datasetIndex=_ref12.datasetIndex,index3=_ref12.index;var meta=_this34.chart.getDatasetMeta(datasetIndex);if(!meta){throw new Error("Cannot find a dataset at index "+datasetIndex);}return{datasetIndex:datasetIndex,element:meta.data[index3],index:index3};});var changed=!_elementsEqual(lastActive,active);var positionChanged=this._positionChanged(active,eventPosition);if(changed||positionChanged){this._active=active;this._eventPosition=eventPosition;this._ignoreReplayEvents=true;this.update(true);}}},{key:"handleEvent",value:function handleEvent(e,replay){var inChartArea=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(replay&&this._ignoreReplayEvents){return false;}this._ignoreReplayEvents=false;var options=this.options;var lastActive=this._active||[];var active=this._getActiveElements(e,lastActive,replay,inChartArea);var positionChanged=this._positionChanged(active,e);var changed=replay||!_elementsEqual(active,lastActive)||positionChanged;if(changed){this._active=active;if(options.enabled||options.external){this._eventPosition={x:e.x,y:e.y};this.update(true,replay);}}return changed;}},{key:"_getActiveElements",value:function _getActiveElements(e,lastActive,replay,inChartArea){var options=this.options;if(e.type==="mouseout"){return[];}if(!inChartArea){return lastActive;}var active=this.chart.getElementsAtEventForMode(e,options.mode,options,replay);if(options.reverse){active.reverse();}return active;}},{key:"_positionChanged",value:function _positionChanged(active,e){var caretX=this.caretX,caretY=this.caretY,options=this.options;var position=positioners[options.position].call(this,active,e);return position!==false&&(caretX!==position.x||caretY!==position.y);}}]);return Tooltip;}(Element);Tooltip.positioners=positioners;var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners:positioners,afterInit:function afterInit(chart,_args,options){if(options){chart.tooltip=new Tooltip({chart:chart,options:options});}},beforeUpdate:function beforeUpdate(chart,_args,options){if(chart.tooltip){chart.tooltip.initialize(options);}},reset:function reset(chart,_args,options){if(chart.tooltip){chart.tooltip.initialize(options);}},afterDraw:function afterDraw(chart){var tooltip5=chart.tooltip;if(tooltip5&&tooltip5._willRender()){var args={tooltip:tooltip5};if(chart.notifyPlugins("beforeTooltipDraw",args)===false){return;}tooltip5.draw(chart.ctx);chart.notifyPlugins("afterTooltipDraw",args);}},afterEvent:function afterEvent(chart,args){if(chart.tooltip){var useFinalPosition=args.replay;if(chart.tooltip.handleEvent(args.event,useFinalPosition,args.inChartArea)){args.changed=true;}}},defaults:{enabled:true,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function boxHeight(ctx,opts){return opts.bodyFont.size;},boxWidth:function boxWidth(ctx,opts){return opts.bodyFont.size;},multiKeyBackground:"#fff",displayColors:true,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:noop,title:function title(tooltipItems){if(tooltipItems.length>0){var item=tooltipItems[0];var labels=item.chart.data.labels;var labelCount=labels?labels.length:0;if(this&&this.options&&this.options.mode==="dataset"){return item.dataset.label||"";}else if(item.label){return item.label;}else if(labelCount>0&&item.dataIndex<labelCount){return labels[item.dataIndex];}}return"";},afterTitle:noop,beforeBody:noop,beforeLabel:noop,label:function label(tooltipItem){if(this&&this.options&&this.options.mode==="dataset"){return tooltipItem.label+": "+tooltipItem.formattedValue||tooltipItem.formattedValue;}var label=tooltipItem.dataset.label||"";if(label){label+=": ";}var value=tooltipItem.formattedValue;if(!isNullOrUndef(value)){label+=value;}return label;},labelColor:function labelColor(tooltipItem){var meta=tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);var options=meta.controller.getStyle(tooltipItem.dataIndex);return{borderColor:options.borderColor,backgroundColor:options.backgroundColor,borderWidth:options.borderWidth,borderDash:options.borderDash,borderDashOffset:options.borderDashOffset,borderRadius:0};},labelTextColor:function labelTextColor(){return this.options.bodyColor;},labelPointStyle:function labelPointStyle(tooltipItem){var meta=tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);var options=meta.controller.getStyle(tooltipItem.dataIndex);return{pointStyle:options.pointStyle,rotation:options.rotation};},afterLabel:noop,afterBody:noop,beforeFooter:noop,footer:noop,afterFooter:noop}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function _scriptable(name){return name!=="filter"&&name!=="itemSort"&&name!=="external";},_indexable:false,callbacks:{_scriptable:false,_indexable:false},animation:{_fallback:false},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var plugins=/* @__PURE__ */Object.freeze({__proto__:null,Decimation:plugin_decimation,Filler:index,Legend:plugin_legend,SubTitle:plugin_subtitle,Title:plugin_title,Tooltip:plugin_tooltip});var addIfString=function addIfString(labels,raw,index3,addedLabels){if(typeof raw==="string"){index3=labels.push(raw)-1;addedLabels.unshift({index:index3,label:raw});}else if(isNaN(raw)){index3=null;}return index3;};function findOrAddLabel(labels,raw,index3,addedLabels){var first=labels.indexOf(raw);if(first===-1){return addIfString(labels,raw,index3,addedLabels);}var last=labels.lastIndexOf(raw);return first!==last?index3:first;}var validIndex=function validIndex(index3,max3){return index3===null?null:_limitValue(Math.round(index3),0,max3);};var CategoryScale=/*#__PURE__*/function(_Scale2){_inherits(CategoryScale,_Scale2);var _super19=_createSuper(CategoryScale);function CategoryScale(cfg){var _this35;_classCallCheck(this,CategoryScale);_this35=_super19.call(this,cfg);_this35._startValue=void 0;_this35._valueRange=0;_this35._addedLabels=[];return _this35;}_createClass(CategoryScale,[{key:"init",value:function init(scaleOptions){var added=this._addedLabels;if(added.length){var labels=this.getLabels();var _iterator36=_createForOfIteratorHelper(added),_step36;try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var _step36$value=_step36.value,index3=_step36$value.index,label=_step36$value.label;if(labels[index3]===label){labels.splice(index3,1);}}}catch(err){_iterator36.e(err);}finally{_iterator36.f();}this._addedLabels=[];}_get(_getPrototypeOf(CategoryScale.prototype),"init",this).call(this,scaleOptions);}},{key:"parse",value:function parse(raw,index3){if(isNullOrUndef(raw)){return null;}var labels=this.getLabels();index3=isFinite(index3)&&labels[index3]===raw?index3:findOrAddLabel(labels,raw,valueOrDefault(index3,raw),this._addedLabels);return validIndex(index3,labels.length-1);}},{key:"determineDataLimits",value:function determineDataLimits(){var _this$getUserBounds2=this.getUserBounds(),minDefined=_this$getUserBounds2.minDefined,maxDefined=_this$getUserBounds2.maxDefined;var _this$getMinMax=this.getMinMax(true),min3=_this$getMinMax.min,max3=_this$getMinMax.max;if(this.options.bounds==="ticks"){if(!minDefined){min3=0;}if(!maxDefined){max3=this.getLabels().length-1;}}this.min=min3;this.max=max3;}},{key:"buildTicks",value:function buildTicks(){var min3=this.min;var max3=this.max;var offset=this.options.offset;var ticks=[];var labels=this.getLabels();labels=min3===0&&max3===labels.length-1?labels:labels.slice(min3,max3+1);this._valueRange=Math.max(labels.length-(offset?0:1),1);this._startValue=this.min-(offset?0.5:0);for(var value=min3;value<=max3;value++){ticks.push({value:value});}return ticks;}},{key:"getLabelForValue",value:function getLabelForValue(value){var labels=this.getLabels();if(value>=0&&value<labels.length){return labels[value];}return value;}},{key:"configure",value:function configure(){_get(_getPrototypeOf(CategoryScale.prototype),"configure",this).call(this);if(!this.isHorizontal()){this._reversePixels=!this._reversePixels;}}},{key:"getPixelForValue",value:function getPixelForValue(value){if(typeof value!=="number"){value=this.parse(value);}return value===null?NaN:this.getPixelForDecimal((value-this._startValue)/this._valueRange);}},{key:"getPixelForTick",value:function getPixelForTick(index3){var ticks=this.ticks;if(index3<0||index3>ticks.length-1){return null;}return this.getPixelForValue(ticks[index3].value);}},{key:"getValueForPixel",value:function getValueForPixel(pixel){return Math.round(this._startValue+this.getDecimalForPixel(pixel)*this._valueRange);}},{key:"getBasePixel",value:function getBasePixel(){return this.bottom;}}]);return CategoryScale;}(Scale);CategoryScale.id="category";CategoryScale.defaults={ticks:{callback:CategoryScale.prototype.getLabelForValue}};function generateTicks$1(generationOptions,dataRange){var ticks=[];var MIN_SPACING=1e-14;var bounds=generationOptions.bounds,step=generationOptions.step,min3=generationOptions.min,max3=generationOptions.max,precision=generationOptions.precision,count=generationOptions.count,maxTicks=generationOptions.maxTicks,maxDigits=generationOptions.maxDigits,includeBounds=generationOptions.includeBounds;var unit=step||1;var maxSpaces=maxTicks-1;var rmin=dataRange.min,rmax=dataRange.max;var minDefined=!isNullOrUndef(min3);var maxDefined=!isNullOrUndef(max3);var countDefined=!isNullOrUndef(count);var minSpacing=(rmax-rmin)/(maxDigits+1);var spacing=niceNum((rmax-rmin)/maxSpaces/unit)*unit;var factor,niceMin,niceMax,numSpaces;if(spacing<MIN_SPACING&&!minDefined&&!maxDefined){return[{value:rmin},{value:rmax}];}numSpaces=Math.ceil(rmax/spacing)-Math.floor(rmin/spacing);if(numSpaces>maxSpaces){spacing=niceNum(numSpaces*spacing/maxSpaces/unit)*unit;}if(!isNullOrUndef(precision)){factor=Math.pow(10,precision);spacing=Math.ceil(spacing*factor)/factor;}if(bounds==="ticks"){niceMin=Math.floor(rmin/spacing)*spacing;niceMax=Math.ceil(rmax/spacing)*spacing;}else{niceMin=rmin;niceMax=rmax;}if(minDefined&&maxDefined&&step&&almostWhole((max3-min3)/step,spacing/1e3)){numSpaces=Math.round(Math.min((max3-min3)/spacing,maxTicks));spacing=(max3-min3)/numSpaces;niceMin=min3;niceMax=max3;}else if(countDefined){niceMin=minDefined?min3:niceMin;niceMax=maxDefined?max3:niceMax;numSpaces=count-1;spacing=(niceMax-niceMin)/numSpaces;}else{numSpaces=(niceMax-niceMin)/spacing;if(almostEquals(numSpaces,Math.round(numSpaces),spacing/1e3)){numSpaces=Math.round(numSpaces);}else{numSpaces=Math.ceil(numSpaces);}}var decimalPlaces=Math.max(_decimalPlaces(spacing),_decimalPlaces(niceMin));factor=Math.pow(10,isNullOrUndef(precision)?decimalPlaces:precision);niceMin=Math.round(niceMin*factor)/factor;niceMax=Math.round(niceMax*factor)/factor;var j=0;if(minDefined){if(includeBounds&&niceMin!==min3){ticks.push({value:min3});if(niceMin<min3){j++;}if(almostEquals(Math.round((niceMin+j*spacing)*factor)/factor,min3,relativeLabelSize(min3,minSpacing,generationOptions))){j++;}}else if(niceMin<min3){j++;}}for(;j<numSpaces;++j){ticks.push({value:Math.round((niceMin+j*spacing)*factor)/factor});}if(maxDefined&&includeBounds&&niceMax!==max3){if(ticks.length&&almostEquals(ticks[ticks.length-1].value,max3,relativeLabelSize(max3,minSpacing,generationOptions))){ticks[ticks.length-1].value=max3;}else{ticks.push({value:max3});}}else if(!maxDefined||niceMax===max3){ticks.push({value:niceMax});}return ticks;}function relativeLabelSize(value,minSpacing,_ref13){var horizontal=_ref13.horizontal,minRotation=_ref13.minRotation;var rad=toRadians(minRotation);var ratio=(horizontal?Math.sin(rad):Math.cos(rad))||1e-3;var length=0.75*minSpacing*(""+value).length;return Math.min(minSpacing/ratio,length);}var LinearScaleBase=/*#__PURE__*/function(_Scale3){_inherits(LinearScaleBase,_Scale3);var _super20=_createSuper(LinearScaleBase);function LinearScaleBase(cfg){var _this36;_classCallCheck(this,LinearScaleBase);_this36=_super20.call(this,cfg);_this36.start=void 0;_this36.end=void 0;_this36._startValue=void 0;_this36._endValue=void 0;_this36._valueRange=0;return _this36;}_createClass(LinearScaleBase,[{key:"parse",value:function parse(raw,index3){if(isNullOrUndef(raw)){return null;}if((typeof raw==="number"||raw instanceof Number)&&!isFinite(+raw)){return null;}return+raw;}},{key:"handleTickRangeOptions",value:function handleTickRangeOptions(){var beginAtZero=this.options.beginAtZero;var _this$getUserBounds3=this.getUserBounds(),minDefined=_this$getUserBounds3.minDefined,maxDefined=_this$getUserBounds3.maxDefined;var min3=this.min,max3=this.max;var setMin=function setMin(v){return min3=minDefined?min3:v;};var setMax=function setMax(v){return max3=maxDefined?max3:v;};if(beginAtZero){var minSign=sign(min3);var maxSign=sign(max3);if(minSign<0&&maxSign<0){setMax(0);}else if(minSign>0&&maxSign>0){setMin(0);}}if(min3===max3){var offset=1;if(max3>=Number.MAX_SAFE_INTEGER||min3<=Number.MIN_SAFE_INTEGER){offset=Math.abs(max3*0.05);}setMax(max3+offset);if(!beginAtZero){setMin(min3-offset);}}this.min=min3;this.max=max3;}},{key:"getTickLimit",value:function getTickLimit(){var tickOpts=this.options.ticks;var maxTicksLimit=tickOpts.maxTicksLimit,stepSize=tickOpts.stepSize;var maxTicks;if(stepSize){maxTicks=Math.ceil(this.max/stepSize)-Math.floor(this.min/stepSize)+1;if(maxTicks>1e3){console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(stepSize," would result generating up to ").concat(maxTicks," ticks. Limiting to 1000."));maxTicks=1e3;}}else{maxTicks=this.computeTickLimit();maxTicksLimit=maxTicksLimit||11;}if(maxTicksLimit){maxTicks=Math.min(maxTicksLimit,maxTicks);}return maxTicks;}},{key:"computeTickLimit",value:function computeTickLimit(){return Number.POSITIVE_INFINITY;}},{key:"buildTicks",value:function buildTicks(){var opts=this.options;var tickOpts=opts.ticks;var maxTicks=this.getTickLimit();maxTicks=Math.max(2,maxTicks);var numericGeneratorOptions={maxTicks:maxTicks,bounds:opts.bounds,min:opts.min,max:opts.max,precision:tickOpts.precision,step:tickOpts.stepSize,count:tickOpts.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:tickOpts.minRotation||0,includeBounds:tickOpts.includeBounds!==false};var dataRange=this._range||this;var ticks=generateTicks$1(numericGeneratorOptions,dataRange);if(opts.bounds==="ticks"){_setMinAndMaxByKey(ticks,this,"value");}if(opts.reverse){ticks.reverse();this.start=this.max;this.end=this.min;}else{this.start=this.min;this.end=this.max;}return ticks;}},{key:"configure",value:function configure(){var ticks=this.ticks;var start2=this.min;var end=this.max;_get(_getPrototypeOf(LinearScaleBase.prototype),"configure",this).call(this);if(this.options.offset&&ticks.length){var offset=(end-start2)/Math.max(ticks.length-1,1)/2;start2-=offset;end+=offset;}this._startValue=start2;this._endValue=end;this._valueRange=end-start2;}},{key:"getLabelForValue",value:function getLabelForValue(value){return formatNumber(value,this.chart.options.locale,this.options.ticks.format);}}]);return LinearScaleBase;}(Scale);var LinearScale=/*#__PURE__*/function(_LinearScaleBase){_inherits(LinearScale,_LinearScaleBase);var _super21=_createSuper(LinearScale);function LinearScale(){_classCallCheck(this,LinearScale);return _super21.apply(this,arguments);}_createClass(LinearScale,[{key:"determineDataLimits",value:function determineDataLimits(){var _this$getMinMax2=this.getMinMax(true),min3=_this$getMinMax2.min,max3=_this$getMinMax2.max;this.min=isNumberFinite(min3)?min3:0;this.max=isNumberFinite(max3)?max3:1;this.handleTickRangeOptions();}},{key:"computeTickLimit",value:function computeTickLimit(){var horizontal=this.isHorizontal();var length=horizontal?this.width:this.height;var minRotation=toRadians(this.options.ticks.minRotation);var ratio=(horizontal?Math.sin(minRotation):Math.cos(minRotation))||1e-3;var tickFont=this._resolveTickFontOptions(0);return Math.ceil(length/Math.min(40,tickFont.lineHeight/ratio));}},{key:"getPixelForValue",value:function getPixelForValue(value){return value===null?NaN:this.getPixelForDecimal((value-this._startValue)/this._valueRange);}},{key:"getValueForPixel",value:function getValueForPixel(pixel){return this._startValue+this.getDecimalForPixel(pixel)*this._valueRange;}}]);return LinearScale;}(LinearScaleBase);LinearScale.id="linear";LinearScale.defaults={ticks:{callback:Ticks.formatters.numeric}};function isMajor(tickVal){var remain=tickVal/Math.pow(10,Math.floor(log10(tickVal)));return remain===1;}function generateTicks(generationOptions,dataRange){var endExp=Math.floor(log10(dataRange.max));var endSignificand=Math.ceil(dataRange.max/Math.pow(10,endExp));var ticks=[];var tickVal=finiteOrDefault(generationOptions.min,Math.pow(10,Math.floor(log10(dataRange.min))));var exp=Math.floor(log10(tickVal));var significand=Math.floor(tickVal/Math.pow(10,exp));var precision=exp<0?Math.pow(10,Math.abs(exp)):1;do{ticks.push({value:tickVal,major:isMajor(tickVal)});++significand;if(significand===10){significand=1;++exp;precision=exp>=0?1:precision;}tickVal=Math.round(significand*Math.pow(10,exp)*precision)/precision;}while(exp<endExp||exp===endExp&&significand<endSignificand);var lastTick=finiteOrDefault(generationOptions.max,tickVal);ticks.push({value:lastTick,major:isMajor(tickVal)});return ticks;}var LogarithmicScale=/*#__PURE__*/function(_Scale4){_inherits(LogarithmicScale,_Scale4);var _super22=_createSuper(LogarithmicScale);function LogarithmicScale(cfg){var _this37;_classCallCheck(this,LogarithmicScale);_this37=_super22.call(this,cfg);_this37.start=void 0;_this37.end=void 0;_this37._startValue=void 0;_this37._valueRange=0;return _this37;}_createClass(LogarithmicScale,[{key:"parse",value:function parse(raw,index3){var value=LinearScaleBase.prototype.parse.apply(this,[raw,index3]);if(value===0){this._zero=true;return void 0;}return isNumberFinite(value)&&value>0?value:null;}},{key:"determineDataLimits",value:function determineDataLimits(){var _this$getMinMax3=this.getMinMax(true),min3=_this$getMinMax3.min,max3=_this$getMinMax3.max;this.min=isNumberFinite(min3)?Math.max(0,min3):null;this.max=isNumberFinite(max3)?Math.max(0,max3):null;if(this.options.beginAtZero){this._zero=true;}this.handleTickRangeOptions();}},{key:"handleTickRangeOptions",value:function handleTickRangeOptions(){var _this$getUserBounds4=this.getUserBounds(),minDefined=_this$getUserBounds4.minDefined,maxDefined=_this$getUserBounds4.maxDefined;var min3=this.min;var max3=this.max;var setMin=function setMin(v){return min3=minDefined?min3:v;};var setMax=function setMax(v){return max3=maxDefined?max3:v;};var exp=function exp(v,m){return Math.pow(10,Math.floor(log10(v))+m);};if(min3===max3){if(min3<=0){setMin(1);setMax(10);}else{setMin(exp(min3,-1));setMax(exp(max3,1));}}if(min3<=0){setMin(exp(max3,-1));}if(max3<=0){setMax(exp(min3,1));}if(this._zero&&this.min!==this._suggestedMin&&min3===exp(this.min,0)){setMin(exp(min3,-1));}this.min=min3;this.max=max3;}},{key:"buildTicks",value:function buildTicks(){var opts=this.options;var generationOptions={min:this._userMin,max:this._userMax};var ticks=generateTicks(generationOptions,this);if(opts.bounds==="ticks"){_setMinAndMaxByKey(ticks,this,"value");}if(opts.reverse){ticks.reverse();this.start=this.max;this.end=this.min;}else{this.start=this.min;this.end=this.max;}return ticks;}},{key:"getLabelForValue",value:function getLabelForValue(value){return value===void 0?"0":formatNumber(value,this.chart.options.locale,this.options.ticks.format);}},{key:"configure",value:function configure(){var start2=this.min;_get(_getPrototypeOf(LogarithmicScale.prototype),"configure",this).call(this);this._startValue=log10(start2);this._valueRange=log10(this.max)-log10(start2);}},{key:"getPixelForValue",value:function getPixelForValue(value){if(value===void 0||value===0){value=this.min;}if(value===null||isNaN(value)){return NaN;}return this.getPixelForDecimal(value===this.min?0:(log10(value)-this._startValue)/this._valueRange);}},{key:"getValueForPixel",value:function getValueForPixel(pixel){var decimal=this.getDecimalForPixel(pixel);return Math.pow(10,this._startValue+decimal*this._valueRange);}}]);return LogarithmicScale;}(Scale);LogarithmicScale.id="logarithmic";LogarithmicScale.defaults={ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:true}}};function getTickBackdropHeight(opts){var tickOpts=opts.ticks;if(tickOpts.display&&opts.display){var padding=toPadding(tickOpts.backdropPadding);return valueOrDefault(tickOpts.font&&tickOpts.font.size,defaults.font.size)+padding.height;}return 0;}function measureLabelSize(ctx,font,label){label=isArray(label)?label:[label];return{w:_longestText(ctx,font.string,label),h:label.length*font.lineHeight};}function determineLimits(angle,pos,size,min3,max3){if(angle===min3||angle===max3){return{start:pos-size/2,end:pos+size/2};}else if(angle<min3||angle>max3){return{start:pos-size,end:pos};}return{start:pos,end:pos+size};}function fitWithPointLabels(scale){var orig={l:scale.left+scale._padding.left,r:scale.right-scale._padding.right,t:scale.top+scale._padding.top,b:scale.bottom-scale._padding.bottom};var limits=Object.assign({},orig);var labelSizes=[];var padding=[];var valueCount=scale._pointLabels.length;var pointLabelOpts=scale.options.pointLabels;var additionalAngle=pointLabelOpts.centerPointLabels?PI/valueCount:0;for(var i=0;i<valueCount;i++){var opts=pointLabelOpts.setContext(scale.getPointLabelContext(i));padding[i]=opts.padding;var pointPosition=scale.getPointPosition(i,scale.drawingArea+padding[i],additionalAngle);var plFont=toFont(opts.font);var textSize=measureLabelSize(scale.ctx,plFont,scale._pointLabels[i]);labelSizes[i]=textSize;var angleRadians=_normalizeAngle(scale.getIndexAngle(i)+additionalAngle);var angle=Math.round(toDegrees(angleRadians));var hLimits=determineLimits(angle,pointPosition.x,textSize.w,0,180);var vLimits=determineLimits(angle,pointPosition.y,textSize.h,90,270);updateLimits(limits,orig,angleRadians,hLimits,vLimits);}scale.setCenterPoint(orig.l-limits.l,limits.r-orig.r,orig.t-limits.t,limits.b-orig.b);scale._pointLabelItems=buildPointLabelItems(scale,labelSizes,padding);}function updateLimits(limits,orig,angle,hLimits,vLimits){var sin=Math.abs(Math.sin(angle));var cos=Math.abs(Math.cos(angle));var x=0;var y=0;if(hLimits.start<orig.l){x=(orig.l-hLimits.start)/sin;limits.l=Math.min(limits.l,orig.l-x);}else if(hLimits.end>orig.r){x=(hLimits.end-orig.r)/sin;limits.r=Math.max(limits.r,orig.r+x);}if(vLimits.start<orig.t){y=(orig.t-vLimits.start)/cos;limits.t=Math.min(limits.t,orig.t-y);}else if(vLimits.end>orig.b){y=(vLimits.end-orig.b)/cos;limits.b=Math.max(limits.b,orig.b+y);}}function buildPointLabelItems(scale,labelSizes,padding){var items=[];var valueCount=scale._pointLabels.length;var opts=scale.options;var extra=getTickBackdropHeight(opts)/2;var outerDistance=scale.drawingArea;var additionalAngle=opts.pointLabels.centerPointLabels?PI/valueCount:0;for(var i=0;i<valueCount;i++){var pointLabelPosition=scale.getPointPosition(i,outerDistance+extra+padding[i],additionalAngle);var angle=Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle+HALF_PI)));var size=labelSizes[i];var y=yForAngle(pointLabelPosition.y,size.h,angle);var textAlign=getTextAlignForAngle(angle);var left=leftForTextAlign(pointLabelPosition.x,size.w,textAlign);items.push({x:pointLabelPosition.x,y:y,textAlign:textAlign,left:left,top:y,right:left+size.w,bottom:y+size.h});}return items;}function getTextAlignForAngle(angle){if(angle===0||angle===180){return"center";}else if(angle<180){return"left";}return"right";}function leftForTextAlign(x,w,align){if(align==="right"){x-=w;}else if(align==="center"){x-=w/2;}return x;}function yForAngle(y,h,angle){if(angle===90||angle===270){y-=h/2;}else if(angle>270||angle<90){y-=h;}return y;}function drawPointLabels(scale,labelCount){var ctx=scale.ctx,pointLabels=scale.options.pointLabels;for(var i=labelCount-1;i>=0;i--){var optsAtIndex=pointLabels.setContext(scale.getPointLabelContext(i));var plFont=toFont(optsAtIndex.font);var _scale$_pointLabelIte=scale._pointLabelItems[i],x=_scale$_pointLabelIte.x,y=_scale$_pointLabelIte.y,textAlign=_scale$_pointLabelIte.textAlign,left=_scale$_pointLabelIte.left,top=_scale$_pointLabelIte.top,right=_scale$_pointLabelIte.right,bottom=_scale$_pointLabelIte.bottom;var backdropColor=optsAtIndex.backdropColor;if(!isNullOrUndef(backdropColor)){var borderRadius=toTRBLCorners(optsAtIndex.borderRadius);var padding=toPadding(optsAtIndex.backdropPadding);ctx.fillStyle=backdropColor;var backdropLeft=left-padding.left;var backdropTop=top-padding.top;var backdropWidth=right-left+padding.width;var backdropHeight=bottom-top+padding.height;if(Object.values(borderRadius).some(function(v){return v!==0;})){ctx.beginPath();addRoundedRectPath(ctx,{x:backdropLeft,y:backdropTop,w:backdropWidth,h:backdropHeight,radius:borderRadius});ctx.fill();}else{ctx.fillRect(backdropLeft,backdropTop,backdropWidth,backdropHeight);}}renderText(ctx,scale._pointLabels[i],x,y+plFont.lineHeight/2,plFont,{color:optsAtIndex.color,textAlign:textAlign,textBaseline:"middle"});}}function pathRadiusLine(scale,radius3,circular,labelCount){var ctx=scale.ctx;if(circular){ctx.arc(scale.xCenter,scale.yCenter,radius3,0,TAU);}else{var pointPosition=scale.getPointPosition(0,radius3);ctx.moveTo(pointPosition.x,pointPosition.y);for(var i=1;i<labelCount;i++){pointPosition=scale.getPointPosition(i,radius3);ctx.lineTo(pointPosition.x,pointPosition.y);}}}function drawRadiusLine(scale,gridLineOpts,radius3,labelCount){var ctx=scale.ctx;var circular=gridLineOpts.circular;var color3=gridLineOpts.color,lineWidth=gridLineOpts.lineWidth;if(!circular&&!labelCount||!color3||!lineWidth||radius3<0){return;}ctx.save();ctx.strokeStyle=color3;ctx.lineWidth=lineWidth;ctx.setLineDash(gridLineOpts.borderDash);ctx.lineDashOffset=gridLineOpts.borderDashOffset;ctx.beginPath();pathRadiusLine(scale,radius3,circular,labelCount);ctx.closePath();ctx.stroke();ctx.restore();}function createPointLabelContext(parent,index3,label){return createContext(parent,{label:label,index:index3,type:"pointLabel"});}var RadialLinearScale=/*#__PURE__*/function(_LinearScaleBase2){_inherits(RadialLinearScale,_LinearScaleBase2);var _super23=_createSuper(RadialLinearScale);function RadialLinearScale(cfg){var _this38;_classCallCheck(this,RadialLinearScale);_this38=_super23.call(this,cfg);_this38.xCenter=void 0;_this38.yCenter=void 0;_this38.drawingArea=void 0;_this38._pointLabels=[];_this38._pointLabelItems=[];return _this38;}_createClass(RadialLinearScale,[{key:"setDimensions",value:function setDimensions(){var padding=this._padding=toPadding(getTickBackdropHeight(this.options)/2);var w=this.width=this.maxWidth-padding.width;var h=this.height=this.maxHeight-padding.height;this.xCenter=Math.floor(this.left+w/2+padding.left);this.yCenter=Math.floor(this.top+h/2+padding.top);this.drawingArea=Math.floor(Math.min(w,h)/2);}},{key:"determineDataLimits",value:function determineDataLimits(){var _this$getMinMax4=this.getMinMax(false),min3=_this$getMinMax4.min,max3=_this$getMinMax4.max;this.min=isNumberFinite(min3)&&!isNaN(min3)?min3:0;this.max=isNumberFinite(max3)&&!isNaN(max3)?max3:0;this.handleTickRangeOptions();}},{key:"computeTickLimit",value:function computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options));}},{key:"generateTickLabels",value:function generateTickLabels(ticks){var _this39=this;LinearScaleBase.prototype.generateTickLabels.call(this,ticks);this._pointLabels=this.getLabels().map(function(value,index3){var label=callback(_this39.options.pointLabels.callback,[value,index3],_this39);return label||label===0?label:"";}).filter(function(v,i){return _this39.chart.getDataVisibility(i);});}},{key:"fit",value:function fit(){var opts=this.options;if(opts.display&&opts.pointLabels.display){fitWithPointLabels(this);}else{this.setCenterPoint(0,0,0,0);}}},{key:"setCenterPoint",value:function setCenterPoint(leftMovement,rightMovement,topMovement,bottomMovement){this.xCenter+=Math.floor((leftMovement-rightMovement)/2);this.yCenter+=Math.floor((topMovement-bottomMovement)/2);this.drawingArea-=Math.min(this.drawingArea/2,Math.max(leftMovement,rightMovement,topMovement,bottomMovement));}},{key:"getIndexAngle",value:function getIndexAngle(index3){var angleMultiplier=TAU/(this._pointLabels.length||1);var startAngle=this.options.startAngle||0;return _normalizeAngle(index3*angleMultiplier+toRadians(startAngle));}},{key:"getDistanceFromCenterForValue",value:function getDistanceFromCenterForValue(value){if(isNullOrUndef(value)){return NaN;}var scalingFactor=this.drawingArea/(this.max-this.min);if(this.options.reverse){return(this.max-value)*scalingFactor;}return(value-this.min)*scalingFactor;}},{key:"getValueForDistanceFromCenter",value:function getValueForDistanceFromCenter(distance){if(isNullOrUndef(distance)){return NaN;}var scaledDistance=distance/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-scaledDistance:this.min+scaledDistance;}},{key:"getPointLabelContext",value:function getPointLabelContext(index3){var pointLabels=this._pointLabels||[];if(index3>=0&&index3<pointLabels.length){var pointLabel=pointLabels[index3];return createPointLabelContext(this.getContext(),index3,pointLabel);}}},{key:"getPointPosition",value:function getPointPosition(index3,distanceFromCenter){var additionalAngle=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var angle=this.getIndexAngle(index3)-HALF_PI+additionalAngle;return{x:Math.cos(angle)*distanceFromCenter+this.xCenter,y:Math.sin(angle)*distanceFromCenter+this.yCenter,angle:angle};}},{key:"getPointPositionForValue",value:function getPointPositionForValue(index3,value){return this.getPointPosition(index3,this.getDistanceFromCenterForValue(value));}},{key:"getBasePosition",value:function getBasePosition(index3){return this.getPointPositionForValue(index3||0,this.getBaseValue());}},{key:"getPointLabelPosition",value:function getPointLabelPosition(index3){var _this$_pointLabelItem=this._pointLabelItems[index3],left=_this$_pointLabelItem.left,top=_this$_pointLabelItem.top,right=_this$_pointLabelItem.right,bottom=_this$_pointLabelItem.bottom;return{left:left,top:top,right:right,bottom:bottom};}},{key:"drawBackground",value:function drawBackground(){var _this$options15=this.options,backgroundColor4=_this$options15.backgroundColor,circular=_this$options15.grid.circular;if(backgroundColor4){var ctx=this.ctx;ctx.save();ctx.beginPath();pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),circular,this._pointLabels.length);ctx.closePath();ctx.fillStyle=backgroundColor4;ctx.fill();ctx.restore();}}},{key:"drawGrid",value:function drawGrid(){var _this40=this;var ctx=this.ctx;var opts=this.options;var angleLines=opts.angleLines,grid=opts.grid;var labelCount=this._pointLabels.length;var i,offset,position;if(opts.pointLabels.display){drawPointLabels(this,labelCount);}if(grid.display){this.ticks.forEach(function(tick,index3){if(index3!==0){offset=_this40.getDistanceFromCenterForValue(tick.value);var optsAtIndex=grid.setContext(_this40.getContext(index3-1));drawRadiusLine(_this40,optsAtIndex,offset,labelCount);}});}if(angleLines.display){ctx.save();for(i=labelCount-1;i>=0;i--){var optsAtIndex=angleLines.setContext(this.getPointLabelContext(i));var color3=optsAtIndex.color,lineWidth=optsAtIndex.lineWidth;if(!lineWidth||!color3){continue;}ctx.lineWidth=lineWidth;ctx.strokeStyle=color3;ctx.setLineDash(optsAtIndex.borderDash);ctx.lineDashOffset=optsAtIndex.borderDashOffset;offset=this.getDistanceFromCenterForValue(opts.ticks.reverse?this.min:this.max);position=this.getPointPosition(i,offset);ctx.beginPath();ctx.moveTo(this.xCenter,this.yCenter);ctx.lineTo(position.x,position.y);ctx.stroke();}ctx.restore();}}},{key:"drawBorder",value:function drawBorder(){}},{key:"drawLabels",value:function drawLabels(){var _this41=this;var ctx=this.ctx;var opts=this.options;var tickOpts=opts.ticks;if(!tickOpts.display){return;}var startAngle=this.getIndexAngle(0);var offset,width;ctx.save();ctx.translate(this.xCenter,this.yCenter);ctx.rotate(startAngle);ctx.textAlign="center";ctx.textBaseline="middle";this.ticks.forEach(function(tick,index3){if(index3===0&&!opts.reverse){return;}var optsAtIndex=tickOpts.setContext(_this41.getContext(index3));var tickFont=toFont(optsAtIndex.font);offset=_this41.getDistanceFromCenterForValue(_this41.ticks[index3].value);if(optsAtIndex.showLabelBackdrop){ctx.font=tickFont.string;width=ctx.measureText(tick.label).width;ctx.fillStyle=optsAtIndex.backdropColor;var padding=toPadding(optsAtIndex.backdropPadding);ctx.fillRect(-width/2-padding.left,-offset-tickFont.size/2-padding.top,width+padding.width,tickFont.size+padding.height);}renderText(ctx,tick.label,0,-offset,tickFont,{color:optsAtIndex.color});});ctx.restore();}},{key:"drawTitle",value:function drawTitle(){}}]);return RadialLinearScale;}(LinearScaleBase);RadialLinearScale.id="radialLinear";RadialLinearScale.defaults={display:true,animate:true,position:"chartArea",angleLines:{display:true,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:false},startAngle:0,ticks:{showLabelBackdrop:true,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:true,font:{size:10},callback:function callback(label){return label;},padding:5,centerPointLabels:false}};RadialLinearScale.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};RadialLinearScale.descriptors={angleLines:{_fallback:"grid"}};var INTERVALS={millisecond:{common:true,size:1,steps:1e3},second:{common:true,size:1e3,steps:60},minute:{common:true,size:6e4,steps:60},hour:{common:true,size:36e5,steps:24},day:{common:true,size:864e5,steps:30},week:{common:false,size:6048e5,steps:4},month:{common:true,size:2628e6,steps:12},quarter:{common:false,size:7884e6,steps:4},year:{common:true,size:3154e7}};var UNITS=Object.keys(INTERVALS);function sorter(a,b){return a-b;}function _parse(scale,input){if(isNullOrUndef(input)){return null;}var adapter=scale._adapter;var _scale$_parseOpts=scale._parseOpts,parser=_scale$_parseOpts.parser,round2=_scale$_parseOpts.round,isoWeekday=_scale$_parseOpts.isoWeekday;var value=input;if(typeof parser==="function"){value=parser(value);}if(!isNumberFinite(value)){value=typeof parser==="string"?adapter.parse(value,parser):adapter.parse(value);}if(value===null){return null;}if(round2){value=round2==="week"&&(isNumber(isoWeekday)||isoWeekday===true)?adapter.startOf(value,"isoWeek",isoWeekday):adapter.startOf(value,round2);}return+value;}function determineUnitForAutoTicks(minUnit,min3,max3,capacity){var ilen=UNITS.length;for(var i=UNITS.indexOf(minUnit);i<ilen-1;++i){var interval2=INTERVALS[UNITS[i]];var factor=interval2.steps?interval2.steps:Number.MAX_SAFE_INTEGER;if(interval2.common&&Math.ceil((max3-min3)/(factor*interval2.size))<=capacity){return UNITS[i];}}return UNITS[ilen-1];}function determineUnitForFormatting(scale,numTicks,minUnit,min3,max3){for(var i=UNITS.length-1;i>=UNITS.indexOf(minUnit);i--){var unit=UNITS[i];if(INTERVALS[unit].common&&scale._adapter.diff(max3,min3,unit)>=numTicks-1){return unit;}}return UNITS[minUnit?UNITS.indexOf(minUnit):0];}function determineMajorUnit(unit){for(var i=UNITS.indexOf(unit)+1,ilen=UNITS.length;i<ilen;++i){if(INTERVALS[UNITS[i]].common){return UNITS[i];}}}function addTick(ticks,time,timestamps){if(!timestamps){ticks[time]=true;}else if(timestamps.length){var _lookup2=_lookup(timestamps,time),lo=_lookup2.lo,hi=_lookup2.hi;var timestamp=timestamps[lo]>=time?timestamps[lo]:timestamps[hi];ticks[timestamp]=true;}}function setMajorTicks(scale,ticks,map4,majorUnit){var adapter=scale._adapter;var first=+adapter.startOf(ticks[0].value,majorUnit);var last=ticks[ticks.length-1].value;var major,index3;for(major=first;major<=last;major=+adapter.add(major,1,majorUnit)){index3=map4[major];if(index3>=0){ticks[index3].major=true;}}return ticks;}function ticksFromTimestamps(scale,values,majorUnit){var ticks=[];var map4={};var ilen=values.length;var i,value;for(i=0;i<ilen;++i){value=values[i];map4[value]=i;ticks.push({value:value,major:false});}return ilen===0||!majorUnit?ticks:setMajorTicks(scale,ticks,map4,majorUnit);}var TimeScale=/*#__PURE__*/function(_Scale5){_inherits(TimeScale,_Scale5);var _super24=_createSuper(TimeScale);function TimeScale(props){var _this42;_classCallCheck(this,TimeScale);_this42=_super24.call(this,props);_this42._cache={data:[],labels:[],all:[]};_this42._unit="day";_this42._majorUnit=void 0;_this42._offsets={};_this42._normalized=false;_this42._parseOpts=void 0;return _this42;}_createClass(TimeScale,[{key:"init",value:function init(scaleOpts,opts){var time=scaleOpts.time||(scaleOpts.time={});var adapter=this._adapter=new adapters._date(scaleOpts.adapters.date);adapter.init(opts);mergeIf(time.displayFormats,adapter.formats());this._parseOpts={parser:time.parser,round:time.round,isoWeekday:time.isoWeekday};_get(_getPrototypeOf(TimeScale.prototype),"init",this).call(this,scaleOpts);this._normalized=opts.normalized;}},{key:"parse",value:function parse(raw,index3){if(raw===void 0){return null;}return _parse(this,raw);}},{key:"beforeLayout",value:function beforeLayout(){_get(_getPrototypeOf(TimeScale.prototype),"beforeLayout",this).call(this);this._cache={data:[],labels:[],all:[]};}},{key:"determineDataLimits",value:function determineDataLimits(){var options=this.options;var adapter=this._adapter;var unit=options.time.unit||"day";var _this$getUserBounds5=this.getUserBounds(),min3=_this$getUserBounds5.min,max3=_this$getUserBounds5.max,minDefined=_this$getUserBounds5.minDefined,maxDefined=_this$getUserBounds5.maxDefined;function _applyBounds(bounds){if(!minDefined&&!isNaN(bounds.min)){min3=Math.min(min3,bounds.min);}if(!maxDefined&&!isNaN(bounds.max)){max3=Math.max(max3,bounds.max);}}if(!minDefined||!maxDefined){_applyBounds(this._getLabelBounds());if(options.bounds!=="ticks"||options.ticks.source!=="labels"){_applyBounds(this.getMinMax(false));}}min3=isNumberFinite(min3)&&!isNaN(min3)?min3:+adapter.startOf(Date.now(),unit);max3=isNumberFinite(max3)&&!isNaN(max3)?max3:+adapter.endOf(Date.now(),unit)+1;this.min=Math.min(min3,max3-1);this.max=Math.max(min3+1,max3);}},{key:"_getLabelBounds",value:function _getLabelBounds(){var arr=this.getLabelTimestamps();var min3=Number.POSITIVE_INFINITY;var max3=Number.NEGATIVE_INFINITY;if(arr.length){min3=arr[0];max3=arr[arr.length-1];}return{min:min3,max:max3};}},{key:"buildTicks",value:function buildTicks(){var options=this.options;var timeOpts=options.time;var tickOpts=options.ticks;var timestamps=tickOpts.source==="labels"?this.getLabelTimestamps():this._generate();if(options.bounds==="ticks"&&timestamps.length){this.min=this._userMin||timestamps[0];this.max=this._userMax||timestamps[timestamps.length-1];}var min3=this.min;var max3=this.max;var ticks=_filterBetween(timestamps,min3,max3);this._unit=timeOpts.unit||(tickOpts.autoSkip?determineUnitForAutoTicks(timeOpts.minUnit,this.min,this.max,this._getLabelCapacity(min3)):determineUnitForFormatting(this,ticks.length,timeOpts.minUnit,this.min,this.max));this._majorUnit=!tickOpts.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit);this.initOffsets(timestamps);if(options.reverse){ticks.reverse();}return ticksFromTimestamps(this,ticks,this._majorUnit);}},{key:"afterAutoSkip",value:function afterAutoSkip(){if(this.options.offsetAfterAutoskip){this.initOffsets(this.ticks.map(function(tick){return+tick.value;}));}}},{key:"initOffsets",value:function initOffsets(timestamps){var start2=0;var end=0;var first,last;if(this.options.offset&&timestamps.length){first=this.getDecimalForValue(timestamps[0]);if(timestamps.length===1){start2=1-first;}else{start2=(this.getDecimalForValue(timestamps[1])-first)/2;}last=this.getDecimalForValue(timestamps[timestamps.length-1]);if(timestamps.length===1){end=last;}else{end=(last-this.getDecimalForValue(timestamps[timestamps.length-2]))/2;}}var limit=timestamps.length<3?0.5:0.25;start2=_limitValue(start2,0,limit);end=_limitValue(end,0,limit);this._offsets={start:start2,end:end,factor:1/(start2+1+end)};}},{key:"_generate",value:function _generate(){var adapter=this._adapter;var min3=this.min;var max3=this.max;var options=this.options;var timeOpts=options.time;var minor=timeOpts.unit||determineUnitForAutoTicks(timeOpts.minUnit,min3,max3,this._getLabelCapacity(min3));var stepSize=valueOrDefault(timeOpts.stepSize,1);var weekday=minor==="week"?timeOpts.isoWeekday:false;var hasWeekday=isNumber(weekday)||weekday===true;var ticks={};var first=min3;var time,count;if(hasWeekday){first=+adapter.startOf(first,"isoWeek",weekday);}first=+adapter.startOf(first,hasWeekday?"day":minor);if(adapter.diff(max3,min3,minor)>1e5*stepSize){throw new Error(min3+" and "+max3+" are too far apart with stepSize of "+stepSize+" "+minor);}var timestamps=options.ticks.source==="data"&&this.getDataTimestamps();for(time=first,count=0;time<max3;time=+adapter.add(time,stepSize,minor),count++){addTick(ticks,time,timestamps);}if(time===max3||options.bounds==="ticks"||count===1){addTick(ticks,time,timestamps);}return Object.keys(ticks).sort(function(a,b){return a-b;}).map(function(x){return+x;});}},{key:"getLabelForValue",value:function getLabelForValue(value){var adapter=this._adapter;var timeOpts=this.options.time;if(timeOpts.tooltipFormat){return adapter.format(value,timeOpts.tooltipFormat);}return adapter.format(value,timeOpts.displayFormats.datetime);}},{key:"_tickFormatFunction",value:function _tickFormatFunction(time,index3,ticks,format2){var options=this.options;var formats=options.time.displayFormats;var unit=this._unit;var majorUnit=this._majorUnit;var minorFormat=unit&&formats[unit];var majorFormat=majorUnit&&formats[majorUnit];var tick=ticks[index3];var major=majorUnit&&majorFormat&&tick&&tick.major;var label=this._adapter.format(time,format2||(major?majorFormat:minorFormat));var formatter2=options.ticks.callback;return formatter2?callback(formatter2,[label,index3,ticks],this):label;}},{key:"generateTickLabels",value:function generateTickLabels(ticks){var i,ilen,tick;for(i=0,ilen=ticks.length;i<ilen;++i){tick=ticks[i];tick.label=this._tickFormatFunction(tick.value,i,ticks);}}},{key:"getDecimalForValue",value:function getDecimalForValue(value){return value===null?NaN:(value-this.min)/(this.max-this.min);}},{key:"getPixelForValue",value:function getPixelForValue(value){var offsets=this._offsets;var pos=this.getDecimalForValue(value);return this.getPixelForDecimal((offsets.start+pos)*offsets.factor);}},{key:"getValueForPixel",value:function getValueForPixel(pixel){var offsets=this._offsets;var pos=this.getDecimalForPixel(pixel)/offsets.factor-offsets.end;return this.min+pos*(this.max-this.min);}},{key:"_getLabelSize",value:function _getLabelSize(label){var ticksOpts=this.options.ticks;var tickLabelWidth=this.ctx.measureText(label).width;var angle=toRadians(this.isHorizontal()?ticksOpts.maxRotation:ticksOpts.minRotation);var cosRotation=Math.cos(angle);var sinRotation=Math.sin(angle);var tickFontSize=this._resolveTickFontOptions(0).size;return{w:tickLabelWidth*cosRotation+tickFontSize*sinRotation,h:tickLabelWidth*sinRotation+tickFontSize*cosRotation};}},{key:"_getLabelCapacity",value:function _getLabelCapacity(exampleTime){var timeOpts=this.options.time;var displayFormats=timeOpts.displayFormats;var format2=displayFormats[timeOpts.unit]||displayFormats.millisecond;var exampleLabel=this._tickFormatFunction(exampleTime,0,ticksFromTimestamps(this,[exampleTime],this._majorUnit),format2);var size=this._getLabelSize(exampleLabel);var capacity=Math.floor(this.isHorizontal()?this.width/size.w:this.height/size.h)-1;return capacity>0?capacity:1;}},{key:"getDataTimestamps",value:function getDataTimestamps(){var timestamps=this._cache.data||[];var i,ilen;if(timestamps.length){return timestamps;}var metas=this.getMatchingVisibleMetas();if(this._normalized&&metas.length){return this._cache.data=metas[0].controller.getAllParsedValues(this);}for(i=0,ilen=metas.length;i<ilen;++i){timestamps=timestamps.concat(metas[i].controller.getAllParsedValues(this));}return this._cache.data=this.normalize(timestamps);}},{key:"getLabelTimestamps",value:function getLabelTimestamps(){var timestamps=this._cache.labels||[];var i,ilen;if(timestamps.length){return timestamps;}var labels=this.getLabels();for(i=0,ilen=labels.length;i<ilen;++i){timestamps.push(_parse(this,labels[i]));}return this._cache.labels=this._normalized?timestamps:this.normalize(timestamps);}},{key:"normalize",value:function normalize(values){return _arrayUnique(values.sort(sorter));}}]);return TimeScale;}(Scale);TimeScale.id="time";TimeScale.defaults={bounds:"data",adapters:{},time:{parser:false,unit:false,round:false,isoWeekday:false,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:false}}};function interpolate2(table,val,reverse){var lo=0;var hi=table.length-1;var prevSource,nextSource,prevTarget,nextTarget;if(reverse){if(val>=table[lo].pos&&val<=table[hi].pos){var _lookupByKey2=_lookupByKey(table,"pos",val);lo=_lookupByKey2.lo;hi=_lookupByKey2.hi;}var _table$lo=table[lo];prevSource=_table$lo.pos;prevTarget=_table$lo.time;var _table$hi=table[hi];nextSource=_table$hi.pos;nextTarget=_table$hi.time;}else{if(val>=table[lo].time&&val<=table[hi].time){var _lookupByKey3=_lookupByKey(table,"time",val);lo=_lookupByKey3.lo;hi=_lookupByKey3.hi;}var _table$lo2=table[lo];prevSource=_table$lo2.time;prevTarget=_table$lo2.pos;var _table$hi2=table[hi];nextSource=_table$hi2.time;nextTarget=_table$hi2.pos;}var span=nextSource-prevSource;return span?prevTarget+(nextTarget-prevTarget)*(val-prevSource)/span:prevTarget;}var TimeSeriesScale=/*#__PURE__*/function(_TimeScale){_inherits(TimeSeriesScale,_TimeScale);var _super25=_createSuper(TimeSeriesScale);function TimeSeriesScale(props){var _this43;_classCallCheck(this,TimeSeriesScale);_this43=_super25.call(this,props);_this43._table=[];_this43._minPos=void 0;_this43._tableRange=void 0;return _this43;}_createClass(TimeSeriesScale,[{key:"initOffsets",value:function initOffsets(){var timestamps=this._getTimestampsForTable();var table=this._table=this.buildLookupTable(timestamps);this._minPos=interpolate2(table,this.min);this._tableRange=interpolate2(table,this.max)-this._minPos;_get(_getPrototypeOf(TimeSeriesScale.prototype),"initOffsets",this).call(this,timestamps);}},{key:"buildLookupTable",value:function buildLookupTable(timestamps){var min3=this.min,max3=this.max;var items=[];var table=[];var i,ilen,prev,curr,next;for(i=0,ilen=timestamps.length;i<ilen;++i){curr=timestamps[i];if(curr>=min3&&curr<=max3){items.push(curr);}}if(items.length<2){return[{time:min3,pos:0},{time:max3,pos:1}];}for(i=0,ilen=items.length;i<ilen;++i){next=items[i+1];prev=items[i-1];curr=items[i];if(Math.round((next+prev)/2)!==curr){table.push({time:curr,pos:i/(ilen-1)});}}return table;}},{key:"_getTimestampsForTable",value:function _getTimestampsForTable(){var timestamps=this._cache.all||[];if(timestamps.length){return timestamps;}var data=this.getDataTimestamps();var label=this.getLabelTimestamps();if(data.length&&label.length){timestamps=this.normalize(data.concat(label));}else{timestamps=data.length?data:label;}timestamps=this._cache.all=timestamps;return timestamps;}},{key:"getDecimalForValue",value:function getDecimalForValue(value){return(interpolate2(this._table,value)-this._minPos)/this._tableRange;}},{key:"getValueForPixel",value:function getValueForPixel(pixel){var offsets=this._offsets;var decimal=this.getDecimalForPixel(pixel)/offsets.factor-offsets.end;return interpolate2(this._table,decimal*this._tableRange+this._minPos,true);}}]);return TimeSeriesScale;}(TimeScale);TimeSeriesScale.id="timeseries";TimeSeriesScale.defaults=TimeScale.defaults;var scales=/* @__PURE__ */Object.freeze({__proto__:null,CategoryScale:CategoryScale,LinearScale:LinearScale,LogarithmicScale:LogarithmicScale,RadialLinearScale:RadialLinearScale,TimeScale:TimeScale,TimeSeriesScale:TimeSeriesScale});var registerables=[controllers,elements,plugins,scales];// node_modules/chartjs-plugin-annotation/dist/chartjs-plugin-annotation.esm.js
var interaction={modes:{/**
       * Point mode returns all elements that hit test based on the event position
       * @param {Object} state - the state of the plugin
       * @param {ChartEvent} event - the event we are find things at
       * @return {AnnotationElement[]} - elements that are found
       */point:function point(state,event){return filterElements(state,event,{intersect:true});},/**
       * Nearest mode returns the element closest to the event position
       * @param {Object} state - the state of the plugin
       * @param {ChartEvent} event - the event we are find things at
       * @param {Object} options - interaction options to use
       * @return {AnnotationElement[]} - elements that are found (only 1 element)
       */nearest:function nearest(state,event,options){return getNearestItem(state,event,options);},/**
       * x mode returns the elements that hit-test at the current x coordinate
       * @param {Object} state - the state of the plugin
       * @param {ChartEvent} event - the event we are find things at
       * @param {Object} options - interaction options to use
       * @return {AnnotationElement[]} - elements that are found
       */x:function x(state,event,options){return filterElements(state,event,{intersect:options.intersect,axis:"x"});},/**
       * y mode returns the elements that hit-test at the current y coordinate
       * @param {Object} state - the state of the plugin
       * @param {ChartEvent} event - the event we are find things at
       * @param {Object} options - interaction options to use
       * @return {AnnotationElement[]} - elements that are found
       */y:function y(state,event,options){return filterElements(state,event,{intersect:options.intersect,axis:"y"});}}};function getElements(state,event,options){var mode=interaction.modes[options.mode]||interaction.modes.nearest;return mode(state,event,options);}function inRangeByAxis(element,event,axis){if(axis!=="x"&&axis!=="y"){return element.inRange(event.x,event.y,"x",true)||element.inRange(event.x,event.y,"y",true);}return element.inRange(event.x,event.y,axis,true);}function getPointByAxis(event,center,axis){if(axis==="x"){return{x:event.x,y:center.y};}else if(axis==="y"){return{x:center.x,y:event.y};}return center;}function filterElements(state,event,options){return state.visibleElements.filter(function(element){return options.intersect?element.inRange(event.x,event.y):inRangeByAxis(element,event,options.axis);});}function getNearestItem(state,event,options){var minDistance=Number.POSITIVE_INFINITY;return filterElements(state,event,options).reduce(function(nearestItems,element){var center=element.getCenterPoint();var evenPoint=getPointByAxis(event,center,options.axis);var distance=distanceBetweenPoints(event,evenPoint);if(distance<minDistance){nearestItems=[element];minDistance=distance;}else if(distance===minDistance){nearestItems.push(element);}return nearestItems;},[]).sort(function(a,b){return a._index-b._index;}).slice(0,1);}var moveHooks=["enter","leave"];var hooks=moveHooks.concat("click");function updateListeners(chart,state,options){state.listened=false;state.moveListened=false;state._getElements=getElements;hooks.forEach(function(hook){if(typeof options[hook]==="function"){state.listened=true;state.listeners[hook]=options[hook];}else if(defined(state.listeners[hook])){delete state.listeners[hook];}});moveHooks.forEach(function(hook){if(typeof options[hook]==="function"){state.moveListened=true;}});if(!state.listened||!state.moveListened){state.annotations.forEach(function(scope){if(!state.listened&&typeof scope.click==="function"){state.listened=true;}if(!state.moveListened){moveHooks.forEach(function(hook){if(typeof scope[hook]==="function"){state.listened=true;state.moveListened=true;}});}});}}function handleEvent(state,event,options){if(state.listened){switch(event.type){case"mousemove":case"mouseout":return handleMoveEvents(state,event,options);case"click":return handleClickEvents(state,event,options);}}}function handleMoveEvents(state,event,options){if(!state.moveListened){return;}var elements2;if(event.type==="mousemove"){elements2=getElements(state,event,options.interaction);}else{elements2=[];}var previous=state.hovered;state.hovered=elements2;var context={state:state,event:event};var changed=dispatchMoveEvents(context,"leave",previous,elements2);return dispatchMoveEvents(context,"enter",elements2,previous)||changed;}function dispatchMoveEvents(_ref14,hook,elements2,checkElements){var state=_ref14.state,event=_ref14.event;var changed;var _iterator37=_createForOfIteratorHelper(elements2),_step37;try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var element=_step37.value;if(checkElements.indexOf(element)<0){changed=dispatchEvent(element.options[hook]||state.listeners[hook],element,event)||changed;}}}catch(err){_iterator37.e(err);}finally{_iterator37.f();}return changed;}function handleClickEvents(state,event,options){var listeners=state.listeners;var elements2=getElements(state,event,options.interaction);var changed;var _iterator38=_createForOfIteratorHelper(elements2),_step38;try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var element=_step38.value;changed=dispatchEvent(element.options.click||listeners.click,element,event)||changed;}}catch(err){_iterator38.e(err);}finally{_iterator38.f();}return changed;}function dispatchEvent(handler,element,event){return callback(handler,[element.$context,event])===true;}var isOlderPart=function isOlderPart(act,req){return req>act||act.length>req.length&&act.slice(0,req.length)===req;};var EPSILON2=1e-3;var clamp=function clamp(x,from2,to2){return Math.min(to2,Math.max(from2,x));};function clampAll(obj,from2,to2){for(var _i5=0,_Object$keys=Object.keys(obj);_i5<_Object$keys.length;_i5++){var key=_Object$keys[_i5];obj[key]=clamp(obj[key],from2,to2);}return obj;}function inPointRange(point,center,radius3,borderWidth3){if(!point||!center||radius3<=0){return false;}var hBorderWidth=borderWidth3/2;return Math.pow(point.x-center.x,2)+Math.pow(point.y-center.y,2)<=Math.pow(radius3+hBorderWidth,2);}function inBoxRange(point,_ref15,axis,borderWidth3){var x=_ref15.x,y=_ref15.y,x2=_ref15.x2,y2=_ref15.y2;var hBorderWidth=borderWidth3/2;var inRangeX=point.x>=x-hBorderWidth-EPSILON2&&point.x<=x2+hBorderWidth+EPSILON2;var inRangeY=point.y>=y-hBorderWidth-EPSILON2&&point.y<=y2+hBorderWidth+EPSILON2;if(axis==="x"){return inRangeX;}else if(axis==="y"){return inRangeY;}return inRangeX&&inRangeY;}function getElementCenterPoint(element,useFinalPosition){var _element$getProps2=element.getProps(["centerX","centerY"],useFinalPosition),centerX=_element$getProps2.centerX,centerY=_element$getProps2.centerY;return{x:centerX,y:centerY};}function requireVersion(pkg,min3,ver){var strict=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var parts=ver.split(".");var i=0;var _iterator39=_createForOfIteratorHelper(min3.split(".")),_step39;try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var req=_step39.value;var act=parts[i++];if(parseInt(req,10)<parseInt(act,10)){break;}if(isOlderPart(act,req)){if(strict){throw new Error("".concat(pkg," v").concat(ver," is not supported. v").concat(min3," or newer is required."));}else{return false;}}}}catch(err){_iterator39.e(err);}finally{_iterator39.f();}return true;}var isPercentString=function isPercentString(s){return typeof s==="string"&&s.endsWith("%");};var toPercent=function toPercent(s){return clamp(parseFloat(s)/100,0,1);};function getRelativePosition2(size,position){if(position==="start"){return 0;}if(position==="end"){return size;}if(isPercentString(position)){return toPercent(position)*size;}return size/2;}function getSize(size,value){if(typeof value==="number"){return value;}else if(isPercentString(value)){return toPercent(value)*size;}return size;}function calculateTextAlignment(size,options){var x=size.x,width=size.width;var textAlign=options.textAlign;if(textAlign==="center"){return x+width/2;}else if(textAlign==="end"||textAlign==="right"){return x+width;}return x;}function toPosition(value){if(isObject(value)){return{x:valueOrDefault(value.x,"center"),y:valueOrDefault(value.y,"center")};}value=valueOrDefault(value,"center");return{x:value,y:value};}function isBoundToPoint(options){return options&&(defined(options.xValue)||defined(options.yValue));}var widthCache=/* @__PURE__ */new Map();function isImageOrCanvas(content){if(content&&_typeof(content)==="object"){var type2=content.toString();return type2==="[object HTMLImageElement]"||type2==="[object HTMLCanvasElement]";}}function translate(ctx,_ref16,rotation){var x=_ref16.x,y=_ref16.y;if(rotation){ctx.translate(x,y);ctx.rotate(toRadians(rotation));ctx.translate(-x,-y);}}function setBorderStyle(ctx,options){if(options&&options.borderWidth){ctx.lineCap=options.borderCapStyle;ctx.setLineDash(options.borderDash);ctx.lineDashOffset=options.borderDashOffset;ctx.lineJoin=options.borderJoinStyle;ctx.lineWidth=options.borderWidth;ctx.strokeStyle=options.borderColor;return true;}}function setShadowStyle(ctx,options){ctx.shadowColor=options.backgroundShadowColor;ctx.shadowBlur=options.shadowBlur;ctx.shadowOffsetX=options.shadowOffsetX;ctx.shadowOffsetY=options.shadowOffsetY;}function measureLabelSize2(ctx,options){var content=options.content;if(isImageOrCanvas(content)){return{width:getSize(content.width,options.width),height:getSize(content.height,options.height)};}var font=toFont(options.font);var strokeWidth=options.textStrokeWidth;var lines=isArray(content)?content:[content];var mapKey=lines.join()+font.string+strokeWidth+(ctx._measureText?"-spriting":"");if(!widthCache.has(mapKey)){ctx.save();ctx.font=font.string;var count=lines.length;var width=0;for(var i=0;i<count;i++){var text=lines[i];width=Math.max(width,ctx.measureText(text).width+strokeWidth);}ctx.restore();var height=count*font.lineHeight+strokeWidth;widthCache.set(mapKey,{width:width,height:height});}return widthCache.get(mapKey);}function drawBox(ctx,rect,options){var x=rect.x,y=rect.y,width=rect.width,height=rect.height;ctx.save();setShadowStyle(ctx,options);var stroke=setBorderStyle(ctx,options);ctx.fillStyle=options.backgroundColor;ctx.beginPath();addRoundedRectPath(ctx,{x:x,y:y,w:width,h:height,radius:clampAll(toTRBLCorners(options.borderRadius),0,Math.min(width,height)/2)});ctx.closePath();ctx.fill();if(stroke){ctx.shadowColor=options.borderShadowColor;ctx.stroke();}ctx.restore();}function drawLabel(ctx,rect,options){var content=options.content;if(isImageOrCanvas(content)){ctx.drawImage(content,rect.x,rect.y,rect.width,rect.height);return;}var labels=isArray(content)?content:[content];var font=toFont(options.font);var lh=font.lineHeight;var x=calculateTextAlignment(rect,options);var y=rect.y+lh/2+options.textStrokeWidth/2;ctx.save();ctx.font=font.string;ctx.textBaseline="middle";ctx.textAlign=options.textAlign;if(setTextStrokeStyle(ctx,options)){labels.forEach(function(l,i){return ctx.strokeText(l,x,y+i*lh);});}ctx.fillStyle=options.color;labels.forEach(function(l,i){return ctx.fillText(l,x,y+i*lh);});ctx.restore();}function setTextStrokeStyle(ctx,options){if(options.textStrokeWidth>0){ctx.lineJoin="round";ctx.miterLimit=2;ctx.lineWidth=options.textStrokeWidth;ctx.strokeStyle=options.textStrokeColor;return true;}}function scaleValue(scale,value,fallback){value=typeof value==="number"?value:scale.parse(value);return isNumberFinite(value)?scale.getPixelForValue(value):fallback;}function retrieveScaleID(scales2,options,key){var scaleID=options[key];if(scaleID||key==="scaleID"){return scaleID;}var axis=key.charAt(0);var axes=Object.values(scales2).filter(function(scale){return scale.axis&&scale.axis===axis;});if(axes.length){return axes[0].id;}return axis;}function getDimensionByScale(scale,options){if(scale){var reverse=scale.options.reverse;var start2=scaleValue(scale,options.min,reverse?options.end:options.start);var end=scaleValue(scale,options.max,reverse?options.start:options.end);return{start:start2,end:end};}}function getChartPoint(chart,options){var chartArea=chart.chartArea,scales2=chart.scales;var xScale=scales2[retrieveScaleID(scales2,options,"xScaleID")];var yScale=scales2[retrieveScaleID(scales2,options,"yScaleID")];var x=chartArea.width/2;var y=chartArea.height/2;if(xScale){x=scaleValue(xScale,options.xValue,xScale.left+xScale.width/2);}if(yScale){y=scaleValue(yScale,options.yValue,yScale.top+yScale.height/2);}return{x:x,y:y};}function resolveBoxProperties(chart,options){var scales2=chart.scales;var xScale=scales2[retrieveScaleID(scales2,options,"xScaleID")];var yScale=scales2[retrieveScaleID(scales2,options,"yScaleID")];if(!xScale&&!yScale){return{};}var _ref17=xScale||chart.chartArea,x=_ref17.left,x2=_ref17.right;var _ref18=yScale||chart.chartArea,y=_ref18.top,y2=_ref18.bottom;var xDim=getChartDimensionByScale(xScale,{min:options.xMin,max:options.xMax,start:x,end:x2});x=xDim.start;x2=xDim.end;var yDim=getChartDimensionByScale(yScale,{min:options.yMin,max:options.yMax,start:y2,end:y});y=yDim.start;y2=yDim.end;return{x:x,y:y,x2:x2,y2:y2,width:x2-x,height:y2-y,centerX:x+(x2-x)/2,centerY:y+(y2-y)/2};}function resolvePointProperties(chart,options){if(!isBoundToPoint(options)){var box=resolveBoxProperties(chart,options);var radius3=options.radius;if(!radius3||isNaN(radius3)){radius3=Math.min(box.width,box.height)/2;options.radius=radius3;}var size=radius3*2;return{x:box.x+options.xAdjust,y:box.y+options.yAdjust,x2:box.x+size+options.xAdjust,y2:box.y+size+options.yAdjust,centerX:box.centerX+options.xAdjust,centerY:box.centerY+options.yAdjust,width:size,height:size};}return getChartCircle(chart,options);}function getChartCircle(chart,options){var point=getChartPoint(chart,options);var size=options.radius*2;return{x:point.x-options.radius+options.xAdjust,y:point.y-options.radius+options.yAdjust,x2:point.x+options.radius+options.xAdjust,y2:point.y+options.radius+options.yAdjust,centerX:point.x+options.xAdjust,centerY:point.y+options.yAdjust,width:size,height:size};}function getChartDimensionByScale(scale,options){var result=getDimensionByScale(scale,options)||options;return{start:Math.min(result.start,result.end),end:Math.max(result.start,result.end)};}function rotated(point,center,angle){var cos=Math.cos(angle);var sin=Math.sin(angle);var cx=center.x;var cy=center.y;return{x:cx+cos*(point.x-cx)-sin*(point.y-cy),y:cy+sin*(point.x-cx)+cos*(point.y-cy)};}function adjustScaleRange(chart,scale,annotations5){var range=getScaleLimits(chart.scales,scale,annotations5);var changed=changeScaleLimit(scale,range,"min","suggestedMin");changed=changeScaleLimit(scale,range,"max","suggestedMax")||changed;if(changed&&typeof scale.handleTickRangeOptions==="function"){scale.handleTickRangeOptions();}}function verifyScaleOptions(annotations5,scales2){var _iterator40=_createForOfIteratorHelper(annotations5),_step40;try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var annotation2=_step40.value;verifyScaleIDs(annotation2,scales2);}}catch(err){_iterator40.e(err);}finally{_iterator40.f();}}function changeScaleLimit(scale,range,limit,suggestedLimit){if(isNumberFinite(range[limit])&&!scaleLimitDefined(scale.options,limit,suggestedLimit)){var changed=scale[limit]!==range[limit];scale[limit]=range[limit];return changed;}}function scaleLimitDefined(scaleOptions,limit,suggestedLimit){return defined(scaleOptions[limit])||defined(scaleOptions[suggestedLimit]);}function verifyScaleIDs(annotation2,scales2){for(var _i6=0,_arr=["scaleID","xScaleID","yScaleID"];_i6<_arr.length;_i6++){var key=_arr[_i6];var scaleID=retrieveScaleID(scales2,annotation2,key);if(scaleID&&!scales2[scaleID]&&verifyProperties(annotation2,key)){console.warn("No scale found with id '".concat(scaleID,"' for annotation '").concat(annotation2.id,"'"));}}}function verifyProperties(annotation2,key){if(key==="scaleID"){return true;}var axis=key.charAt(0);for(var _i7=0,_arr2=["Min","Max","Value"];_i7<_arr2.length;_i7++){var prop=_arr2[_i7];if(defined(annotation2[axis+prop])){return true;}}return false;}function getScaleLimits(scales2,scale,annotations5){var axis=scale.axis;var scaleID=scale.id;var scaleIDOption=axis+"ScaleID";var limits={min:valueOrDefault(scale.min,Number.NEGATIVE_INFINITY),max:valueOrDefault(scale.max,Number.POSITIVE_INFINITY)};var _iterator41=_createForOfIteratorHelper(annotations5),_step41;try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var annotation2=_step41.value;if(annotation2.scaleID===scaleID){updateLimits2(annotation2,scale,["value","endValue"],limits);}else if(retrieveScaleID(scales2,annotation2,scaleIDOption)===scaleID){updateLimits2(annotation2,scale,[axis+"Min",axis+"Max",axis+"Value"],limits);}}}catch(err){_iterator41.e(err);}finally{_iterator41.f();}return limits;}function updateLimits2(annotation2,scale,props,limits){var _iterator42=_createForOfIteratorHelper(props),_step42;try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var prop=_step42.value;var raw=annotation2[prop];if(defined(raw)){var value=scale.parse(raw);limits.min=Math.min(limits.min,value);limits.max=Math.max(limits.max,value);}}}catch(err){_iterator42.e(err);}finally{_iterator42.f();}}var BoxAnnotation=/*#__PURE__*/function(_Element9){_inherits(BoxAnnotation,_Element9);var _super26=_createSuper(BoxAnnotation);function BoxAnnotation(){_classCallCheck(this,BoxAnnotation);return _super26.apply(this,arguments);}_createClass(BoxAnnotation,[{key:"inRange",value:function inRange(mouseX,mouseY,axis,useFinalPosition){var _rotated=rotated({x:mouseX,y:mouseY},this.getCenterPoint(useFinalPosition),toRadians(-this.options.rotation)),x=_rotated.x,y=_rotated.y;return inBoxRange({x:x,y:y},this.getProps(["x","y","x2","y2"],useFinalPosition),axis,this.options.borderWidth);}},{key:"getCenterPoint",value:function getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition);}},{key:"draw",value:function draw(ctx){ctx.save();translate(ctx,this.getCenterPoint(),this.options.rotation);drawBox(ctx,this,this.options);ctx.restore();}},{key:"label",get:function get(){return this.elements&&this.elements[0];}},{key:"resolveElementProperties",value:function resolveElementProperties(chart,options){var properties=resolveBoxProperties(chart,options);var x=properties.x,y=properties.y;properties.elements=[{type:"label",optionScope:"label",properties:resolveLabelElementProperties$1(chart,properties,options)}];properties.initProperties={x:x,y:y};return properties;}}]);return BoxAnnotation;}(Element);BoxAnnotation.id="boxAnnotation";BoxAnnotation.defaults={adjustScaleRange:true,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:true,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:false},color:"black",content:null,display:false,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};BoxAnnotation.defaultRoutes={borderColor:"color",backgroundColor:"color"};BoxAnnotation.descriptors={label:{_fallback:true}};function calculateX(_ref19,labelSize,position,padding){var properties=_ref19.properties,options=_ref19.options;var start2=properties.x,end=properties.x2,size=properties.width;return calculatePosition$1({start:start2,end:end,size:size,borderWidth:options.borderWidth},{position:position.x,padding:{start:padding.left,end:padding.right},adjust:options.label.xAdjust,size:labelSize.width});}function calculateY(_ref20,labelSize,position,padding){var properties=_ref20.properties,options=_ref20.options;var start2=properties.y,end=properties.y2,size=properties.height;return calculatePosition$1({start:start2,end:end,size:size,borderWidth:options.borderWidth},{position:position.y,padding:{start:padding.top,end:padding.bottom},adjust:options.label.yAdjust,size:labelSize.height});}function calculatePosition$1(boxOpts,labelOpts){var start2=boxOpts.start,end=boxOpts.end,borderWidth3=boxOpts.borderWidth;var position=labelOpts.position,_labelOpts$padding=labelOpts.padding,padStart=_labelOpts$padding.start,padEnd=_labelOpts$padding.end,adjust=labelOpts.adjust;var availableSize=end-borderWidth3-start2-padStart-padEnd-labelOpts.size;return start2+borderWidth3/2+adjust+getRelativePosition2(availableSize,position);}function resolveLabelElementProperties$1(chart,properties,options){var label=options.label;label.backgroundColor="transparent";label.callout.display=false;var position=toPosition(label.position);var padding=toPadding(label.padding);var labelSize=measureLabelSize2(chart.ctx,label);var x=calculateX({properties:properties,options:options},labelSize,position,padding);var y=calculateY({properties:properties,options:options},labelSize,position,padding);var width=labelSize.width+padding.width;var height=labelSize.height+padding.height;return{x:x,y:y,x2:x+width,y2:y+height,width:width,height:height,centerX:x+width/2,centerY:y+height/2,rotation:label.rotation};}var pointInLine=function pointInLine(p1,p2,t){return{x:p1.x+t*(p2.x-p1.x),y:p1.y+t*(p2.y-p1.y)};};var interpolateX=function interpolateX(y,p1,p2){return pointInLine(p1,p2,Math.abs((y-p1.y)/(p2.y-p1.y))).x;};var interpolateY=function interpolateY(x,p1,p2){return pointInLine(p1,p2,Math.abs((x-p1.x)/(p2.x-p1.x))).y;};var sqr=function sqr(v){return v*v;};var rangeLimit=function rangeLimit(mouseX,mouseY,_ref21,axis){var x=_ref21.x,y=_ref21.y,x2=_ref21.x2,y2=_ref21.y2;return axis==="y"?{start:Math.min(y,y2),end:Math.max(y,y2),value:mouseY}:{start:Math.min(x,x2),end:Math.max(x,x2),value:mouseX};};var LineAnnotation=/*#__PURE__*/function(_Element10){_inherits(LineAnnotation,_Element10);var _super27=_createSuper(LineAnnotation);function LineAnnotation(){_classCallCheck(this,LineAnnotation);return _super27.apply(this,arguments);}_createClass(LineAnnotation,[{key:"inRange",value:function inRange(mouseX,mouseY,axis,useFinalPosition){var hBorderWidth=this.options.borderWidth/2;if(axis!=="x"&&axis!=="y"){var epsilon=sqr(hBorderWidth);var point={mouseX:mouseX,mouseY:mouseY};return intersects(this,point,epsilon,useFinalPosition)||isOnLabel(this,point,useFinalPosition);}var limit=rangeLimit(mouseX,mouseY,this.getProps(["x","y","x2","y2"],useFinalPosition),axis);return limit.value>=limit.start-hBorderWidth&&limit.value<=limit.end+hBorderWidth||isOnLabel(this,{mouseX:mouseX,mouseY:mouseY},useFinalPosition,axis);}},{key:"getCenterPoint",value:function getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition);}},{key:"draw",value:function draw(ctx){var x=this.x,y=this.y,x2=this.x2,y2=this.y2,options=this.options;ctx.save();if(!setBorderStyle(ctx,options)){return ctx.restore();}setShadowStyle(ctx,options);var angle=Math.atan2(y2-y,x2-x);var length=Math.sqrt(Math.pow(x2-x,2)+Math.pow(y2-y,2));var _getArrowHeads=getArrowHeads(this),startOpts=_getArrowHeads.startOpts,endOpts=_getArrowHeads.endOpts,startAdjust=_getArrowHeads.startAdjust,endAdjust=_getArrowHeads.endAdjust;ctx.translate(x,y);ctx.rotate(angle);ctx.beginPath();ctx.moveTo(0+startAdjust,0);ctx.lineTo(length-endAdjust,0);ctx.shadowColor=options.borderShadowColor;ctx.stroke();drawArrowHead(ctx,0,startAdjust,startOpts);drawArrowHead(ctx,length,-endAdjust,endOpts);ctx.restore();}},{key:"label",get:function get(){return this.elements&&this.elements[0];}},{key:"resolveElementProperties",value:function resolveElementProperties(chart,options){var scales2=chart.scales,chartArea=chart.chartArea;var scale=scales2[options.scaleID];var area={x:chartArea.left,y:chartArea.top,x2:chartArea.right,y2:chartArea.bottom};var min3,max3;if(scale){min3=scaleValue(scale,options.value,NaN);max3=scaleValue(scale,options.endValue,min3);if(scale.isHorizontal()){area.x=min3;area.x2=max3;}else{area.y=min3;area.y2=max3;}}else{var xScale=scales2[retrieveScaleID(scales2,options,"xScaleID")];var yScale=scales2[retrieveScaleID(scales2,options,"yScaleID")];if(xScale){applyScaleValueToDimension(area,xScale,{min:options.xMin,max:options.xMax,start:xScale.left,end:xScale.right,startProp:"x",endProp:"x2"});}if(yScale){applyScaleValueToDimension(area,yScale,{min:options.yMin,max:options.yMax,start:yScale.bottom,end:yScale.top,startProp:"y",endProp:"y2"});}}var x=area.x,y=area.y,x2=area.x2,y2=area.y2;var inside=isLineInArea(area,chart.chartArea);var properties=inside?limitLineToArea({x:x,y:y},{x:x2,y:y2},chart.chartArea):{x:x,y:y,x2:x2,y2:y2,width:Math.abs(x2-x),height:Math.abs(y2-y)};properties.centerX=(x2+x)/2;properties.centerY=(y2+y)/2;var labelProperties=resolveLabelElementProperties(chart,properties,options.label);labelProperties._visible=inside;properties.elements=[{type:"label",optionScope:"label",properties:labelProperties}];return properties;}}]);return LineAnnotation;}(Element);LineAnnotation.id="lineAnnotation";var arrowHeadsDefaults={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};LineAnnotation.defaults={adjustScaleRange:true,arrowHeads:{display:false,end:Object.assign({},arrowHeadsDefaults),fill:false,length:12,start:Object.assign({},arrowHeadsDefaults),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,display:true,endValue:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:{display:false},color:"#fff",content:null,display:false,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};LineAnnotation.descriptors={arrowHeads:{start:{_fallback:true},end:{_fallback:true},_fallback:true}};LineAnnotation.defaultRoutes={borderColor:"color"};function isLineInArea(_ref22,_ref23){var x=_ref22.x,y=_ref22.y,x2=_ref22.x2,y2=_ref22.y2;var top=_ref23.top,right=_ref23.right,bottom=_ref23.bottom,left=_ref23.left;return!(x<left&&x2<left||x>right&&x2>right||y<top&&y2<top||y>bottom&&y2>bottom);}function limitPointToArea(_ref24,p2,_ref25){var x=_ref24.x,y=_ref24.y;var top=_ref25.top,right=_ref25.right,bottom=_ref25.bottom,left=_ref25.left;if(x<left){y=interpolateY(left,{x:x,y:y},p2);x=left;}if(x>right){y=interpolateY(right,{x:x,y:y},p2);x=right;}if(y<top){x=interpolateX(top,{x:x,y:y},p2);y=top;}if(y>bottom){x=interpolateX(bottom,{x:x,y:y},p2);y=bottom;}return{x:x,y:y};}function limitLineToArea(p1,p2,area){var _limitPointToArea=limitPointToArea(p1,p2,area),x=_limitPointToArea.x,y=_limitPointToArea.y;var _limitPointToArea2=limitPointToArea(p2,p1,area),x2=_limitPointToArea2.x,y2=_limitPointToArea2.y;return{x:x,y:y,x2:x2,y2:y2,width:Math.abs(x2-x),height:Math.abs(y2-y)};}function intersects(element,_ref26){var mouseX=_ref26.mouseX,mouseY=_ref26.mouseY;var epsilon=arguments.length>2&&arguments[2]!==undefined?arguments[2]:EPSILON2;var useFinalPosition=arguments.length>3?arguments[3]:undefined;var _element$getProps3=element.getProps(["x","y","x2","y2"],useFinalPosition),x1=_element$getProps3.x,y1=_element$getProps3.y,x2=_element$getProps3.x2,y2=_element$getProps3.y2;var dx=x2-x1;var dy=y2-y1;var lenSq=sqr(dx)+sqr(dy);var t=lenSq===0?-1:((mouseX-x1)*dx+(mouseY-y1)*dy)/lenSq;var xx,yy;if(t<0){xx=x1;yy=y1;}else if(t>1){xx=x2;yy=y2;}else{xx=x1+t*dx;yy=y1+t*dy;}return sqr(mouseX-xx)+sqr(mouseY-yy)<=epsilon;}function isOnLabel(element,_ref27,useFinalPosition,axis){var mouseX=_ref27.mouseX,mouseY=_ref27.mouseY;var label=element.label;return label.options.display&&label.inRange(mouseX,mouseY,axis,useFinalPosition);}function applyScaleValueToDimension(area,scale,options){var dim=getDimensionByScale(scale,options);area[options.startProp]=dim.start;area[options.endProp]=dim.end;}function resolveLabelElementProperties(chart,properties,options){options.callout.display=false;var borderWidth3=options.borderWidth;var padding=toPadding(options.padding);var textSize=measureLabelSize2(chart.ctx,options);var width=textSize.width+padding.width+borderWidth3;var height=textSize.height+padding.height+borderWidth3;return calculateLabelPosition(properties,options,{width:width,height:height,padding:padding},chart.chartArea);}function calculateAutoRotation(properties){var x=properties.x,y=properties.y,x2=properties.x2,y2=properties.y2;var rotation=Math.atan2(y2-y,x2-x);return rotation>PI/2?rotation-PI:rotation<PI/-2?rotation+PI:rotation;}function calculateLabelPosition(properties,label,sizes,chartArea){var width=sizes.width,height=sizes.height,padding=sizes.padding;var xAdjust=label.xAdjust,yAdjust=label.yAdjust;var p1={x:properties.x,y:properties.y};var p2={x:properties.x2,y:properties.y2};var rotation=label.rotation==="auto"?calculateAutoRotation(properties):toRadians(label.rotation);var size=rotatedSize(width,height,rotation);var t=calculateT(properties,label,{labelSize:size,padding:padding},chartArea);var pt=pointInLine(p1,p2,t);var xCoordinateSizes={size:size.w,min:chartArea.left,max:chartArea.right,padding:padding.left};var yCoordinateSizes={size:size.h,min:chartArea.top,max:chartArea.bottom,padding:padding.top};var centerX=adjustLabelCoordinate(pt.x,xCoordinateSizes)+xAdjust;var centerY=adjustLabelCoordinate(pt.y,yCoordinateSizes)+yAdjust;return{x:centerX-width/2,y:centerY-height/2,x2:centerX+width/2,y2:centerY+height/2,centerX:centerX,centerY:centerY,width:width,height:height,rotation:toDegrees(rotation)};}function rotatedSize(width,height,rotation){var cos=Math.cos(rotation);var sin=Math.sin(rotation);return{w:Math.abs(width*cos)+Math.abs(height*sin),h:Math.abs(width*sin)+Math.abs(height*cos)};}function calculateT(properties,label,sizes,chartArea){var t;var space=spaceAround(properties,chartArea);if(label.position==="start"){t=calculateTAdjust({w:properties.x2-properties.x,h:properties.y2-properties.y},sizes,label,space);}else if(label.position==="end"){t=1-calculateTAdjust({w:properties.x-properties.x2,h:properties.y-properties.y2},sizes,label,space);}else{t=getRelativePosition2(1,label.position);}return t;}function calculateTAdjust(lineSize,sizes,label,space){var labelSize=sizes.labelSize,padding=sizes.padding;var lineW=lineSize.w*space.dx;var lineH=lineSize.h*space.dy;var x=lineW>0&&(labelSize.w/2+padding.left-space.x)/lineW;var y=lineH>0&&(labelSize.h/2+padding.top-space.y)/lineH;return clamp(Math.max(x,y),0,0.25);}function spaceAround(properties,chartArea){var x=properties.x,x2=properties.x2,y=properties.y,y2=properties.y2;var t=Math.min(y,y2)-chartArea.top;var l=Math.min(x,x2)-chartArea.left;var b=chartArea.bottom-Math.max(y,y2);var r=chartArea.right-Math.max(x,x2);return{x:Math.min(l,r),y:Math.min(t,b),dx:l<=r?1:-1,dy:t<=b?1:-1};}function adjustLabelCoordinate(coordinate,labelSizes){var size=labelSizes.size,min3=labelSizes.min,max3=labelSizes.max,padding=labelSizes.padding;var halfSize=size/2;if(size>max3-min3){return(max3+min3)/2;}if(min3>=coordinate-padding-halfSize){coordinate=min3+padding+halfSize;}if(max3<=coordinate+padding+halfSize){coordinate=max3-padding-halfSize;}return coordinate;}function getArrowHeads(line){var options=line.options;var arrowStartOpts=options.arrowHeads&&options.arrowHeads.start;var arrowEndOpts=options.arrowHeads&&options.arrowHeads.end;return{startOpts:arrowStartOpts,endOpts:arrowEndOpts,startAdjust:getLineAdjust(line,arrowStartOpts),endAdjust:getLineAdjust(line,arrowEndOpts)};}function getLineAdjust(line,arrowOpts){if(!arrowOpts||!arrowOpts.display){return 0;}var length=arrowOpts.length,width=arrowOpts.width;var adjust=line.options.borderWidth/2;var p1={x:length,y:width+adjust};var p2={x:0,y:adjust};return Math.abs(interpolateX(0,p1,p2));}function drawArrowHead(ctx,offset,adjust,arrowOpts){if(!arrowOpts||!arrowOpts.display){return;}var length=arrowOpts.length,width=arrowOpts.width,fill2=arrowOpts.fill,backgroundColor4=arrowOpts.backgroundColor,borderColor4=arrowOpts.borderColor;var arrowOffsetX=Math.abs(offset-length)+adjust;ctx.beginPath();setShadowStyle(ctx,arrowOpts);setBorderStyle(ctx,arrowOpts);ctx.moveTo(arrowOffsetX,-width);ctx.lineTo(offset+adjust,0);ctx.lineTo(arrowOffsetX,width);if(fill2===true){ctx.fillStyle=backgroundColor4||borderColor4;ctx.closePath();ctx.fill();ctx.shadowColor="transparent";}else{ctx.shadowColor=arrowOpts.borderShadowColor;}ctx.stroke();}var EllipseAnnotation=/*#__PURE__*/function(_Element11){_inherits(EllipseAnnotation,_Element11);var _super28=_createSuper(EllipseAnnotation);function EllipseAnnotation(){_classCallCheck(this,EllipseAnnotation);return _super28.apply(this,arguments);}_createClass(EllipseAnnotation,[{key:"inRange",value:function inRange(mouseX,mouseY,axis,useFinalPosition){var rotation=this.options.rotation;var borderWidth3=this.options.borderWidth;if(axis!=="x"&&axis!=="y"){return pointInEllipse({x:mouseX,y:mouseY},this.getProps(["width","height","centerX","centerY"],useFinalPosition),rotation,borderWidth3);}var _this$getProps7=this.getProps(["x","y","x2","y2"],useFinalPosition),x=_this$getProps7.x,y=_this$getProps7.y,x2=_this$getProps7.x2,y2=_this$getProps7.y2;var hBorderWidth=borderWidth3/2;var limit=axis==="y"?{start:y,end:y2}:{start:x,end:x2};var rotatedPoint=rotated({x:mouseX,y:mouseY},this.getCenterPoint(useFinalPosition),toRadians(-rotation));return rotatedPoint[axis]>=limit.start-hBorderWidth-EPSILON2&&rotatedPoint[axis]<=limit.end+hBorderWidth+EPSILON2;}},{key:"getCenterPoint",value:function getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition);}},{key:"draw",value:function draw(ctx){var width=this.width,height=this.height,centerX=this.centerX,centerY=this.centerY,options=this.options;ctx.save();translate(ctx,this.getCenterPoint(),options.rotation);setShadowStyle(ctx,this.options);ctx.beginPath();ctx.fillStyle=options.backgroundColor;var stroke=setBorderStyle(ctx,options);ctx.ellipse(centerX,centerY,height/2,width/2,PI/2,0,2*PI);ctx.fill();if(stroke){ctx.shadowColor=options.borderShadowColor;ctx.stroke();}ctx.restore();}},{key:"resolveElementProperties",value:function resolveElementProperties(chart,options){return resolveBoxProperties(chart,options);}}]);return EllipseAnnotation;}(Element);EllipseAnnotation.id="ellipseAnnotation";EllipseAnnotation.defaults={adjustScaleRange:true,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:true,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};EllipseAnnotation.defaultRoutes={borderColor:"color",backgroundColor:"color"};function pointInEllipse(p,ellipse,rotation,borderWidth3){var width=ellipse.width,height=ellipse.height,centerX=ellipse.centerX,centerY=ellipse.centerY;var xRadius=width/2;var yRadius=height/2;if(xRadius<=0||yRadius<=0){return false;}var angle=toRadians(rotation||0);var hBorderWidth=borderWidth3/2||0;var cosAngle=Math.cos(angle);var sinAngle=Math.sin(angle);var a=Math.pow(cosAngle*(p.x-centerX)+sinAngle*(p.y-centerY),2);var b=Math.pow(sinAngle*(p.x-centerX)-cosAngle*(p.y-centerY),2);return a/Math.pow(xRadius+hBorderWidth,2)+b/Math.pow(yRadius+hBorderWidth,2)<=1.0001;}var positions2=["left","bottom","top","right"];var LabelAnnotation=/*#__PURE__*/function(_Element12){_inherits(LabelAnnotation,_Element12);var _super29=_createSuper(LabelAnnotation);function LabelAnnotation(){_classCallCheck(this,LabelAnnotation);return _super29.apply(this,arguments);}_createClass(LabelAnnotation,[{key:"inRange",value:function inRange(mouseX,mouseY,axis,useFinalPosition){var _rotated2=rotated({x:mouseX,y:mouseY},this.getCenterPoint(useFinalPosition),toRadians(-this.rotation)),x=_rotated2.x,y=_rotated2.y;return inBoxRange({x:x,y:y},this.getProps(["x","y","x2","y2"],useFinalPosition),axis,this.options.borderWidth);}},{key:"getCenterPoint",value:function getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition);}},{key:"draw",value:function draw(ctx){var options=this.options;var visible=!defined(this._visible)||this._visible;if(!options.display||!options.content||!visible){return;}ctx.save();translate(ctx,this.getCenterPoint(),this.rotation);drawCallout(ctx,this);drawBox(ctx,this,options);drawLabel(ctx,getLabelSize(this),options);ctx.restore();}},{key:"resolveElementProperties",value:function resolveElementProperties(chart,options){var point;if(!isBoundToPoint(options)){var _resolveBoxProperties=resolveBoxProperties(chart,options),centerX=_resolveBoxProperties.centerX,centerY=_resolveBoxProperties.centerY;point={x:centerX,y:centerY};}else{point=getChartPoint(chart,options);}var padding=toPadding(options.padding);var labelSize=measureLabelSize2(chart.ctx,options);var boxSize=measureRect(point,labelSize,options,padding);return _objectSpread(_objectSpread({pointX:point.x,pointY:point.y},boxSize),{},{rotation:options.rotation});}}]);return LabelAnnotation;}(Element);LabelAnnotation.id="labelAnnotation";LabelAnnotation.defaults={adjustScaleRange:true,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:false,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:true,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};LabelAnnotation.defaultRoutes={borderColor:"color"};function measureRect(point,size,options,padding){var width=size.width+padding.width+options.borderWidth;var height=size.height+padding.height+options.borderWidth;var position=toPosition(options.position);var x=calculatePosition(point.x,width,options.xAdjust,position.x);var y=calculatePosition(point.y,height,options.yAdjust,position.y);return{x:x,y:y,x2:x+width,y2:y+height,width:width,height:height,centerX:x+width/2,centerY:y+height/2};}function calculatePosition(start2,size){var adjust=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var position=arguments.length>3?arguments[3]:undefined;return start2-getRelativePosition2(size,position)+adjust;}function drawCallout(ctx,element){var pointX=element.pointX,pointY=element.pointY,options=element.options;var callout=options.callout;var calloutPosition=callout&&callout.display&&resolveCalloutPosition(element,callout);if(!calloutPosition||isPointInRange(element,callout,calloutPosition)){return;}ctx.save();ctx.beginPath();var stroke=setBorderStyle(ctx,callout);if(!stroke){return ctx.restore();}var _getCalloutSeparatorC=getCalloutSeparatorCoord(element,calloutPosition),separatorStart=_getCalloutSeparatorC.separatorStart,separatorEnd=_getCalloutSeparatorC.separatorEnd;var _getCalloutSideCoord=getCalloutSideCoord(element,calloutPosition,separatorStart),sideStart=_getCalloutSideCoord.sideStart,sideEnd=_getCalloutSideCoord.sideEnd;if(callout.margin>0||options.borderWidth===0){ctx.moveTo(separatorStart.x,separatorStart.y);ctx.lineTo(separatorEnd.x,separatorEnd.y);}ctx.moveTo(sideStart.x,sideStart.y);ctx.lineTo(sideEnd.x,sideEnd.y);var rotatedPoint=rotated({x:pointX,y:pointY},element.getCenterPoint(),toRadians(-element.rotation));ctx.lineTo(rotatedPoint.x,rotatedPoint.y);ctx.stroke();ctx.restore();}function getCalloutSeparatorCoord(element,position){var x=element.x,y=element.y,x2=element.x2,y2=element.y2;var adjust=getCalloutSeparatorAdjust(element,position);var separatorStart,separatorEnd;if(position==="left"||position==="right"){separatorStart={x:x+adjust,y:y};separatorEnd={x:separatorStart.x,y:y2};}else{separatorStart={x:x,y:y+adjust};separatorEnd={x:x2,y:separatorStart.y};}return{separatorStart:separatorStart,separatorEnd:separatorEnd};}function getCalloutSeparatorAdjust(element,position){var width=element.width,height=element.height,options=element.options;var adjust=options.callout.margin+options.borderWidth/2;if(position==="right"){return width+adjust;}else if(position==="bottom"){return height+adjust;}return-adjust;}function getCalloutSideCoord(element,position,separatorStart){var y=element.y,width=element.width,height=element.height,options=element.options;var start2=options.callout.start;var side=getCalloutSideAdjust(position,options.callout);var sideStart,sideEnd;if(position==="left"||position==="right"){sideStart={x:separatorStart.x,y:y+getSize(height,start2)};sideEnd={x:sideStart.x+side,y:sideStart.y};}else{sideStart={x:separatorStart.x+getSize(width,start2),y:separatorStart.y};sideEnd={x:sideStart.x,y:sideStart.y+side};}return{sideStart:sideStart,sideEnd:sideEnd};}function getCalloutSideAdjust(position,options){var side=options.side;if(position==="left"||position==="top"){return-side;}return side;}function resolveCalloutPosition(element,options){var position=options.position;if(positions2.includes(position)){return position;}return resolveCalloutAutoPosition(element,options);}function resolveCalloutAutoPosition(element,options){var x=element.x,y=element.y,x2=element.x2,y2=element.y2,width=element.width,height=element.height,pointX=element.pointX,pointY=element.pointY,centerX=element.centerX,centerY=element.centerY,rotation=element.rotation;var center={x:centerX,y:centerY};var start2=options.start;var xAdjust=getSize(width,start2);var yAdjust=getSize(height,start2);var xPoints=[x,x+xAdjust,x+xAdjust,x2];var yPoints=[y+yAdjust,y2,y,y2];var result=[];for(var index3=0;index3<4;index3++){var rotatedPoint=rotated({x:xPoints[index3],y:yPoints[index3]},center,toRadians(rotation));result.push({position:positions2[index3],distance:distanceBetweenPoints(rotatedPoint,{x:pointX,y:pointY})});}return result.sort(function(a,b){return a.distance-b.distance;})[0].position;}function getLabelSize(_ref28){var x=_ref28.x,y=_ref28.y,width=_ref28.width,height=_ref28.height,options=_ref28.options;var hBorderWidth=options.borderWidth/2;var padding=toPadding(options.padding);return{x:x+padding.left+hBorderWidth,y:y+padding.top+hBorderWidth,width:width-padding.left-padding.right-options.borderWidth,height:height-padding.top-padding.bottom-options.borderWidth};}function isPointInRange(element,callout,position){var pointX=element.pointX,pointY=element.pointY;var margin=callout.margin;var x=pointX;var y=pointY;if(position==="left"){x+=margin;}else if(position==="right"){x-=margin;}else if(position==="top"){y+=margin;}else if(position==="bottom"){y-=margin;}return element.inRange(x,y);}var PointAnnotation=/*#__PURE__*/function(_Element13){_inherits(PointAnnotation,_Element13);var _super30=_createSuper(PointAnnotation);function PointAnnotation(){_classCallCheck(this,PointAnnotation);return _super30.apply(this,arguments);}_createClass(PointAnnotation,[{key:"inRange",value:function inRange(mouseX,mouseY,axis,useFinalPosition){var _this$getProps8=this.getProps(["x","y","x2","y2","width"],useFinalPosition),x=_this$getProps8.x,y=_this$getProps8.y,x2=_this$getProps8.x2,y2=_this$getProps8.y2,width=_this$getProps8.width;var borderWidth3=this.options.borderWidth;if(axis!=="x"&&axis!=="y"){return inPointRange({x:mouseX,y:mouseY},this.getCenterPoint(useFinalPosition),width/2,borderWidth3);}var hBorderWidth=borderWidth3/2;var limit=axis==="y"?{start:y,end:y2,value:mouseY}:{start:x,end:x2,value:mouseX};return limit.value>=limit.start-hBorderWidth&&limit.value<=limit.end+hBorderWidth;}},{key:"getCenterPoint",value:function getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition);}},{key:"draw",value:function draw(ctx){var options=this.options;var borderWidth3=options.borderWidth;if(options.radius<0.1){return;}ctx.save();ctx.fillStyle=options.backgroundColor;setShadowStyle(ctx,options);var stroke=setBorderStyle(ctx,options);options.borderWidth=0;drawPoint(ctx,options,this.centerX,this.centerY);if(stroke&&!isImageOrCanvas(options.pointStyle)){ctx.shadowColor=options.borderShadowColor;ctx.stroke();}ctx.restore();options.borderWidth=borderWidth3;}},{key:"resolveElementProperties",value:function resolveElementProperties(chart,options){return resolvePointProperties(chart,options);}}]);return PointAnnotation;}(Element);PointAnnotation.id="pointAnnotation";PointAnnotation.defaults={adjustScaleRange:true,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:true,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};PointAnnotation.defaultRoutes={borderColor:"color",backgroundColor:"color"};var PolygonAnnotation=/*#__PURE__*/function(_Element14){_inherits(PolygonAnnotation,_Element14);var _super31=_createSuper(PolygonAnnotation);function PolygonAnnotation(){_classCallCheck(this,PolygonAnnotation);return _super31.apply(this,arguments);}_createClass(PolygonAnnotation,[{key:"inRange",value:function inRange(mouseX,mouseY,axis,useFinalPosition){if(axis!=="x"&&axis!=="y"){return this.options.radius>=0.1&&this.elements.length>1&&pointIsInPolygon(this.elements,mouseX,mouseY,useFinalPosition);}var rotatedPoint=rotated({x:mouseX,y:mouseY},this.getCenterPoint(useFinalPosition),toRadians(-this.options.rotation));var axisPoints=this.elements.map(function(point){return axis==="y"?point.bY:point.bX;});var start2=Math.min.apply(Math,_toConsumableArray(axisPoints));var end=Math.max.apply(Math,_toConsumableArray(axisPoints));return rotatedPoint[axis]>=start2&&rotatedPoint[axis]<=end;}},{key:"getCenterPoint",value:function getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition);}},{key:"draw",value:function draw(ctx){var elements2=this.elements,options=this.options;ctx.save();ctx.beginPath();ctx.fillStyle=options.backgroundColor;setShadowStyle(ctx,options);var stroke=setBorderStyle(ctx,options);var first=true;var _iterator43=_createForOfIteratorHelper(elements2),_step43;try{for(_iterator43.s();!(_step43=_iterator43.n()).done;){var el=_step43.value;if(first){ctx.moveTo(el.x,el.y);first=false;}else{ctx.lineTo(el.x,el.y);}}}catch(err){_iterator43.e(err);}finally{_iterator43.f();}ctx.closePath();ctx.fill();if(stroke){ctx.shadowColor=options.borderShadowColor;ctx.stroke();}ctx.restore();}},{key:"resolveElementProperties",value:function resolveElementProperties(chart,options){var properties=resolvePointProperties(chart,options);var x=properties.x,y=properties.y;var sides=options.sides,rotation=options.rotation;var elements2=[];var angle=2*PI/sides;var rad=rotation*RAD_PER_DEG;for(var i=0;i<sides;i++,rad+=angle){elements2.push(buildPointElement(properties,options,rad));}properties.elements=elements2;properties.initProperties={x:x,y:y};return properties;}}]);return PolygonAnnotation;}(Element);PolygonAnnotation.id="polygonAnnotation";PolygonAnnotation.defaults={adjustScaleRange:true,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:true,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};PolygonAnnotation.defaultRoutes={borderColor:"color",backgroundColor:"color"};function buildPointElement(_ref29,_ref30,rad){var centerX=_ref29.centerX,centerY=_ref29.centerY;var radius3=_ref30.radius,borderWidth3=_ref30.borderWidth;var halfBorder=borderWidth3/2;var sin=Math.sin(rad);var cos=Math.cos(rad);var point={x:centerX+sin*radius3,y:centerY-cos*radius3};return{type:"point",optionScope:"point",properties:{x:point.x,y:point.y,centerX:point.x,centerY:point.y,bX:centerX+sin*(radius3+halfBorder),bY:centerY-cos*(radius3+halfBorder)}};}function pointIsInPolygon(points,x,y,useFinalPosition){var isInside=false;var A=points[points.length-1].getProps(["bX","bY"],useFinalPosition);var _iterator44=_createForOfIteratorHelper(points),_step44;try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var point=_step44.value;var B=point.getProps(["bX","bY"],useFinalPosition);if(B.bY>y!==A.bY>y&&x<(A.bX-B.bX)*(y-B.bY)/(A.bY-B.bY)+B.bX){isInside=!isInside;}A=B;}}catch(err){_iterator44.e(err);}finally{_iterator44.f();}return isInside;}var annotationTypes={box:BoxAnnotation,ellipse:EllipseAnnotation,label:LabelAnnotation,line:LineAnnotation,point:PointAnnotation,polygon:PolygonAnnotation};Object.keys(annotationTypes).forEach(function(key){defaults.describe("elements.".concat(annotationTypes[key].id),{_fallback:"plugins.annotation.common"});});var directUpdater={update:Object.assign};function resolveType(){var type2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"line";if(annotationTypes[type2]){return type2;}console.warn("Unknown annotation type: '".concat(type2,"', defaulting to 'line'"));return"line";}function updateElements(chart,state,options,mode){var animations=resolveAnimations(chart,options.animations,mode);var annotations5=state.annotations;var elements2=resyncElements(state.elements,annotations5);for(var i=0;i<annotations5.length;i++){var annotationOptions=annotations5[i];var element=getOrCreateElement(elements2,i,annotationOptions.type);var resolver=annotationOptions.setContext(getContext(chart,element,annotationOptions));var properties=element.resolveElementProperties(chart,resolver);properties.skip=toSkip(properties);if("elements"in properties){updateSubElements(element,properties,resolver,animations);delete properties.elements;}if(!defined(element.x)){Object.assign(element,properties);}properties.options=resolveAnnotationOptions(resolver);animations.update(element,properties);}}function toSkip(properties){return isNaN(properties.x)||isNaN(properties.y);}function resolveAnimations(chart,animOpts,mode){if(mode==="reset"||mode==="none"||mode==="resize"){return directUpdater;}return new Animations(chart,animOpts);}function updateSubElements(mainElement,_ref31,resolver,animations){var elements2=_ref31.elements,initProperties=_ref31.initProperties;var subElements=mainElement.elements||(mainElement.elements=[]);subElements.length=elements2.length;for(var i=0;i<elements2.length;i++){var definition=elements2[i];var properties=definition.properties;var subElement=getOrCreateElement(subElements,i,definition.type,initProperties);var subResolver=resolver[definition.optionScope].override(definition);properties.options=resolveAnnotationOptions(subResolver);animations.update(subElement,properties);}}function getOrCreateElement(elements2,index3,type2,initProperties){var elementClass=annotationTypes[resolveType(type2)];var element=elements2[index3];if(!element||!(element instanceof elementClass)){element=elements2[index3]=new elementClass();if(isObject(initProperties)){Object.assign(element,initProperties);}}return element;}function resolveAnnotationOptions(resolver){var elementClass=annotationTypes[resolveType(resolver.type)];var result={};result.id=resolver.id;result.type=resolver.type;result.drawTime=resolver.drawTime;Object.assign(result,resolveObj(resolver,elementClass.defaults),resolveObj(resolver,elementClass.defaultRoutes));var _iterator45=_createForOfIteratorHelper(hooks),_step45;try{for(_iterator45.s();!(_step45=_iterator45.n()).done;){var hook=_step45.value;result[hook]=resolver[hook];}}catch(err){_iterator45.e(err);}finally{_iterator45.f();}return result;}function resolveObj(resolver,defs){var result={};for(var _i8=0,_Object$keys2=Object.keys(defs);_i8<_Object$keys2.length;_i8++){var prop=_Object$keys2[_i8];var optDefs=defs[prop];var value=resolver[prop];result[prop]=isObject(optDefs)?resolveObj(value,optDefs):value;}return result;}function getContext(chart,element,annotation2){return element.$context||(element.$context=Object.assign(Object.create(chart.getContext()),{element:element,id:annotation2.id,type:"annotation"}));}function resyncElements(elements2,annotations5){var count=annotations5.length;var start2=elements2.length;if(start2<count){var add=count-start2;elements2.splice.apply(elements2,[start2,0].concat(_toConsumableArray(new Array(add))));}else if(start2>count){elements2.splice(count,start2-count);}return elements2;}var version2="2.0.1";var chartStates=/* @__PURE__ */new Map();var annotation={id:"annotation",version:version2,beforeRegister:function beforeRegister(){requireVersion("chart.js","3.7",Chart.version);},afterRegister:function afterRegister(){Chart.register(annotationTypes);},afterUnregister:function afterUnregister(){Chart.unregister(annotationTypes);},beforeInit:function beforeInit(chart){chartStates.set(chart,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:false,moveListened:false,hovered:[]});},beforeUpdate:function beforeUpdate(chart,args,options){var state=chartStates.get(chart);var annotations5=state.annotations=[];var annotationOptions=options.annotations;if(isObject(annotationOptions)){Object.keys(annotationOptions).forEach(function(key){var value=annotationOptions[key];if(isObject(value)){value.id=key;annotations5.push(value);}});}else if(isArray(annotationOptions)){annotations5.push.apply(annotations5,_toConsumableArray(annotationOptions));}verifyScaleOptions(annotations5,chart.scales);},afterDataLimits:function afterDataLimits(chart,args){var state=chartStates.get(chart);adjustScaleRange(chart,args.scale,state.annotations.filter(function(a){return a.display&&a.adjustScaleRange;}));},afterUpdate:function afterUpdate(chart,args,options){var state=chartStates.get(chart);updateListeners(chart,state,options);updateElements(chart,state,options,args.mode);state.visibleElements=state.elements.filter(function(el){return!el.skip&&el.options.display;});},beforeDatasetsDraw:function beforeDatasetsDraw(chart,_args,options){draw2(chart,"beforeDatasetsDraw",options.clip);},afterDatasetsDraw:function afterDatasetsDraw(chart,_args,options){draw2(chart,"afterDatasetsDraw",options.clip);},beforeDraw:function beforeDraw(chart,_args,options){draw2(chart,"beforeDraw",options.clip);},afterDraw:function afterDraw(chart,_args,options){draw2(chart,"afterDraw",options.clip);},beforeEvent:function beforeEvent(chart,args,options){var state=chartStates.get(chart);if(handleEvent(state,args.event,options)){args.changed=true;}},destroy:function destroy(chart){chartStates["delete"](chart);},_getState:function _getState(chart){return chartStates.get(chart);},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"}},clip:true,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",label:{}}},descriptors:{_indexable:false,_scriptable:function _scriptable(prop){return!hooks.includes(prop);},annotations:{_allKeys:false,_fallback:function _fallback(prop,opts){return"elements.".concat(annotationTypes[resolveType(opts.type)].id);}},interaction:{_fallback:true},common:{label:{_fallback:true}}},additionalOptionScopes:[""]};function draw2(chart,caller,clip){var ctx=chart.ctx,chartArea=chart.chartArea;var _chartStates$get=chartStates.get(chart),visibleElements=_chartStates$get.visibleElements;if(clip){clipArea(ctx,chartArea);}var drawableElements=getDrawableElements(visibleElements,caller).sort(function(a,b){return a.options.z-b.options.z;});var _iterator46=_createForOfIteratorHelper(drawableElements),_step46;try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var element=_step46.value;element.draw(chart.ctx,chartArea);}}catch(err){_iterator46.e(err);}finally{_iterator46.f();}if(clip){unclipArea(ctx);}}function getDrawableElements(elements2,caller){var drawableElements=[];var _iterator47=_createForOfIteratorHelper(elements2),_step47;try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var el=_step47.value;if(el.options.drawTime===caller){drawableElements.push(el);}if(el.elements&&el.elements.length){var _iterator48=_createForOfIteratorHelper(el.elements),_step48;try{for(_iterator48.s();!(_step48=_iterator48.n()).done;){var sub=_step48.value;if(sub.options.display&&sub.options.drawTime===caller){drawableElements.push(sub);}}}catch(err){_iterator48.e(err);}finally{_iterator48.f();}}}}catch(err){_iterator47.e(err);}finally{_iterator47.f();}return drawableElements;}// node_modules/@sgratzl/boxplots/build/index.js
var HELPER=Math.sqrt(2*Math.PI);function gaussian(u){return Math.exp(-0.5*u*u)/HELPER;}function toSampleVariance(variance,len){return variance*len/(len-1);}function nrd(iqr,variance,len){var s=Math.sqrt(toSampleVariance(variance,len));if(typeof iqr==="number"){s=Math.min(s,iqr/1.34);}return 1.06*s*Math.pow(len,-0.2);}function kde(stats){var len=stats.items.length;var bandwidth=nrd(stats.iqr,stats.variance,len);return function(x){var i=0;var sum=0;for(i=0;i<len;i++){var v=stats.items[i];sum+=gaussian((x-v)/bandwidth);}return sum/bandwidth/len;};}function quantilesInterpolate(arr,length,interpolate3){var n1=length-1;var compute2=function compute2(q){var index3=q*n1;var lo=Math.floor(index3);var h=index3-lo;var a=arr[lo];return h===0?a:interpolate3(a,arr[Math.min(lo+1,n1)],h);};return{q1:compute2(0.25),median:compute2(0.5),q3:compute2(0.75)};}function quantilesType7(arr){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:arr.length;return quantilesInterpolate(arr,length,function(a,b,alpha2){return a+alpha2*(b-a);});}function quantilesLinear(arr){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:arr.length;return quantilesInterpolate(arr,length,function(i,j,fraction){return i+(j-i)*fraction;});}function quantilesLower(arr){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:arr.length;return quantilesInterpolate(arr,length,function(i){return i;});}function quantilesHigher(arr){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:arr.length;return quantilesInterpolate(arr,length,function(_,j){return j;});}function quantilesNearest(arr){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:arr.length;return quantilesInterpolate(arr,length,function(i,j,fraction){return fraction<0.5?i:j;});}function quantilesMidpoint(arr){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:arr.length;return quantilesInterpolate(arr,length,function(i,j){return(i+j)*0.5;});}function quantilesFivenum(arr){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:arr.length;var n=length;var n4=Math.floor((n+3)/2)/2;var compute2=function compute2(d){return 0.5*(arr[Math.floor(d)-1]+arr[Math.ceil(d)-1]);};return{q1:compute2(n4),median:compute2((n+1)/2),q3:compute2(n+1-n4)};}function quantilesHinges(arr){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:arr.length;return quantilesFivenum(arr,length);}function createSortedData(data){var valid=0;var length=data.length;var vs=data instanceof Float64Array?new Float64Array(length):new Float32Array(length);for(var i=0;i<length;i+=1){var v=data[i];if(v==null||Number.isNaN(v)){continue;}vs[valid]=v;valid+=1;}var missing=length-valid;if(valid===0){return{min:Number.NaN,max:Number.NaN,missing:missing,s:[]};}var validData=valid===length?vs:vs.subarray(0,valid);validData.sort(function(a,b){return a===b?0:a<b?-1:1;});var min3=validData[0];var max3=validData[validData.length-1];return{min:min3,max:max3,missing:missing,s:validData};}function withSortedData(data){if(data.length===0){return{min:Number.NaN,max:Number.NaN,missing:0,s:[]};}var min3=data[0];var max3=data[data.length-1];return{min:min3,max:max3,missing:0,s:data};}function computeWhiskers(s,valid,min3,max3,_ref32){var eps=_ref32.eps,quantiles=_ref32.quantiles,coef=_ref32.coef,whiskersMode=_ref32.whiskersMode;var same=function same(a,b){return Math.abs(a-b)<eps;};var _quantiles=quantiles(s,valid),median=_quantiles.median,q1=_quantiles.q1,q3=_quantiles.q3;var iqr=q3-q1;var isCoefValid=typeof coef==="number"&&coef>0;var whiskerLow=isCoefValid?Math.max(min3,q1-coef*iqr):min3;var whiskerHigh=isCoefValid?Math.min(max3,q3+coef*iqr):max3;var outlierLow=[];for(var i=0;i<valid;i+=1){var v=s[i];if(v>=whiskerLow||same(v,whiskerLow)){if(whiskersMode==="nearest"){whiskerLow=v;}break;}if(outlierLow.length===0||!same(outlierLow[outlierLow.length-1],v)){outlierLow.push(v);}}var reversedOutlierHigh=[];for(var _i9=valid-1;_i9>=0;_i9-=1){var _v=s[_i9];if(_v<=whiskerHigh||same(_v,whiskerHigh)){if(whiskersMode==="nearest"){whiskerHigh=_v;}break;}if((reversedOutlierHigh.length===0||!same(reversedOutlierHigh[reversedOutlierHigh.length-1],_v))&&(outlierLow.length===0||!same(outlierLow[outlierLow.length-1],_v))){reversedOutlierHigh.push(_v);}}var outlier=outlierLow.concat(reversedOutlierHigh.reverse());return{median:median,q1:q1,q3:q3,iqr:iqr,outlier:outlier,whiskerHigh:whiskerHigh,whiskerLow:whiskerLow};}function computeStats(s,valid){var mean2=0;for(var i=0;i<valid;i++){var v=s[i];mean2+=v;}mean2/=valid;var variance=0;for(var _i10=0;_i10<valid;_i10++){var _v2=s[_i10];variance+=(_v2-mean2)*(_v2-mean2);}variance/=valid;return{mean:mean2,variance:variance};}function boxplot(data){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var fullOptions=_objectSpread({coef:1.5,eps:0.01,quantiles:quantilesType7,validAndSorted:false,whiskersMode:"nearest"},options);var _ref33=fullOptions.validAndSorted?withSortedData(data):createSortedData(data),missing=_ref33.missing,s=_ref33.s,min3=_ref33.min,max3=_ref33.max;var invalid={min:Number.NaN,max:Number.NaN,mean:Number.NaN,missing:missing,iqr:Number.NaN,count:data.length,whiskerHigh:Number.NaN,whiskerLow:Number.NaN,outlier:[],median:Number.NaN,q1:Number.NaN,q3:Number.NaN,variance:0,items:[],kde:function kde(){return 0;}};var valid=data.length-missing;if(valid===0){return invalid;}var result=_objectSpread(_objectSpread({min:min3,max:max3,count:data.length,missing:missing,items:s},computeStats(s,valid)),computeWhiskers(s,valid,min3,max3,fullOptions));return _objectSpread(_objectSpread({},result),{},{kde:kde(result)});}// node_modules/@sgratzl/chartjs-chart-boxplot/build/index.js
function whiskers(boxplot3,arr){var coef=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1.5;var iqr=boxplot3.q3-boxplot3.q1;var coefValid=typeof coef==="number"&&coef>0;var whiskerMin=coefValid?Math.max(boxplot3.min,boxplot3.q1-coef*iqr):boxplot3.min;var whiskerMax=coefValid?Math.min(boxplot3.max,boxplot3.q3+coef*iqr):boxplot3.max;if(Array.isArray(arr)){for(var i=0;i<arr.length;i+=1){var v=arr[i];if(v>=whiskerMin){whiskerMin=v;break;}}for(var _i11=arr.length-1;_i11>=0;_i11-=1){var _v3=arr[_i11];if(_v3<=whiskerMax){whiskerMax=_v3;break;}}}return{whiskerMin:whiskerMin,whiskerMax:whiskerMax};}var defaultStatsOptions={coef:1.5,quantiles:7};function determineQuantiles(q){if(typeof q==="function"){return q;}var lookup={hinges:quantilesHinges,fivenum:quantilesFivenum,7:quantilesType7,quantiles:quantilesType7,linear:quantilesLinear,lower:quantilesLower,higher:quantilesHigher,nearest:quantilesNearest,midpoint:quantilesMidpoint};return lookup[q]||quantilesType7;}function determineStatsOptions(options){var coef=options==null||typeof options.coef!=="number"?defaultStatsOptions.coef:options.coef;var q=options==null||options.quantiles==null?quantilesType7:options.quantiles;var quantiles=determineQuantiles(q);return{coef:coef,quantiles:quantiles};}function boxplotStats(arr,options){var r=boxplot(arr,determineStatsOptions(options));return{items:Array.from(r.items),outliers:r.outlier,whiskerMax:r.whiskerHigh,whiskerMin:r.whiskerLow,max:r.max,median:r.median,mean:r.mean,min:r.min,q1:r.q1,q3:r.q3};}function computeSamples(min3,max3,points){var range=max3-min3;var samples=[];var inc=range/points;for(var v=min3;v<=max3&&inc>0;v+=inc){samples.push(v);}if(samples[samples.length-1]!==max3){samples.push(max3);}return samples;}function violinStats(arr,options){if(arr.length===0){return void 0;}var stats=boxplot(arr,determineStatsOptions(options));var samples=computeSamples(stats.min,stats.max,options.points);var coords=samples.map(function(v){return{v:v,estimate:stats.kde(v)};});var maxEstimate=coords.reduce(function(a,d){return Math.max(a,d.estimate);},Number.NEGATIVE_INFINITY);return{max:stats.max,min:stats.min,mean:stats.mean,median:stats.median,q1:stats.q1,q3:stats.q3,items:Array.from(stats.items),coords:coords,outliers:[],maxEstimate:maxEstimate};}function asBoxPlotStats(value,options){if(!value){return void 0;}if(typeof value.median==="number"&&typeof value.q1==="number"&&typeof value.q3==="number"){if(typeof value.whiskerMin==="undefined"){var _determineStatsOption=determineStatsOptions(options),coef=_determineStatsOption.coef;var _whiskers=whiskers(value,Array.isArray(value.items)?value.items.slice().sort(function(a,b){return a-b;}):null,coef),whiskerMin=_whiskers.whiskerMin,whiskerMax=_whiskers.whiskerMax;value.whiskerMin=whiskerMin;value.whiskerMax=whiskerMax;}return value;}if(!Array.isArray(value)){return void 0;}return boxplotStats(value,options);}function asViolinStats(value,options){if(!value){return void 0;}if(typeof value.median==="number"&&Array.isArray(value.coords)){return value;}if(!Array.isArray(value)){return void 0;}return violinStats(value,options);}function rnd(){var seed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Date.now();var s=seed;return function(){s=(s*9301+49297)%233280;return s/233280;};}var baseDefaults$1={borderWidth:1,outlierStyle:"circle",outlierRadius:2,outlierBorderWidth:1,itemStyle:"circle",itemRadius:0,itemBorderWidth:0,meanStyle:"circle",meanRadius:3,meanBorderWidth:1,hitPadding:2,outlierHitRadius:4};var baseRoutes={outlierBackgroundColor:"backgroundColor",outlierBorderColor:"borderColor",itemBackgroundColor:"backgroundColor",itemBorderColor:"borderColor",meanBackgroundColor:"backgroundColor",meanBorderColor:"borderColor"};var baseOptionKeys=function(){return Object.keys(baseDefaults$1).concat(Object.keys(baseRoutes));}();var StatsBase$1=/*#__PURE__*/function(_Element15){_inherits(StatsBase$1,_Element15);var _super32=_createSuper(StatsBase$1);function StatsBase$1(){_classCallCheck(this,StatsBase$1);return _super32.apply(this,arguments);}_createClass(StatsBase$1,[{key:"isVertical",value:function isVertical(){return!this.horizontal;}},{key:"_drawItems",value:function _drawItems(ctx){var vert=this.isVertical();var props=this.getProps(["x","y","items","width","height","outliers"]);var options=this.options;if(options.itemRadius<=0||!props.items||props.items.length<=0){return;}ctx.save();ctx.strokeStyle=options.itemBorderColor;ctx.fillStyle=options.itemBackgroundColor;ctx.lineWidth=options.itemBorderWidth;var random=rnd(this._datasetIndex*1e3+this._index);var pointOptions={pointStyle:options.itemStyle,radius:options.itemRadius,borderWidth:options.itemBorderWidth};var outliers=new Set(props.outliers||[]);if(vert){props.items.forEach(function(v){if(!outliers.has(v)){drawPoint(ctx,pointOptions,props.x-props.width/2+random()*props.width,v);}});}else{props.items.forEach(function(v){if(!outliers.has(v)){drawPoint(ctx,pointOptions,v,props.y-props.height/2+random()*props.height);}});}ctx.restore();}},{key:"_drawOutliers",value:function _drawOutliers(ctx){var vert=this.isVertical();var props=this.getProps(["x","y","outliers"]);var options=this.options;if(options.outlierRadius<=0||!props.outliers||props.outliers.length===0){return;}ctx.save();ctx.fillStyle=options.outlierBackgroundColor;ctx.strokeStyle=options.outlierBorderColor;ctx.lineWidth=options.outlierBorderWidth;var pointOptions={pointStyle:options.outlierStyle,radius:options.outlierRadius,borderWidth:options.outlierBorderWidth};if(vert){props.outliers.forEach(function(v){drawPoint(ctx,pointOptions,props.x,v);});}else{props.outliers.forEach(function(v){drawPoint(ctx,pointOptions,v,props.y);});}ctx.restore();}},{key:"_drawMeanDot",value:function _drawMeanDot(ctx){var vert=this.isVertical();var props=this.getProps(["x","y","mean"]);var options=this.options;if(options.meanRadius<=0||props.mean==null||Number.isNaN(props.mean)){return;}ctx.save();ctx.fillStyle=options.meanBackgroundColor;ctx.strokeStyle=options.meanBorderColor;ctx.lineWidth=options.meanBorderWidth;var pointOptions={pointStyle:options.meanStyle,radius:options.meanRadius,borderWidth:options.meanBorderWidth};if(vert){drawPoint(ctx,pointOptions,props.x,props.mean);}else{drawPoint(ctx,pointOptions,props.mean,props.y);}ctx.restore();}},{key:"_getBounds",value:function _getBounds(_useFinalPosition){return{left:0,top:0,right:0,bottom:0};}},{key:"_getHitBounds",value:function _getHitBounds(useFinalPosition){var padding=this.options.hitPadding;var b=this._getBounds(useFinalPosition);return{left:b.left-padding,top:b.top-padding,right:b.right+padding,bottom:b.bottom+padding};}},{key:"inRange",value:function inRange(mouseX,mouseY,useFinalPosition){if(Number.isNaN(this.x)&&Number.isNaN(this.y)){return false;}return this._boxInRange(mouseX,mouseY,useFinalPosition)||this._outlierIndexInRange(mouseX,mouseY,useFinalPosition)>=0;}},{key:"inXRange",value:function inXRange(mouseX,useFinalPosition){var bounds=this._getHitBounds(useFinalPosition);return mouseX>=bounds.left&&mouseX<=bounds.right;}},{key:"inYRange",value:function inYRange(mouseY,useFinalPosition){var bounds=this._getHitBounds(useFinalPosition);return mouseY>=bounds.top&&mouseY<=bounds.bottom;}},{key:"_outlierIndexInRange",value:function _outlierIndexInRange(mouseX,mouseY,useFinalPosition){var props=this.getProps(["x","y"],useFinalPosition);var hitRadius=this.options.outlierHitRadius;var outliers=this._getOutliers(useFinalPosition);var vertical=this.isVertical();if(vertical&&Math.abs(mouseX-props.x)>hitRadius||!vertical&&Math.abs(mouseY-props.y)>hitRadius){return-1;}var toCompare=vertical?mouseY:mouseX;for(var i=0;i<outliers.length;i+=1){if(Math.abs(outliers[i]-toCompare)<=hitRadius){return i;}}return-1;}},{key:"_boxInRange",value:function _boxInRange(mouseX,mouseY,useFinalPosition){var bounds=this._getHitBounds(useFinalPosition);return mouseX>=bounds.left&&mouseX<=bounds.right&&mouseY>=bounds.top&&mouseY<=bounds.bottom;}},{key:"getCenterPoint",value:function getCenterPoint(useFinalPosition){var props=this.getProps(["x","y"],useFinalPosition);return{x:props.x,y:props.y};}},{key:"_getOutliers",value:function _getOutliers(useFinalPosition){var props=this.getProps(["outliers"],useFinalPosition);return props.outliers||[];}},{key:"tooltipPosition",value:function tooltipPosition(eventPosition,tooltip5){if(!eventPosition||typeof eventPosition==="boolean"){return this.getCenterPoint();}if(tooltip5){delete tooltip5._tooltipOutlier;}var props=this.getProps(["x","y"]);var index3=this._outlierIndexInRange(eventPosition.x,eventPosition.y);if(index3<0||!tooltip5){return this.getCenterPoint();}tooltip5._tooltipOutlier={index:index3,datasetIndex:this._datasetIndex};if(this.isVertical()){return{x:props.x,y:this._getOutliers()[index3]};}return{x:this._getOutliers()[index3],y:props.y};}}]);return StatsBase$1;}(Element);var boxOptionsKeys=baseOptionKeys.concat(["medianColor","lowerBackgroundColor"]);var BoxAndWiskers=/*#__PURE__*/function(_StatsBase$){_inherits(BoxAndWiskers,_StatsBase$);var _super33=_createSuper(BoxAndWiskers);function BoxAndWiskers(){_classCallCheck(this,BoxAndWiskers);return _super33.apply(this,arguments);}_createClass(BoxAndWiskers,[{key:"draw",value:function draw(ctx){ctx.save();ctx.fillStyle=this.options.backgroundColor;ctx.strokeStyle=this.options.borderColor;ctx.lineWidth=this.options.borderWidth;this._drawBoxPlot(ctx);this._drawOutliers(ctx);this._drawMeanDot(ctx);ctx.restore();this._drawItems(ctx);}},{key:"_drawBoxPlot",value:function _drawBoxPlot(ctx){if(this.isVertical()){this._drawBoxPlotVertical(ctx);}else{this._drawBoxPlotHorizontal(ctx);}}},{key:"_drawBoxPlotVertical",value:function _drawBoxPlotVertical(ctx){var options=this.options;var props=this.getProps(["x","width","q1","q3","median","whiskerMin","whiskerMax"]);var x=props.x;var width=props.width;var x0=x-width/2;if(props.q3>props.q1){ctx.fillRect(x0,props.q1,width,props.q3-props.q1);}else{ctx.fillRect(x0,props.q3,width,props.q1-props.q3);}ctx.save();if(options.medianColor&&options.medianColor!=="transparent"&&options.medianColor!=="#0000"){ctx.strokeStyle=options.medianColor;}ctx.beginPath();ctx.moveTo(x0,props.median);ctx.lineTo(x0+width,props.median);ctx.closePath();ctx.stroke();ctx.restore();ctx.save();if(options.lowerBackgroundColor&&options.lowerBackgroundColor!=="transparent"&&options.lowerBackgroundColor!=="#0000"){ctx.fillStyle=options.lowerBackgroundColor;if(props.q3>props.q1){ctx.fillRect(x0,props.median,width,props.q3-props.median);}else{ctx.fillRect(x0,props.median,width,props.q1-props.median);}}ctx.restore();if(props.q3>props.q1){ctx.strokeRect(x0,props.q1,width,props.q3-props.q1);}else{ctx.strokeRect(x0,props.q3,width,props.q1-props.q3);}ctx.beginPath();ctx.moveTo(x0,props.whiskerMin);ctx.lineTo(x0+width,props.whiskerMin);ctx.moveTo(x,props.whiskerMin);ctx.lineTo(x,props.q1);ctx.moveTo(x0,props.whiskerMax);ctx.lineTo(x0+width,props.whiskerMax);ctx.moveTo(x,props.whiskerMax);ctx.lineTo(x,props.q3);ctx.closePath();ctx.stroke();}},{key:"_drawBoxPlotHorizontal",value:function _drawBoxPlotHorizontal(ctx){var options=this.options;var props=this.getProps(["y","height","q1","q3","median","whiskerMin","whiskerMax"]);var y=props.y;var height=props.height;var y0=y-height/2;if(props.q3>props.q1){ctx.fillRect(props.q1,y0,props.q3-props.q1,height);}else{ctx.fillRect(props.q3,y0,props.q1-props.q3,height);}ctx.save();if(options.medianColor&&options.medianColor!=="transparent"){ctx.strokeStyle=options.medianColor;}ctx.beginPath();ctx.moveTo(props.median,y0);ctx.lineTo(props.median,y0+height);ctx.closePath();ctx.stroke();ctx.restore();ctx.save();if(options.lowerBackgroundColor&&options.lowerBackgroundColor!=="transparent"){ctx.fillStyle=options.lowerBackgroundColor;if(props.q3>props.q1){ctx.fillRect(props.median,y0,props.q3-props.median,height);}else{ctx.fillRect(props.median,y0,props.q1-props.median,height);}}ctx.restore();if(props.q3>props.q1){ctx.strokeRect(props.q1,y0,props.q3-props.q1,height);}else{ctx.strokeRect(props.q3,y0,props.q1-props.q3,height);}ctx.beginPath();ctx.moveTo(props.whiskerMin,y0);ctx.lineTo(props.whiskerMin,y0+height);ctx.moveTo(props.whiskerMin,y);ctx.lineTo(props.q1,y);ctx.moveTo(props.whiskerMax,y0);ctx.lineTo(props.whiskerMax,y0+height);ctx.moveTo(props.whiskerMax,y);ctx.lineTo(props.q3,y);ctx.closePath();ctx.stroke();}},{key:"_getBounds",value:function _getBounds(useFinalPosition){var vert=this.isVertical();if(this.x==null){return{left:0,top:0,right:0,bottom:0};}if(vert){var _this$getProps9=this.getProps(["x","width","whiskerMin","whiskerMax"],useFinalPosition),x=_this$getProps9.x,width=_this$getProps9.width,whiskerMax2=_this$getProps9.whiskerMax,whiskerMin2=_this$getProps9.whiskerMin;var x0=x-width/2;return{left:x0,top:whiskerMax2,right:x0+width,bottom:whiskerMin2};}var _this$getProps10=this.getProps(["y","height","whiskerMin","whiskerMax"],useFinalPosition),y=_this$getProps10.y,height=_this$getProps10.height,whiskerMax=_this$getProps10.whiskerMax,whiskerMin=_this$getProps10.whiskerMin;var y0=y-height/2;return{left:whiskerMin,top:y0,right:whiskerMax,bottom:y0+height};}}]);return BoxAndWiskers;}(StatsBase$1);BoxAndWiskers.id="boxandwhiskers";BoxAndWiskers.defaults=_objectSpread(_objectSpread(_objectSpread({},BarElement.defaults),baseDefaults$1),{},{medianColor:"transparent",lowerBackgroundColor:"transparent"});BoxAndWiskers.defaultRoutes=_objectSpread(_objectSpread({},BarElement.defaultRoutes),baseRoutes);var Violin=/*#__PURE__*/function(_StatsBase$2){_inherits(Violin,_StatsBase$2);var _super34=_createSuper(Violin);function Violin(){_classCallCheck(this,Violin);return _super34.apply(this,arguments);}_createClass(Violin,[{key:"draw",value:function draw(ctx){ctx.save();ctx.fillStyle=this.options.backgroundColor;ctx.strokeStyle=this.options.borderColor;ctx.lineWidth=this.options.borderWidth;var props=this.getProps(["x","y","median","width","height","min","max","coords","maxEstimate"]);if(props.median!=null){drawPoint(ctx,{pointStyle:"rectRot",radius:5,borderWidth:this.options.borderWidth},props.x,props.y);}if(props.coords&&props.coords.length>0){this._drawCoords(ctx,props);}this._drawOutliers(ctx);this._drawMeanDot(ctx);ctx.restore();this._drawItems(ctx);}},{key:"_drawCoords",value:function _drawCoords(ctx,props){var maxEstimate;if(props.maxEstimate==null){maxEstimate=props.coords.reduce(function(a,d){return Math.max(a,d.estimate);},Number.NEGATIVE_INFINITY);}else{maxEstimate=props.maxEstimate;}if(this.isVertical()){var x=props.x,width=props.width;var factor=width/2/maxEstimate;ctx.moveTo(x,props.min);props.coords.forEach(function(c){ctx.lineTo(x-c.estimate*factor,c.v);});ctx.lineTo(x,props.max);ctx.moveTo(x,props.min);props.coords.forEach(function(c){ctx.lineTo(x+c.estimate*factor,c.v);});ctx.lineTo(x,props.max);}else{var y=props.y,height=props.height;var _factor=height/2/maxEstimate;ctx.moveTo(props.min,y);props.coords.forEach(function(c){ctx.lineTo(c.v,y-c.estimate*_factor);});ctx.lineTo(props.max,y);ctx.moveTo(props.min,y);props.coords.forEach(function(c){ctx.lineTo(c.v,y+c.estimate*_factor);});ctx.lineTo(props.max,y);}ctx.closePath();ctx.stroke();ctx.fill();}},{key:"_getBounds",value:function _getBounds(useFinalPosition){if(this.isVertical()){var _this$getProps11=this.getProps(["x","width","min","max"],useFinalPosition),x=_this$getProps11.x,width=_this$getProps11.width,min4=_this$getProps11.min,max4=_this$getProps11.max;var x0=x-width/2;return{left:x0,top:max4,right:x0+width,bottom:min4};}var _this$getProps12=this.getProps(["y","height","min","max"],useFinalPosition),y=_this$getProps12.y,height=_this$getProps12.height,min3=_this$getProps12.min,max3=_this$getProps12.max;var y0=y-height/2;return{left:min3,top:y0,right:max3,bottom:y0+height};}}]);return Violin;}(StatsBase$1);Violin.id="violin";Violin.defaults=_objectSpread(_objectSpread({},BarElement.defaults),baseDefaults$1);Violin.defaultRoutes=_objectSpread(_objectSpread({},BarElement.defaultRoutes),baseRoutes);var interpolators2={number:function number(from2,to2,factor){if(from2===to2){return to2;}if(from2==null){return to2;}if(to2==null){return from2;}return from2+(to2-from2)*factor;}};function interpolateNumberArray(from2,to2,factor){if(typeof from2==="number"&&typeof to2==="number"){return interpolators2.number(from2,to2,factor);}if(Array.isArray(from2)&&Array.isArray(to2)){return to2.map(function(t,i){return interpolators2.number(from2[i],t,factor);});}return to2;}function interpolateKdeCoords(from2,to2,factor){if(Array.isArray(from2)&&Array.isArray(to2)){return to2.map(function(t,i){return{v:interpolators2.number(from2[i]?from2[i].v:null,t.v,factor),estimate:interpolators2.number(from2[i]?from2[i].estimate:null,t.estimate,factor)};});}return to2;}function patchInHoveredOutlier(item){var value=item.formattedValue;var that=this;if(value&&that._tooltipOutlier!=null&&item.datasetIndex===that._tooltipOutlier.datasetIndex){value.hoveredOutlierIndex=that._tooltipOutlier.index;}}function outlierPositioner(items,eventPosition){if(!items.length){return false;}var x=0;var y=0;var count=0;for(var i=0;i<items.length;i+=1){var el=items[i].element;if(el&&el.hasValue()){var pos=el.tooltipPosition(eventPosition,this);x+=pos.x;y+=pos.y;count+=1;}}return{x:x/count,y:y/count};}outlierPositioner.id="average";outlierPositioner.register=function(){plugin_tooltip.positioners.average=outlierPositioner;return outlierPositioner;};function baseDefaults(keys){var colorKeys=["borderColor","backgroundColor"].concat(keys.filter(function(c){return c.endsWith("Color");}));return _objectSpread({animations:{numberArray:{fn:interpolateNumberArray,properties:["outliers","items"]},colors:{type:"color",properties:colorKeys}},transitions:{show:{animations:{colors:{type:"color",properties:colorKeys,from:"transparent"}}},hide:{animations:{colors:{type:"color",properties:colorKeys,to:"transparent"}}}},minStats:"min",maxStats:"max"},defaultStatsOptions);}function defaultOverrides(){return{plugins:{tooltip:{position:outlierPositioner.register().id,callbacks:{beforeLabel:patchInHoveredOutlier}}}};}var StatsBase=/*#__PURE__*/function(_BarController){_inherits(StatsBase,_BarController);var _super35=_createSuper(StatsBase);function StatsBase(){_classCallCheck(this,StatsBase);return _super35.apply(this,arguments);}_createClass(StatsBase,[{key:"_transformStats",value:function _transformStats(target,source,mapper){for(var _i12=0,_arr3=["min","max","median","q3","q1","mean"];_i12<_arr3.length;_i12++){var key=_arr3[_i12];var v=source[key];if(typeof v==="number"){target[key]=mapper(v);}}for(var _i13=0,_arr4=["outliers","items"];_i13<_arr4.length;_i13++){var _key15=_arr4[_i13];if(Array.isArray(source[_key15])){target[_key15]=source[_key15].map(mapper);}}}},{key:"getMinMax",value:function getMinMax(scale,canStack){var bak=scale.axis;var config=this.options;scale.axis=config.minStats;var _get$call=_get(_getPrototypeOf(StatsBase.prototype),"getMinMax",this).call(this,scale,canStack),min3=_get$call.min;scale.axis=config.maxStats;var _get$call2=_get(_getPrototypeOf(StatsBase.prototype),"getMinMax",this).call(this,scale,canStack),max3=_get$call2.max;scale.axis=bak;return{min:min3,max:max3};}},{key:"parsePrimitiveData",value:function parsePrimitiveData(meta,data,start2,count){var vScale=meta.vScale;var iScale=meta.iScale;var labels=iScale.getLabels();var r=[];for(var i=0;i<count;i+=1){var index3=i+start2;var parsed={};parsed[iScale.axis]=iScale.parse(labels[index3],index3);var stats=this._parseStats(data==null?null:data[index3],this.options);if(stats){Object.assign(parsed,stats);parsed[vScale.axis]=stats.median;}r.push(parsed);}return r;}},{key:"parseArrayData",value:function parseArrayData(meta,data,start2,count){return this.parsePrimitiveData(meta,data,start2,count);}},{key:"parseObjectData",value:function parseObjectData(meta,data,start2,count){return this.parsePrimitiveData(meta,data,start2,count);}},{key:"getLabelAndValue",value:function getLabelAndValue(index3){var r=_get(_getPrototypeOf(StatsBase.prototype),"getLabelAndValue",this).call(this,index3);var vScale=this._cachedMeta.vScale;var parsed=this.getParsed(index3);if(!vScale||!parsed||r.value==="NaN"){return r;}r.value={raw:parsed,hoveredOutlierIndex:-1};this._transformStats(r.value,parsed,function(v){return vScale.getLabelForValue(v);});var s=this._toStringStats(r.value.raw);r.value.toString=function toString(){if(this.hoveredOutlierIndex>=0){return"(outlier: ".concat(this.outliers[this.hoveredOutlierIndex],")");}return s;};return r;}},{key:"_toStringStats",value:function _toStringStats(b){var _this44=this;var f=function f(v){return v==null?"NaN":formatNumber(v,_this44.chart.options.locale,{});};return"(min: ".concat(f(b.min),", 25% quantile: ").concat(f(b.q1),", median: ").concat(f(b.median),", mean: ").concat(f(b.mean),", 75% quantile: ").concat(f(b.q3),", max: ").concat(f(b.max),")");}},{key:"updateElement",value:function updateElement(rectangle,index3,properties,mode){var reset=mode==="reset";var scale=this._cachedMeta.vScale;var parsed=this.getParsed(index3);var base=scale.getBasePixel();properties._datasetIndex=this.index;properties._index=index3;this._transformStats(properties,parsed,function(v){return reset?base:scale.getPixelForValue(v,index3);});_get(_getPrototypeOf(StatsBase.prototype),"updateElement",this).call(this,rectangle,index3,properties,mode);}}]);return StatsBase;}(BarController);function patchController(type2,config,controller){var elements2=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var scales2=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];registry.addControllers(controller);if(Array.isArray(elements2)){registry.addElements.apply(registry,_toConsumableArray(elements2));}else{registry.addElements(elements2);}if(Array.isArray(scales2)){registry.addScales.apply(registry,_toConsumableArray(scales2));}else{registry.addScales(scales2);}var c=config;c.type=type2;return c;}var BoxPlotController=/*#__PURE__*/function(_StatsBase){_inherits(BoxPlotController,_StatsBase);var _super36=_createSuper(BoxPlotController);function BoxPlotController(){_classCallCheck(this,BoxPlotController);return _super36.apply(this,arguments);}_createClass(BoxPlotController,[{key:"_parseStats",value:function _parseStats(value,config){return asBoxPlotStats(value,config);}},{key:"_transformStats",value:function _transformStats(target,source,mapper){_get(_getPrototypeOf(BoxPlotController.prototype),"_transformStats",this).call(this,target,source,mapper);for(var _i14=0,_arr5=["whiskerMin","whiskerMax"];_i14<_arr5.length;_i14++){var key=_arr5[_i14];target[key]=mapper(source[key]);}}}]);return BoxPlotController;}(StatsBase);BoxPlotController.id="boxplot";BoxPlotController.defaults=merge({},[BarController.defaults,baseDefaults(boxOptionsKeys),{animations:{numbers:{type:"number",properties:BarController.defaults.animations.numbers.properties.concat(["q1","q3","min","max","median","whiskerMin","whiskerMax","mean"],boxOptionsKeys.filter(function(c){return!c.endsWith("Color");}))}},dataElementType:BoxAndWiskers.id}]);BoxPlotController.overrides=merge({},[BarController.overrides,defaultOverrides()]);var BoxPlotChart=/*#__PURE__*/function(_Chart){_inherits(BoxPlotChart,_Chart);var _super37=_createSuper(BoxPlotChart);function BoxPlotChart(item,config){_classCallCheck(this,BoxPlotChart);return _super37.call(this,item,patchController("boxplot",config,BoxPlotController,BoxAndWiskers,[LinearScale,CategoryScale]));}return _createClass(BoxPlotChart);}(Chart);BoxPlotChart.id=BoxPlotController.id;var ViolinController=/*#__PURE__*/function(_StatsBase2){_inherits(ViolinController,_StatsBase2);var _super38=_createSuper(ViolinController);function ViolinController(){_classCallCheck(this,ViolinController);return _super38.apply(this,arguments);}_createClass(ViolinController,[{key:"_parseStats",value:function _parseStats(value,config){return asViolinStats(value,config);}},{key:"_transformStats",value:function _transformStats(target,source,mapper){_get(_getPrototypeOf(ViolinController.prototype),"_transformStats",this).call(this,target,source,mapper);target.maxEstimate=source.maxEstimate;if(Array.isArray(source.coords)){target.coords=source.coords.map(function(c){return _objectSpread(_objectSpread({},c),{},{v:mapper(c.v)});});}}}]);return ViolinController;}(StatsBase);ViolinController.id="violin";ViolinController.defaults=merge({},[BarController.defaults,baseDefaults(baseOptionKeys),{points:100,animations:{numbers:{type:"number",properties:BarController.defaults.animations.numbers.properties.concat(["q1","q3","min","max","median","maxEstimate"],baseOptionKeys.filter(function(c){return!c.endsWith("Color");}))},kdeCoords:{fn:interpolateKdeCoords,properties:["coords"]}},dataElementType:Violin.id}]);ViolinController.overrides=merge({},[BarController.overrides,defaultOverrides()]);var ViolinChart=/*#__PURE__*/function(_Chart2){_inherits(ViolinChart,_Chart2);var _super39=_createSuper(ViolinChart);function ViolinChart(item,config){_classCallCheck(this,ViolinChart);return _super39.call(this,item,patchController("violin",config,ViolinController,Violin,[LinearScale,CategoryScale]));}return _createClass(ViolinChart);}(Chart);ViolinChart.id=ViolinController.id;// node_modules/d3-array/src/ascending.js
function ascending(a,b){return a==null||b==null?NaN:a<b?-1:a>b?1:a>=b?0:NaN;}// node_modules/d3-array/src/descending.js
function descending(a,b){return a==null||b==null?NaN:b<a?-1:b>a?1:b>=a?0:NaN;}// node_modules/internmap/src/index.js
var InternMap=/*#__PURE__*/function(_Map){_inherits(InternMap,_Map);var _super40=_createSuper(InternMap);function InternMap(entries){var _this45;var key=arguments.length>1&&arguments[1]!==undefined?arguments[1]:keyof;_classCallCheck(this,InternMap);_this45=_super40.call(this);Object.defineProperties(_assertThisInitialized(_this45),{_intern:{value:/* @__PURE__ */new Map()},_key:{value:key}});if(entries!=null){var _iterator49=_createForOfIteratorHelper(entries),_step49;try{for(_iterator49.s();!(_step49=_iterator49.n()).done;){var _step49$value=_slicedToArray(_step49.value,2),key2=_step49$value[0],value=_step49$value[1];_this45.set(key2,value);}}catch(err){_iterator49.e(err);}finally{_iterator49.f();}}return _this45;}_createClass(InternMap,[{key:"get",value:function get(key){return _get(_getPrototypeOf(InternMap.prototype),"get",this).call(this,intern_get(this,key));}},{key:"has",value:function has(key){return _get(_getPrototypeOf(InternMap.prototype),"has",this).call(this,intern_get(this,key));}},{key:"set",value:function set(key,value){return _get(_getPrototypeOf(InternMap.prototype),"set",this).call(this,intern_set(this,key),value);}},{key:"delete",value:function _delete(key){return _get(_getPrototypeOf(InternMap.prototype),"delete",this).call(this,intern_delete(this,key));}}]);return InternMap;}(/*#__PURE__*/_wrapNativeSuper(Map));function intern_get(_ref34,value){var _intern=_ref34._intern,_key=_ref34._key;var key=_key(value);return _intern.has(key)?_intern.get(key):value;}function intern_set(_ref35,value){var _intern=_ref35._intern,_key=_ref35._key;var key=_key(value);if(_intern.has(key))return _intern.get(key);_intern.set(key,value);return value;}function intern_delete(_ref36,value){var _intern=_ref36._intern,_key=_ref36._key;var key=_key(value);if(_intern.has(key)){value=_intern.get(key);_intern["delete"](key);}return value;}function keyof(value){return value!==null&&_typeof(value)==="object"?value.valueOf():value;}// node_modules/d3-array/src/identity.js
function identity(x){return x;}// node_modules/d3-array/src/group.js
function group(values){for(var _len14=arguments.length,keys=new Array(_len14>1?_len14-1:0),_key16=1;_key16<_len14;_key16++){keys[_key16-1]=arguments[_key16];}return nest(values,identity,identity,keys);}function rollup(values,reduce){for(var _len15=arguments.length,keys=new Array(_len15>2?_len15-2:0),_key17=2;_key17<_len15;_key17++){keys[_key17-2]=arguments[_key17];}return nest(values,identity,reduce,keys);}function rollups(values,reduce){for(var _len16=arguments.length,keys=new Array(_len16>2?_len16-2:0),_key18=2;_key18<_len16;_key18++){keys[_key18-2]=arguments[_key18];}return nest(values,Array.from,reduce,keys);}function nest(values,map4,reduce,keys){return function regroup(values2,i){if(i>=keys.length)return reduce(values2);var groups2=new InternMap();var keyof2=keys[i++];var index3=-1;var _iterator50=_createForOfIteratorHelper(values2),_step50;try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var value=_step50.value;var key=keyof2(value,++index3,values2);var group2=groups2.get(key);if(group2)group2.push(value);else groups2.set(key,[value]);}}catch(err){_iterator50.e(err);}finally{_iterator50.f();}var _iterator51=_createForOfIteratorHelper(groups2),_step51;try{for(_iterator51.s();!(_step51=_iterator51.n()).done;){var _step51$value=_slicedToArray(_step51.value,2),_key19=_step51$value[0],values3=_step51$value[1];groups2.set(_key19,regroup(values3,i));}}catch(err){_iterator51.e(err);}finally{_iterator51.f();}return map4(groups2);}(values,0);}// node_modules/d3-array/src/max.js
function max(values,valueof){var max3;if(valueof===void 0){var _iterator52=_createForOfIteratorHelper(values),_step52;try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var value=_step52.value;if(value!=null&&(max3<value||max3===void 0&&value>=value)){max3=value;}}}catch(err){_iterator52.e(err);}finally{_iterator52.f();}}else{var index3=-1;var _iterator53=_createForOfIteratorHelper(values),_step53;try{for(_iterator53.s();!(_step53=_iterator53.n()).done;){var _value4=_step53.value;if((_value4=valueof(_value4,++index3,values))!=null&&(max3<_value4||max3===void 0&&_value4>=_value4)){max3=_value4;}}}catch(err){_iterator53.e(err);}finally{_iterator53.f();}}return max3;}// node_modules/d3-array/src/min.js
function min(values,valueof){var min3;if(valueof===void 0){var _iterator54=_createForOfIteratorHelper(values),_step54;try{for(_iterator54.s();!(_step54=_iterator54.n()).done;){var value=_step54.value;if(value!=null&&(min3>value||min3===void 0&&value>=value)){min3=value;}}}catch(err){_iterator54.e(err);}finally{_iterator54.f();}}else{var index3=-1;var _iterator55=_createForOfIteratorHelper(values),_step55;try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){var _value5=_step55.value;if((_value5=valueof(_value5,++index3,values))!=null&&(min3>_value5||min3===void 0&&_value5>=_value5)){min3=_value5;}}}catch(err){_iterator55.e(err);}finally{_iterator55.f();}}return min3;}// node_modules/d3-array/src/mean.js
function mean(values,valueof){var count=0;var sum=0;if(valueof===void 0){var _iterator56=_createForOfIteratorHelper(values),_step56;try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var value=_step56.value;if(value!=null&&(value=+value)>=value){++count,sum+=value;}}}catch(err){_iterator56.e(err);}finally{_iterator56.f();}}else{var index3=-1;var _iterator57=_createForOfIteratorHelper(values),_step57;try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){var _value6=_step57.value;if((_value6=valueof(_value6,++index3,values))!=null&&(_value6=+_value6)>=_value6){++count,sum+=_value6;}}}catch(err){_iterator57.e(err);}finally{_iterator57.f();}}if(count)return sum/count;}// node_modules/d3-dispatch/src/dispatch.js
var noop2={value:function value(){}};function dispatch(){for(var i=0,n=arguments.length,_={},t;i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[];}return new Dispatch(_);}function Dispatch(_){this._=_;}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0)name=t.slice(i+1),t=t.slice(0,i);if(t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name};});}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function on(typename,callback2){var _=this._,T=parseTypenames(typename+"",_),t,i=-1,n=T.length;if(arguments.length<2){while(++i<n)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t;return;}if(callback2!=null&&typeof callback2!=="function")throw new Error("invalid callback: "+callback2);while(++i<n){if(t=(typename=T[i]).type)_[t]=set2(_[t],typename.name,callback2);else if(callback2==null)for(t in _)_[t]=set2(_[t],typename.name,null);}return this;},copy:function copy(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy);},call:function call(type2,that){if((n=arguments.length-2)>0)for(var args=new Array(n),i=0,n,t;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type2))throw new Error("unknown type: "+type2);for(t=this._[type2],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args);},apply:function apply(type2,that,args){if(!this._.hasOwnProperty(type2))throw new Error("unknown type: "+type2);for(var t=this._[type2],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args);}};function get(type2,name){for(var i=0,n=type2.length,c;i<n;++i){if((c=type2[i]).name===name){return c.value;}}}function set2(type2,name,callback2){for(var i=0,n=type2.length;i<n;++i){if(type2[i].name===name){type2[i]=noop2,type2=type2.slice(0,i).concat(type2.slice(i+1));break;}}if(callback2!=null)type2.push({name:name,value:callback2});return type2;}var dispatch_default=dispatch;// node_modules/d3-selection/src/namespaces.js
var xhtml="http://www.w3.org/1999/xhtml";var namespaces_default={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};// node_modules/d3-selection/src/namespace.js
function namespace_default(name){var prefix=name+="",i=prefix.indexOf(":");if(i>=0&&(prefix=name.slice(0,i))!=="xmlns")name=name.slice(i+1);return namespaces_default.hasOwnProperty(prefix)?{space:namespaces_default[prefix],local:name}:name;}// node_modules/d3-selection/src/creator.js
function creatorInherit(name){return function(){var document2=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document2.documentElement.namespaceURI===xhtml?document2.createElement(name):document2.createElementNS(uri,name);};}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local);};}function creator_default(name){var fullname=namespace_default(name);return(fullname.local?creatorFixed:creatorInherit)(fullname);}// node_modules/d3-selection/src/selector.js
function none(){}function selector_default(selector){return selector==null?none:function(){return this.querySelector(selector);};}// node_modules/d3-selection/src/selection/select.js
function select_default(select){if(typeof select!=="function")select=selector_default(select);for(var groups2=this._groups,m=groups2.length,subgroups=new Array(m),j=0;j<m;++j){for(var group2=groups2[j],n=group2.length,subgroup=subgroups[j]=new Array(n),node,subnode,i=0;i<n;++i){if((node=group2[i])&&(subnode=select.call(node,node.__data__,i,group2))){if("__data__"in node)subnode.__data__=node.__data__;subgroup[i]=subnode;}}}return new Selection(subgroups,this._parents);}// node_modules/d3-selection/src/array.js
function array(x){return x==null?[]:Array.isArray(x)?x:Array.from(x);}// node_modules/d3-selection/src/selectorAll.js
function empty(){return[];}function selectorAll_default(selector){return selector==null?empty:function(){return this.querySelectorAll(selector);};}// node_modules/d3-selection/src/selection/selectAll.js
function arrayAll(select){return function(){return array(select.apply(this,arguments));};}function selectAll_default(select){if(typeof select==="function")select=arrayAll(select);else select=selectorAll_default(select);for(var groups2=this._groups,m=groups2.length,subgroups=[],parents=[],j=0;j<m;++j){for(var group2=groups2[j],n=group2.length,node,i=0;i<n;++i){if(node=group2[i]){subgroups.push(select.call(node,node.__data__,i,group2));parents.push(node);}}}return new Selection(subgroups,parents);}// node_modules/d3-selection/src/matcher.js
function matcher_default(selector){return function(){return this.matches(selector);};}function childMatcher(selector){return function(node){return node.matches(selector);};}// node_modules/d3-selection/src/selection/selectChild.js
var find=Array.prototype.find;function childFind(match){return function(){return find.call(this.children,match);};}function childFirst(){return this.firstElementChild;}function selectChild_default(match){return this.select(match==null?childFirst:childFind(typeof match==="function"?match:childMatcher(match)));}// node_modules/d3-selection/src/selection/selectChildren.js
var filter=Array.prototype.filter;function children(){return Array.from(this.children);}function childrenFilter(match){return function(){return filter.call(this.children,match);};}function selectChildren_default(match){return this.selectAll(match==null?children:childrenFilter(typeof match==="function"?match:childMatcher(match)));}// node_modules/d3-selection/src/selection/filter.js
function filter_default(match){if(typeof match!=="function")match=matcher_default(match);for(var groups2=this._groups,m=groups2.length,subgroups=new Array(m),j=0;j<m;++j){for(var group2=groups2[j],n=group2.length,subgroup=subgroups[j]=[],node,i=0;i<n;++i){if((node=group2[i])&&match.call(node,node.__data__,i,group2)){subgroup.push(node);}}}return new Selection(subgroups,this._parents);}// node_modules/d3-selection/src/selection/sparse.js
function sparse_default(update){return new Array(update.length);}// node_modules/d3-selection/src/selection/enter.js
function enter_default(){return new Selection(this._enter||this._groups.map(sparse_default),this._parents);}function EnterNode(parent,datum2){this.ownerDocument=parent.ownerDocument;this.namespaceURI=parent.namespaceURI;this._next=null;this._parent=parent;this.__data__=datum2;}EnterNode.prototype={constructor:EnterNode,appendChild:function appendChild(child){return this._parent.insertBefore(child,this._next);},insertBefore:function insertBefore(child,next){return this._parent.insertBefore(child,next);},querySelector:function querySelector(selector){return this._parent.querySelector(selector);},querySelectorAll:function querySelectorAll(selector){return this._parent.querySelectorAll(selector);}};// node_modules/d3-selection/src/constant.js
function constant_default(x){return function(){return x;};}// node_modules/d3-selection/src/selection/data.js
function bindIndex(parent,group2,enter,update,exit,data){var i=0,node,groupLength=group2.length,dataLength=data.length;for(;i<dataLength;++i){if(node=group2[i]){node.__data__=data[i];update[i]=node;}else{enter[i]=new EnterNode(parent,data[i]);}}for(;i<groupLength;++i){if(node=group2[i]){exit[i]=node;}}}function bindKey(parent,group2,enter,update,exit,data,key){var i,node,nodeByKeyValue=/* @__PURE__ */new Map(),groupLength=group2.length,dataLength=data.length,keyValues=new Array(groupLength),keyValue;for(i=0;i<groupLength;++i){if(node=group2[i]){keyValues[i]=keyValue=key.call(node,node.__data__,i,group2)+"";if(nodeByKeyValue.has(keyValue)){exit[i]=node;}else{nodeByKeyValue.set(keyValue,node);}}}for(i=0;i<dataLength;++i){keyValue=key.call(parent,data[i],i,data)+"";if(node=nodeByKeyValue.get(keyValue)){update[i]=node;node.__data__=data[i];nodeByKeyValue["delete"](keyValue);}else{enter[i]=new EnterNode(parent,data[i]);}}for(i=0;i<groupLength;++i){if((node=group2[i])&&nodeByKeyValue.get(keyValues[i])===node){exit[i]=node;}}}function datum(node){return node.__data__;}function data_default(value,key){if(!arguments.length)return Array.from(this,datum);var bind=key?bindKey:bindIndex,parents=this._parents,groups2=this._groups;if(typeof value!=="function")value=constant_default(value);for(var m=groups2.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group2=groups2[j],groupLength=group2.length,data=arraylike(value.call(parent,parent&&parent.__data__,j,parents)),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength),exitGroup=exit[j]=new Array(groupLength);bind(parent,group2,enterGroup,updateGroup,exitGroup,data,key);for(var i0=0,i1=0,previous,next;i0<dataLength;++i0){if(previous=enterGroup[i0]){if(i0>=i1)i1=i0+1;while(!(next=updateGroup[i1])&&++i1<dataLength);previous._next=next||null;}}}update=new Selection(update,parents);update._enter=enter;update._exit=exit;return update;}function arraylike(data){return _typeof(data)==="object"&&"length"in data?data:Array.from(data);}// node_modules/d3-selection/src/selection/exit.js
function exit_default(){return new Selection(this._exit||this._groups.map(sparse_default),this._parents);}// node_modules/d3-selection/src/selection/join.js
function join_default(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();if(typeof onenter==="function"){enter=onenter(enter);if(enter)enter=enter.selection();}else{enter=enter.append(onenter+"");}if(onupdate!=null){update=onupdate(update);if(update)update=update.selection();}if(onexit==null)exit.remove();else onexit(exit);return enter&&update?enter.merge(update).order():update;}// node_modules/d3-selection/src/selection/merge.js
function merge_default(context){var selection2=context.selection?context.selection():context;for(var groups0=this._groups,groups1=selection2._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j){for(var group0=groups0[j],group1=groups1[j],n=group0.length,merge2=merges[j]=new Array(n),node,i=0;i<n;++i){if(node=group0[i]||group1[i]){merge2[i]=node;}}}for(;j<m0;++j){merges[j]=groups0[j];}return new Selection(merges,this._parents);}// node_modules/d3-selection/src/selection/order.js
function order_default(){for(var groups2=this._groups,j=-1,m=groups2.length;++j<m;){for(var group2=groups2[j],i=group2.length-1,next=group2[i],node;--i>=0;){if(node=group2[i]){if(next&&node.compareDocumentPosition(next)^4)next.parentNode.insertBefore(node,next);next=node;}}}return this;}// node_modules/d3-selection/src/selection/sort.js
function sort_default(compare){if(!compare)compare=ascending2;function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b;}for(var groups2=this._groups,m=groups2.length,sortgroups=new Array(m),j=0;j<m;++j){for(var group2=groups2[j],n=group2.length,sortgroup=sortgroups[j]=new Array(n),node,i=0;i<n;++i){if(node=group2[i]){sortgroup[i]=node;}}sortgroup.sort(compareNode);}return new Selection(sortgroups,this._parents).order();}function ascending2(a,b){return a<b?-1:a>b?1:a>=b?0:NaN;}// node_modules/d3-selection/src/selection/call.js
function call_default(){var callback2=arguments[0];arguments[0]=this;callback2.apply(null,arguments);return this;}// node_modules/d3-selection/src/selection/nodes.js
function nodes_default(){return Array.from(this);}// node_modules/d3-selection/src/selection/node.js
function node_default(){for(var groups2=this._groups,j=0,m=groups2.length;j<m;++j){for(var group2=groups2[j],i=0,n=group2.length;i<n;++i){var node=group2[i];if(node)return node;}}return null;}// node_modules/d3-selection/src/selection/size.js
function size_default(){var size=0;var _iterator58=_createForOfIteratorHelper(this),_step58;try{for(_iterator58.s();!(_step58=_iterator58.n()).done;){var node=_step58.value;++size;}}catch(err){_iterator58.e(err);}finally{_iterator58.f();}return size;}// node_modules/d3-selection/src/selection/empty.js
function empty_default(){return!this.node();}// node_modules/d3-selection/src/selection/each.js
function each_default(callback2){for(var groups2=this._groups,j=0,m=groups2.length;j<m;++j){for(var group2=groups2[j],i=0,n=group2.length,node;i<n;++i){if(node=group2[i])callback2.call(node,node.__data__,i,group2);}}return this;}// node_modules/d3-selection/src/selection/attr.js
function attrRemove(name){return function(){this.removeAttribute(name);};}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local);};}function attrConstant(name,value){return function(){this.setAttribute(name,value);};}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value);};}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);if(v==null)this.removeAttribute(name);else this.setAttribute(name,v);};}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);if(v==null)this.removeAttributeNS(fullname.space,fullname.local);else this.setAttributeNS(fullname.space,fullname.local,v);};}function attr_default(name,value){var fullname=namespace_default(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname);}return this.each((value==null?fullname.local?attrRemoveNS:attrRemove:typeof value==="function"?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value));}// node_modules/d3-selection/src/window.js
function window_default(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView;}// node_modules/d3-selection/src/selection/style.js
function styleRemove(name){return function(){this.style.removeProperty(name);};}function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority);};}function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);if(v==null)this.style.removeProperty(name);else this.style.setProperty(name,v,priority);};}function style_default(name,value,priority){return arguments.length>1?this.each((value==null?styleRemove:typeof value==="function"?styleFunction:styleConstant)(name,value,priority==null?"":priority)):styleValue(this.node(),name);}function styleValue(node,name){return node.style.getPropertyValue(name)||window_default(node).getComputedStyle(node,null).getPropertyValue(name);}// node_modules/d3-selection/src/selection/property.js
function propertyRemove(name){return function(){delete this[name];};}function propertyConstant(name,value){return function(){this[name]=value;};}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);if(v==null)delete this[name];else this[name]=v;};}function property_default(name,value){return arguments.length>1?this.each((value==null?propertyRemove:typeof value==="function"?propertyFunction:propertyConstant)(name,value)):this.node()[name];}// node_modules/d3-selection/src/selection/classed.js
function classArray(string){return string.trim().split(/^|\s+/);}function classList(node){return node.classList||new ClassList(node);}function ClassList(node){this._node=node;this._names=classArray(node.getAttribute("class")||"");}ClassList.prototype={add:function add(name){var i=this._names.indexOf(name);if(i<0){this._names.push(name);this._node.setAttribute("class",this._names.join(" "));}},remove:function remove(name){var i=this._names.indexOf(name);if(i>=0){this._names.splice(i,1);this._node.setAttribute("class",this._names.join(" "));}},contains:function contains(name){return this._names.indexOf(name)>=0;}};function classedAdd(node,names2){var list=classList(node),i=-1,n=names2.length;while(++i<n)list.add(names2[i]);}function classedRemove(node,names2){var list=classList(node),i=-1,n=names2.length;while(++i<n)list.remove(names2[i]);}function classedTrue(names2){return function(){classedAdd(this,names2);};}function classedFalse(names2){return function(){classedRemove(this,names2);};}function classedFunction(names2,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names2);};}function classed_default(name,value){var names2=classArray(name+"");if(arguments.length<2){var list=classList(this.node()),i=-1,n=names2.length;while(++i<n)if(!list.contains(names2[i]))return false;return true;}return this.each((typeof value==="function"?classedFunction:value?classedTrue:classedFalse)(names2,value));}// node_modules/d3-selection/src/selection/text.js
function textRemove(){this.textContent="";}function textConstant(value){return function(){this.textContent=value;};}function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=v==null?"":v;};}function text_default(value){return arguments.length?this.each(value==null?textRemove:(typeof value==="function"?textFunction:textConstant)(value)):this.node().textContent;}// node_modules/d3-selection/src/selection/html.js
function htmlRemove(){this.innerHTML="";}function htmlConstant(value){return function(){this.innerHTML=value;};}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=v==null?"":v;};}function html_default(value){return arguments.length?this.each(value==null?htmlRemove:(typeof value==="function"?htmlFunction:htmlConstant)(value)):this.node().innerHTML;}// node_modules/d3-selection/src/selection/raise.js
function raise(){if(this.nextSibling)this.parentNode.appendChild(this);}function raise_default(){return this.each(raise);}// node_modules/d3-selection/src/selection/lower.js
function lower(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild);}function lower_default(){return this.each(lower);}// node_modules/d3-selection/src/selection/append.js
function append_default(name){var create2=typeof name==="function"?name:creator_default(name);return this.select(function(){return this.appendChild(create2.apply(this,arguments));});}// node_modules/d3-selection/src/selection/insert.js
function constantNull(){return null;}function insert_default(name,before){var create2=typeof name==="function"?name:creator_default(name),select=before==null?constantNull:typeof before==="function"?before:selector_default(before);return this.select(function(){return this.insertBefore(create2.apply(this,arguments),select.apply(this,arguments)||null);});}// node_modules/d3-selection/src/selection/remove.js
function remove(){var parent=this.parentNode;if(parent)parent.removeChild(this);}function remove_default(){return this.each(remove);}// node_modules/d3-selection/src/selection/clone.js
function selection_cloneShallow(){var clone2=this.cloneNode(false),parent=this.parentNode;return parent?parent.insertBefore(clone2,this.nextSibling):clone2;}function selection_cloneDeep(){var clone2=this.cloneNode(true),parent=this.parentNode;return parent?parent.insertBefore(clone2,this.nextSibling):clone2;}function clone_default(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow);}// node_modules/d3-selection/src/selection/datum.js
function datum_default(value){return arguments.length?this.property("__data__",value):this.node().__data__;}// node_modules/d3-selection/src/selection/on.js
function contextListener(listener){return function(event){listener.call(this,event,this.__data__);};}function parseTypenames2(typenames){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0)name=t.slice(i+1),t=t.slice(0,i);return{type:t,name:name};});}function onRemove(typename){return function(){var on=this.__on;if(!on)return;for(var j=0,i=-1,m=on.length,o;j<m;++j){if(o=on[j],(!typename.type||o.type===typename.type)&&o.name===typename.name){this.removeEventListener(o.type,o.listener,o.options);}else{on[++i]=o;}}if(++i)on.length=i;else delete this.__on;};}function onAdd(typename,value,options){return function(){var on=this.__on,o,listener=contextListener(value);if(on)for(var j=0,m=on.length;j<m;++j){if((o=on[j]).type===typename.type&&o.name===typename.name){this.removeEventListener(o.type,o.listener,o.options);this.addEventListener(o.type,o.listener=listener,o.options=options);o.value=value;return;}}this.addEventListener(typename.type,listener,options);o={type:typename.type,name:typename.name,value:value,listener:listener,options:options};if(!on)this.__on=[o];else on.push(o);};}function on_default(typename,value,options){var typenames=parseTypenames2(typename+""),i,n=typenames.length,t;if(arguments.length<2){var on=this.node().__on;if(on)for(var j=0,m=on.length,o;j<m;++j){for(i=0,o=on[j];i<n;++i){if((t=typenames[i]).type===o.type&&t.name===o.name){return o.value;}}}return;}on=value?onAdd:onRemove;for(i=0;i<n;++i)this.each(on(typenames[i],value,options));return this;}// node_modules/d3-selection/src/selection/dispatch.js
function dispatchEvent2(node,type2,params){var window2=window_default(node),event=window2.CustomEvent;if(typeof event==="function"){event=new event(type2,params);}else{event=window2.document.createEvent("Event");if(params)event.initEvent(type2,params.bubbles,params.cancelable),event.detail=params.detail;else event.initEvent(type2,false,false);}node.dispatchEvent(event);}function dispatchConstant(type2,params){return function(){return dispatchEvent2(this,type2,params);};}function dispatchFunction(type2,params){return function(){return dispatchEvent2(this,type2,params.apply(this,arguments));};}function dispatch_default2(type2,params){return this.each((typeof params==="function"?dispatchFunction:dispatchConstant)(type2,params));}// node_modules/d3-selection/src/selection/iterator.js
function iterator_default(){var groups2,j,m,group2,i,n,node;return _regeneratorRuntime().wrap(function iterator_default$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:groups2=this._groups,j=0,m=groups2.length;case 1:if(!(j<m)){_context2.next=13;break;}group2=groups2[j],i=0,n=group2.length;case 3:if(!(i<n)){_context2.next=10;break;}if(!(node=group2[i])){_context2.next=7;break;}_context2.next=7;return node;case 7:++i;_context2.next=3;break;case 10:++j;_context2.next=1;break;case 13:case"end":return _context2.stop();}},_marked,this);}// node_modules/d3-selection/src/selection/index.js
var root=[null];function Selection(groups2,parents){this._groups=groups2;this._parents=parents;}function selection(){return new Selection([[document.documentElement]],root);}function selection_selection(){return this;}Selection.prototype=selection.prototype=_defineProperty({constructor:Selection,select:select_default,selectAll:selectAll_default,selectChild:selectChild_default,selectChildren:selectChildren_default,filter:filter_default,data:data_default,enter:enter_default,exit:exit_default,join:join_default,merge:merge_default,selection:selection_selection,order:order_default,sort:sort_default,call:call_default,nodes:nodes_default,node:node_default,size:size_default,empty:empty_default,each:each_default,attr:attr_default,style:style_default,property:property_default,classed:classed_default,text:text_default,html:html_default,raise:raise_default,lower:lower_default,append:append_default,insert:insert_default,remove:remove_default,clone:clone_default,datum:datum_default,on:on_default,dispatch:dispatch_default2},Symbol.iterator,iterator_default);var selection_default=selection;// node_modules/d3-selection/src/select.js
function select_default2(selector){return typeof selector==="string"?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],root);}// node_modules/d3-color/src/define.js
function define_default(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype;prototype.constructor=constructor;}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype;}// node_modules/d3-color/src/color.js
function Color2(){}var _darker=0.7;var _brighter=1/_darker;var reI="\\s*([+-]?\\d+)\\s*";var reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*";var reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*";var reHex=/^#([0-9a-f]{3,8})$/;var reRgbInteger=new RegExp("^rgb\\(".concat(reI,",").concat(reI,",").concat(reI,"\\)$"));var reRgbPercent=new RegExp("^rgb\\(".concat(reP,",").concat(reP,",").concat(reP,"\\)$"));var reRgbaInteger=new RegExp("^rgba\\(".concat(reI,",").concat(reI,",").concat(reI,",").concat(reN,"\\)$"));var reRgbaPercent=new RegExp("^rgba\\(".concat(reP,",").concat(reP,",").concat(reP,",").concat(reN,"\\)$"));var reHslPercent=new RegExp("^hsl\\(".concat(reN,",").concat(reP,",").concat(reP,"\\)$"));var reHslaPercent=new RegExp("^hsla\\(".concat(reN,",").concat(reP,",").concat(reP,",").concat(reN,"\\)$"));var named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define_default(Color2,color2,{copy:function copy(channels){return Object.assign(new this.constructor(),this,channels);},displayable:function displayable(){return this.rgb().displayable();},hex:color_formatHex,// Deprecated! Use color.formatHex.
formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex();}function color_formatHex8(){return this.rgb().formatHex8();}function color_formatHsl(){return hslConvert(this).formatHsl();}function color_formatRgb(){return this.rgb().formatRgb();}function color2(format2){var m,l;format2=(format2+"").trim().toLowerCase();return(m=reHex.exec(format2))?(l=m[1].length,m=parseInt(m[1],16),l===6?rgbn(m):l===3?new Rgb(m>>8&15|m>>4&240,m>>4&15|m&240,(m&15)<<4|m&15,1):l===8?rgba(m>>24&255,m>>16&255,m>>8&255,(m&255)/255):l===4?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|m&240,((m&15)<<4|m&15)/255):null):(m=reRgbInteger.exec(format2))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format2))?new Rgb(m[1]*255/100,m[2]*255/100,m[3]*255/100,1):(m=reRgbaInteger.exec(format2))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format2))?rgba(m[1]*255/100,m[2]*255/100,m[3]*255/100,m[4]):(m=reHslPercent.exec(format2))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format2))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format2)?rgbn(named[format2]):format2==="transparent"?new Rgb(NaN,NaN,NaN,0):null;}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,n&255,1);}function rgba(r,g,b,a){if(a<=0)r=g=b=NaN;return new Rgb(r,g,b,a);}function rgbConvert(o){if(!(o instanceof Color2))o=color2(o);if(!o)return new Rgb();o=o.rgb();return new Rgb(o.r,o.g,o.b,o.opacity);}function rgb(r,g,b,opacity){return arguments.length===1?rgbConvert(r):new Rgb(r,g,b,opacity==null?1:opacity);}function Rgb(r,g,b,opacity){this.r=+r;this.g=+g;this.b=+b;this.opacity=+opacity;}define_default(Rgb,rgb,extend(Color2,{brighter:function brighter(k){k=k==null?_brighter:Math.pow(_brighter,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity);},darker:function darker(k){k=k==null?_darker:Math.pow(_darker,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity);},rgb:function rgb(){return this;},clamp:function clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity));},displayable:function displayable(){return-0.5<=this.r&&this.r<255.5&&-0.5<=this.g&&this.g<255.5&&-0.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1;},hex:rgb_formatHex,// Deprecated! Use color.formatHex.
formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return"#".concat(hex2(this.r)).concat(hex2(this.g)).concat(hex2(this.b));}function rgb_formatHex8(){return"#".concat(hex2(this.r)).concat(hex2(this.g)).concat(hex2(this.b)).concat(hex2((isNaN(this.opacity)?1:this.opacity)*255));}function rgb_formatRgb(){var a=clampa(this.opacity);return"".concat(a===1?"rgb(":"rgba(").concat(clampi(this.r),", ").concat(clampi(this.g),", ").concat(clampi(this.b)).concat(a===1?")":", ".concat(a,")"));}function clampa(opacity){return isNaN(opacity)?1:Math.max(0,Math.min(1,opacity));}function clampi(value){return Math.max(0,Math.min(255,Math.round(value)||0));}function hex2(value){value=clampi(value);return(value<16?"0":"")+value.toString(16);}function hsla(h,s,l,a){if(a<=0)h=s=l=NaN;else if(l<=0||l>=1)h=s=NaN;else if(s<=0)h=NaN;return new Hsl(h,s,l,a);}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(!(o instanceof Color2))o=color2(o);if(!o)return new Hsl();if(o instanceof Hsl)return o;o=o.rgb();var r=o.r/255,g=o.g/255,b=o.b/255,min3=Math.min(r,g,b),max3=Math.max(r,g,b),h=NaN,s=max3-min3,l=(max3+min3)/2;if(s){if(r===max3)h=(g-b)/s+(g<b)*6;else if(g===max3)h=(b-r)/s+2;else h=(r-g)/s+4;s/=l<0.5?max3+min3:2-max3-min3;h*=60;}else{s=l>0&&l<1?0:h;}return new Hsl(h,s,l,o.opacity);}function hsl(h,s,l,opacity){return arguments.length===1?hslConvert(h):new Hsl(h,s,l,opacity==null?1:opacity);}function Hsl(h,s,l,opacity){this.h=+h;this.s=+s;this.l=+l;this.opacity=+opacity;}define_default(Hsl,hsl,extend(Color2,{brighter:function brighter(k){k=k==null?_brighter:Math.pow(_brighter,k);return new Hsl(this.h,this.s,this.l*k,this.opacity);},darker:function darker(k){k=k==null?_darker:Math.pow(_darker,k);return new Hsl(this.h,this.s,this.l*k,this.opacity);},rgb:function rgb(){var h=this.h%360+(this.h<0)*360,s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<0.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb2(h>=240?h-240:h+120,m1,m2),hsl2rgb2(h,m1,m2),hsl2rgb2(h<120?h+240:h-120,m1,m2),this.opacity);},clamp:function clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity));},displayable:function displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;},formatHsl:function formatHsl(){var a=clampa(this.opacity);return"".concat(a===1?"hsl(":"hsla(").concat(clamph(this.h),", ").concat(clampt(this.s)*100,"%, ").concat(clampt(this.l)*100,"%").concat(a===1?")":", ".concat(a,")"));}}));function clamph(value){value=(value||0)%360;return value<0?value+360:value;}function clampt(value){return Math.max(0,Math.min(1,value||0));}function hsl2rgb2(h,m1,m2){return(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)*255;}// node_modules/d3-interpolate/src/basis.js
function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6;}function basis_default(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3);};}// node_modules/d3-interpolate/src/basisClosed.js
function basisClosed_default(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3);};}// node_modules/d3-interpolate/src/constant.js
var constant_default2=function constant_default2(x){return function(){return x;};};// node_modules/d3-interpolate/src/color.js
function linear(a,d){return function(t){return a+t*d;};}function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y);};}function gamma(y){return(y=+y)===1?nogamma:function(a,b){return b-a?exponential(a,b,y):constant_default2(isNaN(a)?b:a);};}function nogamma(a,b){var d=b-a;return d?linear(a,d):constant_default2(isNaN(a)?b:a);}// node_modules/d3-interpolate/src/rgb.js
var rgb_default=function rgbGamma(y){var color3=gamma(y);function rgb2(start2,end){var r=color3((start2=rgb(start2)).r,(end=rgb(end)).r),g=color3(start2.g,end.g),b=color3(start2.b,end.b),opacity=nogamma(start2.opacity,end.opacity);return function(t){start2.r=r(t);start2.g=g(t);start2.b=b(t);start2.opacity=opacity(t);return start2+"";};}rgb2.gamma=rgbGamma;return rgb2;}(1);function rgbSpline(spline){return function(colors2){var n=colors2.length,r=new Array(n),g=new Array(n),b=new Array(n),i,color3;for(i=0;i<n;++i){color3=rgb(colors2[i]);r[i]=color3.r||0;g[i]=color3.g||0;b[i]=color3.b||0;}r=spline(r);g=spline(g);b=spline(b);color3.opacity=1;return function(t){color3.r=r(t);color3.g=g(t);color3.b=b(t);return color3+"";};};}var rgbBasis=rgbSpline(basis_default);var rgbBasisClosed=rgbSpline(basisClosed_default);// node_modules/d3-interpolate/src/number.js
function number_default(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t;};}// node_modules/d3-interpolate/src/string.js
var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;var reB=new RegExp(reA.source,"g");function zero(b){return function(){return b;};}function one(b){return function(t){return b(t)+"";};}function string_default(a,b){var bi=reA.lastIndex=reB.lastIndex=0,am,bm,bs,i=-1,s=[],q=[];a=a+"",b=b+"";while((am=reA.exec(a))&&(bm=reB.exec(b))){if((bs=bm.index)>bi){bs=b.slice(bi,bs);if(s[i])s[i]+=bs;else s[++i]=bs;}if((am=am[0])===(bm=bm[0])){if(s[i])s[i]+=bm;else s[++i]=bm;}else{s[++i]=null;q.push({i:i,x:number_default(am,bm)});}bi=reB.lastIndex;}if(bi<b.length){bs=b.slice(bi);if(s[i])s[i]+=bs;else s[++i]=bs;}return s.length<2?q[0]?one(q[0].x):zero(b):(b=q.length,function(t){for(var i2=0,o;i2<b;++i2)s[(o=q[i2]).i]=o.x(t);return s.join("");});}// node_modules/d3-interpolate/src/transform/decompose.js
var degrees=180/Math.PI;var identity2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose_default(a,b,c,d,e,f){var scaleX,scaleY,skewX;if(scaleX=Math.sqrt(a*a+b*b))a/=scaleX,b/=scaleX;if(skewX=a*c+b*d)c-=a*skewX,d-=b*skewX;if(scaleY=Math.sqrt(c*c+d*d))c/=scaleY,d/=scaleY,skewX/=scaleY;if(a*d<b*c)a=-a,b=-b,skewX=-skewX,scaleX=-scaleX;return{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY};}// node_modules/d3-interpolate/src/transform/parse.js
var svgNode;function parseCss(value){var m=new(typeof DOMMatrix==="function"?DOMMatrix:WebKitCSSMatrix)(value+"");return m.isIdentity?identity2:decompose_default(m.a,m.b,m.c,m.d,m.e,m.f);}function parseSvg(value){if(value==null)return identity2;if(!svgNode)svgNode=document.createElementNS("http://www.w3.org/2000/svg","g");svgNode.setAttribute("transform",value);if(!(value=svgNode.transform.baseVal.consolidate()))return identity2;value=value.matrix;return decompose_default(value.a,value.b,value.c,value.d,value.e,value.f);}// node_modules/d3-interpolate/src/transform/index.js
function interpolateTransform(parse2,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":"";}function translate2(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:number_default(xa,xb)},{i:i-2,x:number_default(ya,yb)});}else if(xb||yb){s.push("translate("+xb+pxComma+yb+pxParen);}}function rotate2(a,b,s,q){if(a!==b){if(a-b>180)b+=360;else if(b-a>180)a+=360;q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:number_default(a,b)});}else if(b){s.push(pop(s)+"rotate("+b+degParen);}}function skewX(a,b,s,q){if(a!==b){q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:number_default(a,b)});}else if(b){s.push(pop(s)+"skewX("+b+degParen);}}function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:number_default(xa,xb)},{i:i-2,x:number_default(ya,yb)});}else if(xb!==1||yb!==1){s.push(pop(s)+"scale("+xb+","+yb+")");}}return function(a,b){var s=[],q=[];a=parse2(a),b=parse2(b);translate2(a.translateX,a.translateY,b.translateX,b.translateY,s,q);rotate2(a.rotate,b.rotate,s,q);skewX(a.skewX,b.skewX,s,q);scale(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q);a=b=null;return function(t){var i=-1,n=q.length,o;while(++i<n)s[(o=q[i]).i]=o.x(t);return s.join("");};};}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)");var interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");// node_modules/d3-timer/src/timer.js
var frame=0;var timeout=0;var interval=0;var pokeDelay=1e3;var taskHead;var taskTail;var clockLast=0;var clockNow=0;var clockSkew=0;var clock=(typeof performance==="undefined"?"undefined":_typeof(performance))==="object"&&performance.now?performance:Date;var setFrame=(typeof window==="undefined"?"undefined":_typeof(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17);};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew);}function clearNow(){clockNow=0;}function Timer(){this._call=this._time=this._next=null;}Timer.prototype=timer.prototype={constructor:Timer,restart:function restart(callback2,delay,time){if(typeof callback2!=="function")throw new TypeError("callback is not a function");time=(time==null?now():+time)+(delay==null?0:+delay);if(!this._next&&taskTail!==this){if(taskTail)taskTail._next=this;else taskHead=this;taskTail=this;}this._call=callback2;this._time=time;sleep();},stop:function stop(){if(this._call){this._call=null;this._time=Infinity;sleep();}}};function timer(callback2,delay,time){var t=new Timer();t.restart(callback2,delay,time);return t;}function timerFlush(){now();++frame;var t=taskHead,e;while(t){if((e=clockNow-t._time)>=0)t._call.call(void 0,e);t=t._next;}--frame;}function wake(){clockNow=(clockLast=clock.now())+clockSkew;frame=timeout=0;try{timerFlush();}finally{frame=0;nap();clockNow=0;}}function poke(){var now2=clock.now(),delay=now2-clockLast;if(delay>pokeDelay)clockSkew-=delay,clockLast=now2;}function nap(){var t0,t1=taskHead,t2,time=Infinity;while(t1){if(t1._call){if(time>t1._time)time=t1._time;t0=t1,t1=t1._next;}else{t2=t1._next,t1._next=null;t1=t0?t0._next=t2:taskHead=t2;}}taskTail=t0;sleep(time);}function sleep(time){if(frame)return;if(timeout)timeout=clearTimeout(timeout);var delay=time-clockNow;if(delay>24){if(time<Infinity)timeout=setTimeout(wake,time-clock.now()-clockSkew);if(interval)interval=clearInterval(interval);}else{if(!interval)clockLast=clock.now(),interval=setInterval(poke,pokeDelay);frame=1,setFrame(wake);}}// node_modules/d3-timer/src/timeout.js
function timeout_default(callback2,delay,time){var t=new Timer();delay=delay==null?0:+delay;t.restart(function(elapsed){t.stop();callback2(elapsed+delay);},delay,time);return t;}// node_modules/d3-transition/src/transition/schedule.js
var emptyOn=dispatch_default("start","end","cancel","interrupt");var emptyTween=[];var CREATED=0;var SCHEDULED=1;var STARTING=2;var STARTED=3;var RUNNING=4;var ENDING=5;var ENDED=6;function schedule_default(node,name,id2,index3,group2,timing){var schedules=node.__transition;if(!schedules)node.__transition={};else if(id2 in schedules)return;create(node,id2,{name:name,index:index3,// For context during callback.
group:group2,// For context during callback.
on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:CREATED});}function init(node,id2){var schedule=get2(node,id2);if(schedule.state>CREATED)throw new Error("too late; already scheduled");return schedule;}function set3(node,id2){var schedule=get2(node,id2);if(schedule.state>STARTED)throw new Error("too late; already running");return schedule;}function get2(node,id2){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id2]))throw new Error("transition not found");return schedule;}function create(node,id2,self){var schedules=node.__transition,tween;schedules[id2]=self;self.timer=timer(schedule,0,self.time);function schedule(elapsed){self.state=SCHEDULED;self.timer.restart(start2,self.delay,self.time);if(self.delay<=elapsed)start2(elapsed-self.delay);}function start2(elapsed){var i,j,n,o;if(self.state!==SCHEDULED)return stop();for(i in schedules){o=schedules[i];if(o.name!==self.name)continue;if(o.state===STARTED)return timeout_default(start2);if(o.state===RUNNING){o.state=ENDED;o.timer.stop();o.on.call("interrupt",node,node.__data__,o.index,o.group);delete schedules[i];}else if(+i<id2){o.state=ENDED;o.timer.stop();o.on.call("cancel",node,node.__data__,o.index,o.group);delete schedules[i];}}timeout_default(function(){if(self.state===STARTED){self.state=RUNNING;self.timer.restart(tick,self.delay,self.time);tick(elapsed);}});self.state=STARTING;self.on.call("start",node,node.__data__,self.index,self.group);if(self.state!==STARTING)return;self.state=STARTED;tween=new Array(n=self.tween.length);for(i=0,j=-1;i<n;++i){if(o=self.tween[i].value.call(node,node.__data__,self.index,self.group)){tween[++j]=o;}}tween.length=j+1;}function tick(elapsed){var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=ENDING,1),i=-1,n=tween.length;while(++i<n){tween[i].call(node,t);}if(self.state===ENDING){self.on.call("end",node,node.__data__,self.index,self.group);stop();}}function stop(){self.state=ENDED;self.timer.stop();delete schedules[id2];for(var i in schedules)return;delete node.__transition;}}// node_modules/d3-transition/src/interrupt.js
function interrupt_default(node,name){var schedules=node.__transition,schedule,active,empty2=true,i;if(!schedules)return;name=name==null?null:name+"";for(i in schedules){if((schedule=schedules[i]).name!==name){empty2=false;continue;}active=schedule.state>STARTING&&schedule.state<ENDING;schedule.state=ENDED;schedule.timer.stop();schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group);delete schedules[i];}if(empty2)delete node.__transition;}// node_modules/d3-transition/src/selection/interrupt.js
function interrupt_default2(name){return this.each(function(){interrupt_default(this,name);});}// node_modules/d3-transition/src/transition/tween.js
function tweenRemove(id2,name){var tween0,tween1;return function(){var schedule=set3(this,id2),tween=schedule.tween;if(tween!==tween0){tween1=tween0=tween;for(var i=0,n=tween1.length;i<n;++i){if(tween1[i].name===name){tween1=tween1.slice();tween1.splice(i,1);break;}}}schedule.tween=tween1;};}function tweenFunction(id2,name,value){var tween0,tween1;if(typeof value!=="function")throw new Error();return function(){var schedule=set3(this,id2),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,value:value},i=0,n=tween1.length;i<n;++i){if(tween1[i].name===name){tween1[i]=t;break;}}if(i===n)tween1.push(t);}schedule.tween=tween1;};}function tween_default(name,value){var id2=this._id;name+="";if(arguments.length<2){var tween=get2(this.node(),id2).tween;for(var i=0,n=tween.length,t;i<n;++i){if((t=tween[i]).name===name){return t.value;}}return null;}return this.each((value==null?tweenRemove:tweenFunction)(id2,name,value));}function tweenValue(transition2,name,value){var id2=transition2._id;transition2.each(function(){var schedule=set3(this,id2);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments);});return function(node){return get2(node,id2).value[name];};}// node_modules/d3-transition/src/transition/interpolate.js
function interpolate_default(a,b){var c;return(typeof b==="number"?number_default:b instanceof color2?rgb_default:(c=color2(b))?(b=c,rgb_default):string_default)(a,b);}// node_modules/d3-transition/src/transition/attr.js
function attrRemove2(name){return function(){this.removeAttribute(name);};}function attrRemoveNS2(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local);};}function attrConstant2(name,interpolate3,value1){var string00,string1=value1+"",interpolate0;return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate3(string00=string0,value1);};}function attrConstantNS2(fullname,interpolate3,value1){var string00,string1=value1+"",interpolate0;return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate3(string00=string0,value1);};}function attrFunction2(name,interpolate3,value){var string00,string10,interpolate0;return function(){var string0,value1=value(this),string1;if(value1==null)return void this.removeAttribute(name);string0=this.getAttribute(name);string1=value1+"";return string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate3(string00=string0,value1));};}function attrFunctionNS2(fullname,interpolate3,value){var string00,string10,interpolate0;return function(){var string0,value1=value(this),string1;if(value1==null)return void this.removeAttributeNS(fullname.space,fullname.local);string0=this.getAttributeNS(fullname.space,fullname.local);string1=value1+"";return string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate3(string00=string0,value1));};}function attr_default2(name,value){var fullname=namespace_default(name),i=fullname==="transform"?interpolateTransformSvg:interpolate_default;return this.attrTween(name,typeof value==="function"?(fullname.local?attrFunctionNS2:attrFunction2)(fullname,i,tweenValue(this,"attr."+name,value)):value==null?(fullname.local?attrRemoveNS2:attrRemove2)(fullname):(fullname.local?attrConstantNS2:attrConstant2)(fullname,i,value));}// node_modules/d3-transition/src/transition/attrTween.js
function attrInterpolate(name,i){return function(t){this.setAttribute(name,i.call(this,t));};}function attrInterpolateNS(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t));};}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);if(i!==i0)t0=(i0=i)&&attrInterpolateNS(fullname,i);return t0;}tween._value=value;return tween;}function attrTween(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);if(i!==i0)t0=(i0=i)&&attrInterpolate(name,i);return t0;}tween._value=value;return tween;}function attrTween_default(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(value==null)return this.tween(key,null);if(typeof value!=="function")throw new Error();var fullname=namespace_default(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value));}// node_modules/d3-transition/src/transition/delay.js
function delayFunction(id2,value){return function(){init(this,id2).delay=+value.apply(this,arguments);};}function delayConstant(id2,value){return value=+value,function(){init(this,id2).delay=value;};}function delay_default(value){var id2=this._id;return arguments.length?this.each((typeof value==="function"?delayFunction:delayConstant)(id2,value)):get2(this.node(),id2).delay;}// node_modules/d3-transition/src/transition/duration.js
function durationFunction(id2,value){return function(){set3(this,id2).duration=+value.apply(this,arguments);};}function durationConstant(id2,value){return value=+value,function(){set3(this,id2).duration=value;};}function duration_default(value){var id2=this._id;return arguments.length?this.each((typeof value==="function"?durationFunction:durationConstant)(id2,value)):get2(this.node(),id2).duration;}// node_modules/d3-transition/src/transition/ease.js
function easeConstant(id2,value){if(typeof value!=="function")throw new Error();return function(){set3(this,id2).ease=value;};}function ease_default(value){var id2=this._id;return arguments.length?this.each(easeConstant(id2,value)):get2(this.node(),id2).ease;}// node_modules/d3-transition/src/transition/easeVarying.js
function easeVarying(id2,value){return function(){var v=value.apply(this,arguments);if(typeof v!=="function")throw new Error();set3(this,id2).ease=v;};}function easeVarying_default(value){if(typeof value!=="function")throw new Error();return this.each(easeVarying(this._id,value));}// node_modules/d3-transition/src/transition/filter.js
function filter_default2(match){if(typeof match!=="function")match=matcher_default(match);for(var groups2=this._groups,m=groups2.length,subgroups=new Array(m),j=0;j<m;++j){for(var group2=groups2[j],n=group2.length,subgroup=subgroups[j]=[],node,i=0;i<n;++i){if((node=group2[i])&&match.call(node,node.__data__,i,group2)){subgroup.push(node);}}}return new Transition(subgroups,this._parents,this._name,this._id);}// node_modules/d3-transition/src/transition/merge.js
function merge_default2(transition2){if(transition2._id!==this._id)throw new Error();for(var groups0=this._groups,groups1=transition2._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j){for(var group0=groups0[j],group1=groups1[j],n=group0.length,merge2=merges[j]=new Array(n),node,i=0;i<n;++i){if(node=group0[i]||group1[i]){merge2[i]=node;}}}for(;j<m0;++j){merges[j]=groups0[j];}return new Transition(merges,this._parents,this._name,this._id);}// node_modules/d3-transition/src/transition/on.js
function start(name){return(name+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");if(i>=0)t=t.slice(0,i);return!t||t==="start";});}function onFunction(id2,name,listener){var on0,on1,sit=start(name)?init:set3;return function(){var schedule=sit(this,id2),on=schedule.on;if(on!==on0)(on1=(on0=on).copy()).on(name,listener);schedule.on=on1;};}function on_default2(name,listener){var id2=this._id;return arguments.length<2?get2(this.node(),id2).on.on(name):this.each(onFunction(id2,name,listener));}// node_modules/d3-transition/src/transition/remove.js
function removeFunction(id2){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id2)return;if(parent)parent.removeChild(this);};}function remove_default2(){return this.on("end.remove",removeFunction(this._id));}// node_modules/d3-transition/src/transition/select.js
function select_default3(select){var name=this._name,id2=this._id;if(typeof select!=="function")select=selector_default(select);for(var groups2=this._groups,m=groups2.length,subgroups=new Array(m),j=0;j<m;++j){for(var group2=groups2[j],n=group2.length,subgroup=subgroups[j]=new Array(n),node,subnode,i=0;i<n;++i){if((node=group2[i])&&(subnode=select.call(node,node.__data__,i,group2))){if("__data__"in node)subnode.__data__=node.__data__;subgroup[i]=subnode;schedule_default(subgroup[i],name,id2,i,subgroup,get2(node,id2));}}}return new Transition(subgroups,this._parents,name,id2);}// node_modules/d3-transition/src/transition/selectAll.js
function selectAll_default2(select){var name=this._name,id2=this._id;if(typeof select!=="function")select=selectorAll_default(select);for(var groups2=this._groups,m=groups2.length,subgroups=[],parents=[],j=0;j<m;++j){for(var group2=groups2[j],n=group2.length,node,i=0;i<n;++i){if(node=group2[i]){for(var children2=select.call(node,node.__data__,i,group2),child,inherit2=get2(node,id2),k=0,l=children2.length;k<l;++k){if(child=children2[k]){schedule_default(child,name,id2,k,children2,inherit2);}}subgroups.push(children2);parents.push(node);}}}return new Transition(subgroups,parents,name,id2);}// node_modules/d3-transition/src/transition/selection.js
var Selection2=selection_default.prototype.constructor;function selection_default2(){return new Selection2(this._groups,this._parents);}// node_modules/d3-transition/src/transition/style.js
function styleNull(name,interpolate3){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),string1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate3(string00=string0,string10=string1);};}function styleRemove2(name){return function(){this.style.removeProperty(name);};}function styleConstant2(name,interpolate3,value1){var string00,string1=value1+"",interpolate0;return function(){var string0=styleValue(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate3(string00=string0,value1);};}function styleFunction2(name,interpolate3,value){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),value1=value(this),string1=value1+"";if(value1==null)string1=value1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate3(string00=string0,value1));};}function styleMaybeRemove(id2,name){var on0,on1,listener0,key="style."+name,event="end."+key,remove2;return function(){var schedule=set3(this,id2),on=schedule.on,listener=schedule.value[key]==null?remove2||(remove2=styleRemove2(name)):void 0;if(on!==on0||listener0!==listener)(on1=(on0=on).copy()).on(event,listener0=listener);schedule.on=on1;};}function style_default2(name,value,priority){var i=(name+="")==="transform"?interpolateTransformCss:interpolate_default;return value==null?this.styleTween(name,styleNull(name,i)).on("end.style."+name,styleRemove2(name)):typeof value==="function"?this.styleTween(name,styleFunction2(name,i,tweenValue(this,"style."+name,value))).each(styleMaybeRemove(this._id,name)):this.styleTween(name,styleConstant2(name,i,value),priority).on("end.style."+name,null);}// node_modules/d3-transition/src/transition/styleTween.js
function styleInterpolate(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority);};}function styleTween(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);if(i!==i0)t=(i0=i)&&styleInterpolate(name,i,priority);return t;}tween._value=value;return tween;}function styleTween_default(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(value==null)return this.tween(key,null);if(typeof value!=="function")throw new Error();return this.tween(key,styleTween(name,value,priority==null?"":priority));}// node_modules/d3-transition/src/transition/text.js
function textConstant2(value){return function(){this.textContent=value;};}function textFunction2(value){return function(){var value1=value(this);this.textContent=value1==null?"":value1;};}function text_default2(value){return this.tween("text",typeof value==="function"?textFunction2(tweenValue(this,"text",value)):textConstant2(value==null?"":value+""));}// node_modules/d3-transition/src/transition/textTween.js
function textInterpolate(i){return function(t){this.textContent=i.call(this,t);};}function textTween(value){var t0,i0;function tween(){var i=value.apply(this,arguments);if(i!==i0)t0=(i0=i)&&textInterpolate(i);return t0;}tween._value=value;return tween;}function textTween_default(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(value==null)return this.tween(key,null);if(typeof value!=="function")throw new Error();return this.tween(key,textTween(value));}// node_modules/d3-transition/src/transition/transition.js
function transition_default(){var name=this._name,id0=this._id,id1=newId();for(var groups2=this._groups,m=groups2.length,j=0;j<m;++j){for(var group2=groups2[j],n=group2.length,node,i=0;i<n;++i){if(node=group2[i]){var inherit2=get2(node,id0);schedule_default(node,name,id1,i,group2,{time:inherit2.time+inherit2.delay+inherit2.duration,delay:0,duration:inherit2.duration,ease:inherit2.ease});}}}return new Transition(groups2,this._parents,name,id1);}// node_modules/d3-transition/src/transition/end.js
function end_default(){var on0,on1,that=this,id2=that._id,size=that.size();return new Promise(function(resolve2,reject){var cancel={value:reject},end={value:function value(){if(--size===0)resolve2();}};that.each(function(){var schedule=set3(this,id2),on=schedule.on;if(on!==on0){on1=(on0=on).copy();on1._.cancel.push(cancel);on1._.interrupt.push(cancel);on1._.end.push(end);}schedule.on=on1;});if(size===0)resolve2();});}// node_modules/d3-transition/src/transition/index.js
var id=0;function Transition(groups2,parents,name,id2){this._groups=groups2;this._parents=parents;this._name=name;this._id=id2;}function transition(name){return selection_default().transition(name);}function newId(){return++id;}var selection_prototype=selection_default.prototype;Transition.prototype=transition.prototype=_defineProperty({constructor:Transition,select:select_default3,selectAll:selectAll_default2,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:filter_default2,merge:merge_default2,selection:selection_default2,transition:transition_default,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:on_default2,attr:attr_default2,attrTween:attrTween_default,style:style_default2,styleTween:styleTween_default,text:text_default2,textTween:textTween_default,remove:remove_default2,tween:tween_default,delay:delay_default,duration:duration_default,ease:ease_default,easeVarying:easeVarying_default,end:end_default},Symbol.iterator,selection_prototype[Symbol.iterator]);// node_modules/d3-ease/src/cubic.js
function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2;}// node_modules/d3-transition/src/selection/transition.js
var defaultTiming={time:null,// Set on use.
delay:0,duration:250,ease:cubicInOut};function inherit(node,id2){var timing;while(!(timing=node.__transition)||!(timing=timing[id2])){if(!(node=node.parentNode)){throw new Error("transition ".concat(id2," not found"));}}return timing;}function transition_default2(name){var id2,timing;if(name instanceof Transition){id2=name._id,name=name._name;}else{id2=newId(),(timing=defaultTiming).time=now(),name=name==null?null:name+"";}for(var groups2=this._groups,m=groups2.length,j=0;j<m;++j){for(var group2=groups2[j],n=group2.length,node,i=0;i<n;++i){if(node=group2[i]){schedule_default(node,name,id2,i,group2,timing||inherit(node,id2));}}}return new Transition(groups2,this._parents,name,id2);}// node_modules/d3-transition/src/selection/index.js
selection_default.prototype.interrupt=interrupt_default2;selection_default.prototype.transition=transition_default2;// node_modules/d3-brush/src/brush.js
var abs=Math.abs,max2=Math.max,min2=Math.min;function number1(e){return[+e[0],+e[1]];}function number2(e){return[number1(e[0]),number1(e[1])];}var X={name:"x",handles:["w","e"].map(type),input:function input(x,e){return x==null?null:[[+x[0],e[0][1]],[+x[1],e[1][1]]];},output:function output(xy){return xy&&[xy[0][0],xy[1][0]];}};var Y={name:"y",handles:["n","s"].map(type),input:function input(y,e){return y==null?null:[[e[0][0],+y[0]],[e[1][0],+y[1]]];},output:function output(xy){return xy&&[xy[0][1],xy[1][1]];}};var XY={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(type),input:function input(xy){return xy==null?null:number2(xy);},output:function output(xy){return xy;}};function type(t){return{type:t};}// node_modules/d3-format/src/formatDecimal.js
function formatDecimal_default(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10);}function formatDecimalParts(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)];}// node_modules/d3-format/src/exponent.js
function exponent_default(x){return x=formatDecimalParts(Math.abs(x)),x?x[1]:NaN;}// node_modules/d3-format/src/formatGroup.js
function formatGroup_default(grouping,thousands){return function(value,width){var i=value.length,t=[],j=0,g=grouping[0],length=0;while(i>0&&g>0){if(length+g+1>width)g=Math.max(1,width-length);t.push(value.substring(i-=g,i+g));if((length+=g+1)>width)break;g=grouping[j=(j+1)%grouping.length];}return t.reverse().join(thousands);};}// node_modules/d3-format/src/formatNumerals.js
function formatNumerals_default(numerals){return function(value){return value.replace(/[0-9]/g,function(i){return numerals[+i];});};}// node_modules/d3-format/src/formatSpecifier.js
var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]});}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(specifier){this.fill=specifier.fill===void 0?" ":specifier.fill+"";this.align=specifier.align===void 0?">":specifier.align+"";this.sign=specifier.sign===void 0?"-":specifier.sign+"";this.symbol=specifier.symbol===void 0?"":specifier.symbol+"";this.zero=!!specifier.zero;this.width=specifier.width===void 0?void 0:+specifier.width;this.comma=!!specifier.comma;this.precision=specifier.precision===void 0?void 0:+specifier.precision;this.trim=!!specifier.trim;this.type=specifier.type===void 0?"":specifier.type+"";}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type;};// node_modules/d3-format/src/formatTrim.js
function formatTrim_default(s){out:for(var n=s.length,i=1,i0=-1,i1;i<n;++i){switch(s[i]){case".":i0=i1=i;break;case"0":if(i0===0)i0=i;i1=i;break;default:if(!+s[i])break out;if(i0>0)i0=0;break;}}return i0>0?s.slice(0,i0)+s.slice(i1+1):s;}// node_modules/d3-format/src/formatPrefixAuto.js
var prefixExponent;function formatPrefixAuto_default(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(exponent/3)))*3)+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(x,Math.max(0,p+i-1))[0];}// node_modules/d3-format/src/formatRounded.js
function formatRounded_default(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0");}// node_modules/d3-format/src/formatTypes.js
var formatTypes_default={"%":function _(x,p){return(x*100).toFixed(p);},"b":function b(x){return Math.round(x).toString(2);},"c":function c(x){return x+"";},"d":formatDecimal_default,"e":function e(x,p){return x.toExponential(p);},"f":function f(x,p){return x.toFixed(p);},"g":function g(x,p){return x.toPrecision(p);},"o":function o(x){return Math.round(x).toString(8);},"p":function p(x,_p){return formatRounded_default(x*100,_p);},"r":formatRounded_default,"s":formatPrefixAuto_default,"X":function X(x){return Math.round(x).toString(16).toUpperCase();},"x":function x(_x3){return Math.round(_x3).toString(16);}};// node_modules/d3-format/src/identity.js
function identity_default(x){return x;}// node_modules/d3-format/src/locale.js
var map3=Array.prototype.map;var prefixes=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function locale_default(locale2){var group2=locale2.grouping===void 0||locale2.thousands===void 0?identity_default:formatGroup_default(map3.call(locale2.grouping,Number),locale2.thousands+""),currencyPrefix=locale2.currency===void 0?"":locale2.currency[0]+"",currencySuffix=locale2.currency===void 0?"":locale2.currency[1]+"",decimal=locale2.decimal===void 0?".":locale2.decimal+"",numerals=locale2.numerals===void 0?identity_default:formatNumerals_default(map3.call(locale2.numerals,String)),percent=locale2.percent===void 0?"%":locale2.percent+"",minus=locale2.minus===void 0?"\u2212":locale2.minus+"",nan=locale2.nan===void 0?"NaN":locale2.nan+"";function newFormat(specifier){specifier=formatSpecifier(specifier);var fill2=specifier.fill,align=specifier.align,sign2=specifier.sign,symbol=specifier.symbol,zero2=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type2=specifier.type;if(type2==="n")comma=true,type2="g";else if(!formatTypes_default[type2])precision===void 0&&(precision=12),trim=true,type2="g";if(zero2||fill2==="0"&&align==="=")zero2=true,fill2="0",align="=";var prefix=symbol==="$"?currencyPrefix:symbol==="#"&&/[boxX]/.test(type2)?"0"+type2.toLowerCase():"",suffix=symbol==="$"?currencySuffix:/[%p]/.test(type2)?percent:"";var formatType=formatTypes_default[type2],maybeSuffix=/[defgprs%]/.test(type2);precision=precision===void 0?6:/[gprs]/.test(type2)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision));function format2(value){var valuePrefix=prefix,valueSuffix=suffix,i,n,c;if(type2==="c"){valueSuffix=formatType(value)+valueSuffix;value="";}else{value=+value;var valueNegative=value<0||1/value<0;value=isNaN(value)?nan:formatType(Math.abs(value),precision);if(trim)value=formatTrim_default(value);if(valueNegative&&+value===0&&sign2!=="+")valueNegative=false;valuePrefix=(valueNegative?sign2==="("?sign2:minus:sign2==="-"||sign2==="("?"":sign2)+valuePrefix;valueSuffix=(type2==="s"?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&sign2==="("?")":"");if(maybeSuffix){i=-1,n=value.length;while(++i<n){if(c=value.charCodeAt(i),48>c||c>57){valueSuffix=(c===46?decimal+value.slice(i+1):value.slice(i))+valueSuffix;value=value.slice(0,i);break;}}}}if(comma&&!zero2)value=group2(value,Infinity);var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill2):"";if(comma&&zero2)value=group2(padding+value,padding.length?width-valueSuffix.length:Infinity),padding="";switch(align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix;break;}return numerals(value);}format2.toString=function(){return specifier+"";};return format2;}function formatPrefix2(specifier,value){var f=newFormat((specifier=formatSpecifier(specifier),specifier.type="f",specifier)),e=Math.max(-8,Math.min(8,Math.floor(exponent_default(value)/3)))*3,k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value2){return f(k*value2)+prefix;};}return{format:newFormat,formatPrefix:formatPrefix2};}// node_modules/d3-format/src/defaultLocale.js
var locale;var format;var formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(definition){locale=locale_default(definition);format=locale.format;formatPrefix=locale.formatPrefix;return locale;}// node_modules/d3-zoom/src/transform.js
function Transform(k,x,y){this.k=k;this.x=x;this.y=y;}Transform.prototype={constructor:Transform,scale:function scale(k){return k===1?this:new Transform(this.k*k,this.x,this.y);},translate:function translate(x,y){return x===0&y===0?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y);},apply:function apply(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y];},applyX:function applyX(x){return x*this.k+this.x;},applyY:function applyY(y){return y*this.k+this.y;},invert:function invert(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k];},invertX:function invertX(x){return(x-this.x)/this.k;},invertY:function invertY(y){return(y-this.y)/this.k;},rescaleX:function rescaleX(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x));},rescaleY:function rescaleY(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y));},toString:function toString(){return"translate("+this.x+","+this.y+") scale("+this.k+")";}};var identity3=new Transform(1,0,0);transform.prototype=Transform.prototype;function transform(node){while(!node.__zoom)if(!(node=node.parentNode))return identity3;return node.__zoom;}// node_modules/chart.js/auto/auto.mjs
Chart.register.apply(Chart,registerables);var auto_default=Chart;// node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.esm.js
var devicePixelRatio=function(){if(typeof window!=="undefined"){if(window.devicePixelRatio){return window.devicePixelRatio;}var screen=window.screen;if(screen){return(screen.deviceXDPI||1)/(screen.logicalXDPI||1);}}return 1;}();var utils={// @todo move this in Chart.helpers.toTextLines
toTextLines:function toTextLines(inputs){var lines=[];var input;inputs=[].concat(inputs);while(inputs.length){input=inputs.pop();if(typeof input==="string"){lines.unshift.apply(lines,input.split("\n"));}else if(Array.isArray(input)){inputs.push.apply(inputs,input);}else if(!isNullOrUndef(inputs)){lines.unshift(""+input);}}return lines;},// @todo move this in Chart.helpers.canvas.textSize
// @todo cache calls of measureText if font doesn't change?!
textSize:function textSize(ctx,lines,font){var items=[].concat(lines);var ilen=items.length;var prev=ctx.font;var width=0;var i;ctx.font=font.string;for(i=0;i<ilen;++i){width=Math.max(ctx.measureText(items[i]).width,width);}ctx.font=prev;return{height:ilen*font.lineHeight,width:width};},/**
     * Returns value bounded by min and max. This is equivalent to max(min, min(value, max)).
     * @todo move this method in Chart.helpers.bound
     * https://doc.qt.io/qt-5/qtglobal.html#qBound
     */bound:function bound(min3,value,max3){return Math.max(min3,Math.min(value,max3));},/**
     * Returns an array of pair [value, state] where state is:
     * * -1: value is only in a0 (removed)
     * *  1: value is only in a1 (added)
     */arrayDiff:function arrayDiff(a0,a1){var prev=a0.slice();var updates=[];var i,j,ilen,v;for(i=0,ilen=a1.length;i<ilen;++i){v=a1[i];j=prev.indexOf(v);if(j===-1){updates.push([v,1]);}else{prev.splice(j,1);}}for(i=0,ilen=prev.length;i<ilen;++i){updates.push([prev[i],-1]);}return updates;},/**
     * https://github.com/chartjs/chartjs-plugin-datalabels/issues/70
     */rasterize:function rasterize(v){return Math.round(v*devicePixelRatio)/devicePixelRatio;}};function orient(point,origin){var x0=origin.x;var y0=origin.y;if(x0===null){return{x:0,y:-1};}if(y0===null){return{x:1,y:0};}var dx=point.x-x0;var dy=point.y-y0;var ln=Math.sqrt(dx*dx+dy*dy);return{x:ln?dx/ln:0,y:ln?dy/ln:-1};}function aligned(x,y,vx,vy,align){switch(align){case"center":vx=vy=0;break;case"bottom":vx=0;vy=1;break;case"right":vx=1;vy=0;break;case"left":vx=-1;vy=0;break;case"top":vx=0;vy=-1;break;case"start":vx=-vx;vy=-vy;break;case"end":break;default:align*=Math.PI/180;vx=Math.cos(align);vy=Math.sin(align);break;}return{x:x,y:y,vx:vx,vy:vy};}var R_INSIDE=0;var R_LEFT=1;var R_RIGHT=2;var R_BOTTOM=4;var R_TOP=8;function region(x,y,rect){var res=R_INSIDE;if(x<rect.left){res|=R_LEFT;}else if(x>rect.right){res|=R_RIGHT;}if(y<rect.top){res|=R_TOP;}else if(y>rect.bottom){res|=R_BOTTOM;}return res;}function clipped(segment,area){var x0=segment.x0;var y0=segment.y0;var x1=segment.x1;var y1=segment.y1;var r0=region(x0,y0,area);var r1=region(x1,y1,area);var r,x,y;while(true){if(!(r0|r1)||r0&r1){break;}r=r0||r1;if(r&R_TOP){x=x0+(x1-x0)*(area.top-y0)/(y1-y0);y=area.top;}else if(r&R_BOTTOM){x=x0+(x1-x0)*(area.bottom-y0)/(y1-y0);y=area.bottom;}else if(r&R_RIGHT){y=y0+(y1-y0)*(area.right-x0)/(x1-x0);x=area.right;}else if(r&R_LEFT){y=y0+(y1-y0)*(area.left-x0)/(x1-x0);x=area.left;}if(r===r0){x0=x;y0=y;r0=region(x0,y0,area);}else{x1=x;y1=y;r1=region(x1,y1,area);}}return{x0:x0,x1:x1,y0:y0,y1:y1};}function compute$1(range,config){var anchor=config.anchor;var segment=range;var x,y;if(config.clamp){segment=clipped(segment,config.area);}if(anchor==="start"){x=segment.x0;y=segment.y0;}else if(anchor==="end"){x=segment.x1;y=segment.y1;}else{x=(segment.x0+segment.x1)/2;y=(segment.y0+segment.y1)/2;}return aligned(x,y,range.vx,range.vy,config.align);}var positioners2={arc:function arc(el,config){var angle=(el.startAngle+el.endAngle)/2;var vx=Math.cos(angle);var vy=Math.sin(angle);var r0=el.innerRadius;var r1=el.outerRadius;return compute$1({x0:el.x+vx*r0,y0:el.y+vy*r0,x1:el.x+vx*r1,y1:el.y+vy*r1,vx:vx,vy:vy},config);},point:function point(el,config){var v=orient(el,config.origin);var rx=v.x*el.options.radius;var ry=v.y*el.options.radius;return compute$1({x0:el.x-rx,y0:el.y-ry,x1:el.x+rx,y1:el.y+ry,vx:v.x,vy:v.y},config);},bar:function bar(el,config){var v=orient(el,config.origin);var x=el.x;var y=el.y;var sx=0;var sy=0;if(el.horizontal){x=Math.min(el.x,el.base);sx=Math.abs(el.base-el.x);}else{y=Math.min(el.y,el.base);sy=Math.abs(el.base-el.y);}return compute$1({x0:x,y0:y+sy,x1:x+sx,y1:y,vx:v.x,vy:v.y},config);},fallback:function fallback(el,config){var v=orient(el,config.origin);return compute$1({x0:el.x,y0:el.y,x1:el.x+(el.width||0),y1:el.y+(el.height||0),vx:v.x,vy:v.y},config);}};var rasterize=utils.rasterize;function boundingRects2(model){var borderWidth3=model.borderWidth||0;var padding=model.padding;var th=model.size.height;var tw=model.size.width;var tx=-tw/2;var ty=-th/2;return{frame:{x:tx-padding.left-borderWidth3,y:ty-padding.top-borderWidth3,w:tw+padding.width+borderWidth3*2,h:th+padding.height+borderWidth3*2},text:{x:tx,y:ty,w:tw,h:th}};}function getScaleOrigin(el,context){var scale=context.chart.getDatasetMeta(context.datasetIndex).vScale;if(!scale){return null;}if(scale.xCenter!==void 0&&scale.yCenter!==void 0){return{x:scale.xCenter,y:scale.yCenter};}var pixel=scale.getBasePixel();return el.horizontal?{x:pixel,y:null}:{x:null,y:pixel};}function getPositioner(el){if(el instanceof ArcElement){return positioners2.arc;}if(el instanceof PointElement){return positioners2.point;}if(el instanceof BarElement){return positioners2.bar;}return positioners2.fallback;}function drawRoundedRect(ctx,x,y,w,h,radius3){var HALF_PI2=Math.PI/2;if(radius3){var r=Math.min(radius3,h/2,w/2);var left=x+r;var top=y+r;var right=x+w-r;var bottom=y+h-r;ctx.moveTo(x,top);if(left<right&&top<bottom){ctx.arc(left,top,r,-Math.PI,-HALF_PI2);ctx.arc(right,top,r,-HALF_PI2,0);ctx.arc(right,bottom,r,0,HALF_PI2);ctx.arc(left,bottom,r,HALF_PI2,Math.PI);}else if(left<right){ctx.moveTo(left,y);ctx.arc(right,top,r,-HALF_PI2,HALF_PI2);ctx.arc(left,top,r,HALF_PI2,Math.PI+HALF_PI2);}else if(top<bottom){ctx.arc(left,top,r,-Math.PI,0);ctx.arc(left,bottom,r,0,Math.PI);}else{ctx.arc(left,top,r,-Math.PI,Math.PI);}ctx.closePath();ctx.moveTo(x,y);}else{ctx.rect(x,y,w,h);}}function drawFrame(ctx,rect,model){var bgColor=model.backgroundColor;var borderColor4=model.borderColor;var borderWidth3=model.borderWidth;if(!bgColor&&(!borderColor4||!borderWidth3)){return;}ctx.beginPath();drawRoundedRect(ctx,rasterize(rect.x)+borderWidth3/2,rasterize(rect.y)+borderWidth3/2,rasterize(rect.w)-borderWidth3,rasterize(rect.h)-borderWidth3,model.borderRadius);ctx.closePath();if(bgColor){ctx.fillStyle=bgColor;ctx.fill();}if(borderColor4&&borderWidth3){ctx.strokeStyle=borderColor4;ctx.lineWidth=borderWidth3;ctx.lineJoin="miter";ctx.stroke();}}function textGeometry(rect,align,font){var h=font.lineHeight;var w=rect.w;var x=rect.x;var y=rect.y+h/2;if(align==="center"){x+=w/2;}else if(align==="end"||align==="right"){x+=w;}return{h:h,w:w,x:x,y:y};}function drawTextLine(ctx,text,cfg){var shadow=ctx.shadowBlur;var stroked=cfg.stroked;var x=rasterize(cfg.x);var y=rasterize(cfg.y);var w=rasterize(cfg.w);if(stroked){ctx.strokeText(text,x,y,w);}if(cfg.filled){if(shadow&&stroked){ctx.shadowBlur=0;}ctx.fillText(text,x,y,w);if(shadow&&stroked){ctx.shadowBlur=shadow;}}}function drawText(ctx,lines,rect,model){var align=model.textAlign;var color3=model.color;var filled=!!color3;var font=model.font;var ilen=lines.length;var strokeColor=model.textStrokeColor;var strokeWidth=model.textStrokeWidth;var stroked=strokeColor&&strokeWidth;var i;if(!ilen||!filled&&!stroked){return;}rect=textGeometry(rect,align,font);ctx.font=font.string;ctx.textAlign=align;ctx.textBaseline="middle";ctx.shadowBlur=model.textShadowBlur;ctx.shadowColor=model.textShadowColor;if(filled){ctx.fillStyle=color3;}if(stroked){ctx.lineJoin="round";ctx.lineWidth=strokeWidth;ctx.strokeStyle=strokeColor;}for(i=0,ilen=lines.length;i<ilen;++i){drawTextLine(ctx,lines[i],{stroked:stroked,filled:filled,w:rect.w,x:rect.x,y:rect.y+rect.h*i});}}var Label=function Label(config,ctx,el,index3){var me=this;me._config=config;me._index=index3;me._model=null;me._rects=null;me._ctx=ctx;me._el=el;};merge(Label.prototype,{/**
     * @private
     */_modelize:function _modelize(display,lines,config,context){var me=this;var index3=me._index;var font=toFont(resolve([config.font,{}],context,index3));var color3=resolve([config.color,defaults.color],context,index3);return{align:resolve([config.align,"center"],context,index3),anchor:resolve([config.anchor,"center"],context,index3),area:context.chart.chartArea,backgroundColor:resolve([config.backgroundColor,null],context,index3),borderColor:resolve([config.borderColor,null],context,index3),borderRadius:resolve([config.borderRadius,0],context,index3),borderWidth:resolve([config.borderWidth,0],context,index3),clamp:resolve([config.clamp,false],context,index3),clip:resolve([config.clip,false],context,index3),color:color3,display:display,font:font,lines:lines,offset:resolve([config.offset,4],context,index3),opacity:resolve([config.opacity,1],context,index3),origin:getScaleOrigin(me._el,context),padding:toPadding(resolve([config.padding,4],context,index3)),positioner:getPositioner(me._el),rotation:resolve([config.rotation,0],context,index3)*(Math.PI/180),size:utils.textSize(me._ctx,lines,font),textAlign:resolve([config.textAlign,"start"],context,index3),textShadowBlur:resolve([config.textShadowBlur,0],context,index3),textShadowColor:resolve([config.textShadowColor,color3],context,index3),textStrokeColor:resolve([config.textStrokeColor,color3],context,index3),textStrokeWidth:resolve([config.textStrokeWidth,0],context,index3)};},update:function update(context){var me=this;var model=null;var rects=null;var index3=me._index;var config=me._config;var value,label,lines;var display=resolve([config.display,true],context,index3);if(display){value=context.dataset.data[index3];label=valueOrDefault(callback(config.formatter,[value,context]),value);lines=isNullOrUndef(label)?[]:utils.toTextLines(label);if(lines.length){model=me._modelize(display,lines,config,context);rects=boundingRects2(model);}}me._model=model;me._rects=rects;},geometry:function geometry(){return this._rects?this._rects.frame:{};},rotation:function rotation(){return this._model?this._model.rotation:0;},visible:function visible(){return this._model&&this._model.opacity;},model:function model(){return this._model;},draw:function draw(chart,center){var me=this;var ctx=chart.ctx;var model=me._model;var rects=me._rects;var area;if(!this.visible()){return;}ctx.save();if(model.clip){area=model.area;ctx.beginPath();ctx.rect(area.left,area.top,area.right-area.left,area.bottom-area.top);ctx.clip();}ctx.globalAlpha=utils.bound(0,model.opacity,1);ctx.translate(rasterize(center.x),rasterize(center.y));ctx.rotate(model.rotation);drawFrame(ctx,rects.frame,model);drawText(ctx,model.lines,rects.text,model);ctx.restore();}});var MIN_INTEGER=Number.MIN_SAFE_INTEGER||-9007199254740991;var MAX_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;function rotated2(point,center,angle){var cos=Math.cos(angle);var sin=Math.sin(angle);var cx=center.x;var cy=center.y;return{x:cx+cos*(point.x-cx)-sin*(point.y-cy),y:cy+sin*(point.x-cx)+cos*(point.y-cy)};}function projected(points,axis){var min3=MAX_INTEGER;var max3=MIN_INTEGER;var origin=axis.origin;var i,pt,vx,vy,dp;for(i=0;i<points.length;++i){pt=points[i];vx=pt.x-origin.x;vy=pt.y-origin.y;dp=axis.vx*vx+axis.vy*vy;min3=Math.min(min3,dp);max3=Math.max(max3,dp);}return{min:min3,max:max3};}function toAxis(p0,p1){var vx=p1.x-p0.x;var vy=p1.y-p0.y;var ln=Math.sqrt(vx*vx+vy*vy);return{vx:(p1.x-p0.x)/ln,vy:(p1.y-p0.y)/ln,origin:p0,ln:ln};}var HitBox=function HitBox(){this._rotation=0;this._rect={x:0,y:0,w:0,h:0};};merge(HitBox.prototype,{center:function center(){var r=this._rect;return{x:r.x+r.w/2,y:r.y+r.h/2};},update:function update(center,rect,rotation){this._rotation=rotation;this._rect={x:rect.x+center.x,y:rect.y+center.y,w:rect.w,h:rect.h};},contains:function contains(point){var me=this;var margin=1;var rect=me._rect;point=rotated2(point,me.center(),-me._rotation);return!(point.x<rect.x-margin||point.y<rect.y-margin||point.x>rect.x+rect.w+margin*2||point.y>rect.y+rect.h+margin*2);},// Separating Axis Theorem
// https://gamedevelopment.tutsplus.com/tutorials/collision-detection-using-the-separating-axis-theorem--gamedev-169
intersects:function intersects(other){var r0=this._points();var r1=other._points();var axes=[toAxis(r0[0],r0[1]),toAxis(r0[0],r0[3])];var i,pr0,pr1;if(this._rotation!==other._rotation){axes.push(toAxis(r1[0],r1[1]),toAxis(r1[0],r1[3]));}for(i=0;i<axes.length;++i){pr0=projected(r0,axes[i]);pr1=projected(r1,axes[i]);if(pr0.max<pr1.min||pr1.max<pr0.min){return false;}}return true;},/**
     * @private
     */_points:function _points(){var me=this;var rect=me._rect;var angle=me._rotation;var center=me.center();return[rotated2({x:rect.x,y:rect.y},center,angle),rotated2({x:rect.x+rect.w,y:rect.y},center,angle),rotated2({x:rect.x+rect.w,y:rect.y+rect.h},center,angle),rotated2({x:rect.x,y:rect.y+rect.h},center,angle)];}});function coordinates(el,model,geometry){var point=model.positioner(el,model);var vx=point.vx;var vy=point.vy;if(!vx&&!vy){return{x:point.x,y:point.y};}var w=geometry.w;var h=geometry.h;var rotation=model.rotation;var dx=Math.abs(w/2*Math.cos(rotation))+Math.abs(h/2*Math.sin(rotation));var dy=Math.abs(w/2*Math.sin(rotation))+Math.abs(h/2*Math.cos(rotation));var vs=1/Math.max(Math.abs(vx),Math.abs(vy));dx*=vx*vs;dy*=vy*vs;dx+=model.offset*vx;dy+=model.offset*vy;return{x:point.x+dx,y:point.y+dy};}function collide(labels,collider){var i,j,s0,s1;for(i=labels.length-1;i>=0;--i){s0=labels[i].$layout;for(j=i-1;j>=0&&s0._visible;--j){s1=labels[j].$layout;if(s1._visible&&s0._box.intersects(s1._box)){collider(s0,s1);}}}return labels;}function compute(labels){var i,ilen,label,state,geometry,center,proxy;for(i=0,ilen=labels.length;i<ilen;++i){label=labels[i];state=label.$layout;if(state._visible){proxy=new Proxy(label._el,{get:function get(el,p){return el.getProps([p],true)[p];}});geometry=label.geometry();center=coordinates(proxy,label.model(),geometry);state._box.update(center,geometry,label.rotation());}}return collide(labels,function(s0,s1){var h0=s0._hidable;var h12=s1._hidable;if(h0&&h12||h12){s1._visible=false;}else if(h0){s0._visible=false;}});}var layout={prepare:function prepare(datasets){var labels=[];var i,j,ilen,jlen,label;for(i=0,ilen=datasets.length;i<ilen;++i){for(j=0,jlen=datasets[i].length;j<jlen;++j){label=datasets[i][j];labels.push(label);label.$layout={_box:new HitBox(),_hidable:false,_visible:true,_set:i,_idx:label._index};}}labels.sort(function(a,b){var sa=a.$layout;var sb=b.$layout;return sa._idx===sb._idx?sb._set-sa._set:sb._idx-sa._idx;});this.update(labels);return labels;},update:function update(labels){var dirty=false;var i,ilen,label,model,state;for(i=0,ilen=labels.length;i<ilen;++i){label=labels[i];model=label.model();state=label.$layout;state._hidable=model&&model.display==="auto";state._visible=label.visible();dirty|=state._hidable;}if(dirty){compute(labels);}},lookup:function lookup(labels,point){var i,state;for(i=labels.length-1;i>=0;--i){state=labels[i].$layout;if(state&&state._visible&&state._box.contains(point)){return labels[i];}}return null;},draw:function draw(chart,labels){var i,ilen,label,state,geometry,center;for(i=0,ilen=labels.length;i<ilen;++i){label=labels[i];state=label.$layout;if(state._visible){geometry=label.geometry();center=coordinates(label._el,label.model(),geometry);state._box.update(center,geometry,label.rotation());label.draw(chart,center);}}}};var formatter=function formatter(value){if(isNullOrUndef(value)){return null;}var label=value;var keys,klen,k;if(isObject(value)){if(!isNullOrUndef(value.label)){label=value.label;}else if(!isNullOrUndef(value.r)){label=value.r;}else{label="";keys=Object.keys(value);for(k=0,klen=keys.length;k<klen;++k){label+=(k!==0?", ":"")+keys[k]+": "+value[keys[k]];}}}return""+label;};var defaults2={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:false,clip:false,color:void 0,display:true,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:formatter,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0};var EXPANDO_KEY2="$datalabels";var DEFAULT_KEY="$default";function configure(dataset,options){var override=dataset.datalabels;var listeners={};var configs=[];var labels,keys;if(override===false){return null;}if(override===true){override={};}options=merge({},[options,override]);labels=options.labels||{};keys=Object.keys(labels);delete options.labels;if(keys.length){keys.forEach(function(key){if(labels[key]){configs.push(merge({},[options,labels[key],{_key:key}]));}});}else{configs.push(options);}listeners=configs.reduce(function(target,config){each(config.listeners||{},function(fn,event){target[event]=target[event]||{};target[event][config._key||DEFAULT_KEY]=fn;});delete config.listeners;return target;},{});return{labels:configs,listeners:listeners};}function dispatchEvent3(chart,listeners,label,event){if(!listeners){return;}var context=label.$context;var groups2=label.$groups;var callback$1;if(!listeners[groups2._set]){return;}callback$1=listeners[groups2._set][groups2._key];if(!callback$1){return;}if(callback(callback$1,[context,event])===true){chart[EXPANDO_KEY2]._dirty=true;label.update(context);}}function dispatchMoveEvents2(chart,listeners,previous,label,event){var enter,leave;if(!previous&&!label){return;}if(!previous){enter=true;}else if(!label){leave=true;}else if(previous!==label){leave=enter=true;}if(leave){dispatchEvent3(chart,listeners.leave,previous,event);}if(enter){dispatchEvent3(chart,listeners.enter,label,event);}}function handleMoveEvents2(chart,event){var expando=chart[EXPANDO_KEY2];var listeners=expando._listeners;var previous,label;if(!listeners.enter&&!listeners.leave){return;}if(event.type==="mousemove"){label=layout.lookup(expando._labels,event);}else if(event.type!=="mouseout"){return;}previous=expando._hovered;expando._hovered=label;dispatchMoveEvents2(chart,listeners,previous,label,event);}function handleClickEvents2(chart,event){var expando=chart[EXPANDO_KEY2];var handlers=expando._listeners.click;var label=handlers&&layout.lookup(expando._labels,event);if(label){dispatchEvent3(chart,handlers,label,event);}}var plugin={id:"datalabels",defaults:defaults2,beforeInit:function beforeInit(chart){chart[EXPANDO_KEY2]={_actives:[]};},beforeUpdate:function beforeUpdate(chart){var expando=chart[EXPANDO_KEY2];expando._listened=false;expando._listeners={};expando._datasets=[];expando._labels=[];},afterDatasetUpdate:function afterDatasetUpdate(chart,args,options){var datasetIndex=args.index;var expando=chart[EXPANDO_KEY2];var labels=expando._datasets[datasetIndex]=[];var visible=chart.isDatasetVisible(datasetIndex);var dataset=chart.data.datasets[datasetIndex];var config=configure(dataset,options);var elements2=args.meta.data||[];var ctx=chart.ctx;var i,j,ilen,jlen,cfg,key,el,label;ctx.save();for(i=0,ilen=elements2.length;i<ilen;++i){el=elements2[i];el[EXPANDO_KEY2]=[];if(visible&&el&&chart.getDataVisibility(i)&&!el.skip){for(j=0,jlen=config.labels.length;j<jlen;++j){cfg=config.labels[j];key=cfg._key;label=new Label(cfg,ctx,el,i);label.$groups={_set:datasetIndex,_key:key||DEFAULT_KEY};label.$context={active:false,chart:chart,dataIndex:i,dataset:dataset,datasetIndex:datasetIndex};label.update(label.$context);el[EXPANDO_KEY2].push(label);labels.push(label);}}}ctx.restore();merge(expando._listeners,config.listeners,{merger:function merger(event,target,source){target[event]=target[event]||{};target[event][args.index]=source[event];expando._listened=true;}});},afterUpdate:function afterUpdate(chart){chart[EXPANDO_KEY2]._labels=layout.prepare(chart[EXPANDO_KEY2]._datasets);},// Draw labels on top of all dataset elements
// https://github.com/chartjs/chartjs-plugin-datalabels/issues/29
// https://github.com/chartjs/chartjs-plugin-datalabels/issues/32
afterDatasetsDraw:function afterDatasetsDraw(chart){layout.draw(chart,chart[EXPANDO_KEY2]._labels);},beforeEvent:function beforeEvent(chart,args){if(chart[EXPANDO_KEY2]._listened){var event=args.event;switch(event.type){case"mousemove":case"mouseout":handleMoveEvents2(chart,event);break;case"click":handleClickEvents2(chart,event);break;}}},afterEvent:function afterEvent(chart){var expando=chart[EXPANDO_KEY2];var previous=expando._actives;var actives=expando._actives=chart.getActiveElements();var updates=utils.arrayDiff(previous,actives);var i,ilen,j,jlen,update,label,labels;for(i=0,ilen=updates.length;i<ilen;++i){update=updates[i];if(update[1]){labels=update[0].element[EXPANDO_KEY2]||[];for(j=0,jlen=labels.length;j<jlen;++j){label=labels[j];label.$context.active=update[1]===1;label.update(label.$context);}}}if(expando._dirty||updates.length){layout.update(expando._labels);chart.render();}delete expando._dirty;}};// src/data/schema/flagCounts.json
var flagCounts_default={title:"Flag Counts",description:"JSON schema of discrete input data to timeSeries modules",version:"0.14.0",type:"array",modules:{sparkline:{required:true},timeSeries:{required:true}},items:{type:"object",required:["GroupID","MetricID","n","n_at_risk","n_flagged","n_at_risk_or_flagged"],properties:{StudyID:{title:"Study ID",description:"Unique study identifier",type:"string",required:false,key:true},GroupID:{title:"Group ID",description:"Unique group identifier",type:"string",required:true,key:true,alternate:"MetricID"},MetricID:{title:"Metric ID",description:"Unique workflow identifier",type:"string",required:true,key:true,alternate:"GroupID"},n:{title:"# of Groups/Metrics",description:"Total number of assessed groups/Metrics",type:"number",required:true,key:false},n_at_risk:{title:"# of Amber Groups/Metrics",description:"Number of amber groups/Metrics",type:"number",required:true,key:false},n_flagged:{title:"# of Red Groups/Metrics",description:"Number of red groups/Metrics",type:"number",required:true,key:false},n_at_risk_or_flagged:{title:"# of Amber of Red Groups/Metrics",description:"Number of amber or red groups/Metrics",type:"number",required:true,key:false}}}};// src/data/schema/groupMetadata.json
var groupMetadata_default={title:"Group Metadata",description:"JSON schema of group metadata",version:"0.14.0",type:"array",modules:{barChart:{required:false},groupOverview:{required:true},scatterPlot:{required:false},timeSeries:{required:false}},items:{type:"object",required:["GroupLevel","GroupID","Param","Value"],properties:{GroupLevel:{title:"Grouping Variable",description:"Grouping variable of analysis, one of Site, Country, or Study",type:"string",required:true,key:true},GroupID:{title:"Group ID",description:"Unique group identifier",type:"string",required:true,key:true},Param:{title:"Group Attribute Name",description:"Name of group attribute",type:"string",required:true,key:true},Value:{title:"Group Attribute Value",description:"Value of group attribute",type:"string",required:true,key:false}}}};// src/data/schema/metricMetadata.json
var metricMetadata_default={title:"Metric Metadata",description:"JSON schema of metric metadata, the default configuration of the barChart, scatterPlot, timeSeries, and sparkline modules",version:"0.14.0",type:"array",modules:{groupOverview:{required:true}},items:{type:"object",required:["MetricID","GroupLevel","Numerator","Denominator","Metric","Score","Abbreviation"]}};// src/data/schema/metricMetadatum.json
var metricMetadatum_default={title:"Metric Metadata",description:"JSON schema of metric metadata, the default configuration of the barChart, scatterPlot, timeSeries, and sparkline modules",version:"0.14.0",type:"object",modules:{barChart:{required:false},groupOverview:{required:true},scatterPlot:{required:false},sparkline:{required:false},timeSeries:{required:false}},required:["MetricID","GroupLevel","Numerator","Denominator","Metric","Outcome","Score","Abbreviation"],properties:{MetricID:{title:"Metric ID",description:"Unique metric identifier",type:"string",required:false},GroupLevel:{title:"Grouping Variable",description:"Grouping variable of metric, one of 'Site', 'Country', or 'Study'",type:"string",required:false},Numerator:{title:"Metric Numerator",description:"Unit of metric numerator",type:"string",required:false,key:false},Denominator:{title:"Metric Denominator",description:"Unit of metric denominator",type:"string",required:false,key:false},Metric:{title:"Metric Description",description:"Description of metric",type:"string",required:false,key:false},Outcome:{title:"Metric Type",description:"Type of metric",type:"string",required:false,key:false},Score:{title:"Metric Score",description:"Analysis method of metric",type:"string",required:false,key:false},Thresholds:{title:"Thresholds",description:"Thresholds with which to flag scores",type:"string",required:false,key:false},Model:{title:"Metric Score Method",description:"Statistical model used to evaluate Metric",type:"string",required:false,key:false},Abbreviation:{title:"Abbreviation",description:"Metric Abbreviation",type:"string",required:false,key:false}}};// src/data/schema/results.json
var results_default={title:"Standard Metric Analysis Output",description:"JSON schema of input data to barChart and scatterPlot modules",version:"0.14.0",type:"array",modules:{barChart:{required:true},groupOverview:{required:true},scatterPlot:{required:true},sparkline:{required:true},timeSeries:{required:true}},items:{type:"object",required:["StudyID","MetricID","GroupLevel","GroupID","Numerator","Denominator","Metric","Score","Flag","SnapshotDate"],properties:{StudyID:{title:"Study ID",description:"Unique study identifier",type:"string",required:false,key:true},MetricID:{title:"Metric ID",description:"Unique workflow identifier",type:"string",required:false,key:true},GroupLevel:{title:"Group Level",description:"Group level",type:"number",required:true,key:true},GroupID:{title:"Group ID",description:"Unique group identifier",type:"string",required:true,key:true},Numerator:{title:"Numerator",description:"Metric numerator",type:"number",required:true,key:false},Denominator:{title:"Denominator",description:"Metric denominator",type:"number",required:true,key:false},Metric:{title:"Metric Value",description:"Metric value",type:"number",required:true,key:false},Score:{title:"Metric Score",description:"Metric score",type:"number",required:true,key:false},Flag:{title:"Flag Status",description:"Flag assigned given metric score and specified thresholds",type:"number",required:true,key:false},SnapshotDate:{title:"Snapshot Date",description:"Date of data refresh",type:"string",required:false,key:false}}}};// src/data/schema/resultsPredicted.json
var resultsPredicted_default={title:"Predicted Metric Analysis Output",description:"JSON schema of predicted input data to scatterPlot module",version:"0.14.0",type:"array",modules:{scatterPlot:{required:false}},items:{type:"object",required:["Numerator","Denominator","Threshold"],properties:{StudyID:{title:"Study ID",description:"Unique study identifier",type:"string",required:false,key:true},MetricID:{title:"Metric ID",description:"Unique workflow identifier",type:"string",required:false,key:true},Threshold:{title:"Threshold",description:"Directional factor of predicted results",type:"number",required:true,key:true},Numerator:{title:"Predicted Numerator",description:"Predicted numerator of Metric metric",type:"number",required:true,key:false},Denominator:{title:"Predicted Denominator",description:"Predicted denominator of Metric metric",type:"number",required:true,key:false},LogDenominator:{title:"Predicted Denominator (log)",description:"Predicted Denominator of Metric metric (log)",type:"number",required:false,key:false},SnapshotDate:{title:"Snapshot Date",description:"Date of data refresh",type:"string",required:false,key:false}}}};// src/data/schema/resultsVertical.json
var resultsVertical_default={title:"Additional Metric Analysis Output",description:"JSON schema of ancillary input data to timeSeries module",version:"0.14.0",type:"array",modules:{timeSeries:{required:false}},items:{type:"object",required:["Param","Value"],properties:{StudyID:{title:"Study ID",description:"Unique study identifier",type:"string",required:false,key:true},MetricID:{title:"Metric ID",description:"Unique workflow identifier",type:"string",required:false,key:true},Param:{title:"Analysis Parameter",description:"Analysis parameter",type:"string",required:true,key:true},Value:{title:"Analysis Result",description:"Analysis result",type:"number",required:true,key:false},SnapshotDate:{title:"Snapshot Date",description:"Date of data refresh",type:"string",required:false,key:false}}}};// src/data/schema/snapshotDate.json
var snapshotDate_default={title:"Snapshot Date",description:"Date of data refresh",type:"string",required:true,key:true};// src/data/schema/thresholds.json
var thresholds_default={title:"Thresholds",description:"Threshold values",type:"array",modules:{barChart:{required:false},sparkline:{required:false},timeSeries:{required:false}},items:{type:"number"}};// src/data/schema/index.js
metricMetadata_default.items.properties=metricMetadatum_default.properties;var schemata={flagCounts:flagCounts_default,groupMetadata:groupMetadata_default,metricMetadata:metricMetadata_default,metricMetadatum:metricMetadatum_default,results:results_default,resultsPredicted:resultsPredicted_default,resultsVertical:resultsVertical_default,thresholds:thresholds_default,snapshotDate:snapshotDate_default};var schema_default=schemata;// src/data/checkInput/getType.js
function getType(variable){var variableType=_typeof(variable);if(variable instanceof Array)variableType="array";if(variable instanceof Map)variableType="map";if(variable instanceof Set)variableType="set";if(variable instanceof Function)variableType="function";return variableType;}// src/data/checkInput/checkProps.js
function checkProps(_ref37){var obj=_ref37.obj,properties=_ref37.properties,_ref37$parameter=_ref37.parameter,parameter=_ref37$parameter===void 0?null:_ref37$parameter,_ref37$module=_ref37.module,module=_ref37$module===void 0?null:_ref37$module,_ref37$i=_ref37.i,i=_ref37$i===void 0?null:_ref37$i;var actualProps=Object.keys(obj);var expectedProps=Object.keys(properties);var requiredProps=expectedProps.filter(function(prop){return properties[prop].required;});var alternateProps=expectedProps.filter(function(prop){return properties[prop].alternate!==void 0;});var _iterator59=_createForOfIteratorHelper(requiredProps),_step59;try{for(_iterator59.s();!(_step59=_iterator59.n()).done;){var requiredProp=_step59.value;if(actualProps.includes(requiredProp)===false){if(actualProps.some(function(actualProp){return alternateProps.includes(actualProp);})===false){var message="Missing property: [ ".concat(requiredProp," ] property expected but not found");if(i!==null)message="".concat(message," in item ").concat(i);if(parameter!==null)message="".concat(message," ").concat(i===null?"in":"of"," [ ").concat(parameter," ] argument");if(module!==null)message="".concat(message," to [ ").concat(module,"() ]");throw new Error("".concat(message,"."));}}}}catch(err){_iterator59.e(err);}finally{_iterator59.f();}}// src/data/checkInput.js
function checkInput(_ref38){var _ref38$parameter=_ref38.parameter,parameter=_ref38$parameter===void 0?null:_ref38$parameter,_ref38$argument=_ref38.argument,argument=_ref38$argument===void 0?null:_ref38$argument,_ref38$schemaName=_ref38.schemaName,schemaName=_ref38$schemaName===void 0?null:_ref38$schemaName,_ref38$module=_ref38.module,module=_ref38$module===void 0?null:_ref38$module,_ref38$verbose=_ref38.verbose,verbose=_ref38$verbose===void 0?false:_ref38$verbose;if(schemaName===null){if(verbose)console.log("[ ".concat(schemaName," ] unspecified. Terminating execution of [ checkInputs() ]."));return;}if(!Object.keys(schema_default).includes(schemaName)){throw new Error("Schema [ ".concat(schemaName," ] not found."));}var schema=JSON.parse(JSON.stringify(schema_default[schemaName]));if(Object.keys(schema.modules).includes(module)){var required=schema.modules[module].required;if([void 0,null].includes(argument)){if(required){throw new Error("Missing value: [ ".concat(parameter," ] argument to [ ").concat(module,"() ] is required."));}else{if(verbose)console.log("[ ".concat(parameter," ] unspecified. Terminating execution of [ checkInputs() ]."));return;}}}else{if(verbose)console.log("Module [ ".concat(module," ] not referenced in schema [ ").concat(schemaName," ]."));}if(module==="timeSeries"&&["flagCounts","results","resultsVertical"].includes(schemaName)){schema.items.properties.SnapshotDate=schema_default.snapshotDate;}var argumentType=getType(argument);if(argumentType!==schema.type){throw new Error("Incorrect data type: [ ".concat(schema.type," ] expected but [ ").concat(argumentType," ] detected for [ ").concat(parameter," ] argument to [ ").concat(module,"() ]."));}if(schema.type==="array"){if(argument.length===0){if(verbose){console.log("Empty array: [ ".concat(parameter," ] argument to [ ").concat(module,"() ] contains zero elements."));}}argument.forEach(function(item,i){var itemType=getType(item);if(itemType!==schema.items.type){throw new Error("Incorrect data type: [ ".concat(schema.items.type," ] expected but [ ").concat(itemType," ] detected for item ").concat(i," of [ ").concat(parameter," ] argument to [ ").concat(module,"() ]."));}if(schema.items.type==="object"){var properties=schema.items.properties;checkProps({obj:item,properties:properties,parameter:parameter,module:module,i:i});}});}if(schema.type==="object"){var properties=schema.properties;checkProps({obj:argument,properties:properties,parameter:parameter,module:module});}return;}// src/barChart/checkInputs.js
function checkInputs(_results_,_config_,_thresholds_,_groupMetadata_){checkInput({parameter:"_results_",argument:_results_,schemaName:"results",module:"barChart"});checkInput({parameter:"_config_",argument:_config_,schemaName:"metricMetadatum",module:"barChart"});checkInput({parameter:"_thresholds_",argument:_thresholds_,schemaName:"thresholds",module:"barChart"});if(_groupMetadata_!==null){checkInput({parameter:"_groupMetadata_",argument:_groupMetadata_,schemaName:"groupMetadata",module:"barChart"});}}// src/util/coalesce.js
function coalesce(customSetting,defaultSetting){if([null,void 0].includes(customSetting)){return defaultSetting;}if(typeof defaultSetting==="string"&&customSetting===""){return defaultSetting;}if(Array.isArray(defaultSetting)&&!Array.isArray(customSetting)){customSetting=[customSetting];}if(Array.isArray(defaultSetting)&&Array.isArray(customSetting)&&customSetting[0]===""){return defaultSetting;}return customSetting;}// src/util/configure.js
function configure2(defaults3,_config_){var customSettings=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var config=_objectSpread({},_config_);for(var key in defaults3){config[key]=coalesce(config[key],defaults3[key]);}if(customSettings!==null){for(var _key20 in customSettings){config[_key20]=customSettings[_key20]();}}return config;}// src/util/checkSelectedGroupIDs.js
function checkSelectedGroupIDs(selectedGroupIDs,_data_){if(["",null,void 0].includes(selectedGroupIDs)||Array.isArray(selectedGroupIDs)&&selectedGroupIDs.length===0)return[];if(!Array.isArray(selectedGroupIDs))selectedGroupIDs=[selectedGroupIDs];if(Array.isArray(selectedGroupIDs)){var actualGroupIDs=_toConsumableArray(new Set(_data_.map(function(d){return d.GroupID;})));var _iterator60=_createForOfIteratorHelper(selectedGroupIDs),_step60;try{var _loop3=function _loop3(){var selectedGroupID=_step60.value;if(actualGroupIDs.includes(selectedGroupID)===false)selectedGroupIDs=selectedGroupIDs.filter(function(groupID){return groupID!==selectedGroupID;});};for(_iterator60.s();!(_step60=_iterator60.n()).done;){_loop3();}}catch(err){_iterator60.e(err);}finally{_iterator60.f();}}return selectedGroupIDs;}// src/util/mapThresholdsToFlags.js
function mapThresholdsToFlags(_thresholds_){var thresholds2=_toConsumableArray(new Set(_thresholds_)).map(function(Threshold){return+Threshold;});var negativeThresholds=thresholds2.filter(function(Threshold){return Threshold<0;}).sort(descending);var negativeFlags=negativeThresholds.map(function(Threshold,i){return{Threshold:Threshold,Flag:-(i+1)};});if(negativeThresholds.length>2){console.warn("More than two negative thresholds present. Threshold annotations will not be displayed.");return null;}var positiveThresholds=thresholds2.filter(function(Threshold){return Threshold>0;}).sort(ascending);var positiveFlags=positiveThresholds.map(function(Threshold,i){return{Threshold:Threshold,Flag:i+1};});if(positiveThresholds.length>2){console.warn("More than two positive thresholds present. Threshold annotations will not be displayed.");return null;}var zeroFlag=thresholds2.filter(function(Threshold){return Threshold===0;}).map(function(Threshold){return{Threshold:Threshold,Flag:0};});var flags=[].concat(_toConsumableArray(negativeFlags),_toConsumableArray(zeroFlag),_toConsumableArray(positiveFlags)).sort(function(a,b){return a.Flag-b.Flag;});flags.descending=false;if(negativeThresholds.length===0&&thresholds2.join(",")!==thresholds2.map(function(threshold){return threshold;}).sort(ascending).join(",")){flags=thresholds2.map(function(Threshold,i){return{Threshold:Threshold,Flag:i+1};});flags.descending=true;}return flags;}// src/util/checkThresholds.js
function checkThresholds(_config_,_thresholds_){var thresholds2=(_config_===null||_config_===void 0?void 0:_config_.thresholds)||_thresholds_||[];if(_config_!==null&&_config_!==void 0&&_config_.variableThresholds)return null;if(Array.isArray(thresholds2)&&thresholds2.length>0&&thresholds2.every(function(Threshold){return _typeof(Threshold)==="object"&&Threshold.hasOwnProperty("Threshold")&&Threshold.hasOwnProperty("Flag");}))return thresholds2;if(thresholds2.filter(function(Threshold){return Threshold!==0;}).length>4){console.warn("More than four non-zero thresholds present. Threshold annotations will not be displayed.");return null;}return mapThresholdsToFlags(thresholds2);}// src/util/updateSelectedGroupDatum.js
function updateSelectedGroupDatum(results,selectedGroupIDs){if(selectedGroupIDs.length!==1)return{};var result=results.sort(function(a,b){return descending(a.SnapshotDate,b.SnapshotDate);}).find(function(d){return selectedGroupIDs.includes(d.GroupID);});var selectedGroupDatum=results_default.items.required.reduce(function(acc,item){acc[item]=result[item];return acc;},{});return selectedGroupDatum;}// src/util/addCanvas/getCallbackWrapper.js
function getCallbackWrapper(callback2){var callbackWrapper=function callbackWrapper(event){var pointDatum=event.data;callback2(pointDatum);return pointDatum;};return callbackWrapper;}// src/barChart/configure.js
function configure3(_config_,_results_,_thresholds_){var defaults3={};defaults3.GroupLevel="Site";defaults3.groupLabelKey="InvestigatorLastName";defaults3.groupParticipantCountKey="ParticipantCount";defaults3.groupTooltipKeys=null;defaults3.x="GroupID";defaults3.xType="category";defaults3.y="Score";defaults3.yType="linear";defaults3.color="Flag";defaults3.hoverCallback=function(datum2){};defaults3.clickCallback=function(datum2){console.log(datum2);};defaults3.displayTitle=false;defaults3.maintainAspectRatio=false;var config=configure2(defaults3,_config_||{},{selectedGroupIDs:checkSelectedGroupIDs.bind(null,_config_===null||_config_===void 0?void 0:_config_.selectedGroupIDs,_results_),thresholds:checkThresholds.bind(null,_config_,_thresholds_)});config.selectedGroupDatum=updateSelectedGroupDatum(_results_,config.selectedGroupIDs);config.xLabel=coalesce(_config_===null||_config_===void 0?void 0:_config_.xLabel,config["Group"]);config.yLabel=coalesce(_config_===null||_config_===void 0?void 0:_config_.yLabel,config[config.y]);config.chartName="Bar Chart of ".concat(config.yLabel," by ").concat(config.xLabel);if(config.y!=="Score")delete config.thresholds;if(config.hoverCallbackWrapper===void 0)config.hoverCallbackWrapper=getCallbackWrapper(config.hoverCallback);if(config.clickCallbackWrapper===void 0)config.clickCallbackWrapper=getCallbackWrapper(config.clickCallback);return config;}// src/util/addCanvas/addCustomEvent.js
function addCustomEvent(canvas,callback2,eventType){var callbackWrapper=getCallbackWrapper(callback2);var eventID="".concat(eventType,"-event");canvas.removeEventListener(eventID,callback2,false);var customEvent=new Event(eventID,{bubbles:true});canvas.addEventListener(eventID,callback2,false);return customEvent;}// src/util/addCanvas.js
function addCanvas(_element_,config){var canvas;if(_element_.nodeName&&_element_.nodeName.toLowerCase()==="canvas"){if(_element_.hasOwnProperty("chart"))_element_.chart.destroy();canvas=_element_;}else{var newCanvas=document.createElement("canvas");var oldCanvas=_element_.getElementsByTagName("canvas")[0];if(oldCanvas!==void 0){if(oldCanvas.hasOwnProperty("chart"))oldCanvas.chart.destroy();oldCanvas.replaceWith(newCanvas);}else{_element_.appendChild(newCanvas);}canvas=newCanvas;}canvas.hoverEvent=addCustomEvent(canvas,config.hoverCallbackWrapper,"hover");canvas.clickEvent=addCustomEvent(canvas,config.clickCallbackWrapper,"click");canvas.riskSignalSelected=new CustomEvent("riskSignalSelected",{bubbles:true});return canvas;}// src/util/structureGroupMetadata.js
function structureGroupMetadata(groupMetadata,config){if(groupMetadata===null)return null;var structuredGroupMetadata=rollup(groupMetadata,function(group2){return group2.reduce(function(acc,cur){acc[cur.Param]=cur.Value;return acc;},{});},function(d){return d.GroupLevel;},function(d){return d.GroupID;});var keys=Array.from(structuredGroupMetadata.keys());if(keys.includes(config.GroupLevel)){return structuredGroupMetadata.get(config.GroupLevel);}else{console.warn("Group level \"".concat(config.GroupLevel,"\" not found in group metadata."));return null;}}// src/util/falsy.js
var falsy=[void 0,null,NaN,"","NA"];var falsy_default=falsy;// src/barChart/structureData/mutate.js
function mutate(_results_,config){var groupMetadata=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var data=_results_.map(function(d){if(groupMetadata!==null){var group2=groupMetadata.get(d.GroupID);if(group2!==void 0){d.group=group2;d.group.groupLabel=d.group.hasOwnProperty(config.groupLabelKey)?d.group[config.groupLabelKey]:d.GroupID;}}var datum2=_objectSpread(_objectSpread({},d),{},{x:d[config.x],y:falsy_default.includes(d[config.y])?0:+d[config.y],stratum:falsy_default.includes(d[config.color])?3:Math.abs(+d[config.color])});return datum2;}).sort(function(a,b){return b.y-a.y;});return data;}// src/util/colorScheme.js
var colorScheme=[{color:"#3DAF06",order:0,description:"Green Flag",Flag:[0]},{color:"#FEAA02",order:1,description:"Amber Flag",Flag:[-1,1]},{color:"#FF5859",order:2,description:"Red Flag",Flag:[-2,2]},{color:"#828282",order:3,description:"No Flag",Flag:falsy_default}];colorScheme.forEach(function(color3){color3.rgba=color2(color3.color);});colorScheme.green=colorScheme.find(function(c){return c.order===0;});colorScheme.amber=colorScheme.find(function(c){return c.order===1;});colorScheme.red=colorScheme.find(function(c){return c.order===2;});colorScheme.gray=colorScheme.find(function(c){return c.Flag===falsy_default;});var amber=colorScheme.amber;var red=colorScheme.red;colorScheme.amberRed={color:"rgb(".concat(Math.round((amber.rgba.r+red.rgba.r)/2),",").concat(Math.round((amber.rgba.g+red.rgba.g)/2),",").concat(Math.round((amber.rgba.b+red.rgba.b)/2),")"),order:-1,description:"Amber or Red Flag",Flag:[].concat(_toConsumableArray(amber.Flag),_toConsumableArray(red.Flag)).sort(ascending),rgba:color2("rgb(".concat(Math.round((amber.rgba.r+red.rgba.r)/2),",").concat(Math.round((amber.rgba.g+red.rgba.g)/2),",").concat(Math.round((amber.rgba.b+red.rgba.b)/2),")"))};var colorScheme_default=colorScheme;// src/barChart/structureData/scriptableOptions/backgroundColor.js
function backgroundColor(context,options){var chart=context.chart;var config=chart.data.config;var dataset=context.dataset;var datum2=dataset.data[context.dataIndex];if(datum2!==void 0&&dataset.type==="bar"){var color3=colorScheme_default[datum2.stratum];color3.rgba.opacity=config.selectedGroupIDs.includes(datum2.GroupID)|config.selectedGroupIDs.length===0?1:0.25;return color3.rgba+"";}}// src/barChart/structureData/scriptableOptions.js
function scriptableOptions(){return{backgroundColor:backgroundColor//borderColor,
};}// src/barChart/structureData.js
function structureData(_results_,config){var _groupMetadata_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var groupMetadata=structureGroupMetadata(_groupMetadata_,config);var data=mutate(_results_,config,groupMetadata);var datasets=[_objectSpread(_objectSpread({type:"bar",data:data,listenClick:true,listenHover:true,label:""},scriptableOptions()),{},{minBarLength:2,grouped:false})].concat(_toConsumableArray(colorScheme_default.map(function(color3){return{type:"bar",label:color3.description,backgroundColor:color3.color};})));return datasets;}// src/util/identifyDuplicatePoints.js
function identifyDuplicatePoints(data,config){var mutate5=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var numericGroupIDs=data.every(function(d){return /^\d+$/.test(d.GroupID);});data.sort(function(a,b){var x=ascending(a[config.x],b[config.x]);var y=ascending(a[config.y],b[config.y]);var selected=config.selectedGroupIDs.includes(b.GroupID)-config.selectedGroupIDs.includes(a.GroupID);var GroupID=numericGroupIDs?ascending(+a.GroupID,+b.GroupID):ascending(a.GroupID,b.GroupID);return x||y||selected||GroupID;});if(mutate5)rollup(data,function(Group){Group.forEach(function(d,i){d.duplicate=i>0;});},function(d){return d[config.x];},function(d){return d[config.y];});}// src/util/getElementDatum.js
function getElementDatum(activeElements,chart){var element=activeElements.sort(function(a,b){return b.index-a.index;}// retrieve first element by index in dataset
)[0];var data=chart.data.datasets[element.datasetIndex].data;var activeData=data.filter(function(d,i){return activeElements.map(function(activeElement){return activeElement.index;}).includes(i);});identifyDuplicatePoints(activeData,chart.data.config,false);var datum2=activeData[0];return datum2;}// src/util/onClick.js
function onClick(event,activeElements,chart){var canvas=chart.canvas;if(activeElements.length&&chart.data.datasets[activeElements[0].datasetIndex].listenClick===true){var datum2=getElementDatum(activeElements,chart);canvas.clickEvent.data=updateSelectedGroupDatum([datum2],[datum2.GroupID]);canvas.dispatchEvent(canvas.clickEvent);canvas.riskSignalSelected.data=updateSelectedGroupDatum([datum2],[datum2.GroupID]);canvas.dispatchEvent(canvas.riskSignalSelected);}}// src/util/onHover.js
function onHover(event,activeElements,chart){var canvas=chart.canvas;if(activeElements.length&&chart.data.datasets[activeElements[0].datasetIndex].listenHover===true){event["native"].target.style.cursor="pointer";var datum2=getElementDatum(activeElements,chart);canvas.hoverEvent.data=updateSelectedGroupDatum([datum2],[datum2.GroupID]);canvas.dispatchEvent(canvas.hoverEvent);}else{event["native"].target.style.cursor="default";}}// src/barChart/getPlugins/annotations.js
function annotations(config){var annotations5=null;if(config.thresholds){annotations5=config.thresholds.sort(function(a,b){return Math.abs(a.Threshold)-Math.abs(b.Threshold);}).map(function(x,i){var content=colorScheme_default.find(function(y){return y.Flag.includes(+x.Flag);}).description;return{adjustScaleRange:false,borderColor:colorScheme_default.filter(function(y){return y.Flag.includes(+x.Flag);})[0].color,borderDash:[2],borderWidth:1,label:{backgroundColor:"white",color:colorScheme_default.filter(function(y){return y.Flag.includes(+x.Flag);})[0].color,content:config.thresholds.descending?"".concat(content," \u2193"):Math.sign(+x.Flag)===1?"".concat(content," \u2191"):Math.sign(+x.Flag)===-1?"\u2193 ".concat(content):content,display:true,font:{size:12},padding:2,position:Math.sign(+x.Flag)===1?"end":"start",rotation:"auto",yValue:x.Threshold,yAdjust:0},type:"line",yMin:x.Threshold,yMax:x.Threshold};});}return annotations5;}// src/barChart/getPlugins/dataLabels.js
function dataLabels(config){return{align:function align(context){return config.y==="Score"&&Math.sign(context.dataset.data[context.dataIndex].y)===1||config.y==="Metric"&&Math.sign(context.dataset.data[context.dataIndex].y)===-1?"start":"end";},anchor:function anchor(context){return config.y==="Score"&&Math.sign(context.dataset.data[context.dataIndex].y)===1||config.y==="Metric"&&Math.sign(context.dataset.data[context.dataIndex].y)===-1?"start":"end";},//clip: true,
color:"black",display:function display(context){return context.chart.getDatasetMeta(0).data[0].width>=context.chart.options.font.size-3;},formatter:function formatter(value,context){return context.chart.data.labels[context.dataIndex];},rotation:-90};}// src/barChart/getPlugins/legend.js
function legend(config){return{display:true,//!config.thresholds,
labels:{boxHeight:10,boxWidth:10,filter:function filter(item,chart){return item.text!=="";}//sort: function (a, b, chartData) {
//    return (
//        legendOrder.indexOf(a.text) -
//        legendOrder.indexOf(b.text)
//    );
//},
},position:"top"};}// src/barChart/getPlugins/title.js
function title(config){return{display:config.displayTitle,text:"".concat(config.Metric," by ").concat(config.GroupLevel)};}// src/util/formatMetricTooltipLabel.js
function formatMetricTooltipLabel(result,config){var tooltipKeys={Score:config.Score||"Score",Metric:config.Metric||"Metric",Numerator:config.Numerator||"Numerator",Denominator:config.Denominator||"Denominator"};var tooltipLabel=[];for(var _i15=0,_Object$entries=Object.entries(tooltipKeys);_i15<_Object$entries.length;_i15++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i15],2),key=_Object$entries$_i[0],label=_Object$entries$_i[1];if(result[key]!==void 0){var value=result[key];value=parseFloat(value);if(falsy_default.includes(value)){value="\u2014";}else if(Number.isInteger(value)){value=value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}else{value=value.toFixed(2).toString();}tooltipLabel.push("".concat(label,": ").concat(value));}}return tooltipLabel;}// src/util/formatGroupTooltipLabel.js
function formatGroupTooltipLabel(group2,config){if(!group2){return[];}var tooltipKeys=![null,void 0].includes(config.groupTooltipKeys)?config.groupTooltipKeys:Object.keys(group2).filter(function(key){return["groupLabel","GroupLabel","nRedFlags","nAmberFlags","nGreenFlags"].includes(key)===false;}).reduce(function(acc,key){var label=key.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b\w/g,function(_char){return _char.toUpperCase();}).replace("Id","ID");acc[key]=label;return acc;},{});var tooltipContent=[];for(var _i16=0,_Object$entries2=Object.entries(tooltipKeys);_i16<_Object$entries2.length;_i16++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i16],2),key=_Object$entries2$_i[0],label=_Object$entries2$_i[1];if(group2[key]!==void 0){var value=group2[key];tooltipContent.push("".concat(label,": ").concat(value));}}return tooltipContent;}// src/util/formatMetricTooltipTitle.js
function formatMetricTooltipTitle(result,config){return result.group!==void 0?"".concat(config.GroupLevel,": ").concat(result.GroupID," (").concat(result.group.groupLabel," / ").concat(result.group[config.groupParticipantCountKey]," enrolled)"):"".concat(config.GroupLevel," ").concat(result.GroupID);}// src/util/getTooltipAesthetics.js
function getTooltipAesthetics(){return{backgroundColor:"rgba(255,255,255,.85)",bodyColor:"black",bodyFont:{family:"roboto",size:12,weight:"bold"},borderColor:"black",borderWidth:1,boxPadding:5,boxWidth:10,cornerRadius:2,caretPadding:4,//displayColors: false,
padding:10,titleColor:"black",titleMarginBottom:5,titleFont:{family:"roboto",lineHeight:1.5,size:16,weight:"bold"},usePointStyle:true};}// src/barChart/getPlugins/tooltip.js
function tooltip(config){var tooltipAesthetics=getTooltipAesthetics();tooltipAesthetics.boxWidth=10;return _objectSpread({callbacks:{label:function label(d){return[].concat(_toConsumableArray(formatMetricTooltipLabel(d.raw,config)),_toConsumableArray(formatGroupTooltipLabel(d.raw.group,config)));},labelPointStyle:function labelPointStyle(){return{pointStyle:"rect"};},title:function title(data){if(data.length){var datum2=data[0].dataset.data[data[0].dataIndex];return formatMetricTooltipTitle(datum2,config);}}}},tooltipAesthetics);}// src/barChart/getPlugins.js
function getPlugins(config){var getPlugins5={annotation:{annotations:annotations(config),clip:true},datalabels:dataLabels(config),legend:legend(config),title:title(config),tooltip:tooltip(config)};return getPlugins5;}// src/util/getDefaultScales.js
function getDefaultScales(){var defaultScales={x:{grid:{borderDash:[2],display:false,drawBorder:false},ticks:{display:true},title:{display:true,text:null},type:null},y:{grid:{borderDash:[2],display:true,drawBorder:false},ticks:{display:true},title:{display:true,text:null,padding:null},type:null}};return defaultScales;}// src/barChart/getScales.js
function getScales(config,datasets){var scales2=getDefaultScales();scales2.x.ticks.display=false;scales2.x.title.text=config.xLabel;scales2.x.type=config.xType;scales2.y.title.text=config.yLabel;scales2.y.type=config.yType;scales2.y.offset=true;return scales2;}// src/util/displayWhiteBackground.js
function displayWhiteBackground(){var plugin2={id:"customCanvasBackgroundColor",beforeDraw:function beforeDraw(chart,args,options){var ctx=chart.ctx;ctx.save();ctx.globalCompositeOperation="destination-over";ctx.fillStyle=options.color||"white";ctx.fillRect(0,0,chart.width,chart.height);ctx.restore();}};return plugin2;}// src/util/triggerTooltip.js
function triggerTooltip(chart){var tooltip5=chart.tooltip;if(tooltip5.getActiveElements().length>0){tooltip5.setActiveElements([],{x:0,y:0});}if(chart.data.config.selectedGroupIDs.length>0){var data=chart.data.datasets[0].data;var point=data.find(function(d){return chart.data.config.selectedGroupIDs.includes(d.GroupID);});var overlappingPoints=data.filter(function(d){return d.x===point.x&&d.y===point.y;});var pointIndices=data.filter(function(d,i){return overlappingPoints.includes(d);}).map(function(d,i){return{datasetIndex:0,index:data.findIndex(function(d1,i2){return d1===d;})};});tooltip5.setActiveElements(pointIndices);}chart.update();}// src/barChart/updateConfig.js
function updateConfig(chart,_config_,_thresholds_){var updateChart=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var updateTooltip=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var config=configure3(_config_,chart.data.datasets.find(function(dataset){return dataset.type==="bar";}).data,_thresholds_);chart.canvas.riskSignalSelected.data=config.selectedGroupDatum;var plugins2=getPlugins(config);var scales2=getScales(config);chart.data.config=config;chart.options.plugins=plugins2;chart.options.scales=scales2;if(updateChart)chart.update();if(updateTooltip)triggerTooltip(chart);return config;}// src/barChart/updateData.js
function updateData(chart,_results_,_config_,_thresholds_){var _groupMetadata_=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var config=updateConfig(chart,_config_,_thresholds_,false,false);var datasets=structureData(_results_,config,_groupMetadata_);chart.data.config=config;chart.data.datasets=datasets;chart.update();triggerTooltip(chart);}// src/util/updateOption.js
function updateOption(chart,option,value){var objPath=option.split(".");var obj=chart.options;for(var i=0;i<objPath.length;i++){if(i<objPath.length-1)obj=obj[objPath[i]];else obj[objPath[i]]=value;}chart.update();triggerTooltip(chart);}// src/barChart.js
function barChart(){var _element_=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"body";var _results_=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var _config_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var _thresholds_=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var _groupMetadata_=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;checkInputs(_results_,_config_,_thresholds_,_groupMetadata_);var config=configure3(_config_,_results_,_thresholds_);var canvas=addCanvas(_element_,config);var datasets=structureData(_results_,config,_groupMetadata_);var options={animation:false,clip:false,interaction:{intersect:false,mode:"x"},layout:{padding:{top:config.y==="Metric"?max(datasets[0].data,function(d){return d.GroupID.length;})*8:null}},maintainAspectRatio:config.maintainAspectRatio,onClick:onClick,onHover:onHover,plugins:getPlugins(config),scales:getScales(config,datasets)};var chart=new auto_default(canvas,{data:{datasets:datasets,// required by Chart.js
config:config,// inputs
_results_:_results_,_config_:_config_,_thresholds_:_thresholds_,_groupMetadata_:_groupMetadata_},options:options,plugins:[plugin,displayWhiteBackground()]});canvas.chart=chart;chart.helpers={updateConfig:updateConfig,updateData:updateData,updateOption:updateOption,triggerTooltip:triggerTooltip};triggerTooltip(chart);return chart;}// src/groupOverview/checkInputs.js
function checkInputs2(_results_,_config_,_groupMetadata_,_metricMetadata_){checkInput({parameter:"_results_",argument:_results_,schemaName:"results",module:"groupOverview"});checkInput({parameter:"_groupMetadata_",argument:_groupMetadata_,schemaName:"groupMetadata",module:"groupOverview"});checkInput({parameter:"_metricMetadata_",argument:_metricMetadata_,schemaName:"metricMetadata",module:"groupOverview"});}// src/groupOverview/configure.js
function configure4(_config_){var defaults3={};defaults3.GroupLevel="Site";defaults3.groupLabelKey=null;defaults3.groupParticipantCountKey="ParticipantCount";defaults3.groupTooltipKeys=null;defaults3.groupClickCallback=function(datum2){console.log(datum2);};defaults3.metricClickCallback=function(datum2){console.log(datum2);};var config=configure2(defaults3,_config_);return config;}// src/groupOverview/deriveGroupMetrics.js
function deriveGroupMetrics(_groupMetadata_,_results_,config){var groupMetadata=structureGroupMetadata(_groupMetadata_,config);var missingGroups=_toConsumableArray(new Set(_results_.map(function(result){return result.GroupID;}).filter(function(GroupID){return!_toConsumableArray(groupMetadata.keys()).find(function(group2){return group2===GroupID;});}).sort(ascending)));missingGroups.forEach(function(group2){groupMetadata.set(group2,{GroupID:group2});});var groups2=Array.from(groupMetadata).map(function(_ref39){var _ref40=_slicedToArray(_ref39,2),key=_ref40[0],value=_ref40[1];return _objectSpread({GroupLevel:config.GroupLevel,GroupID:key},value);});groups2.forEach(function(group2){group2.GroupLabel=group2.hasOwnProperty(config.groupLabelKey)?"".concat(group2.GroupID," (").concat(group2[config.groupLabelKey],")"):group2.GroupID;var groupResults=_results_.filter(function(result){return result.GroupID===group2.GroupID;});group2.nRedFlags=groupResults.filter(function(result){return Math.abs(parseInt(result.Flag))===2;}).length;group2.nAmberFlags=groupResults.filter(function(result){return Math.abs(parseInt(result.Flag))===1;}).length;group2.nGreenFlags=groupResults.filter(function(result){return Math.abs(parseInt(result.Flag))===0;}).length;});return groups2;}// src/groupOverview/defineColumns/sortString.js
function sortString(bodyRows,column){var sortAscending=column.sortState<1;bodyRows.sort(function(a,b){var aVal=a[column.index].value;var bVal=b[column.index].value;if(aVal===void 0||aVal===null){return 1;}if(bVal===void 0||bVal===null){return-1;}var defaultSort=sortAscending?aVal.localeCompare(bVal):bVal.localeCompare(aVal);return defaultSort;});column.sortState=sortAscending?1:-1;}// src/groupOverview/defineColumns/sortNumber.js
function sortNumber(bodyRows,column){var sortAscending=column.sortState<1;bodyRows.sort(function(a,b){var aVal=a[column.index].sortValue;var bVal=b[column.index].sortValue;if(aVal===void 0||aVal===null||isNaN(aVal)){return 1;}if(bVal===void 0||bVal===null||isNaN(bVal)){return-1;}var defaultSort=sortAscending?aVal-bVal:bVal-aVal;return defaultSort;});column.sortState=sortAscending?1:-1;}// src/groupOverview/defineColumns/defineGroupTooltip.js
function defineTooltip(column,content,config){var tooltipContent=formatGroupTooltipLabel(content.group,config);return tooltipContent.join("\n");}// src/groupOverview/defineColumns/defineGroupColumns.js
function defineGroupColumns(groupMetadata,config){var columns=[{label:"Group",data:groupMetadata,filterKey:"GroupID",valueKey:"GroupLabel",headerTooltip:null,sort:sortString,tooltip:true,type:"group",dataType:"string"},{label:"Enrolled",data:groupMetadata,filterKey:"GroupID",valueKey:config.groupParticipantCountKey,headerTooltip:null,sort:sortNumber,tooltip:false,type:"group",dataType:"number"},{label:"Red Flags",data:groupMetadata,filterKey:"GroupID",valueKey:"nRedFlags",headerTooltip:null,sort:sortNumber,tooltip:false,type:"group",dataType:"number"},{label:"Amber Flags",data:groupMetadata,filterKey:"GroupID",valueKey:"nAmberFlags",headerTooltip:null,sort:sortNumber,tooltip:false,type:"group",dataType:"number"}];columns.forEach(function(column){column.defineTooltip=defineTooltip;});columns=columns.filter(function(column){return groupMetadata.some(function(groupMetadatum){return groupMetadatum.hasOwnProperty(column.valueKey);});});return columns;}// src/groupOverview/defineColumns/defineMetricTooltip.js
function defineTooltip2(column,result){var tooltipContent=formatMetricTooltipLabel(result,column.meta);return tooltipContent.join("\n");}// src/groupOverview/defineColumns/defineMetricColumns.js
function defineMetricColumns(metricMetadata,results){var metricColumns=metricMetadata.map(function(metric){var column={label:metric.Abbreviation,data:results.filter(function(d){return d.MetricID===metric.MetricID;}),filterKey:"GroupID",valueKey:"Flag",headerTooltip:metric.Metric,sort:sortNumber,tooltip:true,defineTooltip:defineTooltip2,type:"metric",dataType:"number",meta:metric};return column;});return metricColumns;}// src/groupOverview/defineColumns.js
function defineColumns(groupMetadata,metricMetadata,results,config){var groupColumns=defineGroupColumns(groupMetadata,config);var metricColumns=defineMetricColumns(metricMetadata,results);var columns=[].concat(_toConsumableArray(groupColumns),_toConsumableArray(metricColumns));columns.forEach(function(column,i){column.getDatum=function(key){return column.data.find(function(d){return d[column.filterKey]===key;});};column.index=i;column.sortState=column.dataType==="string"?0:1;column.activeSort=false;});return columns;}// src/groupOverview/structureData/sortByFlags.js
function sortByFlags(rowData){var sortedRowData=rowData.sort(function(a,b){var redComparison=b[1].nRedFlags-a[1].nRedFlags;var amberComparison=b[1].nAmberFlags-a[1].nAmberFlags;var greenComparison=b[1].nGreenFlags-a[1].nGreenFlags;var groupComparison=a.key.localeCompare(b.key);return redComparison||amberComparison||greenComparison||groupComparison;});return sortedRowData;}// src/groupOverview/structureData.js
function structureData2(results,columns,groupMetadata,config){var lookup=group(results,function(d){return d.GroupID;},function(d){return d.MetricID;});var rowData=Array.from(lookup,function(_ref41){var _ref42=_slicedToArray(_ref41,2),key=_ref42[0],value=_ref42[1];var group2=groupMetadata.find(function(group3){return group3.GroupID===key;});var rowDatum=columns.map(function(column){var datum2=_objectSpread(_objectSpread({},column.getDatum(key)||{}),{},{column:column,group:group2,GroupID:key});datum2.value=datum2[column.valueKey];datum2.text=datum2.value;datum2.sortValue=column.type==="metric"?Math.abs(parseFloat(datum2.value)):datum2.value;datum2["class"]=["group-overview--".concat(column.type),"group-overview--".concat(column.dataType),"group-overview--".concat(column.valueKey)].join(" ");datum2.tooltip=column.tooltip;datum2.tooltipContent=column.defineTooltip(column,datum2,config);return datum2;});rowDatum.key=key;return rowDatum;});var sortedData=sortByFlags(rowData);return sortedData;}// src/groupOverview/makeTable/addHeaderRow.js
function addHeaderRow(thead,columns){var headerRow=thead.append("tr").selectAll("th").data(columns).join("th").attr("class",function(d){return"group-overview--".concat(d.type);}).classed("group-overview--tooltip",function(d){return d.headerTooltip!==null;}).text(function(d){return d.label;}).attr("title",function(d){return d.headerTooltip;});return headerRow;}// src/groupOverview/makeTable/addBodyRows.js
function addBodyRows(tbody,rows){var bodyRows=tbody.selectAll("tr").data(rows,// Define a unique key for each row.
function(d){return d.key;}).join("tr");return bodyRows;}// src/groupOverview/makeTable/addCells.js
function addCells(bodyRows){var cells=bodyRows.selectAll("td").data(function(d){return d;},// Define a unique key for each cell.
function(d){var id2=d.column.type==="metric"?"".concat(d.GroupID,"-").concat(d.column.meta.MetricID):"".concat(d.GroupID,"-").concat(d.column.valueKey);return id2;}).join("td").text(function(d){return d.text==="NA"?"-":d.text;}).attr("class",function(d){return d["class"];}).classed("group-overview--tooltip",function(d){return d.tooltip;}).attr("title",function(d){return d.tooltip?d.tooltipContent:null;});return cells;}// src/groupOverview/makeTable/addSorting.js
function addSorting(headerRow,body){headerRow.on("click",function(event,column){headerRow.data().forEach(function(d){d.activeSort=false;});column.sort(body.selectAll("tr"),column);column.activeSort=true;});}// src/groupOverview/makeTable/icons/singleArrow.js
function singleArrow(flag){var color3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"white";var direction=Math.sign(flag)===1?"up":"down";var svgIcon="\n        <svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:".concat(color3,";overflow:visible;position:relative;").concat(direction==="down"?"transform:rotate(180deg);":"","\">\n            <path d=\"M201.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 205.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z\"/>\n        </svg>");return svgIcon;}// src/groupOverview/makeTable/icons/doubleArrow.js
function doubleArrow(flag){var color3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"white";var direction=Math.sign(flag)===1?"up":"down";var svgIcon="\n        <svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:".concat(color3,";overflow:visible;position:relative;").concat(direction==="down"?"transform:rotate(180deg);":"","\">\n            <path d=\"M246.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L224 109.3 361.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160zm160 352l-160-160c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L224 301.3 361.4 438.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3z\"/>\n        </svg>");return svgIcon;}// src/groupOverview/makeTable/icons/checkMark.js
function checkMark(){var color3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"white";var svgIcon="\n        <svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:".concat(color3,";overflow:visible;position:relative;\">\n            <path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/>\n        </svg>");return svgIcon;}// src/groupOverview/makeTable/icons/minus.js
function checkMark2(){var color3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"white";var svgIcon="\n        <svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:".concat(color3,";overflow:visible;position:relative;\">\n            <path d=\"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z\"/>\n        </svg>");return svgIcon;}// src/groupOverview/makeTable/addFlagIcons.js
function addFlagIcons(rows){var metricCells=rows.selectAll("td.group-overview--metric").text("");metricCells.each(function(d){var flag=parseInt(d.Flag);var absFlag=Math.abs(flag);switch(absFlag){case 0:this.insertAdjacentHTML("beforeend",checkMark(colorScheme_default.green.color));break;case 1:this.insertAdjacentHTML("beforeend",singleArrow(flag,colorScheme_default.amber.color));break;case 2:this.insertAdjacentHTML("beforeend",doubleArrow(flag,colorScheme_default.red.color));break;default:this.insertAdjacentHTML("beforeend",checkMark2(colorScheme_default.gray.color));break;}});}// src/groupOverview/makeTable/addRowHighlighting.js
function addRowHighlighting(rows){rows.on("mouseover",function(){select_default2(this).style("background-color","lightgray");}).on("mouseout",function(){select_default2(this).style("background-color",null);});}// src/groupOverview/makeTable/addClickEvents.js
function addClickEvents(bodyRows,cells,config){var riskSignalSelected=new CustomEvent("riskSignalSelected",{bubbles:true});cells.filter(".group-overview--metric").on("click",function(event,d){config.metricClickCallback({GroupLevel:config.GroupLevel,GroupID:d.GroupID,MetricID:d.MetricID,data:d});riskSignalSelected.data=results_default.items.required.reduce(function(acc,item){acc[item]=d[item];return acc;},{});this.dispatchEvent(riskSignalSelected);});var groupSelected=new CustomEvent("groupSelected",{bubbles:true});cells.filter(".group-overview--group").on("click",function(event,d){config.groupClickCallback({GroupLevel:config.GroupLevel,GroupID:d.GroupID,data:d});groupSelected.data={//StudyID: d.StudyID,
//SnapshotDate: d.SnapshotDate,
GroupLevel:d.GroupLevel,GroupID:d.GroupID};this.dispatchEvent(groupSelected);});}// src/groupOverview/makeTable.js
function makeTable(_element_,rows,columns,config){var table=select_default2(_element_).append("table").datum({config:config,rows:rows,columns:columns}).classed("group-overview",true);var thead=table.append("thead");var tbody=table.append("tbody");var headerRow=addHeaderRow(thead,columns);var bodyRows=addBodyRows(tbody,rows);var cells=addCells(bodyRows);addSorting(headerRow,tbody,columns);addFlagIcons(bodyRows);addRowHighlighting(bodyRows);addClickEvents(bodyRows,cells,config);return table;}// src/groupOverview/updateTable.js
function updateTable(_results_){var groupMetadata=deriveGroupMetrics(this._groupMetadata_,_results_,this.config);var columns=defineColumns(groupMetadata,this._metricMetadata_,_results_,this.config);var rows=structureData2(_results_,columns,groupMetadata,this.config);var tbody=this.table.select("tbody");var bodyRows=addBodyRows(tbody,rows);var cells=addCells(bodyRows);addFlagIcons(bodyRows);addRowHighlighting(bodyRows);addClickEvents(bodyRows,cells,this.config);var sortedColumn=this.columns.find(function(d){return d.activeSort;});if(sortedColumn!==void 0){sortedColumn.sortState=-sortedColumn.sortState;sortedColumn.sort(tbody.selectAll("tr"),sortedColumn);}else{tbody.selectAll("tr").sort(function(a,b){var redComparison=b[1].nRedFlags-a[1].nRedFlags;var amberComparison=b[1].nAmberFlags-a[1].nAmberFlags;var greenComparison=b[1].nGreenFlags-a[1].nGreenFlags;var groupComparison=a.key.localeCompare(b.key);return redComparison||amberComparison||greenComparison||groupComparison;});}}// src/groupOverview.js
function groupOverview(){var _element_=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"body";var _results_=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var _config_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var _groupMetadata_=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var _metricMetadata_=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;checkInputs2(_results_,_config_,_groupMetadata_,_metricMetadata_);var config=configure4(_config_);var groupMetadata=deriveGroupMetrics(_groupMetadata_,_results_,config);var columns=defineColumns(groupMetadata,_metricMetadata_,_results_,config);var rows=structureData2(_results_,columns,groupMetadata,config);var table=makeTable(_element_,rows,columns,config);table.updateTable=updateTable.bind({_results_:_results_,_config_:_config_,_groupMetadata_:_groupMetadata_,_metricMetadata_:_metricMetadata_,config:config,groupMetadata:groupMetadata,columns:columns,rows:rows,table:table});return table;}// src/scatterPlot/checkInputs.js
function checkInputs3(_results_,_config_,_bounds_,_groupMetadata_){checkInput({parameter:"_results_",argument:_results_,schemaName:"results",module:"scatterPlot"});checkInput({parameter:"_config_",argument:_config_,schemaName:"metricMetadatum",module:"scatterPlot"});checkInput({parameter:"_bounds_",argument:_bounds_,schemaName:"resultsPredicted",module:"scatterPlot"});if(_groupMetadata_!==null){checkInput({parameter:"_groupMetadata_",argument:_groupMetadata_,schemaName:"groupMetadata",module:"scatterPlot"});}}// src/scatterPlot/configure.js
function configure5(_config_,_results_){var defaults3={};defaults3.GroupLevel="Site";defaults3.groupLabelKey="InvestigatorLastName";defaults3.groupParticipantCountKey="ParticipantCount";defaults3.groupTooltipKeys=null;defaults3.x="Denominator";defaults3[defaults3.x]=defaults3.x;defaults3.xType="logarithmic";defaults3.y="Numerator";defaults3[defaults3.y]=defaults3.y;defaults3.yType="linear";defaults3.color="Flag";defaults3.hoverCallback=function(datum2){};defaults3.clickCallback=function(datum2){console.log(datum2);};defaults3.displayTitle=false;defaults3.displayLegend=true;defaults3.displayTrendLine=false;defaults3.maintainAspectRatio=false;var config=configure2(defaults3,_config_,{selectedGroupIDs:checkSelectedGroupIDs.bind(null,_config_===null||_config_===void 0?void 0:_config_.selectedGroupIDs,_results_)});config.selectedGroupDatum=updateSelectedGroupDatum(_results_,config.selectedGroupIDs);config.xLabel=coalesce(_config_===null||_config_===void 0?void 0:_config_.xLabel,config[config.x]);config.yLabel=coalesce(_config_===null||_config_===void 0?void 0:_config_.yLabel,config[config.y]);config.chartName="Scatter Plot of ".concat(config.yLabel," by ").concat(config.xLabel);if(config.hoverCallbackWrapper===void 0)config.hoverCallbackWrapper=getCallbackWrapper(config.hoverCallback);if(config.clickCallbackWrapper===void 0)config.clickCallbackWrapper=getCallbackWrapper(config.clickCallback);return config;}// src/scatterPlot/structureData/mutate.js
function mutate2(_results_,config){var groupMetadata=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var results=_results_.map(function(d){if(groupMetadata!==null){var group2=groupMetadata.get(d.GroupID);if(group2!==void 0){d.group=group2;d.group.groupLabel=d.group.hasOwnProperty(config.groupLabelKey)?d.group[config.groupLabelKey]:d.GroupID;}}var datum2=_objectSpread(_objectSpread({},d),{},{x:+d[config.x],y:+d[config.y],stratum:isNaN(parseFloat(d[config.color]))?3:Math.abs(+d[config.color])});return datum2;}).sort(function(a,b){var aSelected=config.selectedGroupIDs.indexOf(a.GroupID)>-1;var bSelected=config.selectedGroupIDs.indexOf(b.GroupID)>-1;var stratum=b.stratum-a.stratum;return aSelected?1:bSelected?-1:stratum;});identifyDuplicatePoints(results,config);return results;}// src/scatterPlot/structureData/scriptableOptions/backgroundColor.js
function backgroundColor2(context,options){var chart=context.chart;var config=chart.data.config;var dataset=context.dataset;var datum2=dataset.data[context.dataIndex];if(datum2!==void 0&&dataset.type==="scatter"){var color3=colorScheme_default[datum2.stratum].rgba;color3.opacity=config.selectedGroupIDs.includes(datum2.GroupID)?1:config.selectedGroupIDs.length===0?0.5:0.25;return color3+"";}}// src/scatterPlot/structureData/scriptableOptions/borderColor.js
function borderColor2(context,options){var chart=context.chart;var config=chart.data.config;var dataset=context.dataset;var datum2=dataset.data[context.dataIndex];if(datum2!==void 0&&dataset.type==="scatter"){var color3=colorScheme_default[datum2.stratum].rgba;color3.opacity=config.selectedGroupIDs.length===0?1:0.5;return config.selectedGroupIDs.includes(datum2.GroupID)?"black":color3+"";}}// src/scatterPlot/structureData/scriptableOptions/borderWidth.js
function borderWidth(context,options){var chart=context.chart;var config=chart.data.config;var dataset=context.dataset;var datum2=dataset.data[context.dataIndex];if(datum2!==void 0&&dataset.type==="scatter"){return 1;}}// src/scatterPlot/structureData/scriptableOptions/pointHoverRadius.js
function pointHoverRadius(context,options){var chart=context.chart;var config=chart.data.config;var dataset=context.dataset;var datum2=dataset.data[context.dataIndex];if(datum2!==void 0&&dataset.type==="scatter"){var defaultRadius=3;var hoverRadius=4;if(datum2.group!==void 0){var enrollmentFactor=Math.sqrt(datum2.group[config.groupParticipantCountKey]/Math.PI);return enrollmentFactor*hoverRadius;}else{return config.selectedGroupIDs.includes(datum2.GroupID)?hoverRadius:defaultRadius;}}}// src/scatterPlot/structureData/scriptableOptions/radius.js
function radius(context,options){var chart=context.chart;var config=chart.data.config;var dataset=context.dataset;var datum2=dataset.data[context.dataIndex];if(datum2!==void 0&&dataset.type==="scatter"){var defaultRadius=3;var hoverRadius=4;if(datum2.group!==void 0){var enrollmentFactor=Math.sqrt(datum2.group[config.groupParticipantCountKey]/Math.PI);return enrollmentFactor*defaultRadius;}else{return config.selectedGroupIDs.includes(datum2.GroupID)?hoverRadius:defaultRadius;}}}// src/scatterPlot/structureData/scriptableOptions.js
function scriptableOptions2(){return{backgroundColor:backgroundColor2,borderColor:borderColor2,borderWidth:borderWidth,pointHoverRadius:pointHoverRadius,radius:radius};}// src/scatterPlot/structureData/rollupBounds.js
function rollupBounds(_bounds_,config){if(_bounds_!==null){var boundUps=rollups(_bounds_.sort(function(a,b){return a.Threshold-b.Threshold;}),function(Group){return{type:"line",data:Group.map(function(d){return{stratum:Math.abs(+d.Threshold),Threshold:d.Threshold,x:+d.Denominator,y:+d.Numerator};}),borderWidth:1,hoverRadius:0,pointRadius:0};},function(d){return d.Threshold;});var flags=mapThresholdsToFlags(boundUps.map(function(bound){return bound[0];}));var bounds=boundUps.map(function(bound,i){var Group=bound[1];Group.Threshold=+bound[0];Group.Flag=flags.find(function(Flag2){return Flag2.Threshold===Group.Threshold;});var Flag=Group.Flag.Flag;Group.label="";var color3=colorScheme_default[Math.abs(Flag)].color;Group.borderColor=color3;var backgroundColor4=color2(color3);backgroundColor4.opacity=0.75;Group.backgroundColor=backgroundColor4+"";Group.borderDash=[2];if(config.displayTrendLine===false&&Group.Threshold===0){Group.borderColor="rgba(0,0,0,0)";}return Group;});rollup(bounds,function(Group){Group.forEach(function(d,i){if(i>0)d.label="";});},function(d){return Math.abs(d.Flag.Flag);});return bounds;}}// src/scatterPlot/structureData.js
function structureData3(_results_,config,_bounds_){var _groupMetadata_=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var groupMetadata=structureGroupMetadata(_groupMetadata_,config);var data=mutate2(_results_,config,groupMetadata);var datasets=[_objectSpread({data:data,label:"",listenClick:true,listenHover:true,type:"scatter"},scriptableOptions2())].concat(_toConsumableArray(colorScheme_default.map(function(color3){var dataset={type:"scatter",label:color3.description,backgroundColor:color3.rgba,borderColor:color3.color};dataset.backgroundColor.opacity=0.5;dataset.backgroundColor=dataset.backgroundColor+"";return dataset;})));var bounds=rollupBounds(_bounds_,config);if(bounds!==void 0)bounds.forEach(function(bound){datasets.push(bound);});if(data.every(function(d){return falsy_default.includes(d.Flag)===false;}))datasets=datasets.filter(function(d){return d.label!=="No Flag";});return datasets;}// src/scatterPlot/getPlugins/legend.js
function legend2(config){var legendOrder=colorScheme_default.sort(function(a,b){return a.order-b.order;}).map(function(color3){return color3.description;});return{display:config.displayLegend,labels:{boxHeight:6,filter:function filter(legendItem,chartData){return legendItem.text!=="";},sort:function sort(a,b,chartData){return legendOrder.indexOf(a.text)-legendOrder.indexOf(b.text);},usePointStyle:true},onClick:function onClick(){return null;},position:"top"};}// src/scatterPlot/getPlugins/title.js
function title2(config){return{display:config.displayTitle,text:"".concat(config.Metric," by ").concat(config.GroupLevel)};}// src/util/sortByGroupID.js
function sortByGroupID(data,config){var numericGroupIDs=data.every(function(d){return /^\d+$/.test(d.raw.GroupID);});var dataSorted=data.sort(function(a,b){var selected=config.selectedGroupIDs.includes(b.raw.GroupID)-config.selectedGroupIDs.includes(a.raw.GroupID);var alphanumeric=numericGroupIDs?ascending(+a.raw.GroupID,+b.raw.GroupID):ascending(a.raw.GroupID,b.raw.GroupID);return selected||alphanumeric;});return dataSorted;}// src/scatterPlot/getPlugins/tooltip.js
function tooltip2(config){var tooltipAesthetics=getTooltipAesthetics();return _objectSpread({callbacks:{label:function label(d){var content=[].concat(_toConsumableArray(formatMetricTooltipLabel(d.raw,config)),_toConsumableArray(formatGroupTooltipLabel(d.raw.group,config)));return d.raw.duplicate?"":content;},title:function title(data){if(data.length){var dataSorted=sortByGroupID(data,config);var titles=dataSorted.map(function(d,i){var title5;if(data.length===1){title5=formatMetricTooltipTitle(d.raw,config);}else{title5=i===0?"".concat(config.GroupLevel,"s ").concat(d.dataset.data[d.dataIndex].GroupID):d.dataset.data[d.dataIndex].GroupID;}return title5;});var title4=titles.length<=4?titles.join(", "):"".concat(titles.slice(0,3).join(", ")," and [ ").concat(titles.length-3," ] more");return title4;}}},custom:function custom(tooltipModel){if(!tooltipModel.body||tooltipModel.body.length<1){tooltipModel.caretSize=0;tooltipModel.xPadding=0;tooltipModel.yPadding=0;tooltipModel.cornerRadius=0;tooltipModel.width=0;tooltipModel.height=0;}},filter:function filter(data){return data.dataset.type!=="line";}},tooltipAesthetics);}// src/scatterPlot/getPlugins.js
function getPlugins2(config){var plugins2={legend:legend2(config),title:title2(config),tooltip:tooltip2(config)};return plugins2;}// src/scatterPlot/getScales.js
function getScales2(config){var scales2=getDefaultScales();scales2.x.grid.display=true;scales2.x.ticks={callback:function callback(value,index3,context){var tick=context[index3];return tick.major?format(",d")(tick.value):null;}};scales2.x.title.text=config.xType==="logarithmic"?"".concat(config.xLabel," (Log Scale)"):config.xLabel;scales2.x.type=config.xType;scales2.y.title.text=config.yLabel;scales2.y.type=config.yType;return scales2;}// src/scatterPlot/updateConfig.js
function updateConfig2(chart,_config_){var updateChart=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var updateTooltip=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var config=configure5(_config_,chart.data.datasets.find(function(dataset){return dataset.type==="scatter";}).data);chart.canvas.riskSignalSelected.data=config.selectedGroupDatum;var plugins2=getPlugins2(config);var scales2=getScales2(config);chart.data.config=config;chart.options.plugins=plugins2;chart.options.scales=scales2;if(updateChart)chart.update();if(updateTooltip)triggerTooltip(chart);return config;}// src/scatterPlot/updateData.js
function updateData2(chart,_results_,_config_,_bounds_,_groupMetadata_){var config=updateConfig2(chart,_config_,false,false);var datasets=structureData3(_results_,config,_bounds_,_groupMetadata_);chart.data.config=config;chart.data.datasets=datasets;chart.update();triggerTooltip(chart);}// src/scatterPlot.js
function scatterPlot(){var _element_=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"body";var _results_=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var _config_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var _bounds_=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var _groupMetadata_=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;checkInputs3(_results_,_config_,_bounds_,_groupMetadata_);var config=configure5(_config_,_results_);var canvas=addCanvas(_element_,config);var datasets=structureData3(_results_,config,_bounds_,_groupMetadata_);var options={animation:false,maintainAspectRatio:config.maintainAspectRatio,onClick:onClick,onHover:onHover,plugins:getPlugins2(config),scales:getScales2(config)};var chart=new auto_default(canvas,{data:{datasets:datasets,// required by Chart.js
config:config,// inputs
_results_:_results_,_config_:_config_,_bounds_:_bounds_},options:options,plugins:[displayWhiteBackground()]});canvas.chart=chart;chart.helpers={updateConfig:updateConfig2,updateData:updateData2,updateOption:updateOption,triggerTooltip:triggerTooltip};triggerTooltip(chart);return chart;}// src/sparkline/checkInputs.js
function checkInputs4(_results_,_config_,_thresholds_){var discrete=/^n_((at_risk)?(_or_)?(flagged)?)$/i.test(_config_===null||_config_===void 0?void 0:_config_.y);checkInput({parameter:"_results_",argument:_results_,schemaName:discrete?"flagCounts":"results",module:"sparkline"});checkInput({parameter:"_config_",argument:discrete?null:_config_,schemaName:"metricMetadatum",module:"sparkline"});checkInput({parameter:"_thresholds_",argument:_thresholds_,schemaName:"thresholds",module:"sparkline"});}// src/sparkline/configure.js
function configure6(_config_,_data_,_thresholds_){var defaults3={};defaults3.x="SnapshotDate";defaults3.xType="category";defaults3.y="Score";defaults3.yType="linear";defaults3.color="Flag";defaults3.hoverCallback=function(datum2){};defaults3.clickCallback=function(datum2){console.log(datum2);};defaults3.maintainAspectRatio=false;defaults3.nSnapshots=5;defaults3.displayThresholds=false;var config=configure2(defaults3,_config_,{thresholds:checkThresholds.bind(null,_config_,_thresholds_)});config.annotation=["Metric","Score"].includes(config.y)?"Numerator":config.y;config.dataType=["Metric","Score"].includes(config.y)?"continuous":"discrete";config.xLabel=coalesce(_config_===null||_config_===void 0?void 0:_config_.xLabel,"Snapshot Date");config.yLabel=coalesce(_config_===null||_config_===void 0?void 0:_config_.yLabel,config[config.y]);config.chartName="Sparkline of ".concat(config.yLabel," by ").concat(config.xLabel);return config;}// src/sparkline/structureData/mutate.js
function mutate3(_data_,config){var data=_data_.map(function(d){var datum2=_objectSpread(_objectSpread({},d),{},{//x: +d[config.x],
y:+d[config.y],stratum:falsy_default.includes(d[config.color])?3:Math.abs(+d[config.color])});return datum2;}).sort(function(a,b){return ascending(a.SnapshotDate,b.SnapshotDate);});return data.slice(-config.nSnapshots);}// src/sparkline/structureData/scriptableOptions/borderColor.js
function borderColor3(context,options){var chart=context.chart;var config=chart.data.config;var dataset=context.dataset;var datum2=dataset.data[context.dataIndex];if(dataset.type==="line"){return datum2===dataset.data[dataset.data.length-1]?"black":"rgba(0, 0, 0, 0.1)";}}// src/sparkline/structureData/scriptableOptions/radius.js
function radius2(context,options){var chart=context.chart;var config=chart.data.config;var dataset=context.dataset;var datum2=dataset.data[context.dataIndex];if(dataset.type==="line"){return datum2===dataset.data[dataset.data.length-1]?4:3;}}// src/sparkline/structureData/scriptableOptions.js
function scriptableOptions3(){return{//backgroundColor,
borderColor:borderColor3,//borderWidth,
radius:radius2};}// src/sparkline/structureData.js
function structureData4(_data_,config){var data=mutate3(_data_,config);var labels=data.map(function(d){return d.SnapshotDate;});var pointBackgroundColor=data.map(function(d,i){return config.dataType==="continuous"?colorScheme_default[d.stratum].color:config.y==="n_at_risk"?colorScheme_default.find(function(color3){return /amber/i.test(color3.description);}).color:config.y==="n_flagged"?colorScheme_default.find(function(color3){return /red/i.test(color3.description);}).color:config.y==="n_at_risk_or_flagged"?colorScheme_default.amberRed.color:"#1890FF";});var datasets=[_objectSpread(_objectSpread({type:"line",data:data.map(function(d,i){var datum2=_objectSpread({},d);datum2.x=i;datum2.y=+d[config.y];return datum2;}),pointBackgroundColor:pointBackgroundColor},scriptableOptions3()),{},{spanGaps:true})];datasets.labels=labels;return datasets;}// src/sparkline/getPlugins/annotation/thresholds.js
function thresholds(config){var thresholds2=null;if(config.displayThresholds&&config.thresholds){thresholds2=config.thresholds.map(function(Threshold,i){var color3=colorScheme_default.find(function(color4){return color4.Flag.includes(+Threshold.Flag);});color3.rgba.opacity=0.5;var annotation2={type:"line",yMin:Threshold.Threshold,yMax:Threshold.Threshold,borderColor:color3.rgba+"",borderWidth:1};return annotation2;});}return thresholds2;}// src/sparkline/getPlugins/annotation/value.js
function annotations2(config,data){var xMin=0;var xMax=data.length-1;var xValue=xMax+xMax/50;var yMin=min(data,function(d){return+d[config.y];});var yMax=max(data,function(d){return+d[config.y];});var range=yMin===yMax?yMin:yMax-yMin;var yValue=yMin===yMax?yMin:yMin+range/2;var format2=data.every(function(d){return+d[config.y]%1===0;})?"d":config.y==="Metric"?".3f":".1f";var datum2=data.filter(function(d){return falsy_default.includes(d.y)===false;}).slice(-1)[0];var content=[format(format2)(datum2===null||datum2===void 0?void 0:datum2.y)];var value={content:content,font:{size:14,family:"roboto",weight:700},position:{x:"start",y:"center"},type:"label",xValue:xValue,yValue:yValue};return value;}// src/sparkline/getPlugins/annotation.js
function annotations3(config,data){var value=annotations2(config,data);var thresholds2=thresholds(config);var annotations5={clip:false,annotations:[value]};if(thresholds2!==null)thresholds2.forEach(function(Threshold){annotations5.annotations.push(Threshold);});return annotations5;}// src/sparkline/getPlugins/legend.js
function legend3(config){return{display:false};}// src/sparkline/getPlugins/tooltip.js
function tooltip3(config){var tooltipAesthetics=getTooltipAesthetics();tooltipAesthetics.padding=4;tooltipAesthetics.caretSize=0;return _objectSpread({callbacks:{label:function label(data){var fmt=config.y==="Score"?".1f":config.y==="Metric"?".3f":",d";return config.dataType==="continuous"?"".concat(data.label,": ").concat(format(fmt)(data.parsed.y))://[
"".concat(data.label,": ").concat(format(fmt)(data.raw.n_flagged)," red / ").concat(format(fmt)(data.raw.n_at_risk)," amber");},title:function title(){return null;},footer:function footer(){return null;}},displayColors:config.dataType==="continuous"},tooltipAesthetics);}// src/sparkline/getPlugins.js
function getPlugins3(config,_data_){var plugins2={annotation:annotations3(config,_data_),legend:legend3(config),tooltip:tooltip3(config)};return plugins2;}// src/sparkline/getScales.js
function getScales3(config,data){var scales2=getDefaultScales();scales2.x.display=false;scales2.x.type=config.xType;var yMin=min(data,function(d){return d.y;});var yMax=max(data,function(d){return d.y;});var range=yMin!==yMax?yMax-yMin:yMin===yMax&&yMin!==0?yMin:1;scales2.y.display=false;scales2.y.min=config.yMin!==void 0?config.yMin:yMin-range*0.35;scales2.y.max=config.yMax!==void 0?config.yMax:yMax+range*0.35;scales2.y.type=config.yType;return scales2;}// src/sparkline/updateConfig.js
function updateConfig3(chart,_config_){var update=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var config=configure6(_config_);chart.data.config=config;if(update)chart.update();return config;}// src/sparkline/updateData.js
function updateData3(chart,_data_,_config_){chart.data.config=updateConfig3(chart,_config_);chart.data.datasets=structureData4(_data_,chart.data.config);chart.options.plugins=getPlugins3(chart.data.config,chart.data.datasets[0].data);chart.options.scales=getScales3(chart.data.config,chart.data.datasets[0].data);chart.update();}// src/sparkline.js
function sparkline(){var _element_=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"body";var _results_=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var _config_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var _thresholds_=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;checkInputs4(_results_,_config_,_thresholds_);var config=configure6(_config_,_results_,_thresholds_);var canvas=addCanvas(_element_,config);var datasets=structureData4(_results_,config);var options={animation:false,layout:{padding:{right:50}},maintainAspectRatio:config.maintainAspectRatio,plugins:getPlugins3(config,datasets[0].data),scales:getScales3(config,datasets[0].data)};var chart=new auto_default(canvas,{data:{datasets:datasets,// required by Chart.js
labels:datasets.labels,// required by Chart.js
config:config,// inputs
_results_:_results_,_config_:_config_,_thresholds_:_thresholds_},options:options});canvas.chart=chart;chart.helpers={updateConfig:updateConfig3,updateData:updateData3,updateOption:updateOption};return chart;}// src/timeSeries/checkInputs.js
function checkInputs5(_results_,_config_,_thresholds_,_intervals_,_groupMetadata_){var discrete=/^n_((at_risk)?(_or_)?(flagged)?)$/i.test(_config_===null||_config_===void 0?void 0:_config_.y);checkInput({parameter:"_results_",argument:_results_,schemaName:discrete?"flagCounts":"results",module:"timeSeries"});checkInput({parameter:"_config_",argument:discrete?null:_config_,schemaName:"metricMetadatum",module:"timeSeries"});checkInput({parameter:"_thresholds_",argument:_thresholds_,schemaName:"thresholds",module:"timeSeries"});checkInput({parameter:"_intervals_",argument:_intervals_,schemaName:"resultsVertical",module:"timeSeries"});if(_groupMetadata_!==null){checkInput({parameter:"_groupMetadata_",argument:_groupMetadata_,schemaName:"groupMetadata",module:"timeSeries"});}}// src/timeSeries/configure.js
function configure7(_config_,_results_,_thresholds_,_intervals_){var defaults3={};defaults3.GroupLevel="Site";defaults3.groupLabelKey="InvestigatorLastName";defaults3.groupParticipantCountKey="ParticipantCount";defaults3.groupTooltipKeys=null;defaults3.dataType="continuous";defaults3.discreteUnit=null;defaults3.distributionDisplay="boxplot";defaults3.x="SnapshotDate";defaults3.xType="category";defaults3.y="Score";defaults3.yType="linear";defaults3.color="Flag";defaults3.hoverCallback=function(datum2){};defaults3.clickCallback=function(datum2){console.log(datum2);};defaults3.aggregateLabel="Study";defaults3.annotateThreshold=_thresholds_!==null;defaults3.displayTitle=false;defaults3.maintainAspectRatio=false;if(_config_!==null)_config_.variableThresholds=Array.isArray(_thresholds_)?_thresholds_.some(function(Threshold){return Threshold.SnapshotDate!==_thresholds_[0].SnapshotDate;}):false;var config=configure2(defaults3,_config_,{selectedGroupIDs:checkSelectedGroupIDs.bind(null,_config_===null||_config_===void 0?void 0:_config_.selectedGroupIDs,_results_),thresholds:checkThresholds.bind(null,_config_,_thresholds_)});config.selectedGroupDatum=updateSelectedGroupDatum(_results_,config.selectedGroupIDs);config.dataType=/flag|risk/.test(config.y)?"discrete":"continuous";if(defaults3.dataType==="discrete")config.discreteUnit=Object.keys(_results_[0]).includes("GroupID")?"Metric":"Site";config.xLabel=coalesce(_config_===null||_config_===void 0?void 0:_config_.xLabel,"Snapshot Date");var discreteUnits=config.dataType==="discrete"?"".concat(config.discreteUnit.replace(/y$/,"ie"),"s"):"";config.yLabel=coalesce(_config_===null||_config_===void 0?void 0:_config_.yLabel,config.dataType==="continuous"?config[config.y]:/flag/.test(config.y)&&/risk/.test(config.y)?"Red or Amber ".concat(discreteUnits):/flag/.test(config.y)?"Red ".concat(discreteUnits):/risk/.test(config.y)?"Amber ".concat(discreteUnits):"");config.chartName="Time Series of ".concat(config.yLabel," by ").concat(config.xLabel);if(config.y!=="Score"&&!(config.y==="Metric"&&_intervals_!==null))delete config.thresholds;if(config.hoverCallbackWrapper===void 0)config.hoverCallbackWrapper=getCallbackWrapper(config.hoverCallback);if(config.clickCallbackWrapper===void 0)config.clickCallbackWrapper=getCallbackWrapper(config.clickCallback);return config;}// src/timeSeries/structureData/getLabels.js
function getLabels(data,config){var labels=_toConsumableArray(new Set(data.map(function(d){return d[config.x];})));return labels;}// src/timeSeries/structureData/mutate.js
function mutate4(_results_,config,_thresholds_,_intervals_){var groupMetadata=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var results=_results_.map(function(d){var datum2=_objectSpread({},d);if(groupMetadata!==null){var group2=groupMetadata.get(d.GroupID);if(group2!==void 0){datum2.group=group2;datum2.group.groupLabel=datum2.group.hasOwnProperty(config.groupLabelKey)?datum2.group[config.groupLabelKey]:datum2.GroupID;}}if([void 0,null].includes(_intervals_)===false){var _intervals2$find,_intervals2$find2;var intervals2=_intervals_.filter(function(interval2){return interval2.SnapshotDate===datum2.SnapshotDate;});datum2.lowerCI=(_intervals2$find=intervals2.find(function(interval2){return interval2.Param==="LowCI";}))===null||_intervals2$find===void 0?void 0:_intervals2$find.Value;datum2.upperCI=(_intervals2$find2=intervals2.find(function(interval2){return interval2.Param==="UpCI";}))===null||_intervals2$find2===void 0?void 0:_intervals2$find2.Value;}return datum2;}).sort(function(a,b){return ascending(a[config.x],b[config.x]);});var labels=getLabels(results,config);var thresholds2=null;if(Array.isArray(_thresholds_)&&config.variableThresholds){thresholds2=_thresholds_.filter(function(d){return labels.includes(d[config.x]);}).map(function(d){return _objectSpread({},d);}).sort(function(a,b){return ascending(a[config.x],b[config.x]);});}var intervals=null;if(Array.isArray(_intervals_)){intervals=_intervals_.filter(function(d){return labels.includes(d[config.x]);}).map(function(d){return _objectSpread({},d);}).sort(function(a,b){return ascending(a[config.x],b[config.x]);});}identifyDuplicatePoints(results,config);return{results:results,labels:labels,thresholds:thresholds2,intervals:intervals};}// src/timeSeries/structureData/identityLine.js
function identityLine(data,config,labels){var aggregateData=rollup(data,function(Group){return mean(Group,function(d){return d[config.y];});},function(d){return d[config.x];});var color3="#666666";var backgroundColor4=color2(color3);backgroundColor4.opacity=1;var borderColor4=color2(color3);borderColor4.opacity=0.25;var dataset={backgroundColor:function backgroundColor(d){if(d.type==="dataset"){return backgroundColor4;}else{return colorScheme_default.find(function(color4){return color4.Flag.includes(+d.raw.Flag);}).color;}},borderColor:borderColor4,data:_toConsumableArray(aggregateData).map(function(_ref43,i){var _ref44=_slicedToArray(_ref43,2),key=_ref44[0],value=_ref44[1];var x=labels[i];var y=value;return _objectSpread(_objectSpread({},data.find(function(d){return d[config.x]===x;})),{},{x:x,y:y});}),label:"",listenHover:true,listenClick:true,pointStyle:"circle",purpose:"aggregate",radius:2.5,type:"line"};return dataset;}// src/timeSeries/structureData/intervalLines.js
function intervalLines(_intervals_,config,labels){if(_intervals_===null)return[null];var intervals=rollup(_intervals_.filter(function(d){return /ci/i.test(d.Param);}),function(Group){return+Group[0].Value;},function(d){return d.Param;},function(d){return d.SnapshotDate;});var datasets=_toConsumableArray(intervals).map(function(_ref45,i){var _ref46=_slicedToArray(_ref45,2),key=_ref46[0],value=_ref46[1];return{borderColor:"#666",borderDash:[2],borderWidth:1,data:_toConsumableArray(value.values()),hoverRadius:0,label:i===0?"Confidence Interval":"",pointStyle:"line",purpose:"aggregate",radius:0,type:"line"};});return datasets;}// src/timeSeries/structureData/selectedGroupLine.js
function selectedGroupLine(data,config,labels){if(config.selectedGroupIDs.length===0)return[null];var lineData=data.filter(function(d){return config.selectedGroupIDs.includes(d.GroupID);}).map(function(d,i){var datum2=_objectSpread({},d);datum2.x=datum2[config.x];datum2.y=+datum2[config.y];return datum2;});var color3="black";var backgroundColor4=color2(color3);backgroundColor4.opacity=0.5;var borderColor4=color2(color3);borderColor4.opacity=0.5;var datasets=config.selectedGroupIDs.map(function(GroupID){return{data:lineData.filter(function(d){return d.GroupID===GroupID;}),backgroundColor:function backgroundColor(d){if(d.element===void 0){return backgroundColor4;}var color4=colorScheme_default.find(function(color5){var _d$raw,_d$raw2;return falsy_default.includes(d.raw.Flag)?color5.Flag.includes((_d$raw=d.raw)===null||_d$raw===void 0?void 0:_d$raw.Flag):color5.Flag.includes(+((_d$raw2=d.raw)===null||_d$raw2===void 0?void 0:_d$raw2.Flag));});color4.rgba.opacity=0.75;return color4.rgba+"";},borderColor:function borderColor(d){return d.type==="data"?"black":borderColor4;},label:"",pointStyle:"circle",purpose:"highlight",radius:3,spanGaps:true,type:"line"};});return datasets;}// src/timeSeries/structureData/flagAmber.js
function flagAmber(data,config,labels){var pointData=data.filter(function(d){return Math.abs(+d.Flag)===1;}).map(function(d){var datum2=_objectSpread({},d);datum2.x=datum2[config.x];datum2.y=+datum2[config.y];return datum2;});var color3=colorScheme_default.find(function(color4){return color4.Flag.some(function(Flag){return Math.abs(Flag)===1;});});color3.rgba.opacity=0.5;var dataset={borderColor:color3.color,backgroundColor:color3.rgba+"",data:pointData,label:"",listenHover:true,listenClick:true,pointStyle:"circle",purpose:"scatter",radius:2,type:"scatter"};return dataset;}// src/timeSeries/structureData/flagRed.js
function flagRed(data,config,labels){var pointData=data.filter(function(d){return Math.abs(+d.Flag)>1;}).map(function(d){var datum2=_objectSpread({},d);datum2.x=datum2[config.x];datum2.y=+datum2[config.y];return datum2;});var color3=colorScheme_default.find(function(color4){return color4.Flag.some(function(Flag){return Math.abs(Flag)>1;});});color3.rgba.opacity=0.5;var dataset={borderColor:color3.color,backgroundColor:color3.rgba+"",data:pointData,label:"",listenHover:true,listenClick:true,pointStyle:"circle",purpose:"scatter",radius:2,type:"scatter"};return dataset;}// src/timeSeries/structureData/distribution/boxplot.js
function boxplot2(data,config){var grouped=rollups(data,//.filter(d => +d.Flag === 0),
function(Group){return Group.map(function(d){return+d[config.y];});},function(d){return d.SnapshotDate;});var dataset={data:grouped.map(function(d){return d[1];}),maxBarThickness:7,maxWhiskerThickness:0,meanRadius:/^n_/.test(config.y)?3:0,label:/Flag|at.risk/.test(config.y)?"Distribution":"".concat(config.GroupLevel," Distribution"),outlierRadius:0,///^n_/.test(config.y) ? 2 : 0,
pointRadius:0,pointStyle:"rect",purpose:"distribution",radius:0,type:"boxplot"};return dataset;}// src/timeSeries/structureData/distribution/violin.js
function violin(data,config){var grouped=rollups(data,//.filter((d) => +d.Flag === 0),
function(Group){return Group.map(function(d){return+d[config.y];});},function(d){return d.SnapshotDate;});var dataset={data:grouped.map(function(d){return d[1];}),label:/Flag|at.risk/.test(config.y)?"Distribution":"".concat(config.GroupLevel," Distribution"),purpose:"distribution",type:"violin"};return dataset;}// src/timeSeries/structureData/distribution.js
function distribution(data,config,labels){if(!["boxplot","violin"].includes(config.distributionDisplay))return null;var dataset=config.distributionDisplay==="boxplot"?boxplot2(data,config,labels):config.distributionDisplay==="violin"?violin(data,config,labels):null;return dataset;}// src/timeSeries/structureData/getThresholdLines.js
function getThresholdLines(_thresholds_,config,labels){var thresholdData=[null];if(Array.isArray(_thresholds_)&&config.variableThresholds){var thresholds2=_toConsumableArray(rollup(_thresholds_.filter(function(d){return d.Param==="vThreshold";}).sort(function(a,b){return a<b?-1:b<a?1:0;}),function(Group){var flags=checkThresholds({},Group);flags.forEach(function(Flag){Flag.SnapshotDate=Group[0].SnapshotDate;Flag.SnapshotDate=Group[0].SnapshotDate;Flag.x=Flag.SnapshotDate;Flag.y=Flag.Threshold;Flag.color=flags.length===1?colorScheme_default.amberRed:colorScheme_default.find(function(color3){return color3.Flag.includes(Flag.Flag);});});return flags;},function(d){return d.SnapshotDate;})).flatMap(function(d){return d[1];});var latestSnapshotDate=max(labels);thresholdData=_toConsumableArray(rollup(thresholds2,function(Group){var dataset={adjustScaleRange:false,borderColor:Group[0].color.color,//function (d) {
//    return d.color.color;
//},
borderDash:[2],borderWidth:1,data:Group,hoverRadius:0,label:"",purpose:"annotation",pointRadius:0,stepped:"middle",// 'before', 'middle', 'after'
type:"line"};var snapshotDates=_toConsumableArray(new Set(Group.map(function(d){return d[config.x];})));var snapshotDate=max(snapshotDates);if(snapshotDate<latestSnapshotDate){var Threshold=_objectSpread({},dataset.data.find(function(d){return d[config.x]===snapshotDate;}));Threshold[config.x]=latestSnapshotDate;Threshold.x=latestSnapshotDate;dataset.data.push(Threshold);}return dataset;},function(d){return d.Flag;})).map(function(d){return d[1];});}return thresholdData;}// src/timeSeries/structureData/aggregateLine.js
function aggregateLine(data,config,labels){var aggregateData=rollup(data,function(Group){return mean(Group,function(d){return d[config.y];});},function(d){return d[config.x];});var countsBySnapshot=rollup(data,function(Group){var N=Group.length;return rollup(Group,function(subgroup){return{n:subgroup.length,N:N,pct:Math.round(subgroup.length/N*100*10)/10};},function(d){return d[config.y];});},function(d){return d[config.x];});var color3=/at.risk/.test(config.y)&&/flagged/.test(config.y)?colorScheme_default.amberRed.color:/at.risk/.test(config.y)?colorScheme_default.find(function(color4){return color4.Flag.includes(1);}).color:/flagged/.test(config.y)?colorScheme_default.find(function(color4){return color4.Flag.includes(2);}).color:"#828282";var backgroundColor4=color2(color3);backgroundColor4.opacity=1;var borderColor4=color2("#828282");borderColor4.opacity=0.25;var dataset={backgroundColor:backgroundColor4,borderColor:borderColor4,data:_toConsumableArray(aggregateData).map(function(_ref47,i){var _ref48=_slicedToArray(_ref47,2),key=_ref48[0],value=_ref48[1];var x=labels[i];var y=value;var counts=_toConsumableArray(countsBySnapshot.get(labels[i]));return{//...data.find((d) => d[config.x] === x),
x:x,y:y,counts:counts.map(function(_ref49){var _ref50=_slicedToArray(_ref49,2),key1=_ref50[0],value1=_ref50[1];var countLookup=_objectSpread({},value1);countLookup[config.y]=key1;return countLookup;}).sort(function(a,b){return a[config.y]-b[config.y];})};}),label:"",pointStyle:"circle",purpose:"aggregate",radius:2.5,type:"line"};return dataset;}// src/timeSeries/structureData.js
function structureData5(_results_,config){var _thresholds_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var _intervals_=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var _groupMetadata_=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var groupMetadata=structureGroupMetadata(_groupMetadata_,config);var _mutate=mutate4(_results_,config,_thresholds_,_intervals_,groupMetadata),results=_mutate.results,labels=_mutate.labels,thresholds2=_mutate.thresholds,intervals=_mutate.intervals;var datasets=[];if(config.dataType!=="discrete"){if(intervals!==null){datasets=[identityLine(results,config,labels)].concat(_toConsumableArray(intervalLines(intervals,config,labels)),[{type:"scatter",label:"",pointStyle:"line",pointStyleWidth:24,boxWidth:24,backgroundColor:"rgba(0,0,0,.5)",borderColor:"rgba(0,0,0,.25)",borderWidth:3}],_toConsumableArray(colorScheme_default.filter(function(color3){return color3.description!=="No Flag";}).map(function(color3){return{type:"bar",label:color3.description,backgroundColor:color3.color,borderColor:color3.color};})),_toConsumableArray(getThresholdLines(thresholds2,config,labels)));}else{datasets=[].concat(_toConsumableArray(selectedGroupLine(results,config,labels)),[{type:"scatter",label:config.selectedGroupIDs.length===1?"".concat(config.GroupLevel," ").concat(config.selectedGroupIDs[0]):"",pointStyle:"line",pointStyleWidth:24,boxWidth:24,backgroundColor:"rgba(0,0,0,.5)",borderColor:"rgba(0,0,0,.5)",borderWidth:3}],_toConsumableArray(colorScheme_default.map(function(color3){return{type:"bar",label:!(color3.description==="Within Thresholds"&&config.selectedGroupIDs.length===0)?color3.description:"",backgroundColor:color3.color};})),[flagRed(results,config,labels),flagAmber(results,config,labels),distribution(results,config,labels)],_toConsumableArray(getThresholdLines(thresholds2,config,labels)));}}else if(config.dataType==="discrete"){var color3=config.yLabel==="Red or Amber Metrics"?colorScheme_default.amberRed.color:config.yLabel==="Red Metrics"?colorScheme_default.find(function(color4){return /red/i.test(color4.description);}).color:config.yLabel==="Amber Metrics"?colorScheme_default.find(function(color4){return /amber/i.test(color4.description);}).color:"#1890FF";datasets=[config.selectedGroupIDs.length>0?_objectSpread(_objectSpread({},selectedGroupLine(results,config,labels)),{},{backgroundColor:color3,borderColor:function borderColor(d){return d.raw!==void 0?"black":"#828282";}}):null,{type:"scatter",label:config.selectedGroupIDs.length>0?"".concat(config.GroupLevel," ").concat(config.selectedGroupIDs[0]):"",pointStyle:"line",pointStyleWidth:24,boxWidth:24,backgroundColor:"rgba(0,0,0,.5)",borderColor:"rgba(0,0,0,.5)",borderWidth:3},// legend item for selected Group ID line
aggregateLine(results,config,labels),{type:"scatter",label:config.discreteUnit==="Metric"?"".concat(config.aggregateLabel," Average"):"",pointStyle:"line",pointStyleWidth:24,boxWidth:24,backgroundColor:"rgba(0,0,0,.5)",borderColor:"rgba(0,0,0,.25)",borderWidth:3}// legend item for aggregate line
];}datasets=datasets.filter(function(dataset){return dataset!==null;});datasets.labels=labels;return datasets;}// src/timeSeries/getPlugins/annotations.js
function annotations4(config){var annotations5=null;if(config.thresholds){annotations5=config.thresholds.map(function(x,i){var annotation2={adjustScaleRange:config.GroupLevel==="Study",drawTime:"beforeDatasetsDraw",type:"line",yMin:x.Threshold,yMax:x.Threshold,borderColor:config.GroupLevel==="Study"?colorScheme_default.amberRed.color:colorScheme_default.find(function(y){return y.Flag.includes(+x.Flag);}).color,borderWidth:1,borderDash:[2]};if(config.annotateThreshold===true&&config.GroupLevel==="Study"){annotation2.label={rotation:"auto",position:Math.sign(+x.Flag)>=0?"end":"start",color:config.GroupLevel==="Study"?colorScheme_default.amberRed.color:colorScheme_default.find(function(y){return y.Flag.includes(+x.Flag);}).color,backgroundColor:"white",content:"QTL: ".concat(Math.round(+config.thresholds[0].Threshold*1e3)/1e3.toString()),//    .replace(/^(.*\.\d{3})(\d+)$/, '$1')}`, //colorScheme.filter((y) => y.Flag.includes(+x.Flag))[0].description,
display:true,//Math.sign(+x.Flag) === 1,
font:{size:12}};}return annotation2;});}return annotations5;}// src/timeSeries/getPlugins/legend.js
function legend4(config){var legendOrder=colorScheme_default.sort(function(a,b){return a.order-b.order;}).map(function(color3){return color3.description;});legendOrder.unshift("Confidence Interval");legendOrder.unshift("".concat(config.aggregateLabel," Average"));legendOrder.unshift("".concat(config.GroupLevel," Distribution"));if(config.GroupLevel==="Study")return{display:true,labels:{boxHeight:7,filter:function filter(legendItem,chartData){return legendItem.text!=="";},generateLabels:function generateLabels(chart){return chart.data.datasets.map(function(dataset,i){return{datasetIndex:i,fillStyle:dataset.backgroundColor,lineWidth:dataset.label!=="Study Average"?1:3,lineDash:dataset.borderDash,pointStyle:dataset.pointStyle,strokeStyle:dataset.borderColor,text:dataset.label};});},//pointStyleWidth: 3,
sort:function sort(a,b,chartData){var order=legendOrder.indexOf(a.text)-legendOrder.indexOf(b.text);return /^Site (?!Distribution)/i.test(a.text)?1:/^Site (?!Distribution)/i.test(b.text)?-1:order;},usePointStyle:true},onClick:function onClick(){return null;},position:"top"};else return{display:true,labels:{boxHeight:7,lineWidth:10,borderWidth:10,filter:function filter(legendItem,chartData){return legendItem.text!=="";},//pointStyleWidth: 3,
sort:function sort(a,b,chartData){var order=legendOrder.indexOf(a.text)-legendOrder.indexOf(b.text);return /^Site (?!Distribution)/i.test(a.text)&&/^Site (?!Average)/i.test(a.text)?1:/^Site (?!Distribution)/i.test(b.text)&&/^Site (?!Average)/i.test(b.text)?-1:order;},usePointStyle:true},onClick:function onClick(){return null;},position:"top"};}// src/timeSeries/getPlugins/title.js
function title3(config){return{display:config.displayTitle,text:"".concat(config.Metric," by ").concat(config.GroupLevel)};}// src/util/formatResultTooltipContent.js
function formatResultTooltipContent(data,config){var datum2=data.dataset.data[data.dataIndex];var content;if(["bar","line","scatter"].includes(data.dataset.type)&&config.dataType!=="discrete"){content=config.GroupLevel==="Study"?["".concat(config.yLabel,": ").concat(falsy_default.includes(datum2.Metric)?"\u2014":format(".3f")(datum2.Metric)),"Confidence Interval: (".concat(format(".3f")(datum2.lowerCI),", ").concat(format(".3f")(datum2.upperCI),")"),"".concat(config.Numerator,": ").concat(format(",")(datum2.Numerator)),"".concat(config.Denominator,": ").concat(format(",")(datum2.Denominator))]:formatMetricTooltipLabel(datum2,config);}else if(["boxplot","violin"].includes(data.dataset.type)){var stats=["mean","min","q1","median","q3","max"].map(function(stat){return"".concat(stat.charAt(0).toUpperCase()).concat(stat.slice(1),": ").concat(format(".1f")(data.parsed[stat]));});content=_toConsumableArray(stats);}else if(config.dataType==="discrete"){content=data.dataset.purpose==="highlight"?["".concat(datum2.n_flagged," Red ").concat(config.discreteUnit).concat(+datum2.n_flagged===1?"":"s"),"".concat(datum2.n_at_risk," Amber ").concat(config.discreteUnit).concat(+datum2.n_at_risk===1?"":"s")]:data.dataset.purpose==="aggregate"&&config.discreteUnit==="Metric"?["".concat(format(".1f")(datum2.y)," Average ").concat(config.yLabel)].concat(_toConsumableArray(datum2.counts.map(function(d){return"".concat(d[config.y]," ").concat(config.yLabel,": ").concat(d.n,"/").concat(d.N," (").concat(d.pct,"%) ").concat(config.GroupLevel,"s");}))):data.dataset.purpose==="aggregate"&&config.discreteUnit==="Site"?"".concat(format(".1f")(datum2.y)," ").concat(config.yLabel):null;}return content;}// src/timeSeries/getPlugins/tooltip.js
function tooltip4(config){var tooltipAesthetics=getTooltipAesthetics();return _objectSpread({callbacks:{label:function label(d){var content=[].concat(_toConsumableArray(formatResultTooltipContent(d,config)),_toConsumableArray(formatGroupTooltipLabel(d.raw.group,config)));return d.raw.duplicate?"":content;},labelPointStyle:function labelPointStyle(data){return{pointStyle:["line","scatter"].includes(data.dataset.type)?"circle":"rect"};},title:function title(data){if(data.length){if(data[0].dataset.purpose==="distribution"){return"".concat(config.GroupLevel," Distribution on ").concat(data[0].label);}else if(data[0].dataset.purpose==="aggregate"){return"".concat(config.GroupLevel," Summary on ").concat(data[0].label);}else{var dataSorted=data;try{dataSorted=sortByGroupID(data,config);}catch(err){console.log(err);console.log(data);}var titles=dataSorted.map(function(d,i){var title5;if(data.length===1){title5=formatMetricTooltipTitle(d.raw,config);}else{title5=i===0?"".concat(config.GroupLevel,"s ").concat(d.dataset.data[d.dataIndex].GroupID):d.dataset.data[d.dataIndex].GroupID;}return title5;});var title4=titles.length<=4?"".concat(titles.join(", ")," on ").concat(data[0].label):"".concat(titles.slice(0,3).join(", ")," and [ ").concat(titles.length-3," ] more on ").concat(data[0].label);return title4;}}}},displayColors:true,//config.dataType !== 'discrete',
filter:function filter(data){var datum2=data.dataset.data[data.dataIndex];var isAnnotation=data.dataset.purpose==="annotation";var isObject2=_typeof(datum2)==="object";var isSelected=config.selectedGroupIDs.includes(datum2.GroupID);var isScatter=data.dataset.type==="scatter";return!isAnnotation&&isObject2&&!(isSelected&&isScatter);}},tooltipAesthetics);}// src/timeSeries/getPlugins.js
function getPlugins4(config){return{annotation:{annotations:annotations4(config)},legend:legend4(config),title:title3(config),tooltip:tooltip4(config)};}// src/timeSeries/getScales.js
function getScales4(config){var scales2=getDefaultScales();scales2.x.title.text=config.xLabel;scales2.x.type=config.xType;scales2.y.title.text=config.yLabel;scales2.y.type=config.yType;return scales2;}// src/timeSeries/updateData.js
function updateData4(chart,_results_,_config_){var _thresholds_=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var _intervals_=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var _groupMetadata_=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var config=configure7(_config_,_results_,_thresholds_);var datasets=structureData5(_results_,config,_thresholds_,_intervals_,_groupMetadata_);chart.data={datasets:datasets,labels:datasets.labels,config:config,_results_:_results_,_config_:_config_,_thresholds_:_thresholds_,_intervals_:_intervals_,_groupMetadata_:_groupMetadata_};chart.options.scales=getScales4(config);chart.options.plugins=getPlugins4(config);chart.update();}// src/timeSeries/updateSelectedGroupIDs.js
function updateSelectedGroupIDs(selectedGroupIDs){var _this46=this;if(!Array.isArray(selectedGroupIDs))selectedGroupIDs=[selectedGroupIDs];this.data.config.selectedGroupIDs=selectedGroupIDs.filter(function(GroupID){return _this46.data._results_.map(function(d){return d.GroupID;}).includes(GroupID);});this.data.config.selectedGroupDatum=updateSelectedGroupDatum(this.data._results_,this.data.config.selectedGroupIDs);this.canvas.riskSignalSelected.data=this.data.config.selectedGroupDatum;this.data.datasets=structureData5(this.data._results_,this.data.config,this.data._thresholds_,null,this.data._groupMetadata_);this.update();}// src/timeSeries.js
function timeSeries(_element_,_results_){var _config_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var _thresholds_=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var _intervals_=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var _groupMetadata_=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;checkInputs5(_results_,_config_,_thresholds_,_intervals_,_groupMetadata_);var config=configure7(_config_,_results_,_thresholds_,_intervals_);var canvas=addCanvas(_element_,config);var datasets=structureData5(_results_,config,_thresholds_,_intervals_,_groupMetadata_);var options={animation:false,maintainAspectRatio:config.maintainAspectRatio,onClick:onClick,onHover:onHover,plugins:getPlugins4(config),responsive:true,scales:getScales4(config,_results_)};var chart=new auto_default(canvas,{data:{datasets:datasets,// required by Chart.js
labels:datasets.labels,// required by Chart.js
config:config,// inputs
_results_:_results_,_config_:_config_,_thresholds_:_thresholds_,_intervals_:_intervals_,_groupMetadata_:_groupMetadata_},options:options,plugins:[displayWhiteBackground()]});canvas.chart=chart;chart.helpers={updateData:updateData4.bind(chart),updateSelectedGroupIDs:updateSelectedGroupIDs.bind(chart)};return chart;}// src/main.js
Chart.register(annotation,BoxAndWiskers,BoxPlotController,CategoryScale,LinearScale,Violin,ViolinController);var gsmViz={barChart:barChart,groupOverview:groupOverview,scatterPlot:scatterPlot,sparkline:sparkline,timeSeries:timeSeries};var main_default=gsmViz;return __toCommonJS(main_exports);}();/*! Bundled license information:

chart.js/dist/chunks/helpers.segment.mjs:
  (*!
   * Chart.js v3.9.1
   * https://www.chartjs.org
   * (c) 2022 Chart.js Contributors
   * Released under the MIT License
   *)

chart.js/dist/chunks/helpers.segment.mjs:
  (*!
   * @kurkle/color v0.2.1
   * https://github.com/kurkle/color#readme
   * (c) 2022 Jukka Kurkela
   * Released under the MIT License
   *)

chart.js/dist/chart.mjs:
  (*!
   * Chart.js v3.9.1
   * https://www.chartjs.org
   * (c) 2022 Chart.js Contributors
   * Released under the MIT License
   *)

chart.js/dist/helpers.mjs:
  (*!
   * Chart.js v3.9.1
   * https://www.chartjs.org
   * (c) 2022 Chart.js Contributors
   * Released under the MIT License
   *)

chartjs-plugin-annotation/dist/chartjs-plugin-annotation.esm.js:
  (*!
  * chartjs-plugin-annotation v2.0.1
  * https://www.chartjs.org/chartjs-plugin-annotation/index
   * (c) 2022 chartjs-plugin-annotation Contributors
   * Released under the MIT License
   *)

chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.esm.js:
  (*!
   * chartjs-plugin-datalabels v2.1.0
   * https://chartjs-plugin-datalabels.netlify.app
   * (c) 2017-2022 chartjs-plugin-datalabels contributors
   * Released under the MIT license
   *)
*/

