<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate a Summary data.frame for use in reports — MakeMetricTable • gsm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Generate a Summary data.frame for use in reports — MakeMetricTable"><meta name="description" content="
Generate a summary table for a report by joining the provided results data
frame with the site-level metadata from dfGroups, and filter and arrange the
data based on provided conditions."><meta property="og:description" content="
Generate a summary table for a report by joining the provided results data
frame with the site-level metadata from dfGroups, and filter and arrange the
data based on provided conditions."><meta name="robots" content="noindex"><link href="pkgdown/extra.css" rel="stylesheet"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsm</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Workflows</h6></li>
    <li><a class="dropdown-item" href="../articles/DataModel.html">Data Model</a></li>
    <li><a class="dropdown-item" href="../articles/Cookbook.html">Cookbook</a></li>
    <li><a class="dropdown-item" href="../articles/DataAnalysis.html">Step-by-Step Analysis Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/DataReporting.html">Step-by-Step Reporting Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/gsmExtensions.html">gsm Extensions</a></li>
    <li><a class="dropdown-item" href="../articles/KRIMethod.html">KRI Method</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Quality</h6></li>
    <li><a class="dropdown-item" href="../articles/QualificationWorkflow.html">Qualification Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/Qualification.html">Qualification Report for the {gsm} R Package</a></li>
    <li><a class="dropdown-item" href="../articles/ContributorGuidelines.html">Contributor Guidelines</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-sample-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Sample Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-sample-reports"><li><a class="dropdown-item" href="../report_kri_site.html">Site Report</a></li>
    <li><a class="dropdown-item" href="../report_kri_country.html">Country Report</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Gilead-BioStats/gsm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate a Summary data.frame for use in reports</h1>
      <small class="dont-index">Source: <a href="https://github.com/Gilead-BioStats/gsm/blob/dev/R/util-MakeMetricTable.R" class="external-link"><code>R/util-MakeMetricTable.R</code></a></small>
      <div class="d-none name"><code>MakeMetricTable.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>Generate a summary table for a report by joining the provided results data
frame with the site-level metadata from dfGroups, and filter and arrange the
data based on provided conditions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">MakeMetricTable</span><span class="op">(</span></span>
<span>  <span class="va">dfResults</span>,</span>
<span>  dfGroups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strGroupLevel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Site"</span>, <span class="st">"Country"</span>, <span class="st">"Study"</span><span class="op">)</span>,</span>
<span>  strGroupDetailsParams <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vFlags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dfresults">dfResults<a class="anchor" aria-label="anchor" href="#arg-dfresults"></a></dt>
<dd><p><code>data.frame</code> A stacked summary of analysis pipeline output. Created by passing a list of results returned by <code><a href="Summarize.html">Summarize()</a></code> to <code><a href="BindResults.html">BindResults()</a></code>. Expected columns: <code>GroupID</code>, <code>GroupLevel</code>, <code>Numerator</code>, <code>Denominator</code>, <code>Metric</code>, <code>Score</code>, <code>Flag</code>, <code>MetricID</code>, <code>StudyID</code>, <code>SnapshotDate</code>.
For this function, <code>dfResults</code> must be filtered to a single KRI (<code>MetricID</code>).</p></dd>


<dt id="arg-dfgroups">dfGroups<a class="anchor" aria-label="anchor" href="#arg-dfgroups"></a></dt>
<dd><p><code>data.frame</code> Group-level metadata dictionary. Created by passing CTMS site and study data to <code><a href="MakeLongMeta.html">MakeLongMeta()</a></code>. Expected columns: <code>GroupID</code>, <code>GroupLevel</code>, <code>Param</code>, <code>Value</code>.</p></dd>


<dt id="arg-strgrouplevel">strGroupLevel<a class="anchor" aria-label="anchor" href="#arg-strgrouplevel"></a></dt>
<dd><p>group level for the table</p></dd>


<dt id="arg-strgroupdetailsparams">strGroupDetailsParams<a class="anchor" aria-label="anchor" href="#arg-strgroupdetailsparams"></a></dt>
<dd><p>one or more parameters from dfGroups to be added as columns in the table</p></dd>


<dt id="arg-vflags">vFlags<a class="anchor" aria-label="anchor" href="#arg-vflags"></a></dt>
<dd><p><code>integer</code> List of flag values to include in output table. Default: <code>c(-2, -1, 1, 2)</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.frame containing the summary table</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># site-level report</span></span></span>
<span class="r-in"><span><span class="fu">MakeMetricTable</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dfResults <span class="op">=</span> <span class="va">reportingResults</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">MetricID</span> <span class="op">==</span> <span class="st">"kri0001"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="FilterByLatestSnapshotDate.html">FilterByLatestSnapshotDate</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  dfGroups <span class="op">=</span> <span class="va">reportingGroups</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         Group Enrolled Numerator Denominator Metric Score Flag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          0X139 (el-Khalifa)        2        67        1863   0.04 -2.96   -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0X186 (Gallegos-Neiberger)        2        98        2518   0.04 -2.69   -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               0X162 (Campa)        2       186        4433   0.04 -2.54   -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               0X113 (Wilde)        3       359        8172   0.04 -2.53   -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5               0X025 (Smith)        2       136        3210   0.04 -2.04   -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6             0X155 (al-Sani)        3       379        6887   0.06  2.37    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7             0X119 (Cousins)        3       260        4695   0.06  2.08    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8              0X091 (Ostrom)        2       195        4462   0.04 -1.95   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9               0X138 (Black)        2        58        1454   0.04 -1.85   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10             0X020 (Hamlin)        3       268        5985   0.04 -1.83   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11          0X092 (al-Badour)        3       213        4795   0.04 -1.77   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     0X121 (Rodriguez-Cruz)        2       111        2569   0.04 -1.61   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13              0X148 (Suess)        2       167        3742   0.04 -1.50   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14           0X173 (el-Yusuf)        2       200        4436   0.05 -1.47   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15           0X013 (el-Allam)        1        96        2215   0.04 -1.46   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16              0X164 (Jiron)        1        96        2215   0.04 -1.46   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17           0X143 (el-Salih)        3       216        4759   0.05 -1.42   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18           0X046 (al-Daoud)        5       432        9283   0.05 -1.42   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19          0X016 (el-Shaker)        3       245        5366   0.05 -1.41   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20            0X176 (Salazar)        3       285        6191   0.05 -1.36   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21            0X105 (Patalan)        2       170        3770   0.05 -1.36   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22              0X134 (Keese)        2       143        3165   0.05 -1.22   -1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by George Wu, Jeremy Wildfire, Matt Roumaya, Spencer Childress, Laura Maxwell, Jacob Anderson, Jon Harmon, Zelos Zhu, Nathan Kosiba, Douglas Sanders, Li Ge, Zhongkai Wang, Colleen McLaughlin, Chelsea Dickens, Maya Gans.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

