<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate a Summary data.frame for use in reports — MakeMetricTable • gsm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Generate a Summary data.frame for use in reports — MakeMetricTable"><meta name="description" content="
Generate a summary table for a report by joining the provided results data
frame with the site-level metadata from dfGroups, and filter and arrange the
data based on provided conditions."><meta property="og:description" content="
Generate a summary table for a report by joining the provided results data
frame with the site-level metadata from dfGroups, and filter and arrange the
data based on provided conditions."><meta name="robots" content="noindex"><link href="pkgdown/extra.css" rel="stylesheet"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsm</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.1.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Workflows</h6></li>
    <li><a class="dropdown-item" href="../articles/DataModel.html">Data Model</a></li>
    <li><a class="dropdown-item" href="../articles/Cookbook.html">Cookbook</a></li>
    <li><a class="dropdown-item" href="../articles/DataAnalysis.html">Step-by-Step Analysis Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/DataReporting.html">Step-by-Step Reporting Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/gsmExtensions.html">gsm Extensions</a></li>
    <li><a class="dropdown-item" href="../articles/KRIMethod.html">KRI Method</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Quality</h6></li>
    <li><a class="dropdown-item" href="../articles/QualificationWorkflow.html">Qualification Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/Qualification.html">Qualification Report for the {gsm} R Package</a></li>
    <li><a class="dropdown-item" href="../articles/ContributorGuidelines.html">Contributor Guidelines</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-sample-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Sample Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-sample-reports"><li><a class="dropdown-item" href="../report_kri_site.html">Site Report</a></li>
    <li><a class="dropdown-item" href="../report_kri_country.html">Country Report</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Gilead-BioStats/gsm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate a Summary data.frame for use in reports</h1>
      <small class="dont-index">Source: <a href="https://github.com/Gilead-BioStats/gsm/blob/dev/R/util-MakeMetricTable.R" class="external-link"><code>R/util-MakeMetricTable.R</code></a></small>
      <div class="d-none name"><code>MakeMetricTable.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>Generate a summary table for a report by joining the provided results data
frame with the site-level metadata from dfGroups, and filter and arrange the
data based on provided conditions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">MakeMetricTable</span><span class="op">(</span></span>
<span>  <span class="va">dfResults</span>,</span>
<span>  dfGroups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strGroupLevel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Site"</span>, <span class="st">"Country"</span>, <span class="st">"Study"</span><span class="op">)</span>,</span>
<span>  strGroupDetailsParams <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vFlags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dfresults">dfResults<a class="anchor" aria-label="anchor" href="#arg-dfresults"></a></dt>
<dd><p><code>data.frame</code> A stacked summary of analysis pipeline output. Created by passing a list of results returned by <code><a href="Summarize.html">Summarize()</a></code> to <code><a href="BindResults.html">BindResults()</a></code>. Expected columns: <code>GroupID</code>, <code>GroupLevel</code>, <code>Numerator</code>, <code>Denominator</code>, <code>Metric</code>, <code>Score</code>, <code>Flag</code>, <code>MetricID</code>, <code>StudyID</code>, <code>SnapshotDate</code>. For this function, <code>dfResults</code> must be filtered to a single KRI (<code>MetricID</code>).</p></dd>


<dt id="arg-dfgroups">dfGroups<a class="anchor" aria-label="anchor" href="#arg-dfgroups"></a></dt>
<dd><p><code>data.frame</code> Group-level metadata dictionary. Created by passing CTMS site and study data to <code><a href="MakeLongMeta.html">MakeLongMeta()</a></code>. Expected columns: <code>GroupID</code>, <code>GroupLevel</code>, <code>Param</code>, <code>Value</code>.</p></dd>


<dt id="arg-strgrouplevel">strGroupLevel<a class="anchor" aria-label="anchor" href="#arg-strgrouplevel"></a></dt>
<dd><p>group level for the table</p></dd>


<dt id="arg-strgroupdetailsparams">strGroupDetailsParams<a class="anchor" aria-label="anchor" href="#arg-strgroupdetailsparams"></a></dt>
<dd><p>one or more parameters from dfGroups to be added
as columns in the table</p></dd>


<dt id="arg-vflags">vFlags<a class="anchor" aria-label="anchor" href="#arg-vflags"></a></dt>
<dd><p><code>integer</code> List of flag values to include in output table.
Default: <code>c(-2, -1, 1, 2)</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.frame containing the summary table</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># site-level report</span></span></span>
<span class="r-in"><span><span class="fu">MakeMetricTable</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dfResults <span class="op">=</span> <span class="va">reportingResults</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">MetricID</span> <span class="op">==</span> <span class="st">"Analysis_kri0001"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="FilterByLatestSnapshotDate.html">FilterByLatestSnapshotDate</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  dfGroups <span class="op">=</span> <span class="va">reportingGroups</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           StudyID GroupID         MetricID                  Group SnapshotDate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  AA-AA-000-0000   0X036 Analysis_kri0001       0X036 (Gonzales)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  AA-AA-000-0000   0X052 Analysis_kri0001         0X052 (Agenar)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  AA-AA-000-0000   0X045 Analysis_kri0001         0X045 (Horton)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  AA-AA-000-0000   X187X Analysis_kri0001       X187X (al-Hasen)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  AA-AA-000-0000   0X027 Analysis_kri0001          0X027 (Owens)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  AA-AA-000-0000   0X024 Analysis_kri0001         0X024 (Rinard)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  AA-AA-000-0000   0X004 Analysis_kri0001          0X004 (Touch)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  AA-AA-000-0000   0X096 Analysis_kri0001        0X096 (el-Agha)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  AA-AA-000-0000   0X057 Analysis_kri0001         0X057 (Aragon)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 AA-AA-000-0000   0X066 Analysis_kri0001          0X066 (Lipps)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 AA-AA-000-0000   0X115 Analysis_kri0001           0X115 (John)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 AA-AA-000-0000   0X165 Analysis_kri0001          0X165 (Pinar)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 AA-AA-000-0000   0X034 Analysis_kri0001         0X034 (Yeadon)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 AA-AA-000-0000   0X179 Analysis_kri0001          0X179 (Terry)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 AA-AA-000-0000   0X090 Analysis_kri0001       0X090 (el-Attar)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 AA-AA-000-0000   0X166 Analysis_kri0001         0X166 (Garcia)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 AA-AA-000-0000   0X123 Analysis_kri0001       0X123 (Martinez)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 AA-AA-000-0000   0X143 Analysis_kri0001       0X143 (el-Salih)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 AA-AA-000-0000   0X170 Analysis_kri0001         0X170 (Herlin)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 AA-AA-000-0000   0X135 Analysis_kri0001          0X135 (Hager)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 AA-AA-000-0000   0X029 Analysis_kri0001         0X029 (Truong)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 AA-AA-000-0000   0X013 Analysis_kri0001       0X013 (el-Allam)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 AA-AA-000-0000   0X177 Analysis_kri0001          0X177 (Crowe)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 AA-AA-000-0000   0X042 Analysis_kri0001     0X042 (el-Massoud)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 AA-AA-000-0000   0X134 Analysis_kri0001          0X134 (Keese)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 AA-AA-000-0000   0X095 Analysis_kri0001       0X095 (Gonzales)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 AA-AA-000-0000   0X159 Analysis_kri0001         0X159 (Flores)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 AA-AA-000-0000   0X110 Analysis_kri0001       0X110 (Cleckley)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 AA-AA-000-0000   0X030 Analysis_kri0001     0X030 (Hutchinson)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 AA-AA-000-0000   0X010 Analysis_kri0001        0X010 (al-Radi)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 AA-AA-000-0000   0X103 Analysis_kri0001        0X103 (al-Mona)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 AA-AA-000-0000   0X121 Analysis_kri0001 0X121 (Rodriguez-Cruz)   2012-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Enrolled Numerator Denominator Metric Score Flag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         2       327        6619   0.05 -2.25   -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         3       378        7502   0.05 -2.04   -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         4       383        6013   0.06  2.49    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         4       521        8423   0.06  2.24    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         1       113        1652   0.07  2.11    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         4       491        8002   0.06  2.00    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         3       360        7137   0.05 -1.97   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         4       274        5510   0.05 -1.95   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         1        33         823   0.04 -1.91   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        2       187        3792   0.05 -1.73   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        3       266        5249   0.05 -1.62   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        1        73        1569   0.05 -1.57   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        2       222        4392   0.05 -1.52   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        3       339        6552   0.05 -1.45   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        4       302        5850   0.05 -1.40   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16        5       484        9192   0.05 -1.35   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17        1        66        1391   0.05 -1.34   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18        1        66        1391   0.05 -1.34   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19        1        66        1391   0.05 -1.34   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20        2       193        3793   0.05 -1.32   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21        3       202        3960   0.05 -1.32   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22        2       153        3027   0.05 -1.26   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23        3       136        2694   0.05 -1.20   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24        3       265        5092   0.05 -1.19   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25        1       111        2219   0.05 -1.18   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26        3       274        5257   0.05 -1.18   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27        2       193        3743   0.05 -1.14   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28        2       188        3628   0.05 -1.06   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29        2       111        2191   0.05 -1.05   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30        1        52        1070   0.05 -1.01   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31        3       226        4317   0.05 -1.01   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32        1        73        1467   0.05 -1.00   -1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by George Wu, Jeremy Wildfire, Matt Roumaya, Spencer Childress, Laura Maxwell, Jacob Anderson, Jon Harmon, Zelos Zhu, Nathan Kosiba, Douglas Sanders, Li Ge, Zhongkai Wang, Colleen McLaughlin, Chelsea Dickens, Maya Gans.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

