<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Make data frame with flagged values — Flag • gsm</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Make data frame with flagged values — Flag"><meta property="og:description" content="Adds columns flagging sites that represent possible statistical outliers. Rows with PValue less
than 0.05 are flagged by default."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gsm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/ContributorGuidelines.html">Contributor Guidelines</a>
    </li>
    <li>
      <a href="../articles/Cookbook.html">Cookbook</a>
    </li>
    <li>
      <a href="../articles/DataPipeline.html">Data Pipeline</a>
    </li>
    <li>
      <a href="../articles/Qualification.html">Qualification of GSM</a>
    </li>
    <li>
      <a href="../articles/QualificationWorkflow.html">Qualification Workflow</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Gilead-BioStats/gsm/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Make data frame with flagged values</h1>
    <small class="dont-index">Source: <a href="https://github.com/Gilead-BioStats/gsm/blob/HEAD/R/Flag.R" class="external-link"><code>R/Flag.R</code></a></small>
    <div class="hidden name"><code>Flag.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Adds columns flagging sites that represent possible statistical outliers. Rows with PValue less
than 0.05 are flagged by default.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">Flag</span><span class="op">(</span>
  <span class="va">dfAnalyzed</span>,
  strColumn <span class="op">=</span> <span class="st">"PValue"</span>,
  vThreshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="cn">NA</span><span class="op">)</span>,
  strValueColumn <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dfAnalyzed</dt>
<dd><p>data.frame where flags should be added.</p></dd>
<dt>strColumn</dt>
<dd><p>Name of the column to use for thresholding.</p></dd>
<dt>vThreshold</dt>
<dd><p>Vector of 2 numeric values representing lower and upper threshold values. All
values in strColumn are compared to vThreshold using strict comparisons. Values less than the lower threshold or greater than the upper threshold are flagged as -1 and 1 respectively. Values equal to the threshold values are set to 0 (i.e. not flagged). If NA is provided for either threshold value it is ignored, and no values are flagged based on the threshold. NA and NaN values in strColumn are given NA flag values.</p></dd>
<dt>strValueColumn</dt>
<dd><p>Optional, Name of the Column to use for sign of Flag. If value for that row
is higher than median of strValueColumn then Flag = 1, if lower then Flag = -1.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>input data frame with the columns added for "ThresholdLow","ThresholdHigh","ThresholdCol"
and "Flag"</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function provides a generalized framework for flagging sites as part of the GSM data
pipeline (TODO add link to data vignette).</p>
    </div>
    <div id="data-specification">
    <h2>Data Specification</h2>
    

<p><code>Flag</code> is designed to support the input data (<code> dfAnalyzed</code>) input data from many different
<code>Analyze</code> functions. At a minimum, the input data must have a <code>SiteID</code> column and a column
of numeric values (identified by the <code>strColumn</code> parameter) that will be compared to the
specified thresholds (<code>vThreshold</code>) to calculate a new <code>Flag</code> column. Optionally, a second column
of numeric values (identified by <code>strValueColumn</code>) can be specified to set the directionality of
the <code>Flag</code>.</p>
<p>In short, the following columns are considered:</p><ul><li><p><code>SiteID</code> - Site ID (required)</p></li>
<li><p><code>strColumn</code> - A column to use for Thresholding (required)</p></li>
<li><p>'strValueColumn' - A column to be used for the sign of the flag (optional)</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">dfInput</span> <span class="op">&lt;-</span> <span class="fu"><a href="AE_Map_Adam.html">AE_Map_Adam</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="va">dfTransformed</span> <span class="op">&lt;-</span> <span class="fu"><a href="Transform_EventCount.html">Transform_EventCount</a></span><span class="op">(</span><span class="va">dfInput</span>, strCountCol <span class="op">=</span> <span class="st">"Count"</span>, strExposureCol <span class="op">=</span> <span class="st">"Exposure"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">dfAnalyzed</span> <span class="op">&lt;-</span> <span class="fu"><a href="Analyze_Wilcoxon.html">Analyze_Wilcoxon</a></span><span class="op">(</span><span class="va">dfTransformed</span>, <span class="st">"Rate"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">dfFlagged</span> <span class="op">&lt;-</span> <span class="fu">Flag</span><span class="op">(</span><span class="va">dfAnalyzed</span><span class="op">)</span> <span class="co"># PValue &lt; 0.05 flagged</span></span>
<span class="r-in"><span class="va">dfFlagged10</span> <span class="op">&lt;-</span> <span class="fu">Flag</span><span class="op">(</span><span class="va">dfAnalyzed</span>, vThreshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.10</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="co"># PValue &lt;0.10 flagged</span></span>
<span class="r-in"><span class="co"># Flag direction set based on 'Statistic' column</span></span>
<span class="r-in"><span class="va">dfFlagged</span> <span class="op">&lt;-</span> <span class="fu">Flag</span><span class="op">(</span><span class="va">dfAnalyzed</span>, strColumn <span class="op">=</span> <span class="st">"PValue"</span>, strValueColumn <span class="op">=</span> <span class="st">"Estimate"</span><span class="op">)</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by George Wu, Jeremy Wildfire, Matt Roumaya, Nathan Kosiba, Douglas Sanders, Spencer Childress.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

